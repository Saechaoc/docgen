{
  "intro": [
    {
      "id": "AGENTS.md#0",
      "vector": {
        "repository": 0.06757373783994859,
        "guidelines": 0.1013606067599229,
        "project": 0.033786868919974296,
        "structure": 0.033786868919974296,
        "module": 0.06757373783994859,
        "organization": 0.033786868919974296,
        "spec": 0.06757373783994859,
        "md": 0.033786868919974296,
        "captures": 0.033786868919974296,
        "the": 0.27029495135979437,
        "end": 0.06757373783994859,
        "to": 0.1013606067599229,
        "architecture": 0.033786868919974296,
        "component": 0.06757373783994859,
        "contracts": 0.033786868919974296,
        "and": 0.43922929595966587,
        "must": 0.033786868919974296,
        "be": 0.033786868919974296,
        "updated": 0.033786868919974296,
        "whenever": 0.033786868919974296,
        "responsibilities": 0.033786868919974296,
        "shift": 0.033786868919974296,
        "place": 0.033786868919974296,
        "python": 0.2027212135198458,
        "source": 0.033786868919974296,
        "in": 0.16893434459987147,
        "a": 0.23650808243982008,
        "docgen": 0.16893434459987147,
        "package": 0.033786868919974296,
        "create": 0.033786868919974296,
        "it": 0.033786868919974296,
        "when": 0.06757373783994859,
        "implementation": 0.033786868919974296,
        "starts": 0.033786868919974296,
        "with": 0.16893434459987147,
        "clear": 0.033786868919974296,
        "submodules": 0.033786868919974296,
        "for": 0.1013606067599229,
        "orchestrator": 0.1013606067599229,
        "analyzers": 0.033786868919974296,
        "runners": 0.033786868919974296,
        "stores": 0.033786868919974296,
        "avoid": 0.06757373783994859,
        "leaving": 0.033786868919974296,
        "logic": 0.033786868919974296,
        "repo": 0.06757373783994859,
        "root": 0.033786868919974296,
        "mirror": 0.033786868919974296,
        "runtime": 0.033786868919974296,
        "modules": 0.06757373783994859,
        "under": 0.1013606067599229,
        "tests": 0.2027212135198458,
        "using": 0.033786868919974296,
        "test_": 0.033786868919974296,
        "py": 0.1013606067599229,
        "co": 0.033786868919974296,
        "locate": 0.033786868919974296,
        "fixtures": 0.06757373783994859,
        "_fixtures": 0.033786868919974296,
        "so": 0.13514747567989718,
        "imports": 0.06757373783994859,
        "stay": 0.06757373783994859,
        "clean": 0.033786868919974296,
        "reusable": 0.033786868919974296,
        "keep": 0.13514747567989718,
        "throwaway": 0.033786868919974296,
        "experiments": 0.033786868919974296,
        "inside": 0.033786868919974296,
        "an": 0.06757373783994859,
        "ignored": 0.033786868919974296,
        "sandbox": 0.033786868919974296,
        "directory": 0.033786868919974296,
        "scans": 0.033786868919974296,
        "remain": 0.033786868919974296,
        "focused": 0.033786868919974296,
        "on": 0.06757373783994859,
        "production": 0.033786868919974296,
        "code": 0.033786868919974296,
        "paths": 0.033786868919974296,
        "build": 0.033786868919974296,
        "test": 0.06757373783994859,
        "development": 0.033786868919974296,
        "commands": 0.033786868919974296,
        "m": 0.16893434459987147,
        "venv": 0.1013606067599229,
        "followed": 0.033786868919974296,
        "by": 0.033786868919974296,
        "scripts": 0.06757373783994859,
        "activate": 0.033786868919974296,
        "aligns": 0.033786868919974296,
        "local": 0.033786868919974296,
        "shells": 0.033786868919974296,
        "pycharm": 0.033786868919974296,
        "interpreter": 0.033786868919974296,
        "settings": 0.033786868919974296,
        "pip": 0.033786868919974296,
        "install": 0.033786868919974296,
        "e": 0.033786868919974296,
        "dev": 0.033786868919974296,
        "after": 0.06757373783994859,
        "pyproject": 0.033786868919974296,
        "toml": 0.033786868919974296,
        "is": 0.1013606067599229,
        "committed": 0.033786868919974296,
        "exposes": 0.033786868919974296,
        "cli": 0.033786868919974296,
        "plugins": 0.033786868919974296,
        "editable": 0.033786868919974296,
        "form": 0.033786868919974296,
        "without": 0.033786868919974296,
        "repeated": 0.033786868919974296,
        "reinstalls": 0.033786868919974296,
        "pytest": 0.06757373783994859,
        "runs": 0.033786868919974296,
        "full": 0.033786868919974296,
        "suite": 0.033786868919974296,
        "append": 0.033786868919974296,
        "k": 0.033786868919974296,
        "pattern": 0.033786868919974296,
        "iterate": 0.033786868919974296,
        "single": 0.06757373783994859,
        "analyzer": 0.06757373783994859,
        "or": 0.06757373783994859,
        "pipeline": 0.1013606067599229,
        "stage": 0.033786868919974296,
        "mypy": 0.033786868919974296,
        "ruff": 0.033786868919974296,
        "check": 0.033786868919974296,
        "catch": 0.033786868919974296,
        "type": 0.033786868919974296,
        "drift": 0.033786868919974296,
        "lint": 0.033786868919974296,
        "violations": 0.033786868919974296,
        "before": 0.06757373783994859,
        "readme": 0.06757373783994859,
        "generation": 0.06757373783994859,
        "attempted": 0.033786868919974296,
        "coding": 0.033786868919974296,
        "style": 0.033786868919974296,
        "naming": 0.033786868919974296,
        "conventions": 0.033786868919974296,
        "follow": 0.06757373783994859,
        "pep": 0.033786868919974296,
        "8": 0.033786868919974296,
        "4": 0.033786868919974296,
        "space": 0.033786868919974296,
        "indents": 0.033786868919974296,
        "explicit": 0.033786868919974296,
        "example": 0.033786868919974296,
        "from": 0.033786868919974296,
        "import": 0.033786868919974296,
        "static": 0.033786868919974296,
        "tooling": 0.033786868919974296,
        "can": 0.033786868919974296,
        "trace": 0.033786868919974296,
        "dependencies": 0.033786868919974296,
        "name": 0.033786868919974296,
        "their": 0.033786868919974296,
        "roles": 0.033786868919974296,
        "prompt_builder": 0.033786868919974296,
        "functions": 0.033786868919974296,
        "snake_case": 0.033786868919974296,
        "descriptive": 0.06757373783994859,
        "nouns": 0.033786868919974296,
        "first": 0.033786868919974296,
        "build_prompt_section": 0.033786868919974296,
        "run": 0.033786868919974296,
        "black": 0.033786868919974296,
        "commits": 0.06757373783994859,
        "manual": 0.033786868919974296,
        "reformatting": 0.033786868919974296,
        "unless": 0.033786868919974296,
        "formatter": 0.033786868919974296,
        "cannot": 0.033786868919974296,
        "resolve": 0.033786868919974296,
        "construct": 0.033786868919974296,
        "testing": 0.06757373783994859,
        "default": 0.033786868919974296,
        "harness": 0.033786868919974296,
        "every": 0.033786868919974296,
        "needs": 0.033786868919974296,
        "unit": 0.033786868919974296,
        "coverage": 0.033786868919974296,
        "plus": 0.033786868919974296,
        "integration": 0.06757373783994859,
        "case": 0.033786868919974296,
        "that": 0.06757373783994859,
        "walks": 0.033786868919974296,
        "snapshot": 0.033786868919974296,
        "through": 0.033786868919974296,
        "use": 0.033786868919974296,
        "names": 0.033786868919974296,
        "such": 0.033786868919974296,
        "as": 0.033786868919974296,
        "test_prompt_builder_handles_missing_signals": 0.033786868919974296,
        "arrange": 0.033786868919974296,
        "act": 0.033786868919974296,
        "assert": 0.033786868919974296,
        "comments": 0.033786868919974296,
        "minimal": 0.033786868919974296,
        "but": 0.033786868919974296,
        "intentional": 0.033786868919974296,
        "store": 0.033786868919974296,
        "regression": 0.033786868919974296,
        "generated": 0.033786868919974296,
        "slices": 0.033786868919974296,
        "data": 0.033786868919974296,
        "update": 0.033786868919974296,
        "them": 0.033786868919974296,
        "helper": 0.033786868919974296,
        "diffs": 0.033786868919974296,
        "reviewable": 0.033786868919974296,
        "commit": 0.033786868919974296,
        "pull": 0.033786868919974296,
        "request": 0.033786868919974296,
        "conventional": 0.033786868919974296,
        "feat": 0.033786868919974296,
        "fix": 0.033786868919974296,
        "docs": 0.033786868919974296,
        "subject": 0.033786868919974296,
        "lines": 0.033786868919974296,
        "72": 0.033786868919974296,
        "characters": 0.033786868919974296,
        "explain": 0.033786868919974296,
        "broader": 0.033786868919974296,
        "scope": 0.033786868919974296,
        "body": 0.033786868919974296,
        "multiple": 0.033786868919974296,
        "subsystems": 0.033786868919974296,
        "change": 0.033786868919974296,
        "bundle": 0.033786868919974296,
        "related": 0.033786868919974296,
        "work": 0.033786868919974296,
        "into": 0.033786868919974296,
        "pr": 0.033786868919974296,
        "includes": 0.033786868919974296,
        "summary": 0.033786868919974296,
        "notes": 0.033786868919974296,
        "links": 0.033786868919974296
      },
      "text": "# Repository Guidelines ## Project Structure & Module Organization - `spec/spec.md` captures the end-to-end architecture, component contracts, and must be updated whenever responsibilities shift. - Place Python source in a `docgen/` package (create it when implementation starts) with clear submodules for orchestrator, analyzers, runners, and stores; avoid leaving logic in the repo root. - Mirror runtime modules under `tests/` using `test_<module>.py`; co-locate fixtures in `tests/_fixtures/` so imports stay clean and reusable. - Keep throwaway experiments inside an ignored `sandbox/` directory so repository scans remain focused on production code paths. ## Build, Test, and Development Commands - `python -m venv .venv` followed by `.\\\\.venv\\\\Scripts\\\\activate` aligns local shells with the PyCharm interpreter settings. - `python -m pip install -e .[dev]` (after a `pyproject.toml` is committed) exposes the CLI and plugins in editable form without repeated reinstalls. - `python -m pytest` runs the full suite; append `-k <pattern>` to iterate on a single analyzer or pipeline stage. - `python -m mypy docgen` and `python -m ruff check docgen tests` catch type drift and lint violations before README generation is attempted. ## Coding Style & Naming Conventions - Follow PEP 8 with 4-space indents and explicit imports (for example, `from docgen.orchestrator import Pipeline`) so static tooling can trace dependencies. - Name modules after their roles (`orchestrator.py`, `prompt_builder.py`) and keep functions snake_case with descriptive nouns first (`build_prompt_section`). - Run `black docgen tests` before commits; avoid manual reformatting unless the formatter cannot resolve a construct. ## Testing Guidelines - Pytest is the default harness; every analyzer or pipeline component needs unit coverage plus an integration case under `tests/integration/` that walks a repo snapshot through generation. - Use descriptive test names such as `test_prompt_builder_handles_missing_signals` and keep Arrange-Act-Assert comments minimal but intentional. - Store regression fixtures for generated README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "AGENTS.md#1",
      "vector": {
        "readme": 0.1270001270001905,
        "slices": 0.06350006350009525,
        "under": 0.06350006350009525,
        "tests": 0.06350006350009525,
        "data": 0.06350006350009525,
        "and": 0.4445004445006667,
        "update": 0.06350006350009525,
        "them": 0.06350006350009525,
        "with": 0.06350006350009525,
        "helper": 0.06350006350009525,
        "scripts": 0.06350006350009525,
        "so": 0.06350006350009525,
        "diffs": 0.06350006350009525,
        "stay": 0.06350006350009525,
        "reviewable": 0.06350006350009525,
        "commit": 0.1270001270001905,
        "pull": 0.06350006350009525,
        "request": 0.06350006350009525,
        "guidelines": 0.06350006350009525,
        "follow": 0.06350006350009525,
        "conventional": 0.06350006350009525,
        "commits": 0.06350006350009525,
        "feat": 0.06350006350009525,
        "fix": 0.06350006350009525,
        "docs": 0.1270001270001905,
        "keep": 0.1270001270001905,
        "subject": 0.06350006350009525,
        "lines": 0.06350006350009525,
        "72": 0.06350006350009525,
        "characters": 0.06350006350009525,
        "explain": 0.06350006350009525,
        "broader": 0.06350006350009525,
        "scope": 0.06350006350009525,
        "in": 0.254000254000381,
        "the": 0.31750031750047625,
        "body": 0.06350006350009525,
        "when": 0.1270001270001905,
        "multiple": 0.06350006350009525,
        "subsystems": 0.06350006350009525,
        "change": 0.06350006350009525,
        "bundle": 0.06350006350009525,
        "related": 0.06350006350009525,
        "work": 0.1270001270001905,
        "into": 0.06350006350009525,
        "a": 0.254000254000381,
        "single": 0.06350006350009525,
        "pr": 0.1270001270001905,
        "that": 0.06350006350009525,
        "includes": 0.06350006350009525,
        "summary": 0.06350006350009525,
        "testing": 0.06350006350009525,
        "notes": 0.1270001270001905,
        "links": 0.06350006350009525,
        "to": 0.06350006350009525,
        "relevant": 0.06350006350009525,
        "issues": 0.06350006350009525,
        "or": 0.06350006350009525,
        "spec": 0.06350006350009525,
        "sections": 0.06350006350009525,
        "attach": 0.06350006350009525,
        "before": 0.1270001270001905,
        "after": 0.06350006350009525,
        "excerpts": 0.06350006350009525,
        "altering": 0.06350006350009525,
        "generation": 0.06350006350009525,
        "output": 0.06350006350009525,
        "run": 0.06350006350009525,
        "lint": 0.06350006350009525,
        "type": 0.06350006350009525,
        "check": 0.06350006350009525,
        "test": 0.06350006350009525,
        "commands": 0.06350006350009525,
        "opening": 0.06350006350009525,
        "paste": 0.06350006350009525,
        "condensed": 0.06350006350009525,
        "results": 0.06350006350009525,
        "description": 0.06350006350009525,
        "for": 0.06350006350009525,
        "quick": 0.06350006350009525,
        "verification": 0.06350006350009525,
        "environment": 0.1270001270001905,
        "tooling": 0.06350006350009525,
        "reuse": 0.06350006350009525,
        "local": 0.1270001270001905,
        "venv": 0.06350006350009525,
        "seeded": 0.06350006350009525,
        "by": 0.1270001270001905,
        "pycharm": 0.06350006350009525,
        "do": 0.06350006350009525,
        "not": 0.06350006350009525,
        "artifacts": 0.06350006350009525,
        "store": 0.06350006350009525,
        "secrets": 0.06350006350009525,
        "env": 0.06350006350009525,
        "consumed": 0.06350006350009525,
        "llm": 0.06350006350009525,
        "runner": 0.06350006350009525,
        "large": 0.06350006350009525,
        "model": 0.06350006350009525,
        "weights": 0.06350006350009525,
        "outside": 0.06350006350009525,
        "repository": 0.06350006350009525,
        "document": 0.06350006350009525,
        "their": 0.06350006350009525,
        "locations": 0.06350006350009525,
        "models": 0.06350006350009525,
        "md": 0.06350006350009525,
        "once": 0.06350006350009525,
        "integration": 0.06350006350009525,
        "begins": 0.06350006350009525
      },
      "text": "README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to relevant issues or spec sections; attach before/after README excerpts when altering generation output. - Run lint, type-check, and test commands before opening a PR and paste condensed results in the description for quick verification. ## Environment & Tooling Notes - Reuse the local `.venv` seeded by PyCharm; do not commit environment artifacts and store secrets in a `.env` consumed by the local LLM runner. - Keep large model weights outside the repository and document their locations in `docs/models.md` once integration work begins.",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "docs/ci/docgen-update.yml#0",
      "vector": {
        "name": 0.2773500981126145,
        "docgen": 0.1849000654084097,
        "update": 0.2311250817605121,
        "on": 0.09245003270420485,
        "push": 0.046225016352102424,
        "branches": 0.09245003270420485,
        "main": 0.13867504905630726,
        "pull_request": 0.13867504905630726,
        "jobs": 0.046225016352102424,
        "readme": 0.1849000654084097,
        "runs": 0.046225016352102424,
        "self": 0.046225016352102424,
        "hosted": 0.046225016352102424,
        "steps": 0.09245003270420485,
        "uses": 0.13867504905630726,
        "actions": 0.2311250817605121,
        "checkout": 0.046225016352102424,
        "v4": 0.09245003270420485,
        "with": 0.13867504905630726,
        "fetch": 0.046225016352102424,
        "depth": 0.046225016352102424,
        "0": 0.046225016352102424,
        "setup": 0.046225016352102424,
        "python": 0.2311250817605121,
        "v5": 0.046225016352102424,
        "version": 0.046225016352102424,
        "3": 0.046225016352102424,
        "11": 0.046225016352102424,
        "cache": 0.09245003270420485,
        "path": 0.046225016352102424,
        "pip": 0.2773500981126145,
        "key": 0.046225016352102424,
        "runner": 0.09245003270420485,
        "os": 0.09245003270420485,
        "hashfiles": 0.046225016352102424,
        "pyproject": 0.046225016352102424,
        "toml": 0.046225016352102424,
        "restore": 0.046225016352102424,
        "keys": 0.046225016352102424,
        "install": 0.13867504905630726,
        "dependencies": 0.046225016352102424,
        "run": 0.2311250817605121,
        "m": 0.13867504905630726,
        "upgrade": 0.046225016352102424,
        "e": 0.046225016352102424,
        "dev": 0.046225016352102424,
        "determine": 0.046225016352102424,
        "diff": 0.1849000654084097,
        "base": 0.2773500981126145,
        "id": 0.046225016352102424,
        "if": 0.09245003270420485,
        "github": 0.2311250817605121,
        "event_name": 0.046225016352102424,
        "then": 0.09245003270420485,
        "echo": 0.09245003270420485,
        "event": 0.046225016352102424,
        "sha": 0.046225016352102424,
        "github_output": 0.09245003270420485,
        "else": 0.046225016352102424,
        "origin": 0.046225016352102424,
        "fi": 0.09245003270420485,
        "env": 0.046225016352102424,
        "docgen_llm_base_url": 0.046225016352102424,
        "http": 0.046225016352102424,
        "localhost": 0.046225016352102424,
        "12434": 0.046225016352102424,
        "engines": 0.046225016352102424,
        "v1": 0.046225016352102424,
        "cli": 0.046225016352102424,
        "outputs": 0.046225016352102424,
        "commit": 0.09245003270420485,
        "md": 0.09245003270420485,
        "optional": 0.046225016352102424,
        "git": 0.1849000654084097,
        "status": 0.046225016352102424,
        "short": 0.046225016352102424,
        "grep": 0.046225016352102424,
        "q": 0.046225016352102424,
        "config": 0.09245003270420485,
        "user": 0.09245003270420485,
        "email": 0.046225016352102424,
        "users": 0.046225016352102424,
        "noreply": 0.046225016352102424,
        "com": 0.046225016352102424,
        "am": 0.046225016352102424,
        "docs": 0.046225016352102424,
        "via": 0.046225016352102424
      },
      "text": "name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted steps: - uses: actions/checkout@v4 with: fetch-depth: 0 - uses: actions/setup-python@v5 with: python-version: '3.11' - uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install dependencies run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README.md (optional) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi",
      "metadata": {
        "path": "docs/ci/docgen-update.yml",
        "tags": [
          "docs"
        ],
        "hash": "48bec2bc404707486fcb1661def194395cc581bf55cb2f610704d495663e6a14"
      }
    },
    {
      "id": "docs/ci/github-actions.md#0",
      "vector": {
        "github": 0.2528558164964056,
        "actions": 0.2212488394343549,
        "integration": 0.0316069770620507,
        "the": 0.18964186237230418,
        "workflow": 0.0632139541241014,
        "below": 0.0316069770620507,
        "runs": 0.0632139541241014,
        "docgen": 0.2212488394343549,
        "update": 0.18964186237230418,
        "on": 0.1264279082482028,
        "pushes": 0.0316069770620507,
        "and": 0.0316069770620507,
        "pull": 0.0316069770620507,
        "requests": 0.0316069770620507,
        "it": 0.0316069770620507,
        "assumes": 0.0316069770620507,
        "a": 0.0632139541241014,
        "self": 0.0632139541241014,
        "hosted": 0.1264279082482028,
        "runner": 0.15803488531025348,
        "or": 0.09482093118615209,
        "with": 0.18964186237230418,
        "network": 0.0632139541241014,
        "access": 0.0632139541241014,
        "to": 0.1264279082482028,
        "your": 0.0632139541241014,
        "local": 0.09482093118615209,
        "model": 0.0316069770620507,
        "runtime": 0.0316069770620507,
        "job": 0.0316069770620507,
        "skips": 0.0316069770620507,
        "early": 0.0316069770620507,
        "when": 0.0316069770620507,
        "no": 0.0316069770620507,
        "files": 0.0316069770620507,
        "match": 0.0316069770620507,
        "yml": 0.0316069770620507,
        "s": 0.0316069770620507,
        "ci": 0.0316069770620507,
        "watched_globs": 0.0316069770620507,
        "entries": 0.0316069770620507,
        "so": 0.0316069770620507,
        "that": 0.0316069770620507,
        "purely": 0.0316069770620507,
        "documentation": 0.0316069770620507,
        "only": 0.0316069770620507,
        "changes": 0.0316069770620507,
        "do": 0.0316069770620507,
        "not": 0.0316069770620507,
        "trigger": 0.0316069770620507,
        "generator": 0.0316069770620507,
        "yaml": 0.0316069770620507,
        "name": 0.3476767476825577,
        "push": 0.0316069770620507,
        "branches": 0.0632139541241014,
        "main": 0.09482093118615209,
        "pull_request": 0.09482093118615209,
        "jobs": 0.0316069770620507,
        "readme": 0.2212488394343549,
        "requires": 0.0316069770620507,
        "llm": 0.0316069770620507,
        "steps": 0.0632139541241014,
        "checkout": 0.0632139541241014,
        "repository": 0.0316069770620507,
        "uses": 0.1264279082482028,
        "v4": 0.09482093118615209,
        "fetch": 0.0316069770620507,
        "depth": 0.0316069770620507,
        "0": 0.0316069770620507,
        "set": 0.0316069770620507,
        "up": 0.0316069770620507,
        "python": 0.18964186237230418,
        "setup": 0.0316069770620507,
        "v5": 0.0316069770620507,
        "version": 0.0316069770620507,
        "3": 0.0316069770620507,
        "11": 0.0316069770620507,
        "cache": 0.09482093118615209,
        "pip": 0.2212488394343549,
        "dependencies": 0.0316069770620507,
        "path": 0.0632139541241014,
        "key": 0.0316069770620507,
        "os": 0.0632139541241014,
        "hashfiles": 0.0316069770620507,
        "pyproject": 0.0316069770620507,
        "toml": 0.0316069770620507,
        "restore": 0.0316069770620507,
        "keys": 0.0316069770620507,
        "install": 0.09482093118615209,
        "in": 0.0316069770620507,
        "editable": 0.0316069770620507,
        "mode": 0.0316069770620507,
        "run": 0.15803488531025348,
        "m": 0.09482093118615209,
        "upgrade": 0.0316069770620507,
        "e": 0.0316069770620507,
        "dev": 0.0316069770620507,
        "determine": 0.0316069770620507,
        "diff": 0.1264279082482028,
        "base": 0.18964186237230418,
        "id": 0.0316069770620507,
        "if": 0.1264279082482028,
        "event_name": 0.0316069770620507,
        "then": 0.0632139541241014,
        "echo": 0.0632139541241014,
        "event": 0.0316069770620507,
        "sha": 0.0316069770620507,
        "github_output": 0.0632139541241014,
        "else": 0.0316069770620507,
        "origin": 0.0316069770620507,
        "fi": 0.0632139541241014,
        "env": 0.0316069770620507,
        "docgen_llm_base_url": 0.0632139541241014,
        "http": 0.0316069770620507,
        "localhost": 0.0316069770620507,
        "12434": 0.0316069770620507,
        "engines": 0.0316069770620507,
        "v1": 0.0316069770620507,
        "cli": 0.0632139541241014,
        "outputs": 0.0316069770620507,
        "commit": 0.0632139541241014,
        "updates": 0.0316069770620507,
        "any": 0.0316069770620507,
        "git": 0.1264279082482028,
        "status": 0.0316069770620507,
        "short": 0.0316069770620507,
        "grep": 0.0316069770620507,
        "q": 0.0316069770620507,
        "md": 0.0632139541241014,
        "config": 0.0632139541241014,
        "user": 0.0632139541241014,
        "email": 0.0316069770620507,
        "users": 0.0316069770620507,
        "noreply": 0.0316069770620507,
        "com": 0.0316069770620507,
        "am": 0.0316069770620507,
        "docs": 0.0316069770620507,
        "via": 0.0316069770620507,
        "upload": 0.0632139541241014,
        "artifact": 0.0632139541241014,
        "success": 0.0316069770620507,
        "generated": 0.0316069770620507,
        "note": 0.0316069770620507,
        "relies": 0.0316069770620507,
        "pointing": 0.0316069770620507,
        "private": 0.0632139541241014,
        "inference": 0.0316069770620507,
        "endpoint": 0.0316069770620507,
        "for": 0.0316069770620507,
        "runners": 0.0316069770620507,
        "you": 0.0316069770620507,
        "will": 0.0316069770620507,
        "need": 0.0316069770620507,
        "expose": 0.0316069770620507,
        "within": 0.0316069770620507,
        "switch": 0.0316069770620507,
        "ollama": 0.0316069770620507,
        "appropriate": 0.0316069770620507,
        "caching": 0.0316069770620507
      },
      "text": "# GitHub Actions Integration The workflow below runs `docgen update` on pushes and pull requests. It assumes a self-hosted runner (or GitHub-hosted runner with network access to your local model runtime). The job skips early when no files match `.docgen.yml`'s `ci.watched_globs` entries so that purely documentation-only changes do not trigger the generator. ```yaml name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted # requires local LLM access steps: - name: Checkout repository uses: actions/checkout@v4 with: fetch-depth: 0 - name: Set up Python uses: actions/setup-python@v5 with: python-version: '3.11' - name: Cache pip dependencies uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install docgen in editable mode run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: | python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README updates (if any) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi - name: Upload README artifact if: success() uses: actions/upload-artifact@v4 with: name: generated-readme path: README.md ``` > **Note:** the workflow relies on `DOCGEN_LLM_BASE_URL` pointing to a local or > private inference endpoint. For GitHub-hosted runners you will need to expose > the runner within your private network or switch to the `ollama` CLI with > appropriate caching. ```",
      "metadata": {
        "path": "docs/ci/github-actions.md",
        "tags": [
          "docs"
        ],
        "hash": "178c6f25ecf7325348a9158158c6e6f36c29d520a922a6f0c2c739f4efe1b0d8"
      }
    },
    {
      "id": "spec/feature_checklist.md#0",
      "vector": {
        "intelligent": 0.028513297425610054,
        "readme": 0.08553989227683016,
        "generator": 0.028513297425610054,
        "feature": 0.028513297425610054,
        "checklist": 0.028513297425610054,
        "status": 0.028513297425610054,
        "legend": 0.028513297425610054,
        "not": 0.028513297425610054,
        "started": 0.028513297425610054,
        "in": 0.028513297425610054,
        "progress": 0.028513297425610054,
        "done": 0.028513297425610054,
        "scope": 0.028513297425610054,
        "tags": 0.028513297425610054,
        "mvp": 0.4847260562353709,
        "required": 0.028513297425610054,
        "for": 0.11405318970244022,
        "proof": 0.028513297425610054,
        "of": 0.08553989227683016,
        "concept": 0.028513297425610054,
        "next": 0.2851329742561005,
        "nice": 0.028513297425610054,
        "to": 0.08553989227683016,
        "have": 0.028513297425610054,
        "soon": 0.028513297425610054,
        "stretch": 0.11405318970244022,
        "later": 0.028513297425610054,
        "1": 0.05702659485122011,
        "core": 0.028513297425610054,
        "workflows": 0.028513297425610054,
        "x": 0.570265948512201,
        "docgen": 0.11405318970244022,
        "init": 0.028513297425610054,
        "initialize": 0.028513297425610054,
        "repos": 0.028513297425610054,
        "without": 0.05702659485122011,
        "docs": 0.11405318970244022,
        "update": 0.028513297425610054,
        "detect": 0.028513297425610054,
        "changes": 0.028513297425610054,
        "on": 0.028513297425610054,
        "commit": 0.028513297425610054,
        "pr": 0.028513297425610054,
        "and": 0.028513297425610054,
        "patch": 0.028513297425610054,
        "affected": 0.028513297425610054,
        "sections": 0.05702659485122011,
        "regenerate": 0.028513297425610054,
        "manual": 0.028513297425610054,
        "full": 0.028513297425610054,
        "partial": 0.028513297425610054,
        "regeneration": 0.028513297425610054,
        "dry": 0.05702659485122011,
        "run": 0.05702659485122011,
        "mode": 0.05702659485122011,
        "preview": 0.028513297425610054,
        "diffs": 0.028513297425610054,
        "writing": 0.028513297425610054,
        "service": 0.028513297425610054,
        "fastapi": 0.05702659485122011,
        "endpoints": 0.028513297425610054,
        "ci": 0.05702659485122011,
        "bots": 0.028513297425610054,
        "2": 0.028513297425610054,
        "repository": 0.028513297425610054,
        "scanning": 0.028513297425610054,
        "indexing": 0.028513297425610054,
        "walk": 0.028513297425610054,
        "filesystem": 0.028513297425610054,
        "with": 0.028513297425610054,
        "ignore": 0.028513297425610054,
        "rules": 0.028513297425610054,
        "gitignore": 0.028513297425610054,
        "yml": 0.028513297425610054,
        "build": 0.08553989227683016,
        "normalized": 0.028513297425610054,
        "manifest": 0.05702659485122011,
        "files": 0.05702659485122011,
        "roles": 0.028513297425610054,
        "src": 0.028513297425610054,
        "test": 0.05702659485122011,
        "config": 0.08553989227683016,
        "infra": 0.028513297425610054,
        "hash": 0.028513297425610054,
        "cache": 0.028513297425610054,
        "file": 0.028513297425610054,
        "metadata": 0.028513297425610054,
        "speed": 0.028513297425610054,
        "subsequent": 0.028513297425610054,
        "runs": 0.028513297425610054,
        "entrypoint": 0.05702659485122011,
        "detection": 0.05702659485122011,
        "e": 0.028513297425610054,
        "g": 0.028513297425610054,
        "main": 0.028513297425610054,
        "springbootapplication": 0.028513297425610054,
        "app": 0.028513297425610054,
        "monorepo": 0.05702659485122011,
        "module": 0.028513297425610054,
        "3": 0.028513297425610054,
        "analyzers": 0.14256648712805026,
        "plugin": 0.028513297425610054,
        "based": 0.028513297425610054,
        "language": 0.028513297425610054,
        "python": 0.028513297425610054,
        "java": 0.028513297425610054,
        "node": 0.028513297425610054,
        "js": 0.05702659485122011,
        "tier": 0.028513297425610054,
        "poetry": 0.028513297425610054,
        "setuptools": 0.028513297425610054,
        "maven": 0.028513297425610054,
        "gradle": 0.028513297425610054,
        "npm": 0.028513297425610054,
        "pnpm": 0.028513297425610054,
        "yarn": 0.028513297425610054,
        "dependency": 0.028513297425610054,
        "from": 0.028513297425610054,
        "pattern": 0.028513297425610054,
        "docker": 0.028513297425610054,
        "k8s": 0.028513297425610054,
        "layout": 0.028513297425610054,
        "tree": 0.028513297425610054,
        "sitter": 0.028513297425610054,
        "powered": 0.028513297425610054,
        "symbol": 0.028513297425610054,
        "extraction": 0.028513297425610054,
        "flagged": 0.028513297425610054,
        "4": 0.028513297425610054,
        "knowledge": 0.05702659485122011,
        "store": 0.028513297425610054,
        "rag": 0.028513297425610054,
        "local": 0.05702659485122011,
        "embedding": 0.028513297425610054,
        "model": 0.05702659485122011,
        "chunking": 0.028513297425610054,
        "strategy": 0.028513297425610054,
        "index": 0.028513297425610054,
        "top": 0.05702659485122011,
        "n": 0.028513297425610054,
        "source": 0.028513297425610054,
        "headers": 0.028513297425610054,
        "comments": 0.028513297425610054,
        "section": 0.14256648712805026,
        "scoped": 0.028513297425610054,
        "retrieval": 0.028513297425610054,
        "k": 0.028513297425610054,
        "per": 0.05702659485122011,
        "lightweight": 0.028513297425610054,
        "graph": 0.028513297425610054,
        "modules": 0.028513297425610054,
        "services": 0.028513297425610054,
        "signals": 0.028513297425610054,
        "5": 0.028513297425610054,
        "prompting": 0.028513297425610054,
        "templates": 0.08553989227683016,
        "jinja2": 0.028513297425610054,
        "intro": 0.028513297425610054,
        "features": 0.028513297425610054,
        "architecture": 0.05702659485122011,
        "quickstart": 0.028513297425610054,
        "deployment": 0.028513297425610054,
        "troubleshooting": 0.028513297425610054,
        "faq": 0.028513297425610054,
        "license": 0.028513297425610054,
        "guardrailed": 0.028513297425610054,
        "system": 0.028513297425610054,
        "prompt": 0.028513297425610054,
        "no": 0.028513297425610054,
        "speculation": 0.028513297425610054,
        "cite": 0.028513297425610054,
        "repo": 0.028513297425610054,
        "facts": 0.028513297425610054,
        "only": 0.028513297425610054,
        "token": 0.028513297425610054,
        "budgeting": 0.028513297425610054,
        "streaming": 0.028513297425610054,
        "by": 0.028513297425610054,
        "generation": 0.028513297425610054,
        "template": 0.028513297425610054,
        "override": 0.028513297425610054,
        "mechanism": 0.028513297425610054,
        "j2": 0.028513297425610054,
        "style": 0.028513297425610054,
        "presets": 0.028513297425610054,
        "concise": 0.028513297425610054,
        "vs": 0.028513297425610054,
        "comprehensive": 0.028513297425610054,
        "mermaid": 0.028513297425610054,
        "diagrams": 0.028513297425610054,
        "flow": 0.028513297425610054,
        "where": 0.028513297425610054,
        "appropriate": 0.028513297425610054,
        "6": 0.028513297425610054,
        "llm": 0.028513297425610054,
        "runner": 0.05702659485122011,
        "http": 0.028513297425610054,
        "adapter": 0.05702659485122011,
        "host": 0.028513297425610054,
        "container": 0.028513297425610054,
        "defaults": 0.028513297425610054,
        "env": 0.028513297425610054,
        "api": 0.028513297425610054,
        "key": 0.028513297425610054,
        "overrides": 0.028513297425610054,
        "llama": 0.028513297425610054,
        "cpp": 0.028513297425610054,
        "structured": 0.028513297425610054,
        "outputs": 0.028513297425610054,
        "tool": 0.028513297425610054,
        "use": 0.028513297425610054,
        "compatibility": 0.028513297425610054,
        "7": 0.028513297425610054,
        "post": 0.028513297425610054,
        "processing": 0.028513297425610054,
        "markdown": 0.028513297425610054,
        "lint": 0.028513297425610054,
        "heading": 0.028513297425610054,
        "hierarchy": 0.028513297425610054
      },
      "text": "# Intelligent README Generator \u2014 Feature Checklist > Status legend: \u2610 Not started \u00b7 \u25d0 In progress \u00b7 \u2714 Done > Scope tags: **[MVP]** required for proof\u2011of\u2011concept, **[NEXT]** nice\u2011to\u2011have soon, **[STRETCH]** later ## 1) Core Workflows - [x] **docgen init** \u2014 Initialize README for repos without docs **[MVP]** - [x] **docgen update** \u2014 Detect changes on commit/PR and patch affected sections **[MVP]** - [ ] **docgen regenerate** \u2014 Manual full/partial regeneration **[MVP]** - [x] Dry\u2011run mode (`--dry-run`) to preview diffs without writing **[NEXT]** - [ ] Service mode (FastAPI) endpoints for CI/bots **[STRETCH]** ## 2) Repository Scanning & Indexing - [x] Walk filesystem with ignore rules (`.gitignore`, `.docgen.yml`) **[MVP]** - [x] Build normalized manifest of files, roles (src/test/docs/config/infra) **[MVP]** - [x] Hash & cache file metadata to speed subsequent runs **[MVP]** - [x] Entrypoint detection (e.g., `main()`, `@SpringBootApplication`, FastAPI app) **[NEXT]** - [x] Monorepo module detection **[NEXT]** ## 3) Analyzers (Plugin\u2011based) - [x] Language analyzers: Python, Java, Node.js (Tier\u20111) **[MVP]** - [x] Build analyzers: Poetry/Setuptools, Maven/Gradle, npm/pnpm/yarn **[MVP]** - [x] Dependency analyzers from manifest files **[MVP]** - [x] Pattern analyzers: Docker/K8s, CI config, monorepo layout **[NEXT]** - [ ] Tree\u2011sitter powered symbol/entrypoint extraction (flagged) **[STRETCH]** ## 4) Knowledge Store (RAG) - [ ] Local embedding model + chunking strategy **[MVP]** - [ ] Index `README`, `/docs`, top N source headers & comments **[MVP]** - [ ] Section\u2011scoped retrieval (top\u2011k per section) **[MVP]** - [ ] Lightweight knowledge graph of modules/services/signals **[NEXT]** ## 5) Prompting & Templates - [x] Jinja2 templates per section (intro, features, architecture, quickstart, config, build/test, deployment, troubleshooting, FAQ, license) **[MVP]** - [x] Guardrailed system prompt (\u201cno speculation; cite repo facts only\u201d) **[MVP]** - [x] Token budgeting & streaming section-by-section generation **[MVP]** - [x] Template override mechanism (`docs/templates/*.j2`) **[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy,",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#1",
      "vector": {
        "next": 0.3907019005301633,
        "x": 0.5860528507952449,
        "style": 0.05581455721859476,
        "presets": 0.02790727860929738,
        "concise": 0.02790727860929738,
        "vs": 0.02790727860929738,
        "comprehensive": 0.02790727860929738,
        "mermaid": 0.02790727860929738,
        "js": 0.05581455721859476,
        "diagrams": 0.02790727860929738,
        "for": 0.11162911443718952,
        "architecture": 0.02790727860929738,
        "flow": 0.02790727860929738,
        "sections": 0.05581455721859476,
        "where": 0.02790727860929738,
        "appropriate": 0.02790727860929738,
        "6": 0.02790727860929738,
        "local": 0.05581455721859476,
        "llm": 0.05581455721859476,
        "runner": 0.05581455721859476,
        "model": 0.02790727860929738,
        "http": 0.02790727860929738,
        "adapter": 0.05581455721859476,
        "host": 0.02790727860929738,
        "container": 0.02790727860929738,
        "defaults": 0.05581455721859476,
        "env": 0.02790727860929738,
        "api": 0.02790727860929738,
        "key": 0.02790727860929738,
        "overrides": 0.02790727860929738,
        "mvp": 0.47442373635805546,
        "llama": 0.02790727860929738,
        "cpp": 0.02790727860929738,
        "structured": 0.02790727860929738,
        "outputs": 0.05581455721859476,
        "tool": 0.02790727860929738,
        "use": 0.02790727860929738,
        "compatibility": 0.02790727860929738,
        "stretch": 0.05581455721859476,
        "7": 0.02790727860929738,
        "post": 0.02790727860929738,
        "processing": 0.02790727860929738,
        "markdown": 0.02790727860929738,
        "lint": 0.05581455721859476,
        "heading": 0.02790727860929738,
        "hierarchy": 0.02790727860929738,
        "code": 0.05581455721859476,
        "fences": 0.02790727860929738,
        "line": 0.02790727860929738,
        "length": 0.02790727860929738,
        "auto": 0.05581455721859476,
        "toc": 0.02790727860929738,
        "level": 0.02790727860929738,
        "3": 0.02790727860929738,
        "badges": 0.02790727860929738,
        "build": 0.05581455721859476,
        "coverage": 0.05581455721859476,
        "license": 0.02790727860929738,
        "with": 0.05581455721859476,
        "safe": 0.05581455721859476,
        "link": 0.05581455721859476,
        "validator": 0.02790727860929738,
        "relative": 0.02790727860929738,
        "absolute": 0.02790727860929738,
        "managed": 0.02790727860929738,
        "markers": 0.02790727860929738,
        "idempotent": 0.02790727860929738,
        "patching": 0.02790727860929738,
        "docgen": 0.08372183582789214,
        "begin": 0.02790727860929738,
        "end": 0.02790727860929738,
        "8": 0.02790727860929738,
        "git": 0.02790727860929738,
        "integration": 0.05581455721859476,
        "diff": 0.05581455721859476,
        "detection": 0.02790727860929738,
        "map": 0.02790727860929738,
        "changed": 0.05581455721859476,
        "files": 0.05581455721859476,
        "impacted": 0.02790727860929738,
        "branch": 0.02790727860929738,
        "pr": 0.05581455721859476,
        "creation": 0.02790727860929738,
        "summary": 0.02790727860929738,
        "of": 0.02790727860929738,
        "readme": 0.11162911443718952,
        "deltas": 0.02790727860929738,
        "commit": 0.02790727860929738,
        "mode": 0.02790727860929738,
        "init": 0.02790727860929738,
        "or": 0.02790727860929738,
        "small": 0.02790727860929738,
        "changes": 0.05581455721859476,
        "configurable": 0.02790727860929738,
        "prevent": 0.02790727860929738,
        "loops": 0.02790727860929738,
        "on": 0.05581455721859476,
        "only": 0.08372183582789214,
        "9": 0.02790727860929738,
        "configuration": 0.02790727860929738,
        "parse": 0.02790727860929738,
        "yml": 0.02790727860929738,
        "analyzers": 0.02790727860929738,
        "publish": 0.02790727860929738,
        "path": 0.02790727860929738,
        "exclusions": 0.02790727860929738,
        "watched_globs": 0.02790727860929738,
        "ci": 0.08372183582789214,
        "triggers": 0.02790727860929738,
        "per": 0.05581455721859476,
        "section": 0.02790727860929738,
        "off": 0.02790727860929738,
        "toggles": 0.02790727860929738,
        "and": 0.08372183582789214,
        "titles": 0.02790727860929738,
        "10": 0.02790727860929738,
        "github": 0.02790727860929738,
        "actions": 0.02790727860929738,
        "example": 0.02790727860929738,
        "workflow": 0.02790727860929738,
        "gitlab": 0.02790727860929738,
        "bitbucket": 0.02790727860929738,
        "pipelines": 0.02790727860929738,
        "samples": 0.02790727860929738,
        "labeling": 0.02790727860929738,
        "docs": 0.02790727860929738,
        "update": 0.02790727860929738,
        "behavior": 0.02790727860929738,
        "11": 0.02790727860929738,
        "security": 0.02790727860929738,
        "privacy": 0.02790727860929738,
        "models": 0.02790727860929738,
        "never": 0.02790727860929738,
        "exfiltrate": 0.02790727860929738,
        "respect": 0.02790727860929738,
        "gitignore": 0.02790727860929738,
        "exclude": 0.02790727860929738,
        "large": 0.02790727860929738,
        "binaries": 0.02790727860929738,
        "secrets": 0.02790727860929738,
        "optional": 0.02790727860929738,
        "simple": 0.02790727860929738,
        "secret": 0.02790727860929738,
        "scanner": 0.02790727860929738,
        "gate": 0.02790727860929738,
        "12": 0.02790727860929738,
        "multi": 0.02790727860929738,
        "language": 0.02790727860929738,
        "project": 0.02790727860929738,
        "types": 0.02790727860929738,
        "tier": 0.05581455721859476,
        "1": 0.02790727860929738,
        "python": 0.02790727860929738,
        "poetry": 0.02790727860929738,
        "setuptools": 0.02790727860929738,
        "java": 0.02790727860929738,
        "maven": 0.02790727860929738,
        "gradle": 0.02790727860929738,
        "spring": 0.02790727860929738,
        "boot": 0.02790727860929738,
        "node": 0.02790727860929738,
        "npm": 0.02790727860929738,
        "pnpm": 0.02790727860929738,
        "express": 0.02790727860929738,
        "2": 0.02790727860929738,
        "go": 0.02790727860929738,
        "rust": 0.02790727860929738,
        "ruby": 0.02790727860929738,
        "php": 0.02790727860929738,
        "framework": 0.02790727860929738,
        "aware": 0.02790727860929738,
        "quickstart": 0.02790727860929738,
        "commands": 0.02790727860929738,
        "system": 0.02790727860929738,
        "13": 0.02790727860929738,
        "quality": 0.02790727860929738,
        "gates": 0.02790727860929738,
        "evaluation": 0.02790727860929738,
        "command": 0.02790727860929738,
        "validation": 0.02790727860929738,
        "existence": 0.02790727860929738,
        "checks": 0.05581455721859476,
        "no": 0.02790727860929738,
        "hallucination": 0.02790727860929738,
        "reject": 0.02790727860929738,
        "facts": 0.02790727860929738,
        "not": 0.02790727860929738,
        "in": 0.02790727860929738,
        "signals": 0.02790727860929738,
        "rag": 0.05581455721859476,
        "scorecard": 0.02790727860929738,
        "buildability": 0.02790727860929738,
        "validity": 0.02790727860929738,
        "alignment": 0.02790727860929738,
        "14": 0.02790727860929738,
        "performance": 0.02790727860929738,
        "caching": 0.02790727860929738,
        "persist": 0.02790727860929738,
        "analyzer": 0.02790727860929738,
        "embeddings": 0.02790727860929738,
        "under": 0.02790727860929738,
        "incremental": 0.02790727860929738,
        "refresh": 0.02790727860929738,
        "15": 0.02790727860929738,
        "error": 0.02790727860929738,
        "handling": 0.02790727860929738,
        "ux": 0.02790727860929738,
        "fail": 0.02790727860929738,
        "stub": 0.02790727860929738,
        "generation": 0.02790727860929738,
        "when": 0.02790727860929738,
        "evidence": 0.02790727860929738
      },
      "text": "**[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy, code fences, line length **[MVP]** - [x] Auto ToC (\u2264 level 3) **[MVP]** - [x] Badges (build, coverage, license) with safe defaults **[NEXT]** - [x] Link validator (relative/absolute) **[NEXT]** - [x] Managed markers for idempotent patching (`<!-- docgen:begin:end -->`) **[MVP]** ## 8) Git Integration - [x] Diff detection (map changed files \u2192 impacted sections) **[MVP]** - [x] Branch + PR creation with summary of README deltas **[MVP]** - [x] Commit mode for init or small changes (configurable) **[NEXT]** - [ ] Prevent loops on README\u2011only changes **[MVP]** ## 9) Configuration - [x] Parse `.docgen.yml` (LLM, readme style, analyzers, publish) **[MVP]** - [x] Path exclusions & `watched_globs` for CI triggers **[MVP]** - [ ] Per-section on/off toggles and titles **[NEXT]** ## 10) CI Integration - [x] GitHub Actions example workflow **[MVP]** - [ ] GitLab CI and Bitbucket Pipelines samples **[NEXT]** - [x] Labeling (`docs:auto`) and PR update behavior **[NEXT]** ## 11) Security & Privacy - [x] Local-only models; never exfiltrate code **[MVP]** - [ ] Respect `.gitignore`; exclude large binaries/secrets **[MVP]** - [ ] Optional simple secret scanner gate **[NEXT]** ## 12) Multi\u2011Language & Project Types - [ ] Tier\u20111: Python (Poetry/Setuptools), Java (Maven/Gradle/Spring Boot), Node.js (npm/pnpm/Express/Next) **[MVP]** - [ ] Tier\u20112: Go, Rust, Ruby, PHP **[STRETCH]** - [x] Framework\u2011aware quickstart commands per build system **[MVP]** ## 13) Quality Gates & Evaluation - [ ] Command validation (existence checks) **[MVP]** - [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#2",
      "vector": {
        "no": 0.07018624063435965,
        "hallucination": 0.07018624063435965,
        "checks": 0.07018624063435965,
        "reject": 0.07018624063435965,
        "facts": 0.07018624063435965,
        "not": 0.07018624063435965,
        "in": 0.07018624063435965,
        "signals": 0.07018624063435965,
        "rag": 0.1403724812687193,
        "mvp": 0.42111744380615784,
        "x": 0.49130368444051753,
        "readme": 0.1403724812687193,
        "scorecard": 0.07018624063435965,
        "coverage": 0.07018624063435965,
        "buildability": 0.07018624063435965,
        "link": 0.07018624063435965,
        "validity": 0.07018624063435965,
        "diff": 0.07018624063435965,
        "alignment": 0.07018624063435965,
        "lint": 0.1403724812687193,
        "next": 0.21055872190307892,
        "14": 0.07018624063435965,
        "performance": 0.07018624063435965,
        "caching": 0.07018624063435965,
        "persist": 0.07018624063435965,
        "analyzer": 0.1403724812687193,
        "outputs": 0.07018624063435965,
        "embeddings": 0.07018624063435965,
        "under": 0.07018624063435965,
        "docgen": 0.07018624063435965,
        "incremental": 0.07018624063435965,
        "refresh": 0.07018624063435965,
        "changed": 0.07018624063435965,
        "files": 0.07018624063435965,
        "only": 0.07018624063435965,
        "15": 0.07018624063435965,
        "error": 0.07018624063435965,
        "handling": 0.07018624063435965,
        "ux": 0.07018624063435965,
        "fail": 0.07018624063435965,
        "safe": 0.07018624063435965,
        "stub": 0.07018624063435965,
        "generation": 0.07018624063435965,
        "when": 0.07018624063435965,
        "evidence": 0.07018624063435965,
        "is": 0.07018624063435965,
        "insufficient": 0.07018624063435965,
        "clear": 0.07018624063435965,
        "run": 0.07018624063435965,
        "logs": 0.07018624063435965,
        "pr": 0.07018624063435965,
        "body": 0.07018624063435965,
        "with": 0.07018624063435965,
        "rationale": 0.07018624063435965,
        "sections": 0.07018624063435965,
        "updated": 0.07018624063435965,
        "because": 0.07018624063435965,
        "helpful": 0.07018624063435965,
        "cli": 0.07018624063435965,
        "errors": 0.07018624063435965,
        "and": 0.1403724812687193,
        "verbose": 0.07018624063435965,
        "flag": 0.07018624063435965,
        "works": 0.07018624063435965,
        "pre": 0.07018624063435965,
        "post": 0.07018624063435965,
        "subcommand": 0.07018624063435965,
        "16": 0.07018624063435965,
        "extensibility": 0.07018624063435965,
        "abc": 0.07018624063435965,
        "plugin": 0.07018624063435965,
        "discovery": 0.07018624063435965,
        "template": 0.07018624063435965,
        "packs": 0.07018624063435965,
        "org": 0.07018624063435965,
        "style": 0.1403724812687193,
        "definition": 0.07018624063435965,
        "of": 0.07018624063435965,
        "done": 0.07018624063435965,
        "per": 0.07018624063435965,
        "section": 0.07018624063435965,
        "passing": 0.07018624063435965,
        "unit": 0.07018624063435965,
        "integration": 0.07018624063435965,
        "tests": 0.07018624063435965,
        "for": 0.07018624063435965,
        "core": 0.07018624063435965,
        "logic": 0.07018624063435965,
        "golden": 0.07018624063435965,
        "regression": 0.07018624063435965,
        "test": 0.07018624063435965,
        "s": 0.07018624063435965,
        "meets": 0.07018624063435965,
        "requirements": 0.07018624063435965
      },
      "text": "- [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence is insufficient **[MVP]** - [ ] Clear run logs + PR body with rationale (\u201csections updated because\u2026\u201d) **[MVP]** - [x] Helpful CLI errors and `--verbose` flag (works pre/post subcommand) **[MVP]** ## 16) Extensibility - [x] Analyzer ABC and plugin discovery **[MVP]** - [x] Template packs (org\u2011style) **[NEXT]** --- ### Definition of Done (per section) - [ ] Passing unit & integration tests for core logic - [ ] Golden README regression test(s) - [ ] Meets lint/style requirements",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_order.md#0",
      "vector": {
        "docgen": 0.23979625973207228,
        "development": 0.029974532466509034,
        "roadmap": 0.029974532466509034,
        "phase": 0.20982172726556325,
        "0": 0.029974532466509034,
        "bootstrap": 0.029974532466509034,
        "the": 0.029974532466509034,
        "skeleton": 0.05994906493301807,
        "1": 0.3596943895981084,
        "project": 0.029974532466509034,
        "cli": 0.05994906493301807,
        "config": 0.11989812986603614,
        "loader": 0.029974532466509034,
        "yml": 0.029974532466509034,
        "models": 0.029974532466509034,
        "covers": 0.47959251946414455,
        "commands": 0.029974532466509034,
        "scaffolding": 0.029974532466509034,
        "9": 0.05994906493301807,
        "parse": 0.029974532466509034,
        "16": 0.05994906493301807,
        "analyzer": 0.05994906493301807,
        "abc": 0.05994906493301807,
        "2": 0.23979625973207228,
        "plugin": 0.05994906493301807,
        "discovery": 0.05994906493301807,
        "init": 0.11989812986603614,
        "happy": 0.029974532466509034,
        "path": 0.05994906493301807,
        "single": 0.029974532466509034,
        "repo": 0.11989812986603614,
        "local": 0.11989812986603614,
        "scanner": 0.029974532466509034,
        "manifest": 0.05994906493301807,
        "roles": 0.029974532466509034,
        "hashing": 0.029974532466509034,
        "ignores": 0.05994906493301807,
        "walk": 0.029974532466509034,
        "fs": 0.029974532466509034,
        "cache": 0.029974532466509034,
        "tier": 0.029974532466509034,
        "analyzers": 0.0899235973995271,
        "python": 0.029974532466509034,
        "java": 0.029974532466509034,
        "node": 0.029974532466509034,
        "build": 0.05994906493301807,
        "dependency": 0.029974532466509034,
        "3": 0.0899235973995271,
        "language": 0.05994906493301807,
        "deps": 0.029974532466509034,
        "templates": 0.05994906493301807,
        "prompt": 0.05994906493301807,
        "builder": 0.029974532466509034,
        "section": 0.14987266233254518,
        "by": 0.029974532466509034,
        "guardrailed": 0.029974532466509034,
        "system": 0.029974532466509034,
        "5": 0.11989812986603614,
        "jinja2": 0.029974532466509034,
        "guardrails": 0.029974532466509034,
        "token": 0.029974532466509034,
        "budget": 0.029974532466509034,
        "4": 0.0899235973995271,
        "llm": 0.029974532466509034,
        "runner": 0.029974532466509034,
        "ollama": 0.05994906493301807,
        "adapter": 0.029974532466509034,
        "6": 0.0899235973995271,
        "post": 0.029974532466509034,
        "processor": 0.029974532466509034,
        "managed": 0.029974532466509034,
        "markers": 0.0899235973995271,
        "toc": 0.05994906493301807,
        "markdown": 0.029974532466509034,
        "lint": 0.05994906493301807,
        "7": 0.029974532466509034,
        "git": 0.05994906493301807,
        "publisher": 0.05994906493301807,
        "commit": 0.05994906493301807,
        "mode": 0.05994906493301807,
        "for": 0.05994906493301807,
        "only": 0.0899235973995271,
        "8": 0.0899235973995271,
        "end": 0.05994906493301807,
        "to": 0.029974532466509034,
        "milestone": 0.0899235973995271,
        "generates": 0.029974532466509034,
        "a": 0.0899235973995271,
        "clean": 0.029974532466509034,
        "readme": 0.05994906493301807,
        "with": 0.0899235973995271,
        "no": 0.0899235973995271,
        "docs": 0.05994906493301807,
        "update": 0.11989812986603614,
        "on": 0.029974532466509034,
        "change": 0.05994906493301807,
        "pr": 0.14987266233254518,
        "workflow": 0.029974532466509034,
        "diff": 0.05994906493301807,
        "detection": 0.05994906493301807,
        "mapping": 0.05994906493301807,
        "patching": 0.029974532466509034,
        "inside": 0.029974532466509034,
        "prevent": 0.029974532466509034,
        "loops": 0.029974532466509034,
        "branch": 0.05994906493301807,
        "delta": 0.029974532466509034,
        "summary": 0.029974532466509034,
        "10": 0.05994906493301807,
        "labeling": 0.029974532466509034,
        "later": 0.029974532466509034,
        "opens": 0.029974532466509034,
        "updating": 0.029974532466509034,
        "impacted": 0.029974532466509034,
        "sections": 0.029974532466509034,
        "minimal": 0.029974532466509034,
        "rag": 0.05994906493301807,
        "accuracy": 0.029974532466509034,
        "lite": 0.029974532466509034,
        "embed": 0.029974532466509034,
        "top": 0.029974532466509034,
        "n": 0.029974532466509034,
        "source": 0.029974532466509034,
        "headers": 0.029974532466509034,
        "scoped": 0.029974532466509034,
        "retrieval": 0.05994906493301807,
        "embedding": 0.029974532466509034,
        "index": 0.029974532466509034,
        "sources": 0.029974532466509034,
        "per": 0.029974532466509034,
        "hallucination": 0.05994906493301807,
        "command": 0.05994906493301807,
        "existence": 0.029974532466509034,
        "checks": 0.029974532466509034,
        "13": 0.029974532466509034,
        "validation": 0.029974532466509034,
        "outputs": 0.029974532466509034,
        "grounded": 0.029974532466509034,
        "in": 0.029974532466509034,
        "facts": 0.029974532466509034,
        "targeted": 0.029974532466509034,
        "context": 0.029974532466509034,
        "hardening": 0.029974532466509034,
        "dx": 0.029974532466509034,
        "error": 0.029974532466509034,
        "handling": 0.029974532466509034,
        "clear": 0.029974532466509034,
        "logs": 0.05994906493301807,
        "verbose": 0.029974532466509034,
        "fail": 0.05994906493301807,
        "safe": 0.05994906493301807,
        "stubs": 0.029974532466509034,
        "15": 0.029974532466509034,
        "ux": 0.029974532466509034,
        "security": 0.029974532466509034,
        "gitignore": 0.029974532466509034,
        "respect": 0.029974532466509034,
        "excludes": 0.05994906493301807,
        "enforcement": 0.029974532466509034,
        "11": 0.029974532466509034,
        "privacy": 0.029974532466509034,
        "ci": 0.029974532466509034,
        "integration": 0.029974532466509034,
        "polish": 0.029974532466509034,
        "github": 0.029974532466509034,
        "actions": 0.05994906493301807,
        "sample": 0.029974532466509034,
        "push": 0.029974532466509034,
        "trigger": 0.029974532466509034,
        "calling": 0.029974532466509034,
        "gh": 0.029974532466509034,
        "refinements": 0.029974532466509034,
        "watched": 0.029974532466509034,
        "globs": 0.029974532466509034,
        "style": 0.05994906493301807,
        "preset": 0.029974532466509034,
        "concise": 0.029974532466509034,
        "comprehensive": 0.029974532466509034,
        "watched_globs": 0.029974532466509034,
        "presets": 0.029974532466509034,
        "multi": 0.029974532466509034,
        "breadth": 0.029974532466509034,
        "framework": 0.029974532466509034,
        "smarts": 0.029974532466509034,
        "entrypoint": 0.029974532466509034,
        "main": 0.029974532466509034,
        "spring": 0.029974532466509034,
        "boot": 0.029974532466509034,
        "fastapi": 0.029974532466509034
      },
      "text": "# DocGen Development Roadmap ## Phase 0 \u2014 Bootstrap the skeleton 1. **Project skeleton + CLI (`docgen`) + config loader (`.docgen.yml`) + models** * Covers: 1 (commands scaffolding), 9 (parse config), 16 (Analyzer ABC) 2. **Analyzer plugin ABC & discovery** * Covers: 16 (plugin discovery) ## Phase 1 \u2014 \"Init\" happy-path (single repo, local) 1. **Repo scanner & manifest (roles, hashing, ignores)** * Covers: 2 (walk FS, manifest, cache, ignores) 2. **Tier-1 analyzers (Python, Java, Node) + build analyzers + dependency analyzers** * Covers: 3 (language/build/deps) 3. **Templates + prompt builder (section-by-section) + guardrailed system prompt** * Covers: 5 (Jinja2 templates, guardrails, token budget) 4. **Local LLM runner (Ollama adapter)** * Covers: 6 (Ollama) 5. **Post-processor: managed markers, ToC, markdown lint** * Covers: 7 (markers, ToC, lint) 6. **Git publisher: commit mode (for init only)** * Covers: 8 (commit mode), 1 (`docgen init` end-to-end) \u2705 **Milestone**: `docgen init` generates a clean README for a repo with no docs. ## Phase 2 \u2014 Update-on-change (PR workflow) 1. **Diff detection + change\u2192section mapping + patching inside markers** * Covers: 8 (diff mapping, prevent loops), 1 (`docgen update`) 2. **Git publisher: branch + PR with delta summary** * Covers: 8 (branch/PR), 10 (labeling later) \u2705 **Milestone**: `docgen update` opens a PR updating only impacted sections. ## Phase 3 \u2014 Minimal RAG & accuracy 1. **RAG Lite: embed README/docs/top N source headers; section-scoped retrieval** * Covers: 4 (local embedding, index sources, per-section retrieval) 2. **No-hallucination & command existence checks** * Covers: 13 (command validation, no-hallucination) \u2705 **Milestone**: outputs grounded in repo facts with targeted context. ## Phase 4 \u2014 Hardening & DX 1. **Error handling, clear logs, `--verbose`, fail-safe stubs** * Covers: 15 (fail-safe, logs, CLI UX) 2. **Security: .gitignore respect, path excludes, local-only enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI)",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/feature_order.md#1",
      "vector": {
        "enforcement": 0.04252432555625623,
        "covers": 0.4252432555625623,
        "11": 0.04252432555625623,
        "privacy": 0.04252432555625623,
        "excludes": 0.04252432555625623,
        "phase": 0.17009730222502492,
        "5": 0.12757297666876868,
        "ci": 0.12757297666876868,
        "integration": 0.04252432555625623,
        "config": 0.12757297666876868,
        "polish": 0.08504865111251246,
        "1": 0.25514595333753737,
        "github": 0.04252432555625623,
        "actions": 0.08504865111251246,
        "sample": 0.04252432555625623,
        "push": 0.04252432555625623,
        "pr": 0.17009730222502492,
        "trigger": 0.04252432555625623,
        "calling": 0.04252432555625623,
        "docgen": 0.12757297666876868,
        "update": 0.04252432555625623,
        "10": 0.08504865111251246,
        "gh": 0.04252432555625623,
        "2": 0.21262162778128116,
        "refinements": 0.04252432555625623,
        "watched": 0.04252432555625623,
        "globs": 0.04252432555625623,
        "style": 0.08504865111251246,
        "preset": 0.04252432555625623,
        "concise": 0.04252432555625623,
        "comprehensive": 0.04252432555625623,
        "9": 0.04252432555625623,
        "watched_globs": 0.04252432555625623,
        "presets": 0.04252432555625623,
        "6": 0.08504865111251246,
        "multi": 0.04252432555625623,
        "language": 0.08504865111251246,
        "breadth": 0.08504865111251246,
        "framework": 0.17009730222502492,
        "smarts": 0.04252432555625623,
        "entrypoint": 0.04252432555625623,
        "detection": 0.04252432555625623,
        "main": 0.04252432555625623,
        "spring": 0.04252432555625623,
        "boot": 0.04252432555625623,
        "fastapi": 0.08504865111251246,
        "aware": 0.08504865111251246,
        "quick": 0.04252432555625623,
        "start": 0.04252432555625623,
        "entrypoints": 0.04252432555625623,
        "12": 0.04252432555625623,
        "commands": 0.04252432555625623,
        "pattern": 0.08504865111251246,
        "analyzers": 0.08504865111251246,
        "docker": 0.04252432555625623,
        "k8s": 0.04252432555625623,
        "monorepo": 0.04252432555625623,
        "layout": 0.04252432555625623,
        "3": 0.12757297666876868,
        "7": 0.12757297666876868,
        "quality": 0.08504865111251246,
        "gates": 0.08504865111251246,
        "performance": 0.08504865111251246,
        "readme": 0.08504865111251246,
        "scorecard": 0.08504865111251246,
        "link": 0.08504865111251246,
        "validator": 0.08504865111251246,
        "badges": 0.08504865111251246,
        "13": 0.04252432555625623,
        "artifact": 0.04252432555625623,
        "embedding": 0.04252432555625623,
        "caching": 0.08504865111251246,
        "in": 0.04252432555625623,
        "incremental": 0.08504865111251246,
        "rag": 0.12757297666876868,
        "refresh": 0.08504865111251246,
        "14": 0.04252432555625623,
        "persist": 0.04252432555625623,
        "outputs": 0.04252432555625623,
        "8": 0.04252432555625623,
        "nice": 0.04252432555625623,
        "to": 0.12757297666876868,
        "have": 0.04252432555625623,
        "stretch": 0.04252432555625623,
        "dry": 0.08504865111251246,
        "run": 0.08504865111251246,
        "mode": 0.12757297666876868,
        "labeling": 0.08504865111251246,
        "updates": 0.08504865111251246,
        "commit": 0.08504865111251246,
        "policy": 0.04252432555625623,
        "tuning": 0.04252432555625623,
        "template": 0.12757297666876868,
        "overrides": 0.04252432555625623,
        "docs": 0.04252432555625623,
        "templates": 0.04252432555625623,
        "j2": 0.04252432555625623,
        "org": 0.04252432555625623,
        "packs": 0.08504865111251246,
        "override": 0.04252432555625623,
        "16": 0.04252432555625623,
        "service": 0.08504865111251246,
        "llama": 0.08504865111251246,
        "cpp": 0.08504865111251246,
        "adapter": 0.04252432555625623,
        "tree": 0.08504865111251246,
        "sitter": 0.08504865111251246,
        "extraction": 0.04252432555625623,
        "why": 0.04252432555625623,
        "this": 0.04252432555625623,
        "order": 0.04252432555625623,
        "fastest": 0.04252432555625623,
        "path": 0.04252432555625623,
        "value": 0.04252432555625623,
        "get": 0.04252432555625623,
        "init": 0.04252432555625623,
        "producing": 0.04252432555625623,
        "a": 0.04252432555625623,
        "solid": 0.04252432555625623,
        "before": 0.04252432555625623,
        "adding": 0.04252432555625623,
        "diffing": 0.04252432555625623,
        "contain": 0.04252432555625623,
        "risk": 0.04252432555625623,
        "early": 0.04252432555625623,
        "section": 0.04252432555625623,
        "markers": 0.04252432555625623,
        "lint": 0.04252432555625623,
        "and": 0.12757297666876868,
        "publishing": 0.04252432555625623,
        "ensure": 0.04252432555625623,
        "safe": 0.04252432555625623,
        "idempotent": 0.04252432555625623,
        "edits": 0.04252432555625623,
        "accuracy": 0.04252432555625623,
        "next": 0.04252432555625623,
        "add": 0.04252432555625623,
        "validation": 0.04252432555625623,
        "avoid": 0.04252432555625623,
        "hallucinations": 0.04252432555625623,
        "once": 0.04252432555625623,
        "the": 0.08504865111251246,
        "pipeline": 0.04252432555625623,
        "works": 0.04252432555625623,
        "scale": 0.04252432555625623,
        "later": 0.04252432555625623,
        "only": 0.04252432555625623,
        "after": 0.04252432555625623,
        "core": 0.04252432555625623,
        "loop": 0.04252432555625623,
        "is": 0.04252432555625623,
        "robust": 0.04252432555625623,
        "do": 0.04252432555625623,
        "we": 0.04252432555625623,
        "widen": 0.04252432555625623,
        "coverage": 0.04252432555625623,
        "last": 0.04252432555625623,
        "refine": 0.04252432555625623,
        "dev": 0.04252432555625623,
        "experience": 0.04252432555625623
      },
      "text": "enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI) + framework-aware Quick Start** * Covers: 2 (entrypoints), 12 (framework-aware commands) 2. **Pattern analyzers (Docker/K8s, CI config, monorepo layout)** * Covers: 3 (pattern analyzers) ## Phase 7 \u2014 Quality gates & performance 1. **README scorecard + link validator + badges** * Covers: 13 (scorecard), 7 (link validator), 7 (badges) 2. **Artifact & embedding caching in `.docgen/` + incremental RAG refresh** * Covers: 14 (persist outputs, incremental refresh) ## Phase 8 \u2014 \"Nice to have\" & stretch 1. **Dry-run mode, PR labeling/updates, commit/PR policy tuning** * Covers: 1 (dry-run), 10 (labeling/PR updates) 2. **Template overrides (`docs/templates/*.j2`) & org template packs** * Covers: 5 (override), 16 (template packs) 3. **Service mode (FastAPI), llama.cpp adapter, tree-sitter extraction** * Covers: 1 (service mode), 6 (llama.cpp), 3 (tree-sitter) ## Why this order * **Fastest path to value**: get `docgen init` producing a solid README before adding diffing/RAG. * **Contain risk early**: section markers, lint, and commit publishing ensure safe/idempotent edits. * **Accuracy next**: add RAG + validation to avoid hallucinations once the pipeline works. * **Scale breadth later**: only after the core loop is robust do we widen language/framework coverage. * **Polish last**: CI, caching, and quality gates refine dev experience and performance.",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/spec.md#0",
      "vector": {
        "intelligent": 0.04393747751637468,
        "readme": 0.17574991006549873,
        "generator": 0.04393747751637468,
        "architecture": 0.08787495503274936,
        "spec": 0.04393747751637468,
        "python": 0.08787495503274936,
        "local": 0.13181243254912403,
        "llm": 0.13181243254912403,
        "1": 0.08787495503274936,
        "purpose": 0.04393747751637468,
        "scope": 0.04393747751637468,
        "build": 0.17574991006549873,
        "a": 0.26362486509824806,
        "based": 0.04393747751637468,
        "system": 0.04393747751637468,
        "that": 0.04393747751637468,
        "analyzes": 0.04393747751637468,
        "git": 0.26362486509824806,
        "repository": 0.04393747751637468,
        "structure": 0.04393747751637468,
        "code": 0.04393747751637468,
        "dependencies": 0.04393747751637468,
        "then": 0.04393747751637468,
        "generates": 0.04393747751637468,
        "and": 0.2196873875818734,
        "maintains": 0.04393747751637468,
        "high": 0.08787495503274936,
        "quality": 0.04393747751637468,
        "md": 0.04393747751637468,
        "using": 0.04393747751637468,
        "it": 0.04393747751637468,
        "initializes": 0.04393747751637468,
        "repos": 0.04393747751637468,
        "with": 0.08787495503274936,
        "no": 0.04393747751637468,
        "docs": 0.17574991006549873,
        "keeps": 0.04393747751637468,
        "up": 0.04393747751637468,
        "to": 0.2196873875818734,
        "date": 0.04393747751637468,
        "on": 0.04393747751637468,
        "commits": 0.04393747751637468,
        "prs": 0.04393747751637468,
        "supports": 0.08787495503274936,
        "multiple": 0.04393747751637468,
        "languages": 0.04393747751637468,
        "project": 0.04393747751637468,
        "types": 0.04393747751637468,
        "via": 0.04393747751637468,
        "analyzers": 0.08787495503274936,
        "non": 0.04393747751637468,
        "goals": 0.04393747751637468,
        "for": 0.08787495503274936,
        "the": 0.04393747751637468,
        "poc": 0.04393747751637468,
        "multi": 0.04393747751637468,
        "repo": 0.2196873875818734,
        "orchestration": 0.04393747751637468,
        "full": 0.08787495503274936,
        "website": 0.04393747751637468,
        "api": 0.04393747751637468,
        "reference": 0.04393747751637468,
        "extraction": 0.04393747751637468,
        "beyond": 0.04393747751637468,
        "summaries": 0.04393747751637468,
        "cloud": 0.04393747751637468,
        "llms": 0.04393747751637468,
        "2": 0.08787495503274936,
        "level": 0.04393747751637468,
        "at": 0.04393747751637468,
        "glance": 0.04393747751637468,
        "events": 0.04393747751637468,
        "event": 0.04393747751637468,
        "sources": 0.04393747751637468,
        "cli": 0.04393747751637468,
        "commands": 0.04393747751637468,
        "hooks": 0.04393747751637468,
        "webhooks": 0.04393747751637468,
        "ci": 0.08787495503274936,
        "commit": 0.08787495503274936,
        "pr": 0.08787495503274936,
        "orchestr": 0.04393747751637468,
        "async": 0.04393747751637468,
        "task": 0.04393747751637468,
        "graph": 0.08787495503274936,
        "scanner": 0.08787495503274936,
        "doc": 0.04393747751637468,
        "store": 0.04393747751637468,
        "indexer": 0.08787495503274936,
        "language": 0.08787495503274936,
        "artifacts": 0.08787495503274936,
        "fs": 0.04393747751637468,
        "deps": 0.04393747751637468,
        "cache": 0.04393747751637468,
        "versions": 0.04393747751637468,
        "knowledge": 0.04393747751637468,
        "embeddings": 0.04393747751637468,
        "prompt": 0.04393747751637468,
        "builder": 0.04393747751637468,
        "templates": 0.04393747751637468,
        "rag": 0.04393747751637468,
        "runner": 0.04393747751637468,
        "llama": 0.04393747751637468,
        "cpp": 0.04393747751637468,
        "ollama": 0.04393747751637468,
        "post": 0.04393747751637468,
        "processor": 0.04393747751637468,
        "lint": 0.04393747751637468,
        "toc": 0.04393747751637468,
        "badges": 0.04393747751637468,
        "links": 0.04393747751637468,
        "publisher": 0.04393747751637468,
        "branch": 0.04393747751637468,
        "3": 0.13181243254912403,
        "components": 0.04393747751637468,
        "responsibilities": 0.04393747751637468,
        "orchestrator": 0.04393747751637468,
        "coordinates": 0.04393747751637468,
        "end": 0.08787495503274936,
        "pipelines": 0.04393747751637468,
        "init": 0.04393747751637468,
        "update": 0.08787495503274936,
        "regenerate": 0.08787495503274936,
        "computes": 0.04393747751637468,
        "change": 0.04393747751637468,
        "impact": 0.04393747751637468,
        "from": 0.04393747751637468,
        "diff": 0.04393747751637468,
        "decides": 0.04393747751637468,
        "whether": 0.04393747751637468,
        "or": 0.04393747751637468,
        "patch": 0.04393747751637468,
        "sections": 0.04393747751637468,
        "schedules": 0.04393747751637468,
        "tasks": 0.04393747751637468,
        "caches": 0.04393747751637468,
        "intermediate": 0.04393747751637468,
        "results": 0.04393747751637468,
        "emits": 0.04393747751637468,
        "structured": 0.04393747751637468,
        "logs": 0.04393747751637468,
        "info": 0.04393747751637468,
        "by": 0.04393747751637468,
        "default": 0.04393747751637468,
        "debug": 0.04393747751637468,
        "verbose": 0.04393747751637468,
        "respects": 0.04393747751637468,
        "docgen": 0.13181243254912403,
        "yml": 0.04393747751637468,
        "watched_globs": 0.04393747751637468,
        "skip": 0.04393747751637468,
        "unrelated": 0.04393747751637468,
        "diffs": 0.04393747751637468,
        "substitutes": 0.04393747751637468,
        "fail": 0.04393747751637468,
        "safe": 0.04393747751637468,
        "stubs": 0.04393747751637468,
        "when": 0.04393747751637468,
        "generation": 0.04393747751637468,
        "fails": 0.04393747751637468,
        "dry": 0.08787495503274936,
        "run": 0.13181243254912403,
        "previews": 0.04393747751637468,
        "records": 0.04393747751637468,
        "scorecards": 0.04393747751637468,
        "each": 0.04393747751637468,
        "under": 0.04393747751637468,
        "walks": 0.04393747751637468,
        "builds": 0.04393747751637468,
        "normalized": 0.04393747751637468,
        "manifest": 0.04393747751637468,
        "files": 0.08787495503274936,
        "sizes": 0.04393747751637468,
        "tags": 0.04393747751637468,
        "path": 0.04393747751637468,
        "roles": 0.04393747751637468,
        "src": 0.04393747751637468,
        "test": 0.08787495503274936,
        "examples": 0.04393747751637468,
        "dependency": 0.04393747751637468,
        "manifests": 0.04393747751637468,
        "e": 0.04393747751637468,
        "g": 0.04393747751637468,
        "pom": 0.04393747751637468,
        "xml": 0.04393747751637468,
        "gradle": 0.04393747751637468,
        "package": 0.04393747751637468,
        "json": 0.13181243254912403,
        "requirements": 0.04393747751637468,
        "txt": 0.04393747751637468,
        "pyproject": 0.04393747751637468,
        "toml": 0.08787495503274936,
        "go": 0.04393747751637468,
        "mod": 0.04393747751637468,
        "cargo": 0.04393747751637468,
        "gemfile": 0.04393747751637468,
        "composer": 0.04393747751637468,
        "entrypoints": 0.04393747751637468,
        "clis": 0.04393747751637468,
        "services": 0.04393747751637468,
        "coverage": 0.04393747751637468,
        "if": 0.04393747751637468,
        "available": 0.04393747751637468,
        "stores": 0.04393747751637468,
        "per": 0.04393747751637468,
        "index": 0.04393747751637468,
        "speed": 0.04393747751637468,
        "future": 0.04393747751637468
      },
      "text": "# Intelligent README Generator \u2014 Architecture & Spec (Python, Local LLM) ## 1) Purpose & Scope Build a Python-based system that **analyzes a Git repository** (structure, code, dependencies), then **generates and maintains a high-quality README.md** using a **local LLM**. It initializes repos with no docs and **keeps docs up to date** on commits/PRs. Supports **multiple languages/project types** via analyzers. Non-goals (for the POC): multi-repo orchestration, full website docs, API reference extraction (beyond README summaries), cloud LLMs. --- ## 2) High-Level Architecture (at a glance) ``` \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 Git Events \u2502 Event Sources \u2502 CLI commands, Git hooks, Webhooks/CI (commit/PR) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Orchestr \u2502 (Async task graph) \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Repo Scanner\u2502 \u2502 Analyzers \u2502 \u2502 Doc Store \u2502 \u2502 + Indexer \u2502 \u2502 (Language, \u2502 \u2502 (Artifacts, \u2502 \u2502 (Git, FS) \u2502 \u2502 Build, Deps) \u2502 \u2502 Cache, \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 Versions) \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 Knowledge Graph \u2502 \u2502 \u2502 \u2502 & Embeddings \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Prompt Builder \u2502 (Templates + RAG) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Local LLM Runner \u2502 (llama.cpp/Ollama) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 Post-Processor \u2502 (lint, ToC, badges, links) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Git Publisher \u2502 (branch/PR/commit) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 ``` --- ## 3) Components & Responsibilities ### 3.1 Orchestrator * Coordinates end-to-end pipelines (init, update, regenerate). * Computes *change impact* from Git diff; decides whether to regenerate full README or patch sections. * Schedules tasks and caches intermediate results. * Emits structured logs (info by default, debug with `--verbose`), respects `.docgen.yml` `ci.watched_globs` to skip unrelated diffs, and substitutes fail-safe stubs when generation fails. * Supports dry-run previews (`docgen update --dry-run`) and records scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#1",
      "vector": {
        "scorecards": 0.03721614637823934,
        "for": 0.18608073189119673,
        "each": 0.07443229275647868,
        "run": 0.07443229275647868,
        "under": 0.07443229275647868,
        "docgen": 0.11164843913471803,
        "3": 0.22329687826943606,
        "2": 0.03721614637823934,
        "repo": 0.18608073189119673,
        "scanner": 0.03721614637823934,
        "indexer": 0.03721614637823934,
        "walks": 0.03721614637823934,
        "builds": 0.03721614637823934,
        "normalized": 0.03721614637823934,
        "manifest": 0.03721614637823934,
        "files": 0.11164843913471803,
        "sizes": 0.03721614637823934,
        "language": 0.07443229275647868,
        "tags": 0.03721614637823934,
        "path": 0.03721614637823934,
        "roles": 0.03721614637823934,
        "src": 0.03721614637823934,
        "test": 0.11164843913471803,
        "docs": 0.11164843913471803,
        "examples": 0.03721614637823934,
        "build": 0.14886458551295736,
        "dependency": 0.07443229275647868,
        "manifests": 0.03721614637823934,
        "e": 0.11164843913471803,
        "g": 0.11164843913471803,
        "pom": 0.03721614637823934,
        "xml": 0.03721614637823934,
        "gradle": 0.07443229275647868,
        "package": 0.03721614637823934,
        "json": 0.11164843913471803,
        "requirements": 0.03721614637823934,
        "txt": 0.03721614637823934,
        "pyproject": 0.03721614637823934,
        "toml": 0.07443229275647868,
        "go": 0.11164843913471803,
        "mod": 0.03721614637823934,
        "cargo": 0.07443229275647868,
        "gemfile": 0.03721614637823934,
        "composer": 0.03721614637823934,
        "entrypoints": 0.11164843913471803,
        "clis": 0.03721614637823934,
        "services": 0.11164843913471803,
        "coverage": 0.03721614637823934,
        "artifacts": 0.03721614637823934,
        "if": 0.03721614637823934,
        "available": 0.03721614637823934,
        "stores": 0.03721614637823934,
        "a": 0.03721614637823934,
        "per": 0.07443229275647868,
        "index": 0.03721614637823934,
        "to": 0.11164843913471803,
        "speed": 0.03721614637823934,
        "future": 0.03721614637823934,
        "runs": 0.03721614637823934,
        "analyzers": 0.22329687826943606,
        "plugin": 0.03721614637823934,
        "based": 0.03721614637823934,
        "detect": 0.03721614637823934,
        "idioms": 0.03721614637823934,
        "frameworks": 0.03721614637823934,
        "spring": 0.07443229275647868,
        "boot": 0.07443229275647868,
        "fastapi": 0.07443229275647868,
        "node": 0.07443229275647868,
        "express": 0.03721614637823934,
        "react": 0.03721614637823934,
        "next": 0.03721614637823934,
        "js": 0.03721614637823934,
        "http": 0.14886458551295736,
        "rust": 0.03721614637823934,
        "bin": 0.03721614637823934,
        "lib": 0.03721614637823934,
        "maven": 0.03721614637823934,
        "setuptools": 0.03721614637823934,
        "poetry": 0.03721614637823934,
        "npm": 0.03721614637823934,
        "pnpm": 0.03721614637823934,
        "yarn": 0.03721614637823934,
        "extract": 0.03721614637823934,
        "top": 0.07443229275647868,
        "level": 0.03721614637823934,
        "libs": 0.03721614637823934,
        "notable": 0.03721614637823934,
        "transitive": 0.03721614637823934,
        "categories": 0.03721614637823934,
        "entrypoint": 0.03721614637823934,
        "infer": 0.03721614637823934,
        "commands": 0.03721614637823934,
        "django": 0.03721614637823934,
        "scripts": 0.07443229275647868,
        "pattern": 0.03721614637823934,
        "monorepo": 0.03721614637823934,
        "layout": 0.03721614637823934,
        "ci": 0.03721614637823934,
        "cd": 0.03721614637823934,
        "containerization": 0.03721614637823934,
        "k8s": 0.03721614637823934,
        "heuristics": 0.03721614637823934,
        "structure": 0.03721614637823934,
        "analyzer": 0.07443229275647868,
        "module": 0.03721614637823934,
        "topology": 0.03721614637823934,
        "detected": 0.11164843913471803,
        "entities": 0.07443229275647868,
        "dtos": 0.03721614637823934,
        "api": 0.11164843913471803,
        "endpoint": 0.07443229275647868,
        "sequences": 0.03721614637823934,
        "service": 0.03721614637823934,
        "interactions": 0.03721614637823934,
        "returns": 0.03721614637823934,
        "signals": 0.07443229275647868,
        "key": 0.07443229275647868,
        "facts": 0.03721614637823934,
        "the": 0.11164843913471803,
        "knowledge": 0.07443229275647868,
        "graph": 0.11164843913471803,
        "4": 0.03721614637823934,
        "embeddings": 0.07443229275647868,
        "rag": 0.03721614637823934,
        "of": 0.07443229275647868,
        "modules": 0.03721614637823934,
        "packages": 0.03721614637823934,
        "configs": 0.03721614637823934,
        "tests": 0.03721614637823934,
        "lightweight": 0.03721614637823934,
        "embedding": 0.03721614637823934,
        "store": 0.03721614637823934,
        "faiss": 0.03721614637823934,
        "in": 0.03721614637823934,
        "memory": 0.03721614637823934,
        "chunks": 0.03721614637823934,
        "code": 0.03721614637823934,
        "comments": 0.03721614637823934,
        "readme": 0.07443229275647868,
        "fragments": 0.03721614637823934,
        "changelog": 0.03721614637823934,
        "issues": 0.03721614637823934,
        "optional": 0.03721614637823934,
        "commit": 0.03721614637823934,
        "messages": 0.07443229275647868,
        "provides": 0.03721614637823934,
        "context": 0.07443229275647868,
        "retrieval": 0.03721614637823934,
        "prompt": 0.07443229275647868,
        "building": 0.03721614637823934,
        "k": 0.03721614637823934,
        "by": 0.03721614637823934,
        "section": 0.11164843913471803,
        "and": 0.2605130246476754,
        "persists": 0.03721614637823934,
        "refreshing": 0.03721614637823934,
        "only": 0.03721614637823934,
        "whose": 0.03721614637823934,
        "hashes": 0.03721614637823934,
        "changed": 0.03721614637823934,
        "5": 0.03721614637823934,
        "builder": 0.03721614637823934,
        "aware": 0.03721614637823934,
        "jinja2": 0.03721614637823934,
        "templates": 0.03721614637823934,
        "with": 0.11164843913471803,
        "guardrails": 0.03721614637823934,
        "project": 0.03721614637823934,
        "intro": 0.03721614637823934,
        "features": 0.03721614637823934,
        "architecture": 0.03721614637823934,
        "overview": 0.03721614637823934,
        "quick": 0.07443229275647868,
        "start": 0.07443229275647868,
        "configuration": 0.03721614637823934,
        "deployment": 0.03721614637823934,
        "troubleshooting": 0.03721614637823934,
        "faq": 0.03721614637823934,
        "roadmap": 0.03721614637823934,
        "contribution": 0.03721614637823934,
        "license": 0.03721614637823934,
        "badges": 0.03721614637823934,
        "dynamically": 0.03721614637823934,
        "injects": 0.07443229275647868,
        "retrieved": 0.03721614637823934,
        "produces": 0.03721614637823934,
        "llm": 0.07443229275647868,
        "ready": 0.03721614637823934,
        "structured": 0.07443229275647868,
        "prompts": 0.03721614637823934,
        "system": 0.03721614637823934,
        "user": 0.03721614637823934,
        "token": 0.03721614637823934,
        "budgets": 0.03721614637823934,
        "honours": 0.03721614637823934,
        "style": 0.07443229275647868,
        "presets": 0.03721614637823934,
        "concise": 0.03721614637823934,
        "trims": 0.03721614637823934,
        "list": 0.03721614637823934,
        "heavy": 0.03721614637823934,
        "sections": 0.03721614637823934,
        "comprehensive": 0.03721614637823934,
        "keeps": 0.03721614637823934,
        "full": 0.03721614637823934,
        "detail": 0.03721614637823934,
        "infrastructure": 0.03721614637823934,
        "patterns": 0.03721614637823934,
        "into": 0.03721614637823934,
        "guidance": 0.03721614637823934,
        "uvicorn": 0.03721614637823934,
        "docker": 0.11164843913471803,
        "compose": 0.03721614637823934,
        "up": 0.03721614637823934,
        "generates": 0.03721614637823934,
        "mermaid": 0.03721614637823934,
        "sequence": 0.03721614637823934,
        "diagrams": 0.03721614637823934,
        "highlighting": 0.03721614637823934,
        "request": 0.03721614637823934,
        "flow": 0.03721614637823934,
        "across": 0.03721614637823934,
        "when": 0.03721614637823934,
        "endpoints": 0.03721614637823934,
        "are": 0.03721614637823934,
        "6": 0.03721614637823934,
        "local": 0.03721614637823934,
        "runner": 0.11164843913471803,
        "pluggable": 0.03721614637823934,
        "runtime": 0.03721614637823934,
        "that": 0.03721614637823934,
        "prefers": 0.03721614637823934,
        "model": 0.07443229275647868,
        "host": 0.03721614637823934,
        "localhost": 0.03721614637823934,
        "12434": 0.03721614637823934,
        "engines": 0.07443229275647868,
        "v1": 0.07443229275647868,
        "container": 0.03721614637823934,
        "internal": 0.03721614637823934,
        "environment": 0.03721614637823934,
        "overrides": 0.03721614637823934,
        "an": 0.03721614637823934,
        "ollama": 0.03721614637823934,
        "cli": 0.03721614637823934,
        "fallback": 0.03721614637823934,
        "defaults": 0.03721614637823934,
        "ai": 0.03721614637823934,
        "smollm2": 0.03721614637823934,
        "360m": 0.03721614637823934,
        "q4_k_m": 0.03721614637823934,
        "but": 0.03721614637823934,
        "respects": 0.03721614637823934,
        "yml": 0.03721614637823934,
        "openai": 0.03721614637823934,
        "compatible": 0.03721614637823934,
        "env": 0.03721614637823934,
        "vars": 0.03721614637823934,
        "alternate": 0.03721614637823934,
        "weights": 0.03721614637823934,
        "keys": 0.03721614637823934,
        "supports": 0.03721614637823934,
        "function": 0.03721614637823934,
        "calling": 0.03721614637823934,
        "outputs": 0.03721614637823934
      },
      "text": "scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future runs. ### 3.3 Analyzers (Plugin-based) * **Language analyzers** (detect idioms, entrypoints, frameworks: Spring Boot, FastAPI, Node/Express, React, Next.js, Go HTTP, Rust bin/lib). * **Build analyzers** (Maven/Gradle, setuptools/Poetry, npm/pnpm/yarn, Go, Cargo). * **Dependency analyzers** (extract top-level libs & notable transitive categories). * **Entrypoint analyzers** (infer run commands for FastAPI, Django, Spring Boot, Node scripts). * **Pattern analyzers** (monorepo layout, CI/CD, containerization/K8s heuristics). * **Structure analyzer** (module topology, detected entities/DTOs, API endpoint sequences, service interactions). * Each analyzer returns **Signals** (key facts) to the knowledge graph. ### 3.4 Knowledge Graph & Embeddings (RAG) * Graph of Repo entities: modules, packages, services, scripts, configs, tests, docs. * Lightweight embedding store (e.g., `faiss`/in-memory) of **chunks**: code comments, README fragments, `docs/`, `CHANGELOG`, issues (optional), commit messages. * Provides **context retrieval** for prompt building (top-k by section) and persists embeddings under `.docgen/`, refreshing only the files whose hashes changed. ### 3.5 Prompt Builder * **Section-aware** Jinja2 templates with **guardrails**: * Project intro, key features, architecture overview, quick start, configuration, build/test, deployment, troubleshooting, FAQ, roadmap, contribution, license, badges. * Dynamically injects repo signals and retrieved context per section. * Produces **LLM-ready structured prompts** (system + user messages) with token budgets and honours `readme.style` presets (`concise` trims list-heavy sections, `comprehensive` keeps full detail). * Injects detected entrypoints and infrastructure patterns into Quick Start guidance (e.g., `uvicorn ...`, `docker compose up`). * Generates Mermaid sequence diagrams highlighting request flow across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#2",
      "vector": {
        "across": 0.028060676663315687,
        "services": 0.028060676663315687,
        "when": 0.08418202998994706,
        "api": 0.056121353326631374,
        "endpoints": 0.028060676663315687,
        "are": 0.056121353326631374,
        "detected": 0.056121353326631374,
        "3": 0.11224270665326275,
        "6": 0.028060676663315687,
        "local": 0.056121353326631374,
        "llm": 0.028060676663315687,
        "runner": 0.08418202998994706,
        "pluggable": 0.028060676663315687,
        "runtime": 0.028060676663315687,
        "that": 0.028060676663315687,
        "prefers": 0.028060676663315687,
        "the": 0.028060676663315687,
        "docker": 0.056121353326631374,
        "model": 0.08418202998994706,
        "http": 0.08418202998994706,
        "endpoint": 0.028060676663315687,
        "host": 0.028060676663315687,
        "localhost": 0.028060676663315687,
        "12434": 0.028060676663315687,
        "engines": 0.056121353326631374,
        "v1": 0.056121353326631374,
        "container": 0.028060676663315687,
        "internal": 0.08418202998994706,
        "with": 0.08418202998994706,
        "environment": 0.028060676663315687,
        "overrides": 0.028060676663315687,
        "and": 0.36478879662310393,
        "an": 0.028060676663315687,
        "ollama": 0.028060676663315687,
        "cli": 0.056121353326631374,
        "fallback": 0.028060676663315687,
        "defaults": 0.056121353326631374,
        "to": 0.08418202998994706,
        "ai": 0.028060676663315687,
        "smollm2": 0.028060676663315687,
        "360m": 0.028060676663315687,
        "q4_k_m": 0.028060676663315687,
        "but": 0.028060676663315687,
        "respects": 0.028060676663315687,
        "docgen": 0.11224270665326275,
        "yml": 0.028060676663315687,
        "openai": 0.028060676663315687,
        "compatible": 0.028060676663315687,
        "env": 0.028060676663315687,
        "vars": 0.028060676663315687,
        "for": 0.08418202998994706,
        "alternate": 0.028060676663315687,
        "weights": 0.028060676663315687,
        "keys": 0.028060676663315687,
        "supports": 0.056121353326631374,
        "function": 0.028060676663315687,
        "calling": 0.028060676663315687,
        "style": 0.056121353326631374,
        "structured": 0.028060676663315687,
        "outputs": 0.056121353326631374,
        "available": 0.028060676663315687,
        "streaming": 0.028060676663315687,
        "decode": 0.028060676663315687,
        "stop": 0.028060676663315687,
        "tokens": 0.028060676663315687,
        "section": 0.056121353326631374,
        "by": 0.056121353326631374,
        "generation": 0.028060676663315687,
        "stay": 0.056121353326631374,
        "within": 0.028060676663315687,
        "context": 0.028060676663315687,
        "limits": 0.028060676663315687,
        "validates": 0.056121353326631374,
        "configuration": 0.028060676663315687,
        "ensure": 0.028060676663315687,
        "runners": 0.028060676663315687,
        "loopback": 0.028060676663315687,
        "hosts": 0.028060676663315687,
        "only": 0.056121353326631374,
        "7": 0.028060676663315687,
        "post": 0.056121353326631374,
        "processor": 0.028060676663315687,
        "lints": 0.028060676663315687,
        "markdown": 0.028060676663315687,
        "builds": 0.028060676663315687,
        "toc": 0.028060676663315687,
        "adds": 0.056121353326631374,
        "shields": 0.028060676663315687,
        "badges": 0.056121353326631374,
        "normalizes": 0.028060676663315687,
        "heading": 0.028060676663315687,
        "hierarchy": 0.028060676663315687,
        "enforces": 0.028060676663315687,
        "guide": 0.028060676663315687,
        "readme": 0.08418202998994706,
        "contract": 0.028060676663315687,
        "required": 0.056121353326631374,
        "sections": 0.11224270665326275,
        "links": 0.028060676663315687,
        "relative": 0.028060676663315687,
        "absolute": 0.028060676663315687,
        "code": 0.028060676663315687,
        "block": 0.028060676663315687,
        "languages": 0.028060676663315687,
        "line": 0.028060676663315687,
        "length": 0.028060676663315687,
        "computes": 0.028060676663315687,
        "diff": 0.028060676663315687,
        "aware": 0.028060676663315687,
        "updates": 0.056121353326631374,
        "modifies": 0.028060676663315687,
        "impacted": 0.028060676663315687,
        "changes": 0.056121353326631374,
        "persists": 0.028060676663315687,
        "a": 0.08418202998994706,
        "scorecard": 0.056121353326631374,
        "json": 0.056121353326631374,
        "capturing": 0.028060676663315687,
        "coverage": 0.056121353326631374,
        "quick": 0.028060676663315687,
        "start": 0.028060676663315687,
        "health": 0.028060676663315687,
        "link": 0.056121353326631374,
        "results": 0.028060676663315687,
        "build": 0.056121353326631374,
        "license": 0.028060676663315687,
        "safe": 0.028060676663315687,
        "reports": 0.028060676663315687,
        "warnings": 0.028060676663315687,
        "during": 0.028060676663315687,
        "processing": 0.028060676663315687,
        "8": 0.028060676663315687,
        "doc": 0.028060676663315687,
        "store": 0.028060676663315687,
        "artifacts": 0.028060676663315687,
        "versions": 0.028060676663315687,
        "keeps": 0.028060676663315687,
        "generated": 0.028060676663315687,
        "drafts": 0.028060676663315687,
        "logs": 0.028060676663315687,
        "prompts": 0.028060676663315687,
        "inputs": 0.028060676663315687,
        "diffs": 0.028060676663315687,
        "under": 0.028060676663315687,
        "per": 0.028060676663315687,
        "repo": 0.028060676663315687,
        "rollback": 0.028060676663315687,
        "regression": 0.028060676663315687,
        "testing": 0.028060676663315687,
        "via": 0.028060676663315687,
        "golden": 0.028060676663315687,
        "readmes": 0.028060676663315687,
        "stores": 0.028060676663315687,
        "embedding": 0.028060676663315687,
        "cache": 0.028060676663315687,
        "embeddings": 0.028060676663315687,
        "scorecards": 0.028060676663315687,
        "so": 0.028060676663315687,
        "subsequent": 0.028060676663315687,
        "runs": 0.028060676663315687,
        "incremental": 0.028060676663315687,
        "9": 0.028060676663315687,
        "git": 0.028060676663315687,
        "publisher": 0.028060676663315687,
        "creates": 0.028060676663315687,
        "branch": 0.028060676663315687,
        "e": 0.056121353326631374,
        "g": 0.056121353326631374,
        "update": 0.028060676663315687,
        "yyyymmdd": 0.028060676663315687,
        "pr": 0.056121353326631374,
        "body": 0.028060676663315687,
        "explains": 0.028060676663315687,
        "what": 0.028060676663315687,
        "were": 0.028060676663315687,
        "updated": 0.028060676663315687,
        "can": 0.028060676663315687,
        "commit": 0.028060676663315687,
        "directly": 0.028060676663315687,
        "configurable": 0.028060676663315687,
        "on": 0.028060676663315687,
        "init": 0.028060676663315687,
        "empty": 0.028060676663315687,
        "repos": 0.028060676663315687,
        "applies": 0.028060676663315687,
        "labels": 0.028060676663315687,
        "docs": 0.056121353326631374,
        "auto": 0.028060676663315687,
        "existing": 0.028060676663315687,
        "prs": 0.028060676663315687,
        "configured": 0.028060676663315687,
        "4": 0.028060676663315687,
        "data": 0.028060676663315687,
        "python": 0.056121353326631374,
        "pydantic": 0.028060676663315687,
        "dataclasses": 0.056121353326631374,
        "from": 0.056121353326631374,
        "import": 0.056121353326631374,
        "dataclass": 0.2244854133065255,
        "typing": 0.028060676663315687,
        "list": 0.11224270665326275,
        "dict": 0.14030338331657843,
        "optional": 0.056121353326631374,
        "class": 0.1964247366432098,
        "filemeta": 0.056121353326631374,
        "path": 0.028060676663315687,
        "str": 0.5892742099296294,
        "size": 0.028060676663315687,
        "int": 0.028060676663315687,
        "language": 0.028060676663315687,
        "role": 0.028060676663315687,
        "src": 0.028060676663315687,
        "test": 0.056121353326631374,
        "config": 0.028060676663315687,
        "script": 0.028060676663315687,
        "infra": 0.028060676663315687,
        "other": 0.028060676663315687,
        "hash": 0.028060676663315687,
        "repomanifest": 0.056121353326631374,
        "root": 0.028060676663315687,
        "files": 0.028060676663315687,
        "detectors": 0.028060676663315687,
        "build_system": 0.028060676663315687,
        "maven": 0.028060676663315687,
        "framework": 0.056121353326631374,
        "spring": 0.028060676663315687,
        "boot": 0.028060676663315687,
        "dependency_files": 0.028060676663315687,
        "pom": 0.028060676663315687,
        "xml": 0.028060676663315687,
        "requirements": 0.028060676663315687,
        "txt": 0.028060676663315687,
        "signal": 0.056121353326631374,
        "kind": 0.028060676663315687,
        "service": 0.028060676663315687,
        "db": 0.028060676663315687,
        "queue": 0.028060676663315687,
        "dep": 0.028060676663315687,
        "entrypoint": 0.028060676663315687,
        "name": 0.028060676663315687,
        "detail": 0.028060676663315687,
        "analysisresult": 0.028060676663315687,
        "manifest": 0.028060676663315687,
        "signals": 0.028060676663315687,
        "embedding_index_path": 0.028060676663315687,
        "sectionspec": 0.028060676663315687,
        "key": 0.028060676663315687,
        "intro": 0.028060676663315687,
        "features": 0.028060676663315687,
        "arch": 0.028060676663315687,
        "quickstart": 0.028060676663315687,
        "bool": 0.028060676663315687,
        "sources": 0.028060676663315687,
        "preferred": 0.028060676663315687,
        "retrieval": 0.028060676663315687,
        "tags": 0.028060676663315687,
        "template_name": 0.028060676663315687,
        "readmedraft": 0.028060676663315687,
        "full_markdown": 0.028060676663315687,
        "updateplan": 0.028060676663315687,
        "strategy": 0.028060676663315687
      },
      "text": "across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs when available. * Streaming decode with stop tokens; **section-by-section** generation to stay within context limits. * Validates configuration to ensure runners stay local (loopback/`*.internal` hosts only). ### 3.7 Post-Processor * Lints Markdown, builds ToC, adds shields/badges, normalizes heading hierarchy. * Enforces internal style guide and **README contract** (required sections). * Validates links (relative/absolute), code block languages, and line length. * Computes **diff-aware updates**: only modifies sections impacted by changes. * Persists a README scorecard (`.docgen/scorecard.json`) capturing coverage, quick start health, and link results. * Adds build/coverage/license badges with safe defaults and reports link warnings during post-processing. ### 3.8 Doc Store (Artifacts & Versions) * Keeps generated drafts, logs, prompts, inputs/outputs, and diffs under `.docgen/` per repo. * Supports rollback and regression testing via \u201cgolden\u201d READMEs. * Stores embedding cache (`embeddings.json`) and scorecards so subsequent runs are incremental. ### 3.9 Git Publisher * Creates a branch (e.g., `docgen/readme-update-YYYYMMDD`) and a PR. * PR body explains detected changes and what sections were updated. * Can commit directly (configurable) on init for empty repos. * Applies labels (e.g., `docs:auto`) and updates existing PRs when configured. --- ## 4) Data Model (Python `pydantic`/`dataclasses`) ```python from dataclasses import dataclass from typing import List, Dict, Optional @dataclass class FileMeta: path: str size: int language: Optional[str] role: str # src|test|docs|config|build|script|infra|other hash: str @dataclass class RepoManifest: root: str files: List[FileMeta] detectors: Dict[str, str] # {\"build_system\": \"maven\", \"framework\":\"spring-boot\", ...} dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str #",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#3",
      "vector": {
        "dependency_files": 0.03280893574623933,
        "dict": 0.13123574298495733,
        "str": 0.5577519076860686,
        "pom": 0.098426807238718,
        "xml": 0.098426807238718,
        "requirements": 0.06561787149247866,
        "txt": 0.06561787149247866,
        "dataclass": 0.16404467873119666,
        "class": 0.16404467873119666,
        "signal": 0.06561787149247866,
        "kind": 0.03280893574623933,
        "framework": 0.03280893574623933,
        "service": 0.03280893574623933,
        "cli": 0.03280893574623933,
        "db": 0.03280893574623933,
        "queue": 0.03280893574623933,
        "dep": 0.03280893574623933,
        "entrypoint": 0.03280893574623933,
        "test": 0.06561787149247866,
        "name": 0.03280893574623933,
        "detail": 0.03280893574623933,
        "analysisresult": 0.03280893574623933,
        "manifest": 0.06561787149247866,
        "repomanifest": 0.03280893574623933,
        "signals": 0.06561787149247866,
        "list": 0.098426807238718,
        "embedding_index_path": 0.03280893574623933,
        "sectionspec": 0.03280893574623933,
        "key": 0.03280893574623933,
        "intro": 0.06561787149247866,
        "features": 0.098426807238718,
        "arch": 0.03280893574623933,
        "quickstart": 0.06561787149247866,
        "required": 0.03280893574623933,
        "bool": 0.03280893574623933,
        "sources": 0.03280893574623933,
        "preferred": 0.03280893574623933,
        "retrieval": 0.06561787149247866,
        "tags": 0.03280893574623933,
        "template_name": 0.03280893574623933,
        "readmedraft": 0.03280893574623933,
        "sections": 0.13123574298495733,
        "full_markdown": 0.03280893574623933,
        "updateplan": 0.06561787149247866,
        "strategy": 0.03280893574623933,
        "full": 0.03280893574623933,
        "patch": 0.06561787149247866,
        "changed_sections": 0.03280893574623933,
        "reasons": 0.03280893574623933,
        "section": 0.06561787149247866,
        "why": 0.03280893574623933,
        "5": 0.098426807238718,
        "configuration": 0.06561787149247866,
        "docgen": 0.196853614477436,
        "yml": 0.06561787149247866,
        "at": 0.03280893574623933,
        "repo": 0.06561787149247866,
        "root": 0.06561787149247866,
        "yaml": 0.03280893574623933,
        "llm": 0.03280893574623933,
        "runner": 0.03280893574623933,
        "ollama": 0.03280893574623933,
        "or": 0.06561787149247866,
        "llama": 0.03280893574623933,
        "cpp": 0.03280893574623933,
        "model": 0.03280893574623933,
        "llama3": 0.03280893574623933,
        "8b": 0.03280893574623933,
        "instruct": 0.03280893574623933,
        "example": 0.03280893574623933,
        "local": 0.03280893574623933,
        "only": 0.098426807238718,
        "max_tokens": 0.03280893574623933,
        "2048": 0.03280893574623933,
        "temperature": 0.03280893574623933,
        "0": 0.03280893574623933,
        "2": 0.13123574298495733,
        "readme": 0.196853614477436,
        "style": 0.03280893574623933,
        "concise": 0.03280893574623933,
        "comprehensive": 0.03280893574623933,
        "template_pack": 0.06561787149247866,
        "enterprise": 0.03280893574623933,
        "optional": 0.03280893574623933,
        "bundle": 0.03280893574623933,
        "shipped": 0.03280893574623933,
        "with": 0.06561787149247866,
        "required_sections": 0.03280893574623933,
        "architecture": 0.06561787149247866,
        "build_and_test": 0.03280893574623933,
        "deployment": 0.06561787149247866,
        "troubleshooting": 0.03280893574623933,
        "faq": 0.03280893574623933,
        "license": 0.03280893574623933,
        "publish": 0.06561787149247866,
        "mode": 0.03280893574623933,
        "pr": 0.13123574298495733,
        "commit": 0.098426807238718,
        "dry": 0.03280893574623933,
        "run": 0.03280893574623933,
        "branch_prefix": 0.03280893574623933,
        "labels": 0.03280893574623933,
        "docs": 0.06561787149247866,
        "auto": 0.03280893574623933,
        "update_existing": 0.03280893574623933,
        "true": 0.03280893574623933,
        "refresh": 0.03280893574623933,
        "an": 0.03280893574623933,
        "existing": 0.03280893574623933,
        "instead": 0.03280893574623933,
        "of": 0.03280893574623933,
        "opening": 0.03280893574623933,
        "a": 0.06561787149247866,
        "new": 0.03280893574623933,
        "one": 0.03280893574623933,
        "analyzers": 0.03280893574623933,
        "enabled": 0.03280893574623933,
        "language": 0.03280893574623933,
        "build": 0.196853614477436,
        "dependencies": 0.03280893574623933,
        "patterns": 0.03280893574623933,
        "exclude_paths": 0.03280893574623933,
        "git": 0.06561787149247866,
        "node_modules": 0.03280893574623933,
        "dist": 0.03280893574623933,
        "ci": 0.098426807238718,
        "update": 0.06561787149247866,
        "if": 0.098426807238718,
        "these": 0.03280893574623933,
        "paths": 0.03280893574623933,
        "change": 0.03280893574623933,
        "watched_globs": 0.06561787149247866,
        "src": 0.06561787149247866,
        "app": 0.03280893574623933,
        "cmd": 0.03280893574623933,
        "gradle": 0.06561787149247866,
        "package": 0.03280893574623933,
        "json": 0.03280893574623933,
        "pyproject": 0.03280893574623933,
        "toml": 0.03280893574623933,
        "dockerfile": 0.06561787149247866,
        "no": 0.06561787149247866,
        "templates_dir": 0.03280893574623933,
        "is": 0.03280893574623933,
        "provided": 0.03280893574623933,
        "automatically": 0.03280893574623933,
        "picks": 0.03280893574623933,
        "up": 0.03280893574623933,
        "templates": 0.06561787149247866,
        "bundles": 0.03280893574623933,
        "in": 0.06561787149247866,
        "the": 0.03280893574623933,
        "repository": 0.03280893574623933,
        "and": 0.03280893574623933,
        "supports": 0.03280893574623933,
        "built": 0.03280893574623933,
        "template": 0.03280893574623933,
        "packs": 0.03280893574623933,
        "via": 0.06561787149247866,
        "6": 0.098426807238718,
        "workflows": 0.03280893574623933,
        "1": 0.098426807238718,
        "initialization": 0.03280893574623933,
        "without": 0.03280893574623933,
        "scan": 0.03280893574623933,
        "analyze": 0.03280893574623933,
        "embeddings": 0.03280893574623933,
        "prompt": 0.03280893574623933,
        "default": 0.03280893574623933,
        "include": 0.03280893574623933,
        "getting": 0.03280893574623933,
        "started": 0.03280893574623933,
        "suggestions": 0.03280893574623933,
        "3": 0.06561787149247866,
        "generate": 0.06561787149247866,
        "sequentially": 0.03280893574623933,
        "streaming": 0.03280893574623933,
        "4": 0.06561787149247866,
        "post": 0.03280893574623933,
        "process": 0.03280893574623933,
        "toc": 0.03280893574623933,
        "badges": 0.03280893574623933,
        "status": 0.03280893574623933,
        "placeholder": 0.03280893574623933,
        "lint": 0.03280893574623933,
        "direct": 0.03280893574623933,
        "md": 0.03280893574623933,
        "artifacts": 0.03280893574623933,
        "on": 0.03280893574623933,
        "detect": 0.03280893574623933,
        "changes": 0.03280893574623933,
        "diff": 0.03280893574623933,
        "map": 0.03280893574623933,
        "files": 0.03280893574623933,
        "to": 0.098426807238718,
        "using": 0.03280893574623933,
        "rules": 0.03280893574623933,
        "matrix": 0.03280893574623933,
        "quick": 0.03280893574623933,
        "start": 0.03280893574623933,
        "k8s": 0.03280893574623933,
        "entrypoints": 0.03280893574623933,
        "decide": 0.03280893574623933,
        "impacted": 0.03280893574623933,
        "regenerate": 0.03280893574623933,
        "those": 0.03280893574623933,
        "skip": 0.03280893574623933,
        "changed": 0.03280893574623933,
        "file": 0.03280893574623933,
        "matches": 0.03280893574623933,
        "allows": 0.03280893574623933,
        "avoid": 0.03280893574623933,
        "unnecessary": 0.03280893574623933,
        "runs": 0.03280893574623933,
        "rag": 0.03280893574623933,
        "fetch": 0.03280893574623933,
        "top": 0.03280893574623933,
        "k": 0.03280893574623933,
        "chunks": 0.03280893574623933,
        "relevant": 0.03280893574623933,
        "each": 0.03280893574623933
      },
      "text": "dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str # \"full\"|\"patch\" changed_sections: List[str] reasons: Dict[str, str] # section->why ``` --- ## 5) Configuration (`.docgen.yml` at repo root) ```yaml llm: runner: \"ollama\" # or \"llama.cpp\" model: \"llama3:8b-instruct\" # example; local only max_tokens: 2048 temperature: 0.2 readme: style: \"concise\" # or \"comprehensive\" template_pack: \"enterprise\" # optional bundle shipped with docgen required_sections: - intro - features - architecture - quickstart - configuration - build_and_test - deployment - troubleshooting - faq - license publish: mode: \"pr\" # \"commit\" | \"pr\" | \"dry-run\" branch_prefix: \"docgen/\" labels: - \"docs:auto\" update_existing: true # refresh an existing PR instead of opening a new one analyzers: enabled: - language - build - dependencies - patterns exclude_paths: - \".git/\" - \"node_modules/\" - \"dist/\" ci: # Only update README if these paths change watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"pyproject.toml\" - \"Dockerfile\" ``` > If no `readme.templates_dir` is provided, docgen automatically picks up `docs/templates/` bundles in the repository root and supports built-in template packs via `readme.template_pack`. --- ## 6) Workflows ### 6.1 Initialization (Repo without README) 1. **Scan & Analyze** \u2192 Manifest + Signals + Embeddings. 2. **Prompt Build** with default templates, include \u201cgetting started\u201d suggestions. 3. **Generate Sections** sequentially (streaming). 4. **Post-process** \u2192 ToC, badges (build status placeholder), lint. 5. **Publish**: direct commit `README.md` + `.docgen/` artifacts. ### 6.2 Update on Commit/PR 1. **Detect changes** via Git diff; map files to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate**",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#4",
      "vector": {
        "to": 0.146943671674129,
        "sections": 0.11020775375559676,
        "using": 0.03673591791853225,
        "a": 0.11020775375559676,
        "rules": 0.03673591791853225,
        "matrix": 0.03673591791853225,
        "pom": 0.03673591791853225,
        "xml": 0.03673591791853225,
        "build": 0.18367958959266126,
        "gradle": 0.0734718358370645,
        "test": 0.0734718358370645,
        "quick": 0.0734718358370645,
        "start": 0.0734718358370645,
        "dockerfile": 0.03673591791853225,
        "k8s": 0.0734718358370645,
        "deployment": 0.0734718358370645,
        "src": 0.03673591791853225,
        "entrypoints": 0.0734718358370645,
        "architecture": 0.0734718358370645,
        "features": 0.0734718358370645,
        "2": 0.0734718358370645,
        "decide": 0.03673591791853225,
        "updateplan": 0.03673591791853225,
        "patch": 0.03673591791853225,
        "impacted": 0.03673591791853225,
        "regenerate": 0.11020775375559676,
        "only": 0.0734718358370645,
        "those": 0.03673591791853225,
        "3": 0.0734718358370645,
        "skip": 0.03673591791853225,
        "if": 0.146943671674129,
        "no": 0.0734718358370645,
        "changed": 0.03673591791853225,
        "file": 0.0734718358370645,
        "matches": 0.03673591791853225,
        "docgen": 0.146943671674129,
        "yml": 0.03673591791853225,
        "ci": 0.0734718358370645,
        "watched_globs": 0.03673591791853225,
        "allows": 0.03673591791853225,
        "avoid": 0.03673591791853225,
        "unnecessary": 0.03673591791853225,
        "runs": 0.03673591791853225,
        "4": 0.03673591791853225,
        "rag": 0.11020775375559676,
        "retrieval": 0.03673591791853225,
        "fetch": 0.03673591791853225,
        "top": 0.0734718358370645,
        "k": 0.0734718358370645,
        "chunks": 0.0734718358370645,
        "relevant": 0.03673591791853225,
        "each": 0.0734718358370645,
        "section": 0.18367958959266126,
        "5": 0.0734718358370645,
        "generate": 0.03673591791853225,
        "post": 0.0734718358370645,
        "process": 0.03673591791853225,
        "open": 0.03673591791853225,
        "pr": 0.03673591791853225,
        "with": 0.03673591791853225,
        "summary": 0.03673591791853225,
        "of": 0.03673591791853225,
        "deltas": 0.03673591791853225,
        "6": 0.0734718358370645,
        "dry": 0.0734718358370645,
        "run": 0.0734718358370645,
        "support": 0.0734718358370645,
        "update": 0.03673591791853225,
        "computes": 0.03673591791853225,
        "diffs": 0.03673591791853225,
        "and": 0.0734718358370645,
        "scorecards": 0.03673591791853225,
        "without": 0.03673591791853225,
        "writing": 0.03673591791853225,
        "or": 0.11020775375559676,
        "publishing": 0.03673591791853225,
        "manual": 0.03673591791853225,
        "full": 0.03673591791853225,
        "intro": 0.0734718358370645,
        "arch": 0.03673591791853225,
        "7": 0.03673591791853225,
        "contract": 0.03673591791853225,
        "readme": 0.0734718358370645,
        "what": 0.03673591791853225,
        "why": 0.03673591791853225,
        "who": 0.03673591791853225,
        "it": 0.03673591791853225,
        "s": 0.03673591791853225,
        "for": 0.0734718358370645,
        "key": 0.03673591791853225,
        "bullets": 0.03673591791853225,
        "grounded": 0.03673591791853225,
        "in": 0.03673591791853225,
        "real": 0.03673591791853225,
        "repo": 0.0734718358370645,
        "signals": 0.0734718358370645,
        "overview": 0.03673591791853225,
        "diagram": 0.03673591791853225,
        "ascii": 0.03673591791853225,
        "components": 0.03673591791853225,
        "minimal": 0.03673591791853225,
        "commands": 0.146943671674129,
        "per": 0.0734718358370645,
        "system": 0.0734718358370645,
        "configuration": 0.0734718358370645,
        "env": 0.03673591791853225,
        "vars": 0.03673591791853225,
        "files": 0.03673591791853225,
        "examples": 0.03673591791853225,
        "coverage": 0.03673591791853225,
        "hint": 0.03673591791853225,
        "container": 0.03673591791853225,
        "instructions": 0.03673591791853225,
        "detected": 0.11020775375559676,
        "troubleshooting": 0.03673591791853225,
        "common": 0.03673591791853225,
        "failures": 0.03673591791853225,
        "faq": 0.03673591791853225,
        "10": 0.0734718358370645,
        "concise": 0.03673591791853225,
        "q": 0.03673591791853225,
        "contributing": 0.0734718358370645,
        "md": 0.03673591791853225,
        "absent": 0.03673591791853225,
        "license": 0.03673591791853225,
        "templated": 0.03673591791853225,
        "must": 0.03673591791853225,
        "be": 0.0734718358370645,
        "independently": 0.03673591791853225,
        "regenerable": 0.03673591791853225,
        "self": 0.03673591791853225,
        "contained": 0.03673591791853225,
        "8": 0.03673591791853225,
        "prompting": 0.03673591791853225,
        "strategy": 0.03673591791853225,
        "local": 0.0734718358370645,
        "llm": 0.03673591791853225,
        "message": 0.0734718358370645,
        "fixed": 0.03673591791853225,
        "guardrails": 0.03673591791853225,
        "you": 0.03673591791853225,
        "are": 0.03673591791853225,
        "senior": 0.03673591791853225,
        "dev": 0.03673591791853225,
        "doc": 0.03673591791853225,
        "writer": 0.03673591791853225,
        "precise": 0.03673591791853225,
        "cite": 0.03673591791853225,
        "facts": 0.03673591791853225,
        "speculation": 0.03673591791853225,
        "never": 0.03673591791853225,
        "invent": 0.03673591791853225,
        "prefer": 0.03673591791853225,
        "by": 0.03673591791853225,
        "analyzers": 0.0734718358370645,
        "user": 0.03673591791853225,
        "objective": 0.03673591791853225,
        "constraints": 0.03673591791853225,
        "tone": 0.03673591791853225,
        "length": 0.03673591791853225,
        "inject": 0.03673591791853225,
        "provide": 0.03673591791853225,
        "style": 0.03673591791853225,
        "tokens": 0.03673591791853225,
        "headings": 0.03673591791853225,
        "code": 0.0734718358370645,
        "blocks": 0.03673591791853225,
        "tables": 0.03673591791853225,
        "filters": 0.03673591791853225,
        "refuse": 0.03673591791853225,
        "insufficient": 0.03673591791853225,
        "evidence": 0.03673591791853225,
        "fall": 0.03673591791853225,
        "back": 0.03673591791853225,
        "template": 0.03673591791853225,
        "stubs": 0.0734718358370645,
        "9": 0.03673591791853225,
        "language": 0.0734718358370645,
        "project": 0.03673591791853225,
        "poc": 0.0734718358370645,
        "targets": 0.03673591791853225,
        "tier": 0.0734718358370645,
        "1": 0.03673591791853225,
        "python": 0.03673591791853225,
        "poetry": 0.03673591791853225,
        "setuptools": 0.03673591791853225,
        "java": 0.03673591791853225,
        "maven": 0.03673591791853225,
        "spring": 0.0734718358370645,
        "boot": 0.03673591791853225,
        "node": 0.03673591791853225,
        "js": 0.03673591791853225,
        "npm": 0.03673591791853225,
        "pnpm": 0.03673591791853225,
        "express": 0.03673591791853225,
        "next": 0.03673591791853225,
        "soon": 0.03673591791853225,
        "go": 0.03673591791853225,
        "modules": 0.03673591791853225,
        "rust": 0.03673591791853225,
        "cargo": 0.03673591791853225,
        "ruby": 0.03673591791853225,
        "bundler": 0.03673591791853225,
        "php": 0.03673591791853225,
        "composer": 0.03673591791853225,
        "detection": 0.03673591791853225,
        "via": 0.03673591791853225,
        "heuristics": 0.03673591791853225,
        "optional": 0.03673591791853225,
        "tree": 0.03673591791853225,
        "sitter": 0.03673591791853225,
        "function": 0.03673591791853225,
        "class": 0.03673591791853225,
        "extraction": 0.03673591791853225,
        "pluggable": 0.03673591791853225,
        "entry": 0.03673591791853225,
        "points": 0.03673591791853225,
        "main": 0.03673591791853225,
        "springbootapplication": 0.03673591791853225,
        "fastapi": 0.03673591791853225,
        "app": 0.03673591791853225,
        "bin": 0.03673591791853225,
        "cmd": 0.03673591791853225,
        "interfaces": 0.03673591791853225,
        "skeleton": 0.03673591791853225,
        "__init__": 0.03673591791853225,
        "py": 0.5143028508594515,
        "cli": 0.0734718358370645,
        "click": 0.03673591791853225,
        "typer": 0.03673591791853225,
        "failsafe": 0.03673591791853225,
        "fail": 0.03673591791853225,
        "safe": 0.03673591791853225,
        "logging": 0.0734718358370645,
        "helpers": 0.03673591791853225,
        "orchestrator": 0.03673591791853225,
        "repo_scanner": 0.03673591791853225,
        "base": 0.03673591791853225,
        "analyzer": 0.03673591791853225,
        "abc": 0.03673591791853225,
        "dependencies": 0.03673591791853225,
        "patterns": 0.03673591791853225,
        "embedder": 0.03673591791853225,
        "embedding": 0.03673591791853225,
        "model": 0.03673591791853225,
        "store": 0.03673591791853225
      },
      "text": "to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate** \u2192 **Post-process** \u2192 **Open PR** with summary of deltas. 6. Dry-run support: `docgen update --dry-run` computes diffs and scorecards without writing or publishing. ### 6.3 Regenerate (Manual) * `docgen regenerate --full` or `--sections intro,arch`. --- ## 7) Section Contract (README) * **Intro**: what, why, who it\u2019s for * **Key Features**: bullets grounded in real repo signals * **Architecture**: overview diagram (ASCII) + components * **Quick Start**: minimal commands (per build system) * **Configuration**: env vars, files, examples * **Build & Test**: commands, coverage hint * **Deployment**: container/K8s instructions if detected * **Troubleshooting**: common failures * **FAQ**: 5\u201310 concise Q\\&A * **Contributing** (if `CONTRIBUTING.md` absent) * **License** (detected or templated) > Each section must be independently regenerable and self-contained. --- ## 8) Prompting Strategy (Local LLM) * **System message (fixed guardrails)**: * \u201cYou are a senior dev doc writer. Be precise. Cite repo facts only. No speculation.\u201d * \u201cNever invent commands. Prefer commands detected by analyzers.\u201d * **User message per section**: * Section objective + constraints (tone, length). * Inject **Signals** + **Top-k chunks** (RAG). * Provide **style tokens** (headings, code blocks, tables). * **Post-filters**: refuse if insufficient evidence; fall back to template stubs. --- ## 9) Language & Project Support (POC targets) * **Tier-1 (POC)**: Python (Poetry/Setuptools), Java (Maven/Gradle, Spring Boot), Node.js (npm/pnpm, Express/Next). * **Tier-2 (soon)**: Go (modules), Rust (Cargo), Ruby (Bundler), PHP (Composer). * Detection via: * File heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#5",
      "vector": {
        "heuristics": 0.028665182485640765,
        "optional": 0.0859955474569223,
        "tree": 0.028665182485640765,
        "sitter": 0.028665182485640765,
        "for": 0.11466072994256306,
        "function": 0.028665182485640765,
        "class": 0.05733036497128153,
        "extraction": 0.028665182485640765,
        "pluggable": 0.028665182485640765,
        "entry": 0.028665182485640765,
        "points": 0.028665182485640765,
        "main": 0.05733036497128153,
        "spring": 0.028665182485640765,
        "springbootapplication": 0.028665182485640765,
        "fastapi": 0.05733036497128153,
        "app": 0.14332591242820383,
        "bin": 0.028665182485640765,
        "cmd": 0.05733036497128153,
        "10": 0.028665182485640765,
        "interfaces": 0.028665182485640765,
        "code": 0.05733036497128153,
        "skeleton": 0.028665182485640765,
        "docgen": 0.0859955474569223,
        "__init__": 0.028665182485640765,
        "py": 0.7166295621410191,
        "cli": 0.0859955474569223,
        "click": 0.028665182485640765,
        "typer": 0.05733036497128153,
        "failsafe": 0.028665182485640765,
        "fail": 0.028665182485640765,
        "safe": 0.028665182485640765,
        "readme": 0.0859955474569223,
        "stubs": 0.028665182485640765,
        "logging": 0.05733036497128153,
        "configuration": 0.028665182485640765,
        "helpers": 0.028665182485640765,
        "orchestrator": 0.028665182485640765,
        "repo_scanner": 0.028665182485640765,
        "analyzers": 0.028665182485640765,
        "base": 0.028665182485640765,
        "analyzer": 0.0859955474569223,
        "abc": 0.14332591242820383,
        "language": 0.028665182485640765,
        "build": 0.14332591242820383,
        "dependencies": 0.028665182485640765,
        "entrypoints": 0.028665182485640765,
        "patterns": 0.028665182485640765,
        "rag": 0.028665182485640765,
        "embedder": 0.028665182485640765,
        "local": 0.05733036497128153,
        "embedding": 0.028665182485640765,
        "model": 0.028665182485640765,
        "store": 0.028665182485640765,
        "prompting": 0.028665182485640765,
        "builder": 0.028665182485640765,
        "jinja2": 0.028665182485640765,
        "templates": 0.05733036497128153,
        "token": 0.028665182485640765,
        "mgmt": 0.028665182485640765,
        "constants": 0.028665182485640765,
        "j2": 0.028665182485640765,
        "per": 0.028665182485640765,
        "section": 0.028665182485640765,
        "llm": 0.028665182485640765,
        "runner": 0.028665182485640765,
        "adapter": 0.028665182485640765,
        "ollama": 0.028665182485640765,
        "llama": 0.028665182485640765,
        "cpp": 0.028665182485640765,
        "postproc": 0.028665182485640765,
        "lint": 0.028665182485640765,
        "links": 0.05733036497128153,
        "markers": 0.0859955474569223,
        "toc": 0.05733036497128153,
        "git": 0.05733036497128153,
        "diff": 0.028665182485640765,
        "publisher": 0.028665182485640765,
        "config": 0.028665182485640765,
        "models": 0.05733036497128153,
        "python": 0.0859955474569223,
        "from": 0.05733036497128153,
        "import": 0.05733036497128153,
        "abstractmethod": 0.0859955474569223,
        "repomanifest": 0.0859955474569223,
        "signal": 0.05733036497128153,
        "def": 0.14332591242820383,
        "supports": 0.028665182485640765,
        "self": 0.05733036497128153,
        "manifest": 0.05733036497128153,
        "bool": 0.0859955474569223,
        "analyze": 0.05733036497128153,
        "list": 0.028665182485640765,
        "command": 0.0859955474569223,
        "init": 0.028665182485640765,
        "path": 0.0859955474569223,
        "str": 0.14332591242820383,
        "publish": 0.0859955474569223,
        "true": 0.028665182485640765,
        "update": 0.0859955474569223,
        "event": 0.028665182485640765,
        "commit": 0.05733036497128153,
        "diff_base": 0.028665182485640765,
        "origin": 0.028665182485640765,
        "regenerate": 0.028665182485640765,
        "sections": 0.11466072994256306,
        "full": 0.028665182485640765,
        "false": 0.028665182485640765,
        "service": 0.028665182485640765,
        "mode": 0.028665182485640765,
        "post": 0.1719910949138446,
        "generate": 0.028665182485640765,
        "arch": 0.028665182485640765,
        "quickstart": 0.0859955474569223,
        "get": 0.028665182485640765,
        "status": 0.028665182485640765,
        "run_id": 0.028665182485640765,
        "11": 0.028665182485640765,
        "change": 0.028665182485640765,
        "impact": 0.028665182485640765,
        "matrix": 0.028665182485640765,
        "examples": 0.028665182485640765,
        "changed": 0.05733036497128153,
        "pattern": 0.028665182485640765,
        "to": 0.0859955474569223,
        "rebuild": 0.028665182485640765,
        "notes": 0.028665182485640765,
        "pom": 0.028665182485640765,
        "xml": 0.028665182485640765,
        "gradle": 0.028665182485640765,
        "_and": 0.05733036497128153,
        "_test": 0.05733036497128153,
        "recompute": 0.028665182485640765,
        "commands": 0.028665182485640765,
        "requirements": 0.028665182485640765,
        "txt": 0.028665182485640765,
        "pyproject": 0.028665182485640765,
        "toml": 0.028665182485640765,
        "install": 0.028665182485640765,
        "steps": 0.028665182485640765,
        "dockerfile": 0.028665182485640765,
        "k8s": 0.028665182485640765,
        "deployment": 0.028665182485640765,
        "container": 0.028665182485640765,
        "changes": 0.028665182485640765,
        "src": 0.028665182485640765,
        "features": 0.028665182485640765,
        "architecture": 0.0859955474569223,
        "if": 0.028665182485640765,
        "entrypoint": 0.028665182485640765,
        "intro": 0.028665182485640765,
        "too": 0.028665182485640765,
        "docs": 0.028665182485640765,
        "all": 0.028665182485640765,
        "patch": 0.028665182485640765,
        "prefer": 0.028665182485640765,
        "doc": 0.028665182485640765,
        "driven": 0.028665182485640765,
        "md": 0.028665182485640765,
        "none": 0.028665182485640765,
        "unless": 0.028665182485640765,
        "empty": 0.028665182485640765,
        "prevent": 0.028665182485640765,
        "loops": 0.028665182485640765,
        "12": 0.028665182485640765,
        "processing": 0.028665182485640765,
        "rules": 0.028665182485640765,
        "headings": 0.028665182485640765,
        "start": 0.028665182485640765,
        "at": 0.028665182485640765,
        "title": 0.028665182485640765,
        "then": 0.028665182485640765,
        "add": 0.028665182485640765,
        "auto": 0.028665182485640765,
        "level": 0.028665182485640765,
        "3": 0.028665182485640765,
        "validate": 0.028665182485640765,
        "blocks": 0.028665182485640765,
        "bash": 0.028665182485640765,
        "convert": 0.028665182485640765,
        "absolute": 0.028665182485640765,
        "github": 0.028665182485640765,
        "relative": 0.028665182485640765,
        "where": 0.028665182485640765,
        "possible": 0.028665182485640765,
        "ensure": 0.028665182485640765,
        "idempotency": 0.028665182485640765,
        "only": 0.028665182485640765,
        "edit": 0.028665182485640765,
        "between": 0.028665182485640765,
        "managed": 0.028665182485640765,
        "begin": 0.028665182485640765,
        "end": 0.028665182485640765,
        "13": 0.028665182485640765,
        "ci": 0.028665182485640765,
        "integration": 0.028665182485640765,
        "pre": 0.028665182485640765,
        "forbid": 0.028665182485640765,
        "direct": 0.028665182485640765,
        "edits": 0.028665182485640765,
        "outside": 0.028665182485640765,
        "merge": 0.028665182485640765,
        "checkout": 0.028665182485640765,
        "remind": 0.028665182485640765
      },
      "text": "heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py prompting/ builder.py # Jinja2 templates, token mgmt constants.py templates/ # *.j2 per section llm/ runner.py # adapter for ollama/llama.cpp postproc/ lint.py links.py markers.py toc.py git/ diff.py publisher.py config.py models.py ``` **Analyzer ABC** ```python from abc import ABC, abstractmethod from .models import RepoManifest, Signal class Analyzer(ABC): @abstractmethod def supports(self, manifest: RepoManifest) -> bool: ... @abstractmethod def analyze(self, manifest: RepoManifest) -> list[Signal]: ... ``` **CLI (Typer)** ```python @app.command() def init(path: str = \".\", publish: bool = True): ... @app.command() def update(path: str = \".\", event: str = \"commit\", diff_base: str = \"origin/main\"): ... @app.command() def regenerate(sections: str = \"\", full: bool = False): ... ``` **FastAPI (optional service mode)** * `POST /analyze` * `POST /generate?sections=arch,quickstart` * `POST /publish` * `GET /status/{run_id}` --- ## 11) Change Impact Matrix (examples) | Changed Path Pattern | Sections to Rebuild | Notes | | ------------------------------------ | ---------------------------- | --------------------------------------- | | `pom.xml`, `build.gradle*` | build\\_and\\_test, quickstart | Recompute build commands | | `requirements.txt`, `pyproject.toml` | build\\_and\\_test, quickstart | Update install steps | | `Dockerfile`, `k8s/**` | deployment | Publish container changes | | `src/**`, `app/**`, `cmd/**` | features, architecture | If entrypoint changed, update intro too | | `docs/**` | all (patch) | Prefer doc-driven | | `README.md` | none (unless empty) | Prevent loops | --- ## 12) Post-Processing Rules * Headings start at `#` for title then `##` for sections. * Add **auto ToC** (<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#6",
      "vector": {
        "level": 0.04267895997763199,
        "3": 0.12803687993289598,
        "validate": 0.04267895997763199,
        "code": 0.04267895997763199,
        "blocks": 0.04267895997763199,
        "bash": 0.04267895997763199,
        "python": 0.08535791995526398,
        "convert": 0.04267895997763199,
        "absolute": 0.04267895997763199,
        "github": 0.12803687993289598,
        "links": 0.04267895997763199,
        "to": 0.08535791995526398,
        "relative": 0.04267895997763199,
        "where": 0.04267895997763199,
        "possible": 0.08535791995526398,
        "ensure": 0.04267895997763199,
        "idempotency": 0.04267895997763199,
        "only": 0.12803687993289598,
        "edit": 0.04267895997763199,
        "between": 0.04267895997763199,
        "managed": 0.08535791995526398,
        "markers": 0.12803687993289598,
        "docgen": 0.21339479988815996,
        "begin": 0.04267895997763199,
        "architecture": 0.21339479988815996,
        "end": 0.04267895997763199,
        "13": 0.04267895997763199,
        "git": 0.08535791995526398,
        "ci": 0.08535791995526398,
        "integration": 0.04267895997763199,
        "local": 0.12803687993289598,
        "pre": 0.04267895997763199,
        "commit": 0.08535791995526398,
        "forbid": 0.04267895997763199,
        "direct": 0.04267895997763199,
        "readme": 0.12803687993289598,
        "edits": 0.04267895997763199,
        "outside": 0.04267895997763199,
        "optional": 0.12803687993289598,
        "post": 0.12803687993289598,
        "merge": 0.04267895997763199,
        "checkout": 0.08535791995526398,
        "remind": 0.04267895997763199,
        "run": 0.04267895997763199,
        "update": 0.12803687993289598,
        "gitlab": 0.04267895997763199,
        "bitbucket": 0.04267895997763199,
        "on": 0.04267895997763199,
        "push": 0.04267895997763199,
        "pr": 0.25607375986579195,
        "1": 0.12803687993289598,
        "repo": 0.08535791995526398,
        "2": 0.17071583991052797,
        "event": 0.04267895997763199,
        "diff": 0.08535791995526398,
        "base": 0.04267895997763199,
        "base_sha": 0.04267895997763199,
        "if": 0.12803687993289598,
        "changes": 0.04267895997763199,
        "open": 0.04267895997763199,
        "with": 0.04267895997763199,
        "labeled": 0.04267895997763199,
        "docs": 0.08535791995526398,
        "auto": 0.04267895997763199,
        "tokenless": 0.04267895997763199,
        "mode": 0.12803687993289598,
        "created": 0.04267895997763199,
        "from": 0.08535791995526398,
        "a": 0.04267895997763199,
        "app": 0.04267895997763199,
        "bot": 0.04267895997763199,
        "account": 0.04267895997763199,
        "14": 0.04267895997763199,
        "quality": 0.04267895997763199,
        "gates": 0.04267895997763199,
        "evaluation": 0.04267895997763199,
        "consistency": 0.04267895997763199,
        "checks": 0.04267895997763199,
        "commands": 0.08535791995526398,
        "exist": 0.04267895997763199,
        "in": 0.12803687993289598,
        "ports": 0.04267895997763199,
        "env": 0.04267895997763199,
        "vars": 0.04267895997763199,
        "match": 0.04267895997763199,
        "configs": 0.04267895997763199,
        "no": 0.08535791995526398,
        "hallucinations": 0.04267895997763199,
        "reject": 0.04267895997763199,
        "new": 0.04267895997763199,
        "facts": 0.04267895997763199,
        "not": 0.04267895997763199,
        "found": 0.08535791995526398,
        "signals": 0.08535791995526398,
        "rag": 0.08535791995526398,
        "style": 0.04267895997763199,
        "concise": 0.04267895997763199,
        "paragraphs": 0.04267895997763199,
        "actionable": 0.04267895997763199,
        "filler": 0.04267895997763199,
        "marketing": 0.04267895997763199,
        "scorecard": 0.04267895997763199,
        "0": 0.04267895997763199,
        "100": 0.04267895997763199,
        "coverage": 0.04267895997763199,
        "of": 0.08535791995526398,
        "required": 0.04267895997763199,
        "sections": 0.08535791995526398,
        "30": 0.04267895997763199,
        "buildability": 0.04267895997763199,
        "quick": 0.08535791995526398,
        "start": 0.04267895997763199,
        "20": 0.12803687993289598,
        "link": 0.04267895997763199,
        "validity": 0.04267895997763199,
        "10": 0.12803687993289598,
        "alignment": 0.04267895997763199,
        "w": 0.04267895997763199,
        "change": 0.04267895997763199,
        "set": 0.04267895997763199,
        "lint": 0.04267895997763199,
        "reviewer": 0.04267895997763199,
        "feedback": 0.04267895997763199,
        "loop": 0.04267895997763199,
        "15": 0.04267895997763199,
        "security": 0.04267895997763199,
        "privacy": 0.04267895997763199,
        "llm": 0.08535791995526398,
        "and": 0.04267895997763199,
        "embedding": 0.04267895997763199,
        "models": 0.04267895997763199,
        "respect": 0.04267895997763199,
        "gitignore": 0.04267895997763199,
        "configurable": 0.04267895997763199,
        "exclude_paths": 0.04267895997763199,
        "never": 0.04267895997763199,
        "index": 0.04267895997763199,
        "large": 0.04267895997763199,
        "binaries": 0.04267895997763199,
        "secret": 0.08535791995526398,
        "files": 0.08535791995526398,
        "simple": 0.04267895997763199,
        "scan": 0.04267895997763199,
        "block": 0.04267895997763199,
        "16": 0.04267895997763199,
        "mvp": 0.04267895997763199,
        "plan": 0.04267895997763199,
        "weeks": 0.04267895997763199,
        "suggested": 0.04267895997763199,
        "breakdown": 0.04267895997763199,
        "core": 0.04267895997763199,
        "path": 0.04267895997763199,
        "cli": 0.04267895997763199,
        "scanner": 0.04267895997763199,
        "language": 0.04267895997763199,
        "build": 0.04267895997763199,
        "analyzers": 0.04267895997763199,
        "java": 0.04267895997763199,
        "node": 0.04267895997763199,
        "prompt": 0.04267895997763199,
        "builder": 0.04267895997763199,
        "runner": 0.04267895997763199,
        "ollama": 0.04267895997763199,
        "adapter": 0.04267895997763199,
        "processor": 0.04267895997763199,
        "publisher": 0.04267895997763199,
        "lite": 0.04267895997763199,
        "embed": 0.04267895997763199,
        "existing": 0.04267895997763199,
        "top": 0.04267895997763199,
        "largest": 0.04267895997763199,
        "source": 0.04267895997763199,
        "heads": 0.04267895997763199,
        "triggers": 0.04267895997763199,
        "single": 0.04267895997763199,
        "as": 0.08535791995526398,
        "stretch": 0.04267895997763199,
        "4": 0.04267895997763199,
        "templates": 0.08535791995526398,
        "8": 0.04267895997763199,
        "jinja2": 0.17071583991052797,
        "5": 0.04267895997763199,
        "config": 0.04267895997763199,
        "yml": 0.04267895997763199,
        "minimal": 0.04267895997763199,
        "17": 0.12803687993289598,
        "example": 0.04267895997763199,
        "section": 0.04267895997763199,
        "template": 0.04267895997763199,
        "j2": 0.08535791995526398,
        "project_name": 0.08535791995526398,
        "is": 0.04267895997763199,
        "structured": 0.04267895997763199,
        "ascii": 0.04267895997763199,
        "_architecture": 0.04267895997763199,
        "key": 0.04267895997763199,
        "components": 0.08535791995526398,
        "for": 0.04267895997763199,
        "comp": 0.12803687993289598,
        "name": 0.04267895997763199,
        "summary": 0.04267895997763199,
        "endfor": 0.04267895997763199,
        "data": 0.04267895997763199,
        "flow": 0.04267895997763199,
        "data_flow": 0.04267895997763199,
        "generated": 0.04267895997763199,
        "detected": 0.04267895997763199,
        "signals_summary": 0.04267895997763199,
        "frame": 0.04267895997763199,
        "composed": 0.04267895997763199,
        "intro": 0.04267895997763199,
        "features": 0.08535791995526398,
        "include": 0.04267895997763199
      },
      "text": "(<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to run `docgen update` (optional). ### CI (GitHub/GitLab/Bitbucket) * On push/PR: 1. Checkout repo. 2. `docgen update --event pr --diff-base $BASE_SHA` 3. If changes \u2192 open/update PR with labeled `docs:auto`. * Tokenless mode possible if PR created from a GitHub App/bot account. --- ## 14) Quality Gates & Evaluation * **Consistency checks**: commands exist in repo; ports/env vars match configs. * **No hallucinations**: reject new facts not found in signals/RAG. * **Style**: concise paragraphs, actionable commands, no filler marketing. * **Scorecard** (0\u2013100): * Coverage of required sections (30) * Buildability of quick start (20) * Link validity (10) * Diff alignment w/ change set (20) * Lint (10) * Reviewer feedback loop (10) --- ## 15) Security & Privacy * **Local only** LLM and embedding models. * Respect `.gitignore` + configurable `exclude_paths`. * Never index large binaries/secret files. * Optional simple **secret scan**; block if found. --- ## 16) MVP Plan (2 weeks suggested breakdown) 1. **Core path**: CLI, Scanner, Language+Build analyzers (Python/Java/Node), Prompt Builder, Local LLM runner (Ollama adapter), Post-processor, Git Publisher (PR). 2. **RAG Lite**: embed only `/docs`, existing `README`, top 20 largest source files\u2019 heads. 3. **Triggers**: single \u201ccommit\u201d mode; PR mode as stretch. 4. **Templates**: 8 sections, Jinja2; managed markers. 5. **Config**: `.docgen.yml` minimal. --- ## 17) Example Templates ### 17.1 Section Template (Jinja2 \u2014 architecture.j2) ```jinja2 ## Architecture {{ project_name }} is structured as: ``` {{ ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#7",
      "vector": {
        "ascii": 0.036588086663230115,
        "_architecture": 0.036588086663230115,
        "key": 0.14635234665292046,
        "components": 0.07317617332646023,
        "for": 0.2561166066426108,
        "comp": 0.10976425998969035,
        "in": 0.2195285199793807,
        "name": 0.036588086663230115,
        "summary": 0.036588086663230115,
        "endfor": 0.036588086663230115,
        "data": 0.036588086663230115,
        "flow": 0.036588086663230115,
        "data_flow": 0.036588086663230115,
        "generated": 0.036588086663230115,
        "from": 0.036588086663230115,
        "detected": 0.036588086663230115,
        "signals": 0.036588086663230115,
        "signals_summary": 0.036588086663230115,
        "17": 0.036588086663230115,
        "2": 0.036588086663230115,
        "readme": 0.10976425998969035,
        "frame": 0.036588086663230115,
        "composed": 0.036588086663230115,
        "jinja2": 0.036588086663230115,
        "project_name": 0.036588086663230115,
        "intro": 0.10976425998969035,
        "features": 0.10976425998969035,
        "include": 0.036588086663230115,
        "architecture": 0.07317617332646023,
        "j2": 0.036588086663230115,
        "quick": 0.07317617332646023,
        "start": 0.2195285199793807,
        "quickstart": 0.036588086663230115,
        "configuration": 0.07317617332646023,
        "build": 0.14635234665292046,
        "test": 0.036588086663230115,
        "build_and_test": 0.07317617332646023,
        "deployment": 0.10976425998969035,
        "troubleshooting": 0.07317617332646023,
        "faq": 0.07317617332646023,
        "license": 0.07317617332646023,
        "18": 0.036588086663230115,
        "minimal": 0.036588086663230115,
        "python": 0.14635234665292046,
        "snippets": 0.036588086663230115,
        "change": 0.036588086663230115,
        "impact": 0.036588086663230115,
        "heuristic": 0.036588086663230115,
        "section_rules": 0.07317617332646023,
        "pom": 0.10976425998969035,
        "xml": 0.10976425998969035,
        "gradle": 0.07317617332646023,
        "requirements": 0.10976425998969035,
        "txt": 0.10976425998969035,
        "pyproject": 0.036588086663230115,
        "toml": 0.036588086663230115,
        "package": 0.07317617332646023,
        "json": 0.07317617332646023,
        "dockerfile": 0.07317617332646023,
        "k8s": 0.036588086663230115,
        "src": 0.10976425998969035,
        "app": 0.10976425998969035,
        "cmd": 0.10976425998969035,
        "def": 0.07317617332646023,
        "sections_from_diff": 0.036588086663230115,
        "paths": 0.07317617332646023,
        "list": 0.036588086663230115,
        "str": 0.2195285199793807,
        "set": 0.07317617332646023,
        "out": 0.10976425998969035,
        "section": 0.07317617332646023,
        "patterns": 0.10976425998969035,
        "if": 0.18294043331615056,
        "any": 0.036588086663230115,
        "p": 0.10976425998969035,
        "pat": 0.07317617332646023,
        "startswith": 0.036588086663230115,
        "add": 0.036588086663230115,
        "return": 0.10976425998969035,
        "or": 0.10976425998969035,
        "fall": 0.036588086663230115,
        "back": 0.036588086663230115,
        "to": 0.07317617332646023,
        "uncertain": 0.036588086663230115,
        "managed": 0.036588086663230115,
        "markers": 0.07317617332646023,
        "patch": 0.036588086663230115,
        "replace_block": 0.036588086663230115,
        "md": 0.18294043331615056,
        "new": 0.07317617332646023,
        "f": 0.10976425998969035,
        "docgen": 0.18294043331615056,
        "begin": 0.036588086663230115,
        "end": 0.18294043331615056,
        "and": 0.036588086663230115,
        "pre": 0.07317617332646023,
        "rest": 0.07317617332646023,
        "split": 0.07317617332646023,
        "1": 0.07317617332646023,
        "_": 0.036588086663230115,
        "post": 0.07317617332646023,
        "n": 0.07317617332646023,
        "insert": 0.036588086663230115,
        "missing": 0.036588086663230115,
        "19": 0.036588086663230115,
        "open": 0.036588086663230115,
        "questions": 0.036588086663230115,
        "trade": 0.036588086663230115,
        "offs": 0.036588086663230115,
        "embeddings": 0.036588086663230115,
        "use": 0.036588086663230115,
        "a": 0.14635234665292046,
        "tiny": 0.036588086663230115,
        "local": 0.036588086663230115,
        "model": 0.07317617332646023,
        "vs": 0.07317617332646023,
        "rule": 0.036588086663230115,
        "based": 0.036588086663230115,
        "retrieval": 0.036588086663230115,
        "mvp": 0.036588086663230115,
        "tree": 0.036588086663230115,
        "sitter": 0.036588086663230115,
        "adds": 0.036588086663230115,
        "power": 0.036588086663230115,
        "but": 0.036588086663230115,
        "increases": 0.036588086663230115,
        "footprint": 0.036588086663230115,
        "gate": 0.036588086663230115,
        "behind": 0.036588086663230115,
        "flag": 0.036588086663230115,
        "pr": 0.10976425998969035,
        "author": 0.036588086663230115,
        "bot": 0.036588086663230115,
        "account": 0.036588086663230115,
        "developer": 0.036588086663230115,
        "token": 0.036588086663230115,
        "decide": 0.036588086663230115,
        "per": 0.036588086663230115,
        "environment": 0.036588086663230115,
        "markdown": 0.036588086663230115,
        "diffs": 0.036588086663230115,
        "keep": 0.036588086663230115,
        "sections": 0.036588086663230115,
        "atomic": 0.036588086663230115,
        "minimize": 0.036588086663230115,
        "noisy": 0.036588086663230115,
        "prs": 0.036588086663230115,
        "20": 0.036588086663230115,
        "example": 0.036588086663230115,
        "yml": 0.036588086663230115,
        "mixed": 0.036588086663230115,
        "repo": 0.036588086663230115,
        "yaml": 0.036588086663230115,
        "llm": 0.036588086663230115,
        "runner": 0.036588086663230115,
        "ollama": 0.036588086663230115,
        "llama3": 0.036588086663230115,
        "8b": 0.036588086663230115,
        "instruct": 0.036588086663230115,
        "temperature": 0.036588086663230115,
        "0": 0.036588086663230115,
        "15": 0.036588086663230115,
        "style": 0.036588086663230115,
        "comprehensive": 0.036588086663230115,
        "publish": 0.036588086663230115,
        "mode": 0.036588086663230115,
        "branch_prefix": 0.036588086663230115,
        "analyzers": 0.036588086663230115,
        "enabled": 0.036588086663230115,
        "language": 0.036588086663230115,
        "dependencies": 0.036588086663230115,
        "exclude_paths": 0.036588086663230115,
        "git": 0.036588086663230115,
        "node_modules": 0.036588086663230115,
        "dist": 0.036588086663230115,
        "target": 0.036588086663230115,
        "ci": 0.036588086663230115,
        "watched_globs": 0.036588086663230115,
        "21": 0.036588086663230115,
        "success": 0.036588086663230115,
        "criteria": 0.036588086663230115,
        "poc": 0.036588086663230115,
        "3": 0.036588086663230115,
        "diverse": 0.036588086663230115,
        "repos": 0.036588086663230115,
        "cli": 0.036588086663230115,
        "spring": 0.036588086663230115,
        "boot": 0.036588086663230115,
        "api": 0.036588086663230115,
        "node": 0.036588086663230115,
        "webapp": 0.036588086663230115,
        "init": 0.036588086663230115,
        "produces": 0.036588086663230115,
        "working": 0.036588086663230115,
        "linted": 0.036588086663230115,
        "with": 0.036588086663230115,
        "runnable": 0.036588086663230115,
        "on": 0.036588086663230115,
        "changing": 0.036588086663230115
      },
      "text": "ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick Start {{ quickstart }} ## Configuration {{ configuration }} ## Build & Test {{ build_and_test }} ## Deployment {{ deployment }} ## Troubleshooting {{ troubleshooting }} ## FAQ {{ faq }} ## License {{ license }} ``` --- ## 18) Minimal Python Snippets **Change impact heuristic** ```python SECTION_RULES = [ (\"build_and_test\", [\"pom.xml\",\"build.gradle\",\"requirements.txt\",\"pyproject.toml\",\"package.json\"]), (\"deployment\", [\"Dockerfile\",\"k8s/\"]), (\"architecture\", [\"src/\",\"app/\",\"cmd/\"]), (\"features\", [\"src/\",\"app/\",\"cmd/\"]), ] def sections_from_diff(paths: list[str]) -> set[str]: out = set() for section, patterns in SECTION_RULES: if any(p for p in paths for pat in patterns if p.startswith(pat)): out.add(section) return out or {\"intro\"} # fall back to intro if uncertain ``` **Managed markers (patch)** ```python def replace_block(md: str, key: str, new: str) -> str: start = f\"<!-- docgen:begin:{key} -->\" end = f\"<!-- docgen:end:{key} -->\" if start in md and end in md: pre, rest = md.split(start, 1) _, post = rest.split(end, 1) return f\"{pre}{start}\\n{new}\\n{end}{post}\" return md # or insert markers if missing ``` --- ## 19) Open Questions / Trade-offs * **Embeddings**: Use a tiny local model vs. rule-based retrieval for MVP? * **Tree-sitter**: Adds power but increases footprint\u2014gate behind a flag. * **PR author**: Bot account vs. developer token\u2014decide per environment. * **Markdown diffs**: Keep sections atomic to minimize noisy PRs. --- ## 20) Example `.docgen.yml` for a Mixed Repo ```yaml llm: runner: \"ollama\" model: \"llama3:8b-instruct\" temperature: 0.15 readme: style: \"comprehensive\" publish: mode: \"pr\" branch_prefix: \"docgen/\" analyzers: enabled: [language, build, dependencies, patterns] exclude_paths: [\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#8",
      "vector": {
        "git": 0.08838834764831843,
        "node_modules": 0.08838834764831843,
        "dist": 0.08838834764831843,
        "target": 0.08838834764831843,
        "ci": 0.08838834764831843,
        "watched_globs": 0.08838834764831843,
        "src": 0.08838834764831843,
        "app": 0.08838834764831843,
        "cmd": 0.08838834764831843,
        "pom": 0.17677669529663687,
        "xml": 0.17677669529663687,
        "build": 0.08838834764831843,
        "gradle": 0.08838834764831843,
        "package": 0.08838834764831843,
        "json": 0.08838834764831843,
        "requirements": 0.17677669529663687,
        "txt": 0.17677669529663687,
        "dockerfile": 0.08838834764831843,
        "21": 0.08838834764831843,
        "success": 0.08838834764831843,
        "criteria": 0.08838834764831843,
        "poc": 0.08838834764831843,
        "for": 0.08838834764831843,
        "3": 0.08838834764831843,
        "diverse": 0.08838834764831843,
        "repos": 0.08838834764831843,
        "python": 0.08838834764831843,
        "cli": 0.17677669529663687,
        "spring": 0.08838834764831843,
        "boot": 0.08838834764831843,
        "api": 0.08838834764831843,
        "node": 0.08838834764831843,
        "webapp": 0.08838834764831843,
        "docgen": 0.17677669529663687,
        "init": 0.17677669529663687,
        "produces": 0.08838834764831843,
        "a": 0.2651650429449553,
        "working": 0.08838834764831843,
        "linted": 0.08838834764831843,
        "readme": 0.08838834764831843,
        "with": 0.08838834764831843,
        "runnable": 0.08838834764831843,
        "quick": 0.08838834764831843,
        "start": 0.08838834764831843,
        "on": 0.08838834764831843,
        "changing": 0.08838834764831843,
        "or": 0.08838834764831843,
        "pr": 0.08838834764831843,
        "updates": 0.08838834764831843,
        "only": 0.08838834764831843,
        "relevant": 0.08838834764831843,
        "sections": 0.08838834764831843,
        "no": 0.08838834764831843,
        "hallucinated": 0.08838834764831843,
        "commands": 0.08838834764831843,
        "links": 0.08838834764831843,
        "and": 0.2651650429449553,
        "badges": 0.08838834764831843,
        "validate": 0.08838834764831843,
        "style": 0.08838834764831843,
        "consistent": 0.08838834764831843,
        "if": 0.08838834764831843,
        "you": 0.17677669529663687,
        "want": 0.08838834764831843,
        "i": 0.08838834764831843,
        "can": 0.17677669529663687,
        "spin": 0.08838834764831843,
        "up": 0.08838834764831843,
        "starter": 0.08838834764831843,
        "repo": 0.08838834764831843,
        "layout": 0.08838834764831843,
        "analyzers": 0.08838834764831843,
        "templates": 0.08838834764831843,
        "simple": 0.08838834764831843,
        "ollama": 0.08838834764831843,
        "adapter": 0.08838834764831843,
        "so": 0.08838834764831843,
        "drop": 0.08838834764831843,
        "it": 0.08838834764831843,
        "into": 0.08838834764831843,
        "your": 0.08838834764831843,
        "environment": 0.08838834764831843,
        "run": 0.08838834764831843,
        "right": 0.08838834764831843,
        "away": 0.08838834764831843
      },
      "text": "[\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR updates only relevant sections. * No hallucinated commands; links and badges validate; style consistent. --- If you want, I can spin up a **starter repo layout** (CLI, analyzers, templates, and a simple Ollama adapter) so you can drop it into your environment and run `docgen init` right away.",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    }
  ],
  "features": [
    {
      "id": "AGENTS.md#0",
      "vector": {
        "repository": 0.06757373783994859,
        "guidelines": 0.1013606067599229,
        "project": 0.033786868919974296,
        "structure": 0.033786868919974296,
        "module": 0.06757373783994859,
        "organization": 0.033786868919974296,
        "spec": 0.06757373783994859,
        "md": 0.033786868919974296,
        "captures": 0.033786868919974296,
        "the": 0.27029495135979437,
        "end": 0.06757373783994859,
        "to": 0.1013606067599229,
        "architecture": 0.033786868919974296,
        "component": 0.06757373783994859,
        "contracts": 0.033786868919974296,
        "and": 0.43922929595966587,
        "must": 0.033786868919974296,
        "be": 0.033786868919974296,
        "updated": 0.033786868919974296,
        "whenever": 0.033786868919974296,
        "responsibilities": 0.033786868919974296,
        "shift": 0.033786868919974296,
        "place": 0.033786868919974296,
        "python": 0.2027212135198458,
        "source": 0.033786868919974296,
        "in": 0.16893434459987147,
        "a": 0.23650808243982008,
        "docgen": 0.16893434459987147,
        "package": 0.033786868919974296,
        "create": 0.033786868919974296,
        "it": 0.033786868919974296,
        "when": 0.06757373783994859,
        "implementation": 0.033786868919974296,
        "starts": 0.033786868919974296,
        "with": 0.16893434459987147,
        "clear": 0.033786868919974296,
        "submodules": 0.033786868919974296,
        "for": 0.1013606067599229,
        "orchestrator": 0.1013606067599229,
        "analyzers": 0.033786868919974296,
        "runners": 0.033786868919974296,
        "stores": 0.033786868919974296,
        "avoid": 0.06757373783994859,
        "leaving": 0.033786868919974296,
        "logic": 0.033786868919974296,
        "repo": 0.06757373783994859,
        "root": 0.033786868919974296,
        "mirror": 0.033786868919974296,
        "runtime": 0.033786868919974296,
        "modules": 0.06757373783994859,
        "under": 0.1013606067599229,
        "tests": 0.2027212135198458,
        "using": 0.033786868919974296,
        "test_": 0.033786868919974296,
        "py": 0.1013606067599229,
        "co": 0.033786868919974296,
        "locate": 0.033786868919974296,
        "fixtures": 0.06757373783994859,
        "_fixtures": 0.033786868919974296,
        "so": 0.13514747567989718,
        "imports": 0.06757373783994859,
        "stay": 0.06757373783994859,
        "clean": 0.033786868919974296,
        "reusable": 0.033786868919974296,
        "keep": 0.13514747567989718,
        "throwaway": 0.033786868919974296,
        "experiments": 0.033786868919974296,
        "inside": 0.033786868919974296,
        "an": 0.06757373783994859,
        "ignored": 0.033786868919974296,
        "sandbox": 0.033786868919974296,
        "directory": 0.033786868919974296,
        "scans": 0.033786868919974296,
        "remain": 0.033786868919974296,
        "focused": 0.033786868919974296,
        "on": 0.06757373783994859,
        "production": 0.033786868919974296,
        "code": 0.033786868919974296,
        "paths": 0.033786868919974296,
        "build": 0.033786868919974296,
        "test": 0.06757373783994859,
        "development": 0.033786868919974296,
        "commands": 0.033786868919974296,
        "m": 0.16893434459987147,
        "venv": 0.1013606067599229,
        "followed": 0.033786868919974296,
        "by": 0.033786868919974296,
        "scripts": 0.06757373783994859,
        "activate": 0.033786868919974296,
        "aligns": 0.033786868919974296,
        "local": 0.033786868919974296,
        "shells": 0.033786868919974296,
        "pycharm": 0.033786868919974296,
        "interpreter": 0.033786868919974296,
        "settings": 0.033786868919974296,
        "pip": 0.033786868919974296,
        "install": 0.033786868919974296,
        "e": 0.033786868919974296,
        "dev": 0.033786868919974296,
        "after": 0.06757373783994859,
        "pyproject": 0.033786868919974296,
        "toml": 0.033786868919974296,
        "is": 0.1013606067599229,
        "committed": 0.033786868919974296,
        "exposes": 0.033786868919974296,
        "cli": 0.033786868919974296,
        "plugins": 0.033786868919974296,
        "editable": 0.033786868919974296,
        "form": 0.033786868919974296,
        "without": 0.033786868919974296,
        "repeated": 0.033786868919974296,
        "reinstalls": 0.033786868919974296,
        "pytest": 0.06757373783994859,
        "runs": 0.033786868919974296,
        "full": 0.033786868919974296,
        "suite": 0.033786868919974296,
        "append": 0.033786868919974296,
        "k": 0.033786868919974296,
        "pattern": 0.033786868919974296,
        "iterate": 0.033786868919974296,
        "single": 0.06757373783994859,
        "analyzer": 0.06757373783994859,
        "or": 0.06757373783994859,
        "pipeline": 0.1013606067599229,
        "stage": 0.033786868919974296,
        "mypy": 0.033786868919974296,
        "ruff": 0.033786868919974296,
        "check": 0.033786868919974296,
        "catch": 0.033786868919974296,
        "type": 0.033786868919974296,
        "drift": 0.033786868919974296,
        "lint": 0.033786868919974296,
        "violations": 0.033786868919974296,
        "before": 0.06757373783994859,
        "readme": 0.06757373783994859,
        "generation": 0.06757373783994859,
        "attempted": 0.033786868919974296,
        "coding": 0.033786868919974296,
        "style": 0.033786868919974296,
        "naming": 0.033786868919974296,
        "conventions": 0.033786868919974296,
        "follow": 0.06757373783994859,
        "pep": 0.033786868919974296,
        "8": 0.033786868919974296,
        "4": 0.033786868919974296,
        "space": 0.033786868919974296,
        "indents": 0.033786868919974296,
        "explicit": 0.033786868919974296,
        "example": 0.033786868919974296,
        "from": 0.033786868919974296,
        "import": 0.033786868919974296,
        "static": 0.033786868919974296,
        "tooling": 0.033786868919974296,
        "can": 0.033786868919974296,
        "trace": 0.033786868919974296,
        "dependencies": 0.033786868919974296,
        "name": 0.033786868919974296,
        "their": 0.033786868919974296,
        "roles": 0.033786868919974296,
        "prompt_builder": 0.033786868919974296,
        "functions": 0.033786868919974296,
        "snake_case": 0.033786868919974296,
        "descriptive": 0.06757373783994859,
        "nouns": 0.033786868919974296,
        "first": 0.033786868919974296,
        "build_prompt_section": 0.033786868919974296,
        "run": 0.033786868919974296,
        "black": 0.033786868919974296,
        "commits": 0.06757373783994859,
        "manual": 0.033786868919974296,
        "reformatting": 0.033786868919974296,
        "unless": 0.033786868919974296,
        "formatter": 0.033786868919974296,
        "cannot": 0.033786868919974296,
        "resolve": 0.033786868919974296,
        "construct": 0.033786868919974296,
        "testing": 0.06757373783994859,
        "default": 0.033786868919974296,
        "harness": 0.033786868919974296,
        "every": 0.033786868919974296,
        "needs": 0.033786868919974296,
        "unit": 0.033786868919974296,
        "coverage": 0.033786868919974296,
        "plus": 0.033786868919974296,
        "integration": 0.06757373783994859,
        "case": 0.033786868919974296,
        "that": 0.06757373783994859,
        "walks": 0.033786868919974296,
        "snapshot": 0.033786868919974296,
        "through": 0.033786868919974296,
        "use": 0.033786868919974296,
        "names": 0.033786868919974296,
        "such": 0.033786868919974296,
        "as": 0.033786868919974296,
        "test_prompt_builder_handles_missing_signals": 0.033786868919974296,
        "arrange": 0.033786868919974296,
        "act": 0.033786868919974296,
        "assert": 0.033786868919974296,
        "comments": 0.033786868919974296,
        "minimal": 0.033786868919974296,
        "but": 0.033786868919974296,
        "intentional": 0.033786868919974296,
        "store": 0.033786868919974296,
        "regression": 0.033786868919974296,
        "generated": 0.033786868919974296,
        "slices": 0.033786868919974296,
        "data": 0.033786868919974296,
        "update": 0.033786868919974296,
        "them": 0.033786868919974296,
        "helper": 0.033786868919974296,
        "diffs": 0.033786868919974296,
        "reviewable": 0.033786868919974296,
        "commit": 0.033786868919974296,
        "pull": 0.033786868919974296,
        "request": 0.033786868919974296,
        "conventional": 0.033786868919974296,
        "feat": 0.033786868919974296,
        "fix": 0.033786868919974296,
        "docs": 0.033786868919974296,
        "subject": 0.033786868919974296,
        "lines": 0.033786868919974296,
        "72": 0.033786868919974296,
        "characters": 0.033786868919974296,
        "explain": 0.033786868919974296,
        "broader": 0.033786868919974296,
        "scope": 0.033786868919974296,
        "body": 0.033786868919974296,
        "multiple": 0.033786868919974296,
        "subsystems": 0.033786868919974296,
        "change": 0.033786868919974296,
        "bundle": 0.033786868919974296,
        "related": 0.033786868919974296,
        "work": 0.033786868919974296,
        "into": 0.033786868919974296,
        "pr": 0.033786868919974296,
        "includes": 0.033786868919974296,
        "summary": 0.033786868919974296,
        "notes": 0.033786868919974296,
        "links": 0.033786868919974296
      },
      "text": "# Repository Guidelines ## Project Structure & Module Organization - `spec/spec.md` captures the end-to-end architecture, component contracts, and must be updated whenever responsibilities shift. - Place Python source in a `docgen/` package (create it when implementation starts) with clear submodules for orchestrator, analyzers, runners, and stores; avoid leaving logic in the repo root. - Mirror runtime modules under `tests/` using `test_<module>.py`; co-locate fixtures in `tests/_fixtures/` so imports stay clean and reusable. - Keep throwaway experiments inside an ignored `sandbox/` directory so repository scans remain focused on production code paths. ## Build, Test, and Development Commands - `python -m venv .venv` followed by `.\\\\.venv\\\\Scripts\\\\activate` aligns local shells with the PyCharm interpreter settings. - `python -m pip install -e .[dev]` (after a `pyproject.toml` is committed) exposes the CLI and plugins in editable form without repeated reinstalls. - `python -m pytest` runs the full suite; append `-k <pattern>` to iterate on a single analyzer or pipeline stage. - `python -m mypy docgen` and `python -m ruff check docgen tests` catch type drift and lint violations before README generation is attempted. ## Coding Style & Naming Conventions - Follow PEP 8 with 4-space indents and explicit imports (for example, `from docgen.orchestrator import Pipeline`) so static tooling can trace dependencies. - Name modules after their roles (`orchestrator.py`, `prompt_builder.py`) and keep functions snake_case with descriptive nouns first (`build_prompt_section`). - Run `black docgen tests` before commits; avoid manual reformatting unless the formatter cannot resolve a construct. ## Testing Guidelines - Pytest is the default harness; every analyzer or pipeline component needs unit coverage plus an integration case under `tests/integration/` that walks a repo snapshot through generation. - Use descriptive test names such as `test_prompt_builder_handles_missing_signals` and keep Arrange-Act-Assert comments minimal but intentional. - Store regression fixtures for generated README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "AGENTS.md#1",
      "vector": {
        "readme": 0.1270001270001905,
        "slices": 0.06350006350009525,
        "under": 0.06350006350009525,
        "tests": 0.06350006350009525,
        "data": 0.06350006350009525,
        "and": 0.4445004445006667,
        "update": 0.06350006350009525,
        "them": 0.06350006350009525,
        "with": 0.06350006350009525,
        "helper": 0.06350006350009525,
        "scripts": 0.06350006350009525,
        "so": 0.06350006350009525,
        "diffs": 0.06350006350009525,
        "stay": 0.06350006350009525,
        "reviewable": 0.06350006350009525,
        "commit": 0.1270001270001905,
        "pull": 0.06350006350009525,
        "request": 0.06350006350009525,
        "guidelines": 0.06350006350009525,
        "follow": 0.06350006350009525,
        "conventional": 0.06350006350009525,
        "commits": 0.06350006350009525,
        "feat": 0.06350006350009525,
        "fix": 0.06350006350009525,
        "docs": 0.1270001270001905,
        "keep": 0.1270001270001905,
        "subject": 0.06350006350009525,
        "lines": 0.06350006350009525,
        "72": 0.06350006350009525,
        "characters": 0.06350006350009525,
        "explain": 0.06350006350009525,
        "broader": 0.06350006350009525,
        "scope": 0.06350006350009525,
        "in": 0.254000254000381,
        "the": 0.31750031750047625,
        "body": 0.06350006350009525,
        "when": 0.1270001270001905,
        "multiple": 0.06350006350009525,
        "subsystems": 0.06350006350009525,
        "change": 0.06350006350009525,
        "bundle": 0.06350006350009525,
        "related": 0.06350006350009525,
        "work": 0.1270001270001905,
        "into": 0.06350006350009525,
        "a": 0.254000254000381,
        "single": 0.06350006350009525,
        "pr": 0.1270001270001905,
        "that": 0.06350006350009525,
        "includes": 0.06350006350009525,
        "summary": 0.06350006350009525,
        "testing": 0.06350006350009525,
        "notes": 0.1270001270001905,
        "links": 0.06350006350009525,
        "to": 0.06350006350009525,
        "relevant": 0.06350006350009525,
        "issues": 0.06350006350009525,
        "or": 0.06350006350009525,
        "spec": 0.06350006350009525,
        "sections": 0.06350006350009525,
        "attach": 0.06350006350009525,
        "before": 0.1270001270001905,
        "after": 0.06350006350009525,
        "excerpts": 0.06350006350009525,
        "altering": 0.06350006350009525,
        "generation": 0.06350006350009525,
        "output": 0.06350006350009525,
        "run": 0.06350006350009525,
        "lint": 0.06350006350009525,
        "type": 0.06350006350009525,
        "check": 0.06350006350009525,
        "test": 0.06350006350009525,
        "commands": 0.06350006350009525,
        "opening": 0.06350006350009525,
        "paste": 0.06350006350009525,
        "condensed": 0.06350006350009525,
        "results": 0.06350006350009525,
        "description": 0.06350006350009525,
        "for": 0.06350006350009525,
        "quick": 0.06350006350009525,
        "verification": 0.06350006350009525,
        "environment": 0.1270001270001905,
        "tooling": 0.06350006350009525,
        "reuse": 0.06350006350009525,
        "local": 0.1270001270001905,
        "venv": 0.06350006350009525,
        "seeded": 0.06350006350009525,
        "by": 0.1270001270001905,
        "pycharm": 0.06350006350009525,
        "do": 0.06350006350009525,
        "not": 0.06350006350009525,
        "artifacts": 0.06350006350009525,
        "store": 0.06350006350009525,
        "secrets": 0.06350006350009525,
        "env": 0.06350006350009525,
        "consumed": 0.06350006350009525,
        "llm": 0.06350006350009525,
        "runner": 0.06350006350009525,
        "large": 0.06350006350009525,
        "model": 0.06350006350009525,
        "weights": 0.06350006350009525,
        "outside": 0.06350006350009525,
        "repository": 0.06350006350009525,
        "document": 0.06350006350009525,
        "their": 0.06350006350009525,
        "locations": 0.06350006350009525,
        "models": 0.06350006350009525,
        "md": 0.06350006350009525,
        "once": 0.06350006350009525,
        "integration": 0.06350006350009525,
        "begins": 0.06350006350009525
      },
      "text": "README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to relevant issues or spec sections; attach before/after README excerpts when altering generation output. - Run lint, type-check, and test commands before opening a PR and paste condensed results in the description for quick verification. ## Environment & Tooling Notes - Reuse the local `.venv` seeded by PyCharm; do not commit environment artifacts and store secrets in a `.env` consumed by the local LLM runner. - Keep large model weights outside the repository and document their locations in `docs/models.md` once integration work begins.",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "docs/ci/docgen-update.yml#0",
      "vector": {
        "name": 0.2773500981126145,
        "docgen": 0.1849000654084097,
        "update": 0.2311250817605121,
        "on": 0.09245003270420485,
        "push": 0.046225016352102424,
        "branches": 0.09245003270420485,
        "main": 0.13867504905630726,
        "pull_request": 0.13867504905630726,
        "jobs": 0.046225016352102424,
        "readme": 0.1849000654084097,
        "runs": 0.046225016352102424,
        "self": 0.046225016352102424,
        "hosted": 0.046225016352102424,
        "steps": 0.09245003270420485,
        "uses": 0.13867504905630726,
        "actions": 0.2311250817605121,
        "checkout": 0.046225016352102424,
        "v4": 0.09245003270420485,
        "with": 0.13867504905630726,
        "fetch": 0.046225016352102424,
        "depth": 0.046225016352102424,
        "0": 0.046225016352102424,
        "setup": 0.046225016352102424,
        "python": 0.2311250817605121,
        "v5": 0.046225016352102424,
        "version": 0.046225016352102424,
        "3": 0.046225016352102424,
        "11": 0.046225016352102424,
        "cache": 0.09245003270420485,
        "path": 0.046225016352102424,
        "pip": 0.2773500981126145,
        "key": 0.046225016352102424,
        "runner": 0.09245003270420485,
        "os": 0.09245003270420485,
        "hashfiles": 0.046225016352102424,
        "pyproject": 0.046225016352102424,
        "toml": 0.046225016352102424,
        "restore": 0.046225016352102424,
        "keys": 0.046225016352102424,
        "install": 0.13867504905630726,
        "dependencies": 0.046225016352102424,
        "run": 0.2311250817605121,
        "m": 0.13867504905630726,
        "upgrade": 0.046225016352102424,
        "e": 0.046225016352102424,
        "dev": 0.046225016352102424,
        "determine": 0.046225016352102424,
        "diff": 0.1849000654084097,
        "base": 0.2773500981126145,
        "id": 0.046225016352102424,
        "if": 0.09245003270420485,
        "github": 0.2311250817605121,
        "event_name": 0.046225016352102424,
        "then": 0.09245003270420485,
        "echo": 0.09245003270420485,
        "event": 0.046225016352102424,
        "sha": 0.046225016352102424,
        "github_output": 0.09245003270420485,
        "else": 0.046225016352102424,
        "origin": 0.046225016352102424,
        "fi": 0.09245003270420485,
        "env": 0.046225016352102424,
        "docgen_llm_base_url": 0.046225016352102424,
        "http": 0.046225016352102424,
        "localhost": 0.046225016352102424,
        "12434": 0.046225016352102424,
        "engines": 0.046225016352102424,
        "v1": 0.046225016352102424,
        "cli": 0.046225016352102424,
        "outputs": 0.046225016352102424,
        "commit": 0.09245003270420485,
        "md": 0.09245003270420485,
        "optional": 0.046225016352102424,
        "git": 0.1849000654084097,
        "status": 0.046225016352102424,
        "short": 0.046225016352102424,
        "grep": 0.046225016352102424,
        "q": 0.046225016352102424,
        "config": 0.09245003270420485,
        "user": 0.09245003270420485,
        "email": 0.046225016352102424,
        "users": 0.046225016352102424,
        "noreply": 0.046225016352102424,
        "com": 0.046225016352102424,
        "am": 0.046225016352102424,
        "docs": 0.046225016352102424,
        "via": 0.046225016352102424
      },
      "text": "name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted steps: - uses: actions/checkout@v4 with: fetch-depth: 0 - uses: actions/setup-python@v5 with: python-version: '3.11' - uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install dependencies run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README.md (optional) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi",
      "metadata": {
        "path": "docs/ci/docgen-update.yml",
        "tags": [
          "docs"
        ],
        "hash": "48bec2bc404707486fcb1661def194395cc581bf55cb2f610704d495663e6a14"
      }
    },
    {
      "id": "docs/ci/github-actions.md#0",
      "vector": {
        "github": 0.2528558164964056,
        "actions": 0.2212488394343549,
        "integration": 0.0316069770620507,
        "the": 0.18964186237230418,
        "workflow": 0.0632139541241014,
        "below": 0.0316069770620507,
        "runs": 0.0632139541241014,
        "docgen": 0.2212488394343549,
        "update": 0.18964186237230418,
        "on": 0.1264279082482028,
        "pushes": 0.0316069770620507,
        "and": 0.0316069770620507,
        "pull": 0.0316069770620507,
        "requests": 0.0316069770620507,
        "it": 0.0316069770620507,
        "assumes": 0.0316069770620507,
        "a": 0.0632139541241014,
        "self": 0.0632139541241014,
        "hosted": 0.1264279082482028,
        "runner": 0.15803488531025348,
        "or": 0.09482093118615209,
        "with": 0.18964186237230418,
        "network": 0.0632139541241014,
        "access": 0.0632139541241014,
        "to": 0.1264279082482028,
        "your": 0.0632139541241014,
        "local": 0.09482093118615209,
        "model": 0.0316069770620507,
        "runtime": 0.0316069770620507,
        "job": 0.0316069770620507,
        "skips": 0.0316069770620507,
        "early": 0.0316069770620507,
        "when": 0.0316069770620507,
        "no": 0.0316069770620507,
        "files": 0.0316069770620507,
        "match": 0.0316069770620507,
        "yml": 0.0316069770620507,
        "s": 0.0316069770620507,
        "ci": 0.0316069770620507,
        "watched_globs": 0.0316069770620507,
        "entries": 0.0316069770620507,
        "so": 0.0316069770620507,
        "that": 0.0316069770620507,
        "purely": 0.0316069770620507,
        "documentation": 0.0316069770620507,
        "only": 0.0316069770620507,
        "changes": 0.0316069770620507,
        "do": 0.0316069770620507,
        "not": 0.0316069770620507,
        "trigger": 0.0316069770620507,
        "generator": 0.0316069770620507,
        "yaml": 0.0316069770620507,
        "name": 0.3476767476825577,
        "push": 0.0316069770620507,
        "branches": 0.0632139541241014,
        "main": 0.09482093118615209,
        "pull_request": 0.09482093118615209,
        "jobs": 0.0316069770620507,
        "readme": 0.2212488394343549,
        "requires": 0.0316069770620507,
        "llm": 0.0316069770620507,
        "steps": 0.0632139541241014,
        "checkout": 0.0632139541241014,
        "repository": 0.0316069770620507,
        "uses": 0.1264279082482028,
        "v4": 0.09482093118615209,
        "fetch": 0.0316069770620507,
        "depth": 0.0316069770620507,
        "0": 0.0316069770620507,
        "set": 0.0316069770620507,
        "up": 0.0316069770620507,
        "python": 0.18964186237230418,
        "setup": 0.0316069770620507,
        "v5": 0.0316069770620507,
        "version": 0.0316069770620507,
        "3": 0.0316069770620507,
        "11": 0.0316069770620507,
        "cache": 0.09482093118615209,
        "pip": 0.2212488394343549,
        "dependencies": 0.0316069770620507,
        "path": 0.0632139541241014,
        "key": 0.0316069770620507,
        "os": 0.0632139541241014,
        "hashfiles": 0.0316069770620507,
        "pyproject": 0.0316069770620507,
        "toml": 0.0316069770620507,
        "restore": 0.0316069770620507,
        "keys": 0.0316069770620507,
        "install": 0.09482093118615209,
        "in": 0.0316069770620507,
        "editable": 0.0316069770620507,
        "mode": 0.0316069770620507,
        "run": 0.15803488531025348,
        "m": 0.09482093118615209,
        "upgrade": 0.0316069770620507,
        "e": 0.0316069770620507,
        "dev": 0.0316069770620507,
        "determine": 0.0316069770620507,
        "diff": 0.1264279082482028,
        "base": 0.18964186237230418,
        "id": 0.0316069770620507,
        "if": 0.1264279082482028,
        "event_name": 0.0316069770620507,
        "then": 0.0632139541241014,
        "echo": 0.0632139541241014,
        "event": 0.0316069770620507,
        "sha": 0.0316069770620507,
        "github_output": 0.0632139541241014,
        "else": 0.0316069770620507,
        "origin": 0.0316069770620507,
        "fi": 0.0632139541241014,
        "env": 0.0316069770620507,
        "docgen_llm_base_url": 0.0632139541241014,
        "http": 0.0316069770620507,
        "localhost": 0.0316069770620507,
        "12434": 0.0316069770620507,
        "engines": 0.0316069770620507,
        "v1": 0.0316069770620507,
        "cli": 0.0632139541241014,
        "outputs": 0.0316069770620507,
        "commit": 0.0632139541241014,
        "updates": 0.0316069770620507,
        "any": 0.0316069770620507,
        "git": 0.1264279082482028,
        "status": 0.0316069770620507,
        "short": 0.0316069770620507,
        "grep": 0.0316069770620507,
        "q": 0.0316069770620507,
        "md": 0.0632139541241014,
        "config": 0.0632139541241014,
        "user": 0.0632139541241014,
        "email": 0.0316069770620507,
        "users": 0.0316069770620507,
        "noreply": 0.0316069770620507,
        "com": 0.0316069770620507,
        "am": 0.0316069770620507,
        "docs": 0.0316069770620507,
        "via": 0.0316069770620507,
        "upload": 0.0632139541241014,
        "artifact": 0.0632139541241014,
        "success": 0.0316069770620507,
        "generated": 0.0316069770620507,
        "note": 0.0316069770620507,
        "relies": 0.0316069770620507,
        "pointing": 0.0316069770620507,
        "private": 0.0632139541241014,
        "inference": 0.0316069770620507,
        "endpoint": 0.0316069770620507,
        "for": 0.0316069770620507,
        "runners": 0.0316069770620507,
        "you": 0.0316069770620507,
        "will": 0.0316069770620507,
        "need": 0.0316069770620507,
        "expose": 0.0316069770620507,
        "within": 0.0316069770620507,
        "switch": 0.0316069770620507,
        "ollama": 0.0316069770620507,
        "appropriate": 0.0316069770620507,
        "caching": 0.0316069770620507
      },
      "text": "# GitHub Actions Integration The workflow below runs `docgen update` on pushes and pull requests. It assumes a self-hosted runner (or GitHub-hosted runner with network access to your local model runtime). The job skips early when no files match `.docgen.yml`'s `ci.watched_globs` entries so that purely documentation-only changes do not trigger the generator. ```yaml name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted # requires local LLM access steps: - name: Checkout repository uses: actions/checkout@v4 with: fetch-depth: 0 - name: Set up Python uses: actions/setup-python@v5 with: python-version: '3.11' - name: Cache pip dependencies uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install docgen in editable mode run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: | python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README updates (if any) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi - name: Upload README artifact if: success() uses: actions/upload-artifact@v4 with: name: generated-readme path: README.md ``` > **Note:** the workflow relies on `DOCGEN_LLM_BASE_URL` pointing to a local or > private inference endpoint. For GitHub-hosted runners you will need to expose > the runner within your private network or switch to the `ollama` CLI with > appropriate caching. ```",
      "metadata": {
        "path": "docs/ci/github-actions.md",
        "tags": [
          "docs"
        ],
        "hash": "178c6f25ecf7325348a9158158c6e6f36c29d520a922a6f0c2c739f4efe1b0d8"
      }
    },
    {
      "id": "spec/feature_checklist.md#0",
      "vector": {
        "intelligent": 0.028513297425610054,
        "readme": 0.08553989227683016,
        "generator": 0.028513297425610054,
        "feature": 0.028513297425610054,
        "checklist": 0.028513297425610054,
        "status": 0.028513297425610054,
        "legend": 0.028513297425610054,
        "not": 0.028513297425610054,
        "started": 0.028513297425610054,
        "in": 0.028513297425610054,
        "progress": 0.028513297425610054,
        "done": 0.028513297425610054,
        "scope": 0.028513297425610054,
        "tags": 0.028513297425610054,
        "mvp": 0.4847260562353709,
        "required": 0.028513297425610054,
        "for": 0.11405318970244022,
        "proof": 0.028513297425610054,
        "of": 0.08553989227683016,
        "concept": 0.028513297425610054,
        "next": 0.2851329742561005,
        "nice": 0.028513297425610054,
        "to": 0.08553989227683016,
        "have": 0.028513297425610054,
        "soon": 0.028513297425610054,
        "stretch": 0.11405318970244022,
        "later": 0.028513297425610054,
        "1": 0.05702659485122011,
        "core": 0.028513297425610054,
        "workflows": 0.028513297425610054,
        "x": 0.570265948512201,
        "docgen": 0.11405318970244022,
        "init": 0.028513297425610054,
        "initialize": 0.028513297425610054,
        "repos": 0.028513297425610054,
        "without": 0.05702659485122011,
        "docs": 0.11405318970244022,
        "update": 0.028513297425610054,
        "detect": 0.028513297425610054,
        "changes": 0.028513297425610054,
        "on": 0.028513297425610054,
        "commit": 0.028513297425610054,
        "pr": 0.028513297425610054,
        "and": 0.028513297425610054,
        "patch": 0.028513297425610054,
        "affected": 0.028513297425610054,
        "sections": 0.05702659485122011,
        "regenerate": 0.028513297425610054,
        "manual": 0.028513297425610054,
        "full": 0.028513297425610054,
        "partial": 0.028513297425610054,
        "regeneration": 0.028513297425610054,
        "dry": 0.05702659485122011,
        "run": 0.05702659485122011,
        "mode": 0.05702659485122011,
        "preview": 0.028513297425610054,
        "diffs": 0.028513297425610054,
        "writing": 0.028513297425610054,
        "service": 0.028513297425610054,
        "fastapi": 0.05702659485122011,
        "endpoints": 0.028513297425610054,
        "ci": 0.05702659485122011,
        "bots": 0.028513297425610054,
        "2": 0.028513297425610054,
        "repository": 0.028513297425610054,
        "scanning": 0.028513297425610054,
        "indexing": 0.028513297425610054,
        "walk": 0.028513297425610054,
        "filesystem": 0.028513297425610054,
        "with": 0.028513297425610054,
        "ignore": 0.028513297425610054,
        "rules": 0.028513297425610054,
        "gitignore": 0.028513297425610054,
        "yml": 0.028513297425610054,
        "build": 0.08553989227683016,
        "normalized": 0.028513297425610054,
        "manifest": 0.05702659485122011,
        "files": 0.05702659485122011,
        "roles": 0.028513297425610054,
        "src": 0.028513297425610054,
        "test": 0.05702659485122011,
        "config": 0.08553989227683016,
        "infra": 0.028513297425610054,
        "hash": 0.028513297425610054,
        "cache": 0.028513297425610054,
        "file": 0.028513297425610054,
        "metadata": 0.028513297425610054,
        "speed": 0.028513297425610054,
        "subsequent": 0.028513297425610054,
        "runs": 0.028513297425610054,
        "entrypoint": 0.05702659485122011,
        "detection": 0.05702659485122011,
        "e": 0.028513297425610054,
        "g": 0.028513297425610054,
        "main": 0.028513297425610054,
        "springbootapplication": 0.028513297425610054,
        "app": 0.028513297425610054,
        "monorepo": 0.05702659485122011,
        "module": 0.028513297425610054,
        "3": 0.028513297425610054,
        "analyzers": 0.14256648712805026,
        "plugin": 0.028513297425610054,
        "based": 0.028513297425610054,
        "language": 0.028513297425610054,
        "python": 0.028513297425610054,
        "java": 0.028513297425610054,
        "node": 0.028513297425610054,
        "js": 0.05702659485122011,
        "tier": 0.028513297425610054,
        "poetry": 0.028513297425610054,
        "setuptools": 0.028513297425610054,
        "maven": 0.028513297425610054,
        "gradle": 0.028513297425610054,
        "npm": 0.028513297425610054,
        "pnpm": 0.028513297425610054,
        "yarn": 0.028513297425610054,
        "dependency": 0.028513297425610054,
        "from": 0.028513297425610054,
        "pattern": 0.028513297425610054,
        "docker": 0.028513297425610054,
        "k8s": 0.028513297425610054,
        "layout": 0.028513297425610054,
        "tree": 0.028513297425610054,
        "sitter": 0.028513297425610054,
        "powered": 0.028513297425610054,
        "symbol": 0.028513297425610054,
        "extraction": 0.028513297425610054,
        "flagged": 0.028513297425610054,
        "4": 0.028513297425610054,
        "knowledge": 0.05702659485122011,
        "store": 0.028513297425610054,
        "rag": 0.028513297425610054,
        "local": 0.05702659485122011,
        "embedding": 0.028513297425610054,
        "model": 0.05702659485122011,
        "chunking": 0.028513297425610054,
        "strategy": 0.028513297425610054,
        "index": 0.028513297425610054,
        "top": 0.05702659485122011,
        "n": 0.028513297425610054,
        "source": 0.028513297425610054,
        "headers": 0.028513297425610054,
        "comments": 0.028513297425610054,
        "section": 0.14256648712805026,
        "scoped": 0.028513297425610054,
        "retrieval": 0.028513297425610054,
        "k": 0.028513297425610054,
        "per": 0.05702659485122011,
        "lightweight": 0.028513297425610054,
        "graph": 0.028513297425610054,
        "modules": 0.028513297425610054,
        "services": 0.028513297425610054,
        "signals": 0.028513297425610054,
        "5": 0.028513297425610054,
        "prompting": 0.028513297425610054,
        "templates": 0.08553989227683016,
        "jinja2": 0.028513297425610054,
        "intro": 0.028513297425610054,
        "features": 0.028513297425610054,
        "architecture": 0.05702659485122011,
        "quickstart": 0.028513297425610054,
        "deployment": 0.028513297425610054,
        "troubleshooting": 0.028513297425610054,
        "faq": 0.028513297425610054,
        "license": 0.028513297425610054,
        "guardrailed": 0.028513297425610054,
        "system": 0.028513297425610054,
        "prompt": 0.028513297425610054,
        "no": 0.028513297425610054,
        "speculation": 0.028513297425610054,
        "cite": 0.028513297425610054,
        "repo": 0.028513297425610054,
        "facts": 0.028513297425610054,
        "only": 0.028513297425610054,
        "token": 0.028513297425610054,
        "budgeting": 0.028513297425610054,
        "streaming": 0.028513297425610054,
        "by": 0.028513297425610054,
        "generation": 0.028513297425610054,
        "template": 0.028513297425610054,
        "override": 0.028513297425610054,
        "mechanism": 0.028513297425610054,
        "j2": 0.028513297425610054,
        "style": 0.028513297425610054,
        "presets": 0.028513297425610054,
        "concise": 0.028513297425610054,
        "vs": 0.028513297425610054,
        "comprehensive": 0.028513297425610054,
        "mermaid": 0.028513297425610054,
        "diagrams": 0.028513297425610054,
        "flow": 0.028513297425610054,
        "where": 0.028513297425610054,
        "appropriate": 0.028513297425610054,
        "6": 0.028513297425610054,
        "llm": 0.028513297425610054,
        "runner": 0.05702659485122011,
        "http": 0.028513297425610054,
        "adapter": 0.05702659485122011,
        "host": 0.028513297425610054,
        "container": 0.028513297425610054,
        "defaults": 0.028513297425610054,
        "env": 0.028513297425610054,
        "api": 0.028513297425610054,
        "key": 0.028513297425610054,
        "overrides": 0.028513297425610054,
        "llama": 0.028513297425610054,
        "cpp": 0.028513297425610054,
        "structured": 0.028513297425610054,
        "outputs": 0.028513297425610054,
        "tool": 0.028513297425610054,
        "use": 0.028513297425610054,
        "compatibility": 0.028513297425610054,
        "7": 0.028513297425610054,
        "post": 0.028513297425610054,
        "processing": 0.028513297425610054,
        "markdown": 0.028513297425610054,
        "lint": 0.028513297425610054,
        "heading": 0.028513297425610054,
        "hierarchy": 0.028513297425610054
      },
      "text": "# Intelligent README Generator \u2014 Feature Checklist > Status legend: \u2610 Not started \u00b7 \u25d0 In progress \u00b7 \u2714 Done > Scope tags: **[MVP]** required for proof\u2011of\u2011concept, **[NEXT]** nice\u2011to\u2011have soon, **[STRETCH]** later ## 1) Core Workflows - [x] **docgen init** \u2014 Initialize README for repos without docs **[MVP]** - [x] **docgen update** \u2014 Detect changes on commit/PR and patch affected sections **[MVP]** - [ ] **docgen regenerate** \u2014 Manual full/partial regeneration **[MVP]** - [x] Dry\u2011run mode (`--dry-run`) to preview diffs without writing **[NEXT]** - [ ] Service mode (FastAPI) endpoints for CI/bots **[STRETCH]** ## 2) Repository Scanning & Indexing - [x] Walk filesystem with ignore rules (`.gitignore`, `.docgen.yml`) **[MVP]** - [x] Build normalized manifest of files, roles (src/test/docs/config/infra) **[MVP]** - [x] Hash & cache file metadata to speed subsequent runs **[MVP]** - [x] Entrypoint detection (e.g., `main()`, `@SpringBootApplication`, FastAPI app) **[NEXT]** - [x] Monorepo module detection **[NEXT]** ## 3) Analyzers (Plugin\u2011based) - [x] Language analyzers: Python, Java, Node.js (Tier\u20111) **[MVP]** - [x] Build analyzers: Poetry/Setuptools, Maven/Gradle, npm/pnpm/yarn **[MVP]** - [x] Dependency analyzers from manifest files **[MVP]** - [x] Pattern analyzers: Docker/K8s, CI config, monorepo layout **[NEXT]** - [ ] Tree\u2011sitter powered symbol/entrypoint extraction (flagged) **[STRETCH]** ## 4) Knowledge Store (RAG) - [ ] Local embedding model + chunking strategy **[MVP]** - [ ] Index `README`, `/docs`, top N source headers & comments **[MVP]** - [ ] Section\u2011scoped retrieval (top\u2011k per section) **[MVP]** - [ ] Lightweight knowledge graph of modules/services/signals **[NEXT]** ## 5) Prompting & Templates - [x] Jinja2 templates per section (intro, features, architecture, quickstart, config, build/test, deployment, troubleshooting, FAQ, license) **[MVP]** - [x] Guardrailed system prompt (\u201cno speculation; cite repo facts only\u201d) **[MVP]** - [x] Token budgeting & streaming section-by-section generation **[MVP]** - [x] Template override mechanism (`docs/templates/*.j2`) **[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy,",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#1",
      "vector": {
        "next": 0.3907019005301633,
        "x": 0.5860528507952449,
        "style": 0.05581455721859476,
        "presets": 0.02790727860929738,
        "concise": 0.02790727860929738,
        "vs": 0.02790727860929738,
        "comprehensive": 0.02790727860929738,
        "mermaid": 0.02790727860929738,
        "js": 0.05581455721859476,
        "diagrams": 0.02790727860929738,
        "for": 0.11162911443718952,
        "architecture": 0.02790727860929738,
        "flow": 0.02790727860929738,
        "sections": 0.05581455721859476,
        "where": 0.02790727860929738,
        "appropriate": 0.02790727860929738,
        "6": 0.02790727860929738,
        "local": 0.05581455721859476,
        "llm": 0.05581455721859476,
        "runner": 0.05581455721859476,
        "model": 0.02790727860929738,
        "http": 0.02790727860929738,
        "adapter": 0.05581455721859476,
        "host": 0.02790727860929738,
        "container": 0.02790727860929738,
        "defaults": 0.05581455721859476,
        "env": 0.02790727860929738,
        "api": 0.02790727860929738,
        "key": 0.02790727860929738,
        "overrides": 0.02790727860929738,
        "mvp": 0.47442373635805546,
        "llama": 0.02790727860929738,
        "cpp": 0.02790727860929738,
        "structured": 0.02790727860929738,
        "outputs": 0.05581455721859476,
        "tool": 0.02790727860929738,
        "use": 0.02790727860929738,
        "compatibility": 0.02790727860929738,
        "stretch": 0.05581455721859476,
        "7": 0.02790727860929738,
        "post": 0.02790727860929738,
        "processing": 0.02790727860929738,
        "markdown": 0.02790727860929738,
        "lint": 0.05581455721859476,
        "heading": 0.02790727860929738,
        "hierarchy": 0.02790727860929738,
        "code": 0.05581455721859476,
        "fences": 0.02790727860929738,
        "line": 0.02790727860929738,
        "length": 0.02790727860929738,
        "auto": 0.05581455721859476,
        "toc": 0.02790727860929738,
        "level": 0.02790727860929738,
        "3": 0.02790727860929738,
        "badges": 0.02790727860929738,
        "build": 0.05581455721859476,
        "coverage": 0.05581455721859476,
        "license": 0.02790727860929738,
        "with": 0.05581455721859476,
        "safe": 0.05581455721859476,
        "link": 0.05581455721859476,
        "validator": 0.02790727860929738,
        "relative": 0.02790727860929738,
        "absolute": 0.02790727860929738,
        "managed": 0.02790727860929738,
        "markers": 0.02790727860929738,
        "idempotent": 0.02790727860929738,
        "patching": 0.02790727860929738,
        "docgen": 0.08372183582789214,
        "begin": 0.02790727860929738,
        "end": 0.02790727860929738,
        "8": 0.02790727860929738,
        "git": 0.02790727860929738,
        "integration": 0.05581455721859476,
        "diff": 0.05581455721859476,
        "detection": 0.02790727860929738,
        "map": 0.02790727860929738,
        "changed": 0.05581455721859476,
        "files": 0.05581455721859476,
        "impacted": 0.02790727860929738,
        "branch": 0.02790727860929738,
        "pr": 0.05581455721859476,
        "creation": 0.02790727860929738,
        "summary": 0.02790727860929738,
        "of": 0.02790727860929738,
        "readme": 0.11162911443718952,
        "deltas": 0.02790727860929738,
        "commit": 0.02790727860929738,
        "mode": 0.02790727860929738,
        "init": 0.02790727860929738,
        "or": 0.02790727860929738,
        "small": 0.02790727860929738,
        "changes": 0.05581455721859476,
        "configurable": 0.02790727860929738,
        "prevent": 0.02790727860929738,
        "loops": 0.02790727860929738,
        "on": 0.05581455721859476,
        "only": 0.08372183582789214,
        "9": 0.02790727860929738,
        "configuration": 0.02790727860929738,
        "parse": 0.02790727860929738,
        "yml": 0.02790727860929738,
        "analyzers": 0.02790727860929738,
        "publish": 0.02790727860929738,
        "path": 0.02790727860929738,
        "exclusions": 0.02790727860929738,
        "watched_globs": 0.02790727860929738,
        "ci": 0.08372183582789214,
        "triggers": 0.02790727860929738,
        "per": 0.05581455721859476,
        "section": 0.02790727860929738,
        "off": 0.02790727860929738,
        "toggles": 0.02790727860929738,
        "and": 0.08372183582789214,
        "titles": 0.02790727860929738,
        "10": 0.02790727860929738,
        "github": 0.02790727860929738,
        "actions": 0.02790727860929738,
        "example": 0.02790727860929738,
        "workflow": 0.02790727860929738,
        "gitlab": 0.02790727860929738,
        "bitbucket": 0.02790727860929738,
        "pipelines": 0.02790727860929738,
        "samples": 0.02790727860929738,
        "labeling": 0.02790727860929738,
        "docs": 0.02790727860929738,
        "update": 0.02790727860929738,
        "behavior": 0.02790727860929738,
        "11": 0.02790727860929738,
        "security": 0.02790727860929738,
        "privacy": 0.02790727860929738,
        "models": 0.02790727860929738,
        "never": 0.02790727860929738,
        "exfiltrate": 0.02790727860929738,
        "respect": 0.02790727860929738,
        "gitignore": 0.02790727860929738,
        "exclude": 0.02790727860929738,
        "large": 0.02790727860929738,
        "binaries": 0.02790727860929738,
        "secrets": 0.02790727860929738,
        "optional": 0.02790727860929738,
        "simple": 0.02790727860929738,
        "secret": 0.02790727860929738,
        "scanner": 0.02790727860929738,
        "gate": 0.02790727860929738,
        "12": 0.02790727860929738,
        "multi": 0.02790727860929738,
        "language": 0.02790727860929738,
        "project": 0.02790727860929738,
        "types": 0.02790727860929738,
        "tier": 0.05581455721859476,
        "1": 0.02790727860929738,
        "python": 0.02790727860929738,
        "poetry": 0.02790727860929738,
        "setuptools": 0.02790727860929738,
        "java": 0.02790727860929738,
        "maven": 0.02790727860929738,
        "gradle": 0.02790727860929738,
        "spring": 0.02790727860929738,
        "boot": 0.02790727860929738,
        "node": 0.02790727860929738,
        "npm": 0.02790727860929738,
        "pnpm": 0.02790727860929738,
        "express": 0.02790727860929738,
        "2": 0.02790727860929738,
        "go": 0.02790727860929738,
        "rust": 0.02790727860929738,
        "ruby": 0.02790727860929738,
        "php": 0.02790727860929738,
        "framework": 0.02790727860929738,
        "aware": 0.02790727860929738,
        "quickstart": 0.02790727860929738,
        "commands": 0.02790727860929738,
        "system": 0.02790727860929738,
        "13": 0.02790727860929738,
        "quality": 0.02790727860929738,
        "gates": 0.02790727860929738,
        "evaluation": 0.02790727860929738,
        "command": 0.02790727860929738,
        "validation": 0.02790727860929738,
        "existence": 0.02790727860929738,
        "checks": 0.05581455721859476,
        "no": 0.02790727860929738,
        "hallucination": 0.02790727860929738,
        "reject": 0.02790727860929738,
        "facts": 0.02790727860929738,
        "not": 0.02790727860929738,
        "in": 0.02790727860929738,
        "signals": 0.02790727860929738,
        "rag": 0.05581455721859476,
        "scorecard": 0.02790727860929738,
        "buildability": 0.02790727860929738,
        "validity": 0.02790727860929738,
        "alignment": 0.02790727860929738,
        "14": 0.02790727860929738,
        "performance": 0.02790727860929738,
        "caching": 0.02790727860929738,
        "persist": 0.02790727860929738,
        "analyzer": 0.02790727860929738,
        "embeddings": 0.02790727860929738,
        "under": 0.02790727860929738,
        "incremental": 0.02790727860929738,
        "refresh": 0.02790727860929738,
        "15": 0.02790727860929738,
        "error": 0.02790727860929738,
        "handling": 0.02790727860929738,
        "ux": 0.02790727860929738,
        "fail": 0.02790727860929738,
        "stub": 0.02790727860929738,
        "generation": 0.02790727860929738,
        "when": 0.02790727860929738,
        "evidence": 0.02790727860929738
      },
      "text": "**[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy, code fences, line length **[MVP]** - [x] Auto ToC (\u2264 level 3) **[MVP]** - [x] Badges (build, coverage, license) with safe defaults **[NEXT]** - [x] Link validator (relative/absolute) **[NEXT]** - [x] Managed markers for idempotent patching (`<!-- docgen:begin:end -->`) **[MVP]** ## 8) Git Integration - [x] Diff detection (map changed files \u2192 impacted sections) **[MVP]** - [x] Branch + PR creation with summary of README deltas **[MVP]** - [x] Commit mode for init or small changes (configurable) **[NEXT]** - [ ] Prevent loops on README\u2011only changes **[MVP]** ## 9) Configuration - [x] Parse `.docgen.yml` (LLM, readme style, analyzers, publish) **[MVP]** - [x] Path exclusions & `watched_globs` for CI triggers **[MVP]** - [ ] Per-section on/off toggles and titles **[NEXT]** ## 10) CI Integration - [x] GitHub Actions example workflow **[MVP]** - [ ] GitLab CI and Bitbucket Pipelines samples **[NEXT]** - [x] Labeling (`docs:auto`) and PR update behavior **[NEXT]** ## 11) Security & Privacy - [x] Local-only models; never exfiltrate code **[MVP]** - [ ] Respect `.gitignore`; exclude large binaries/secrets **[MVP]** - [ ] Optional simple secret scanner gate **[NEXT]** ## 12) Multi\u2011Language & Project Types - [ ] Tier\u20111: Python (Poetry/Setuptools), Java (Maven/Gradle/Spring Boot), Node.js (npm/pnpm/Express/Next) **[MVP]** - [ ] Tier\u20112: Go, Rust, Ruby, PHP **[STRETCH]** - [x] Framework\u2011aware quickstart commands per build system **[MVP]** ## 13) Quality Gates & Evaluation - [ ] Command validation (existence checks) **[MVP]** - [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#2",
      "vector": {
        "no": 0.07018624063435965,
        "hallucination": 0.07018624063435965,
        "checks": 0.07018624063435965,
        "reject": 0.07018624063435965,
        "facts": 0.07018624063435965,
        "not": 0.07018624063435965,
        "in": 0.07018624063435965,
        "signals": 0.07018624063435965,
        "rag": 0.1403724812687193,
        "mvp": 0.42111744380615784,
        "x": 0.49130368444051753,
        "readme": 0.1403724812687193,
        "scorecard": 0.07018624063435965,
        "coverage": 0.07018624063435965,
        "buildability": 0.07018624063435965,
        "link": 0.07018624063435965,
        "validity": 0.07018624063435965,
        "diff": 0.07018624063435965,
        "alignment": 0.07018624063435965,
        "lint": 0.1403724812687193,
        "next": 0.21055872190307892,
        "14": 0.07018624063435965,
        "performance": 0.07018624063435965,
        "caching": 0.07018624063435965,
        "persist": 0.07018624063435965,
        "analyzer": 0.1403724812687193,
        "outputs": 0.07018624063435965,
        "embeddings": 0.07018624063435965,
        "under": 0.07018624063435965,
        "docgen": 0.07018624063435965,
        "incremental": 0.07018624063435965,
        "refresh": 0.07018624063435965,
        "changed": 0.07018624063435965,
        "files": 0.07018624063435965,
        "only": 0.07018624063435965,
        "15": 0.07018624063435965,
        "error": 0.07018624063435965,
        "handling": 0.07018624063435965,
        "ux": 0.07018624063435965,
        "fail": 0.07018624063435965,
        "safe": 0.07018624063435965,
        "stub": 0.07018624063435965,
        "generation": 0.07018624063435965,
        "when": 0.07018624063435965,
        "evidence": 0.07018624063435965,
        "is": 0.07018624063435965,
        "insufficient": 0.07018624063435965,
        "clear": 0.07018624063435965,
        "run": 0.07018624063435965,
        "logs": 0.07018624063435965,
        "pr": 0.07018624063435965,
        "body": 0.07018624063435965,
        "with": 0.07018624063435965,
        "rationale": 0.07018624063435965,
        "sections": 0.07018624063435965,
        "updated": 0.07018624063435965,
        "because": 0.07018624063435965,
        "helpful": 0.07018624063435965,
        "cli": 0.07018624063435965,
        "errors": 0.07018624063435965,
        "and": 0.1403724812687193,
        "verbose": 0.07018624063435965,
        "flag": 0.07018624063435965,
        "works": 0.07018624063435965,
        "pre": 0.07018624063435965,
        "post": 0.07018624063435965,
        "subcommand": 0.07018624063435965,
        "16": 0.07018624063435965,
        "extensibility": 0.07018624063435965,
        "abc": 0.07018624063435965,
        "plugin": 0.07018624063435965,
        "discovery": 0.07018624063435965,
        "template": 0.07018624063435965,
        "packs": 0.07018624063435965,
        "org": 0.07018624063435965,
        "style": 0.1403724812687193,
        "definition": 0.07018624063435965,
        "of": 0.07018624063435965,
        "done": 0.07018624063435965,
        "per": 0.07018624063435965,
        "section": 0.07018624063435965,
        "passing": 0.07018624063435965,
        "unit": 0.07018624063435965,
        "integration": 0.07018624063435965,
        "tests": 0.07018624063435965,
        "for": 0.07018624063435965,
        "core": 0.07018624063435965,
        "logic": 0.07018624063435965,
        "golden": 0.07018624063435965,
        "regression": 0.07018624063435965,
        "test": 0.07018624063435965,
        "s": 0.07018624063435965,
        "meets": 0.07018624063435965,
        "requirements": 0.07018624063435965
      },
      "text": "- [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence is insufficient **[MVP]** - [ ] Clear run logs + PR body with rationale (\u201csections updated because\u2026\u201d) **[MVP]** - [x] Helpful CLI errors and `--verbose` flag (works pre/post subcommand) **[MVP]** ## 16) Extensibility - [x] Analyzer ABC and plugin discovery **[MVP]** - [x] Template packs (org\u2011style) **[NEXT]** --- ### Definition of Done (per section) - [ ] Passing unit & integration tests for core logic - [ ] Golden README regression test(s) - [ ] Meets lint/style requirements",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_order.md#0",
      "vector": {
        "docgen": 0.23979625973207228,
        "development": 0.029974532466509034,
        "roadmap": 0.029974532466509034,
        "phase": 0.20982172726556325,
        "0": 0.029974532466509034,
        "bootstrap": 0.029974532466509034,
        "the": 0.029974532466509034,
        "skeleton": 0.05994906493301807,
        "1": 0.3596943895981084,
        "project": 0.029974532466509034,
        "cli": 0.05994906493301807,
        "config": 0.11989812986603614,
        "loader": 0.029974532466509034,
        "yml": 0.029974532466509034,
        "models": 0.029974532466509034,
        "covers": 0.47959251946414455,
        "commands": 0.029974532466509034,
        "scaffolding": 0.029974532466509034,
        "9": 0.05994906493301807,
        "parse": 0.029974532466509034,
        "16": 0.05994906493301807,
        "analyzer": 0.05994906493301807,
        "abc": 0.05994906493301807,
        "2": 0.23979625973207228,
        "plugin": 0.05994906493301807,
        "discovery": 0.05994906493301807,
        "init": 0.11989812986603614,
        "happy": 0.029974532466509034,
        "path": 0.05994906493301807,
        "single": 0.029974532466509034,
        "repo": 0.11989812986603614,
        "local": 0.11989812986603614,
        "scanner": 0.029974532466509034,
        "manifest": 0.05994906493301807,
        "roles": 0.029974532466509034,
        "hashing": 0.029974532466509034,
        "ignores": 0.05994906493301807,
        "walk": 0.029974532466509034,
        "fs": 0.029974532466509034,
        "cache": 0.029974532466509034,
        "tier": 0.029974532466509034,
        "analyzers": 0.0899235973995271,
        "python": 0.029974532466509034,
        "java": 0.029974532466509034,
        "node": 0.029974532466509034,
        "build": 0.05994906493301807,
        "dependency": 0.029974532466509034,
        "3": 0.0899235973995271,
        "language": 0.05994906493301807,
        "deps": 0.029974532466509034,
        "templates": 0.05994906493301807,
        "prompt": 0.05994906493301807,
        "builder": 0.029974532466509034,
        "section": 0.14987266233254518,
        "by": 0.029974532466509034,
        "guardrailed": 0.029974532466509034,
        "system": 0.029974532466509034,
        "5": 0.11989812986603614,
        "jinja2": 0.029974532466509034,
        "guardrails": 0.029974532466509034,
        "token": 0.029974532466509034,
        "budget": 0.029974532466509034,
        "4": 0.0899235973995271,
        "llm": 0.029974532466509034,
        "runner": 0.029974532466509034,
        "ollama": 0.05994906493301807,
        "adapter": 0.029974532466509034,
        "6": 0.0899235973995271,
        "post": 0.029974532466509034,
        "processor": 0.029974532466509034,
        "managed": 0.029974532466509034,
        "markers": 0.0899235973995271,
        "toc": 0.05994906493301807,
        "markdown": 0.029974532466509034,
        "lint": 0.05994906493301807,
        "7": 0.029974532466509034,
        "git": 0.05994906493301807,
        "publisher": 0.05994906493301807,
        "commit": 0.05994906493301807,
        "mode": 0.05994906493301807,
        "for": 0.05994906493301807,
        "only": 0.0899235973995271,
        "8": 0.0899235973995271,
        "end": 0.05994906493301807,
        "to": 0.029974532466509034,
        "milestone": 0.0899235973995271,
        "generates": 0.029974532466509034,
        "a": 0.0899235973995271,
        "clean": 0.029974532466509034,
        "readme": 0.05994906493301807,
        "with": 0.0899235973995271,
        "no": 0.0899235973995271,
        "docs": 0.05994906493301807,
        "update": 0.11989812986603614,
        "on": 0.029974532466509034,
        "change": 0.05994906493301807,
        "pr": 0.14987266233254518,
        "workflow": 0.029974532466509034,
        "diff": 0.05994906493301807,
        "detection": 0.05994906493301807,
        "mapping": 0.05994906493301807,
        "patching": 0.029974532466509034,
        "inside": 0.029974532466509034,
        "prevent": 0.029974532466509034,
        "loops": 0.029974532466509034,
        "branch": 0.05994906493301807,
        "delta": 0.029974532466509034,
        "summary": 0.029974532466509034,
        "10": 0.05994906493301807,
        "labeling": 0.029974532466509034,
        "later": 0.029974532466509034,
        "opens": 0.029974532466509034,
        "updating": 0.029974532466509034,
        "impacted": 0.029974532466509034,
        "sections": 0.029974532466509034,
        "minimal": 0.029974532466509034,
        "rag": 0.05994906493301807,
        "accuracy": 0.029974532466509034,
        "lite": 0.029974532466509034,
        "embed": 0.029974532466509034,
        "top": 0.029974532466509034,
        "n": 0.029974532466509034,
        "source": 0.029974532466509034,
        "headers": 0.029974532466509034,
        "scoped": 0.029974532466509034,
        "retrieval": 0.05994906493301807,
        "embedding": 0.029974532466509034,
        "index": 0.029974532466509034,
        "sources": 0.029974532466509034,
        "per": 0.029974532466509034,
        "hallucination": 0.05994906493301807,
        "command": 0.05994906493301807,
        "existence": 0.029974532466509034,
        "checks": 0.029974532466509034,
        "13": 0.029974532466509034,
        "validation": 0.029974532466509034,
        "outputs": 0.029974532466509034,
        "grounded": 0.029974532466509034,
        "in": 0.029974532466509034,
        "facts": 0.029974532466509034,
        "targeted": 0.029974532466509034,
        "context": 0.029974532466509034,
        "hardening": 0.029974532466509034,
        "dx": 0.029974532466509034,
        "error": 0.029974532466509034,
        "handling": 0.029974532466509034,
        "clear": 0.029974532466509034,
        "logs": 0.05994906493301807,
        "verbose": 0.029974532466509034,
        "fail": 0.05994906493301807,
        "safe": 0.05994906493301807,
        "stubs": 0.029974532466509034,
        "15": 0.029974532466509034,
        "ux": 0.029974532466509034,
        "security": 0.029974532466509034,
        "gitignore": 0.029974532466509034,
        "respect": 0.029974532466509034,
        "excludes": 0.05994906493301807,
        "enforcement": 0.029974532466509034,
        "11": 0.029974532466509034,
        "privacy": 0.029974532466509034,
        "ci": 0.029974532466509034,
        "integration": 0.029974532466509034,
        "polish": 0.029974532466509034,
        "github": 0.029974532466509034,
        "actions": 0.05994906493301807,
        "sample": 0.029974532466509034,
        "push": 0.029974532466509034,
        "trigger": 0.029974532466509034,
        "calling": 0.029974532466509034,
        "gh": 0.029974532466509034,
        "refinements": 0.029974532466509034,
        "watched": 0.029974532466509034,
        "globs": 0.029974532466509034,
        "style": 0.05994906493301807,
        "preset": 0.029974532466509034,
        "concise": 0.029974532466509034,
        "comprehensive": 0.029974532466509034,
        "watched_globs": 0.029974532466509034,
        "presets": 0.029974532466509034,
        "multi": 0.029974532466509034,
        "breadth": 0.029974532466509034,
        "framework": 0.029974532466509034,
        "smarts": 0.029974532466509034,
        "entrypoint": 0.029974532466509034,
        "main": 0.029974532466509034,
        "spring": 0.029974532466509034,
        "boot": 0.029974532466509034,
        "fastapi": 0.029974532466509034
      },
      "text": "# DocGen Development Roadmap ## Phase 0 \u2014 Bootstrap the skeleton 1. **Project skeleton + CLI (`docgen`) + config loader (`.docgen.yml`) + models** * Covers: 1 (commands scaffolding), 9 (parse config), 16 (Analyzer ABC) 2. **Analyzer plugin ABC & discovery** * Covers: 16 (plugin discovery) ## Phase 1 \u2014 \"Init\" happy-path (single repo, local) 1. **Repo scanner & manifest (roles, hashing, ignores)** * Covers: 2 (walk FS, manifest, cache, ignores) 2. **Tier-1 analyzers (Python, Java, Node) + build analyzers + dependency analyzers** * Covers: 3 (language/build/deps) 3. **Templates + prompt builder (section-by-section) + guardrailed system prompt** * Covers: 5 (Jinja2 templates, guardrails, token budget) 4. **Local LLM runner (Ollama adapter)** * Covers: 6 (Ollama) 5. **Post-processor: managed markers, ToC, markdown lint** * Covers: 7 (markers, ToC, lint) 6. **Git publisher: commit mode (for init only)** * Covers: 8 (commit mode), 1 (`docgen init` end-to-end) \u2705 **Milestone**: `docgen init` generates a clean README for a repo with no docs. ## Phase 2 \u2014 Update-on-change (PR workflow) 1. **Diff detection + change\u2192section mapping + patching inside markers** * Covers: 8 (diff mapping, prevent loops), 1 (`docgen update`) 2. **Git publisher: branch + PR with delta summary** * Covers: 8 (branch/PR), 10 (labeling later) \u2705 **Milestone**: `docgen update` opens a PR updating only impacted sections. ## Phase 3 \u2014 Minimal RAG & accuracy 1. **RAG Lite: embed README/docs/top N source headers; section-scoped retrieval** * Covers: 4 (local embedding, index sources, per-section retrieval) 2. **No-hallucination & command existence checks** * Covers: 13 (command validation, no-hallucination) \u2705 **Milestone**: outputs grounded in repo facts with targeted context. ## Phase 4 \u2014 Hardening & DX 1. **Error handling, clear logs, `--verbose`, fail-safe stubs** * Covers: 15 (fail-safe, logs, CLI UX) 2. **Security: .gitignore respect, path excludes, local-only enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI)",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/feature_order.md#1",
      "vector": {
        "enforcement": 0.04252432555625623,
        "covers": 0.4252432555625623,
        "11": 0.04252432555625623,
        "privacy": 0.04252432555625623,
        "excludes": 0.04252432555625623,
        "phase": 0.17009730222502492,
        "5": 0.12757297666876868,
        "ci": 0.12757297666876868,
        "integration": 0.04252432555625623,
        "config": 0.12757297666876868,
        "polish": 0.08504865111251246,
        "1": 0.25514595333753737,
        "github": 0.04252432555625623,
        "actions": 0.08504865111251246,
        "sample": 0.04252432555625623,
        "push": 0.04252432555625623,
        "pr": 0.17009730222502492,
        "trigger": 0.04252432555625623,
        "calling": 0.04252432555625623,
        "docgen": 0.12757297666876868,
        "update": 0.04252432555625623,
        "10": 0.08504865111251246,
        "gh": 0.04252432555625623,
        "2": 0.21262162778128116,
        "refinements": 0.04252432555625623,
        "watched": 0.04252432555625623,
        "globs": 0.04252432555625623,
        "style": 0.08504865111251246,
        "preset": 0.04252432555625623,
        "concise": 0.04252432555625623,
        "comprehensive": 0.04252432555625623,
        "9": 0.04252432555625623,
        "watched_globs": 0.04252432555625623,
        "presets": 0.04252432555625623,
        "6": 0.08504865111251246,
        "multi": 0.04252432555625623,
        "language": 0.08504865111251246,
        "breadth": 0.08504865111251246,
        "framework": 0.17009730222502492,
        "smarts": 0.04252432555625623,
        "entrypoint": 0.04252432555625623,
        "detection": 0.04252432555625623,
        "main": 0.04252432555625623,
        "spring": 0.04252432555625623,
        "boot": 0.04252432555625623,
        "fastapi": 0.08504865111251246,
        "aware": 0.08504865111251246,
        "quick": 0.04252432555625623,
        "start": 0.04252432555625623,
        "entrypoints": 0.04252432555625623,
        "12": 0.04252432555625623,
        "commands": 0.04252432555625623,
        "pattern": 0.08504865111251246,
        "analyzers": 0.08504865111251246,
        "docker": 0.04252432555625623,
        "k8s": 0.04252432555625623,
        "monorepo": 0.04252432555625623,
        "layout": 0.04252432555625623,
        "3": 0.12757297666876868,
        "7": 0.12757297666876868,
        "quality": 0.08504865111251246,
        "gates": 0.08504865111251246,
        "performance": 0.08504865111251246,
        "readme": 0.08504865111251246,
        "scorecard": 0.08504865111251246,
        "link": 0.08504865111251246,
        "validator": 0.08504865111251246,
        "badges": 0.08504865111251246,
        "13": 0.04252432555625623,
        "artifact": 0.04252432555625623,
        "embedding": 0.04252432555625623,
        "caching": 0.08504865111251246,
        "in": 0.04252432555625623,
        "incremental": 0.08504865111251246,
        "rag": 0.12757297666876868,
        "refresh": 0.08504865111251246,
        "14": 0.04252432555625623,
        "persist": 0.04252432555625623,
        "outputs": 0.04252432555625623,
        "8": 0.04252432555625623,
        "nice": 0.04252432555625623,
        "to": 0.12757297666876868,
        "have": 0.04252432555625623,
        "stretch": 0.04252432555625623,
        "dry": 0.08504865111251246,
        "run": 0.08504865111251246,
        "mode": 0.12757297666876868,
        "labeling": 0.08504865111251246,
        "updates": 0.08504865111251246,
        "commit": 0.08504865111251246,
        "policy": 0.04252432555625623,
        "tuning": 0.04252432555625623,
        "template": 0.12757297666876868,
        "overrides": 0.04252432555625623,
        "docs": 0.04252432555625623,
        "templates": 0.04252432555625623,
        "j2": 0.04252432555625623,
        "org": 0.04252432555625623,
        "packs": 0.08504865111251246,
        "override": 0.04252432555625623,
        "16": 0.04252432555625623,
        "service": 0.08504865111251246,
        "llama": 0.08504865111251246,
        "cpp": 0.08504865111251246,
        "adapter": 0.04252432555625623,
        "tree": 0.08504865111251246,
        "sitter": 0.08504865111251246,
        "extraction": 0.04252432555625623,
        "why": 0.04252432555625623,
        "this": 0.04252432555625623,
        "order": 0.04252432555625623,
        "fastest": 0.04252432555625623,
        "path": 0.04252432555625623,
        "value": 0.04252432555625623,
        "get": 0.04252432555625623,
        "init": 0.04252432555625623,
        "producing": 0.04252432555625623,
        "a": 0.04252432555625623,
        "solid": 0.04252432555625623,
        "before": 0.04252432555625623,
        "adding": 0.04252432555625623,
        "diffing": 0.04252432555625623,
        "contain": 0.04252432555625623,
        "risk": 0.04252432555625623,
        "early": 0.04252432555625623,
        "section": 0.04252432555625623,
        "markers": 0.04252432555625623,
        "lint": 0.04252432555625623,
        "and": 0.12757297666876868,
        "publishing": 0.04252432555625623,
        "ensure": 0.04252432555625623,
        "safe": 0.04252432555625623,
        "idempotent": 0.04252432555625623,
        "edits": 0.04252432555625623,
        "accuracy": 0.04252432555625623,
        "next": 0.04252432555625623,
        "add": 0.04252432555625623,
        "validation": 0.04252432555625623,
        "avoid": 0.04252432555625623,
        "hallucinations": 0.04252432555625623,
        "once": 0.04252432555625623,
        "the": 0.08504865111251246,
        "pipeline": 0.04252432555625623,
        "works": 0.04252432555625623,
        "scale": 0.04252432555625623,
        "later": 0.04252432555625623,
        "only": 0.04252432555625623,
        "after": 0.04252432555625623,
        "core": 0.04252432555625623,
        "loop": 0.04252432555625623,
        "is": 0.04252432555625623,
        "robust": 0.04252432555625623,
        "do": 0.04252432555625623,
        "we": 0.04252432555625623,
        "widen": 0.04252432555625623,
        "coverage": 0.04252432555625623,
        "last": 0.04252432555625623,
        "refine": 0.04252432555625623,
        "dev": 0.04252432555625623,
        "experience": 0.04252432555625623
      },
      "text": "enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI) + framework-aware Quick Start** * Covers: 2 (entrypoints), 12 (framework-aware commands) 2. **Pattern analyzers (Docker/K8s, CI config, monorepo layout)** * Covers: 3 (pattern analyzers) ## Phase 7 \u2014 Quality gates & performance 1. **README scorecard + link validator + badges** * Covers: 13 (scorecard), 7 (link validator), 7 (badges) 2. **Artifact & embedding caching in `.docgen/` + incremental RAG refresh** * Covers: 14 (persist outputs, incremental refresh) ## Phase 8 \u2014 \"Nice to have\" & stretch 1. **Dry-run mode, PR labeling/updates, commit/PR policy tuning** * Covers: 1 (dry-run), 10 (labeling/PR updates) 2. **Template overrides (`docs/templates/*.j2`) & org template packs** * Covers: 5 (override), 16 (template packs) 3. **Service mode (FastAPI), llama.cpp adapter, tree-sitter extraction** * Covers: 1 (service mode), 6 (llama.cpp), 3 (tree-sitter) ## Why this order * **Fastest path to value**: get `docgen init` producing a solid README before adding diffing/RAG. * **Contain risk early**: section markers, lint, and commit publishing ensure safe/idempotent edits. * **Accuracy next**: add RAG + validation to avoid hallucinations once the pipeline works. * **Scale breadth later**: only after the core loop is robust do we widen language/framework coverage. * **Polish last**: CI, caching, and quality gates refine dev experience and performance.",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/spec.md#0",
      "vector": {
        "intelligent": 0.04393747751637468,
        "readme": 0.17574991006549873,
        "generator": 0.04393747751637468,
        "architecture": 0.08787495503274936,
        "spec": 0.04393747751637468,
        "python": 0.08787495503274936,
        "local": 0.13181243254912403,
        "llm": 0.13181243254912403,
        "1": 0.08787495503274936,
        "purpose": 0.04393747751637468,
        "scope": 0.04393747751637468,
        "build": 0.17574991006549873,
        "a": 0.26362486509824806,
        "based": 0.04393747751637468,
        "system": 0.04393747751637468,
        "that": 0.04393747751637468,
        "analyzes": 0.04393747751637468,
        "git": 0.26362486509824806,
        "repository": 0.04393747751637468,
        "structure": 0.04393747751637468,
        "code": 0.04393747751637468,
        "dependencies": 0.04393747751637468,
        "then": 0.04393747751637468,
        "generates": 0.04393747751637468,
        "and": 0.2196873875818734,
        "maintains": 0.04393747751637468,
        "high": 0.08787495503274936,
        "quality": 0.04393747751637468,
        "md": 0.04393747751637468,
        "using": 0.04393747751637468,
        "it": 0.04393747751637468,
        "initializes": 0.04393747751637468,
        "repos": 0.04393747751637468,
        "with": 0.08787495503274936,
        "no": 0.04393747751637468,
        "docs": 0.17574991006549873,
        "keeps": 0.04393747751637468,
        "up": 0.04393747751637468,
        "to": 0.2196873875818734,
        "date": 0.04393747751637468,
        "on": 0.04393747751637468,
        "commits": 0.04393747751637468,
        "prs": 0.04393747751637468,
        "supports": 0.08787495503274936,
        "multiple": 0.04393747751637468,
        "languages": 0.04393747751637468,
        "project": 0.04393747751637468,
        "types": 0.04393747751637468,
        "via": 0.04393747751637468,
        "analyzers": 0.08787495503274936,
        "non": 0.04393747751637468,
        "goals": 0.04393747751637468,
        "for": 0.08787495503274936,
        "the": 0.04393747751637468,
        "poc": 0.04393747751637468,
        "multi": 0.04393747751637468,
        "repo": 0.2196873875818734,
        "orchestration": 0.04393747751637468,
        "full": 0.08787495503274936,
        "website": 0.04393747751637468,
        "api": 0.04393747751637468,
        "reference": 0.04393747751637468,
        "extraction": 0.04393747751637468,
        "beyond": 0.04393747751637468,
        "summaries": 0.04393747751637468,
        "cloud": 0.04393747751637468,
        "llms": 0.04393747751637468,
        "2": 0.08787495503274936,
        "level": 0.04393747751637468,
        "at": 0.04393747751637468,
        "glance": 0.04393747751637468,
        "events": 0.04393747751637468,
        "event": 0.04393747751637468,
        "sources": 0.04393747751637468,
        "cli": 0.04393747751637468,
        "commands": 0.04393747751637468,
        "hooks": 0.04393747751637468,
        "webhooks": 0.04393747751637468,
        "ci": 0.08787495503274936,
        "commit": 0.08787495503274936,
        "pr": 0.08787495503274936,
        "orchestr": 0.04393747751637468,
        "async": 0.04393747751637468,
        "task": 0.04393747751637468,
        "graph": 0.08787495503274936,
        "scanner": 0.08787495503274936,
        "doc": 0.04393747751637468,
        "store": 0.04393747751637468,
        "indexer": 0.08787495503274936,
        "language": 0.08787495503274936,
        "artifacts": 0.08787495503274936,
        "fs": 0.04393747751637468,
        "deps": 0.04393747751637468,
        "cache": 0.04393747751637468,
        "versions": 0.04393747751637468,
        "knowledge": 0.04393747751637468,
        "embeddings": 0.04393747751637468,
        "prompt": 0.04393747751637468,
        "builder": 0.04393747751637468,
        "templates": 0.04393747751637468,
        "rag": 0.04393747751637468,
        "runner": 0.04393747751637468,
        "llama": 0.04393747751637468,
        "cpp": 0.04393747751637468,
        "ollama": 0.04393747751637468,
        "post": 0.04393747751637468,
        "processor": 0.04393747751637468,
        "lint": 0.04393747751637468,
        "toc": 0.04393747751637468,
        "badges": 0.04393747751637468,
        "links": 0.04393747751637468,
        "publisher": 0.04393747751637468,
        "branch": 0.04393747751637468,
        "3": 0.13181243254912403,
        "components": 0.04393747751637468,
        "responsibilities": 0.04393747751637468,
        "orchestrator": 0.04393747751637468,
        "coordinates": 0.04393747751637468,
        "end": 0.08787495503274936,
        "pipelines": 0.04393747751637468,
        "init": 0.04393747751637468,
        "update": 0.08787495503274936,
        "regenerate": 0.08787495503274936,
        "computes": 0.04393747751637468,
        "change": 0.04393747751637468,
        "impact": 0.04393747751637468,
        "from": 0.04393747751637468,
        "diff": 0.04393747751637468,
        "decides": 0.04393747751637468,
        "whether": 0.04393747751637468,
        "or": 0.04393747751637468,
        "patch": 0.04393747751637468,
        "sections": 0.04393747751637468,
        "schedules": 0.04393747751637468,
        "tasks": 0.04393747751637468,
        "caches": 0.04393747751637468,
        "intermediate": 0.04393747751637468,
        "results": 0.04393747751637468,
        "emits": 0.04393747751637468,
        "structured": 0.04393747751637468,
        "logs": 0.04393747751637468,
        "info": 0.04393747751637468,
        "by": 0.04393747751637468,
        "default": 0.04393747751637468,
        "debug": 0.04393747751637468,
        "verbose": 0.04393747751637468,
        "respects": 0.04393747751637468,
        "docgen": 0.13181243254912403,
        "yml": 0.04393747751637468,
        "watched_globs": 0.04393747751637468,
        "skip": 0.04393747751637468,
        "unrelated": 0.04393747751637468,
        "diffs": 0.04393747751637468,
        "substitutes": 0.04393747751637468,
        "fail": 0.04393747751637468,
        "safe": 0.04393747751637468,
        "stubs": 0.04393747751637468,
        "when": 0.04393747751637468,
        "generation": 0.04393747751637468,
        "fails": 0.04393747751637468,
        "dry": 0.08787495503274936,
        "run": 0.13181243254912403,
        "previews": 0.04393747751637468,
        "records": 0.04393747751637468,
        "scorecards": 0.04393747751637468,
        "each": 0.04393747751637468,
        "under": 0.04393747751637468,
        "walks": 0.04393747751637468,
        "builds": 0.04393747751637468,
        "normalized": 0.04393747751637468,
        "manifest": 0.04393747751637468,
        "files": 0.08787495503274936,
        "sizes": 0.04393747751637468,
        "tags": 0.04393747751637468,
        "path": 0.04393747751637468,
        "roles": 0.04393747751637468,
        "src": 0.04393747751637468,
        "test": 0.08787495503274936,
        "examples": 0.04393747751637468,
        "dependency": 0.04393747751637468,
        "manifests": 0.04393747751637468,
        "e": 0.04393747751637468,
        "g": 0.04393747751637468,
        "pom": 0.04393747751637468,
        "xml": 0.04393747751637468,
        "gradle": 0.04393747751637468,
        "package": 0.04393747751637468,
        "json": 0.13181243254912403,
        "requirements": 0.04393747751637468,
        "txt": 0.04393747751637468,
        "pyproject": 0.04393747751637468,
        "toml": 0.08787495503274936,
        "go": 0.04393747751637468,
        "mod": 0.04393747751637468,
        "cargo": 0.04393747751637468,
        "gemfile": 0.04393747751637468,
        "composer": 0.04393747751637468,
        "entrypoints": 0.04393747751637468,
        "clis": 0.04393747751637468,
        "services": 0.04393747751637468,
        "coverage": 0.04393747751637468,
        "if": 0.04393747751637468,
        "available": 0.04393747751637468,
        "stores": 0.04393747751637468,
        "per": 0.04393747751637468,
        "index": 0.04393747751637468,
        "speed": 0.04393747751637468,
        "future": 0.04393747751637468
      },
      "text": "# Intelligent README Generator \u2014 Architecture & Spec (Python, Local LLM) ## 1) Purpose & Scope Build a Python-based system that **analyzes a Git repository** (structure, code, dependencies), then **generates and maintains a high-quality README.md** using a **local LLM**. It initializes repos with no docs and **keeps docs up to date** on commits/PRs. Supports **multiple languages/project types** via analyzers. Non-goals (for the POC): multi-repo orchestration, full website docs, API reference extraction (beyond README summaries), cloud LLMs. --- ## 2) High-Level Architecture (at a glance) ``` \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 Git Events \u2502 Event Sources \u2502 CLI commands, Git hooks, Webhooks/CI (commit/PR) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Orchestr \u2502 (Async task graph) \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Repo Scanner\u2502 \u2502 Analyzers \u2502 \u2502 Doc Store \u2502 \u2502 + Indexer \u2502 \u2502 (Language, \u2502 \u2502 (Artifacts, \u2502 \u2502 (Git, FS) \u2502 \u2502 Build, Deps) \u2502 \u2502 Cache, \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 Versions) \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 Knowledge Graph \u2502 \u2502 \u2502 \u2502 & Embeddings \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Prompt Builder \u2502 (Templates + RAG) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Local LLM Runner \u2502 (llama.cpp/Ollama) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 Post-Processor \u2502 (lint, ToC, badges, links) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Git Publisher \u2502 (branch/PR/commit) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 ``` --- ## 3) Components & Responsibilities ### 3.1 Orchestrator * Coordinates end-to-end pipelines (init, update, regenerate). * Computes *change impact* from Git diff; decides whether to regenerate full README or patch sections. * Schedules tasks and caches intermediate results. * Emits structured logs (info by default, debug with `--verbose`), respects `.docgen.yml` `ci.watched_globs` to skip unrelated diffs, and substitutes fail-safe stubs when generation fails. * Supports dry-run previews (`docgen update --dry-run`) and records scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#1",
      "vector": {
        "scorecards": 0.03721614637823934,
        "for": 0.18608073189119673,
        "each": 0.07443229275647868,
        "run": 0.07443229275647868,
        "under": 0.07443229275647868,
        "docgen": 0.11164843913471803,
        "3": 0.22329687826943606,
        "2": 0.03721614637823934,
        "repo": 0.18608073189119673,
        "scanner": 0.03721614637823934,
        "indexer": 0.03721614637823934,
        "walks": 0.03721614637823934,
        "builds": 0.03721614637823934,
        "normalized": 0.03721614637823934,
        "manifest": 0.03721614637823934,
        "files": 0.11164843913471803,
        "sizes": 0.03721614637823934,
        "language": 0.07443229275647868,
        "tags": 0.03721614637823934,
        "path": 0.03721614637823934,
        "roles": 0.03721614637823934,
        "src": 0.03721614637823934,
        "test": 0.11164843913471803,
        "docs": 0.11164843913471803,
        "examples": 0.03721614637823934,
        "build": 0.14886458551295736,
        "dependency": 0.07443229275647868,
        "manifests": 0.03721614637823934,
        "e": 0.11164843913471803,
        "g": 0.11164843913471803,
        "pom": 0.03721614637823934,
        "xml": 0.03721614637823934,
        "gradle": 0.07443229275647868,
        "package": 0.03721614637823934,
        "json": 0.11164843913471803,
        "requirements": 0.03721614637823934,
        "txt": 0.03721614637823934,
        "pyproject": 0.03721614637823934,
        "toml": 0.07443229275647868,
        "go": 0.11164843913471803,
        "mod": 0.03721614637823934,
        "cargo": 0.07443229275647868,
        "gemfile": 0.03721614637823934,
        "composer": 0.03721614637823934,
        "entrypoints": 0.11164843913471803,
        "clis": 0.03721614637823934,
        "services": 0.11164843913471803,
        "coverage": 0.03721614637823934,
        "artifacts": 0.03721614637823934,
        "if": 0.03721614637823934,
        "available": 0.03721614637823934,
        "stores": 0.03721614637823934,
        "a": 0.03721614637823934,
        "per": 0.07443229275647868,
        "index": 0.03721614637823934,
        "to": 0.11164843913471803,
        "speed": 0.03721614637823934,
        "future": 0.03721614637823934,
        "runs": 0.03721614637823934,
        "analyzers": 0.22329687826943606,
        "plugin": 0.03721614637823934,
        "based": 0.03721614637823934,
        "detect": 0.03721614637823934,
        "idioms": 0.03721614637823934,
        "frameworks": 0.03721614637823934,
        "spring": 0.07443229275647868,
        "boot": 0.07443229275647868,
        "fastapi": 0.07443229275647868,
        "node": 0.07443229275647868,
        "express": 0.03721614637823934,
        "react": 0.03721614637823934,
        "next": 0.03721614637823934,
        "js": 0.03721614637823934,
        "http": 0.14886458551295736,
        "rust": 0.03721614637823934,
        "bin": 0.03721614637823934,
        "lib": 0.03721614637823934,
        "maven": 0.03721614637823934,
        "setuptools": 0.03721614637823934,
        "poetry": 0.03721614637823934,
        "npm": 0.03721614637823934,
        "pnpm": 0.03721614637823934,
        "yarn": 0.03721614637823934,
        "extract": 0.03721614637823934,
        "top": 0.07443229275647868,
        "level": 0.03721614637823934,
        "libs": 0.03721614637823934,
        "notable": 0.03721614637823934,
        "transitive": 0.03721614637823934,
        "categories": 0.03721614637823934,
        "entrypoint": 0.03721614637823934,
        "infer": 0.03721614637823934,
        "commands": 0.03721614637823934,
        "django": 0.03721614637823934,
        "scripts": 0.07443229275647868,
        "pattern": 0.03721614637823934,
        "monorepo": 0.03721614637823934,
        "layout": 0.03721614637823934,
        "ci": 0.03721614637823934,
        "cd": 0.03721614637823934,
        "containerization": 0.03721614637823934,
        "k8s": 0.03721614637823934,
        "heuristics": 0.03721614637823934,
        "structure": 0.03721614637823934,
        "analyzer": 0.07443229275647868,
        "module": 0.03721614637823934,
        "topology": 0.03721614637823934,
        "detected": 0.11164843913471803,
        "entities": 0.07443229275647868,
        "dtos": 0.03721614637823934,
        "api": 0.11164843913471803,
        "endpoint": 0.07443229275647868,
        "sequences": 0.03721614637823934,
        "service": 0.03721614637823934,
        "interactions": 0.03721614637823934,
        "returns": 0.03721614637823934,
        "signals": 0.07443229275647868,
        "key": 0.07443229275647868,
        "facts": 0.03721614637823934,
        "the": 0.11164843913471803,
        "knowledge": 0.07443229275647868,
        "graph": 0.11164843913471803,
        "4": 0.03721614637823934,
        "embeddings": 0.07443229275647868,
        "rag": 0.03721614637823934,
        "of": 0.07443229275647868,
        "modules": 0.03721614637823934,
        "packages": 0.03721614637823934,
        "configs": 0.03721614637823934,
        "tests": 0.03721614637823934,
        "lightweight": 0.03721614637823934,
        "embedding": 0.03721614637823934,
        "store": 0.03721614637823934,
        "faiss": 0.03721614637823934,
        "in": 0.03721614637823934,
        "memory": 0.03721614637823934,
        "chunks": 0.03721614637823934,
        "code": 0.03721614637823934,
        "comments": 0.03721614637823934,
        "readme": 0.07443229275647868,
        "fragments": 0.03721614637823934,
        "changelog": 0.03721614637823934,
        "issues": 0.03721614637823934,
        "optional": 0.03721614637823934,
        "commit": 0.03721614637823934,
        "messages": 0.07443229275647868,
        "provides": 0.03721614637823934,
        "context": 0.07443229275647868,
        "retrieval": 0.03721614637823934,
        "prompt": 0.07443229275647868,
        "building": 0.03721614637823934,
        "k": 0.03721614637823934,
        "by": 0.03721614637823934,
        "section": 0.11164843913471803,
        "and": 0.2605130246476754,
        "persists": 0.03721614637823934,
        "refreshing": 0.03721614637823934,
        "only": 0.03721614637823934,
        "whose": 0.03721614637823934,
        "hashes": 0.03721614637823934,
        "changed": 0.03721614637823934,
        "5": 0.03721614637823934,
        "builder": 0.03721614637823934,
        "aware": 0.03721614637823934,
        "jinja2": 0.03721614637823934,
        "templates": 0.03721614637823934,
        "with": 0.11164843913471803,
        "guardrails": 0.03721614637823934,
        "project": 0.03721614637823934,
        "intro": 0.03721614637823934,
        "features": 0.03721614637823934,
        "architecture": 0.03721614637823934,
        "overview": 0.03721614637823934,
        "quick": 0.07443229275647868,
        "start": 0.07443229275647868,
        "configuration": 0.03721614637823934,
        "deployment": 0.03721614637823934,
        "troubleshooting": 0.03721614637823934,
        "faq": 0.03721614637823934,
        "roadmap": 0.03721614637823934,
        "contribution": 0.03721614637823934,
        "license": 0.03721614637823934,
        "badges": 0.03721614637823934,
        "dynamically": 0.03721614637823934,
        "injects": 0.07443229275647868,
        "retrieved": 0.03721614637823934,
        "produces": 0.03721614637823934,
        "llm": 0.07443229275647868,
        "ready": 0.03721614637823934,
        "structured": 0.07443229275647868,
        "prompts": 0.03721614637823934,
        "system": 0.03721614637823934,
        "user": 0.03721614637823934,
        "token": 0.03721614637823934,
        "budgets": 0.03721614637823934,
        "honours": 0.03721614637823934,
        "style": 0.07443229275647868,
        "presets": 0.03721614637823934,
        "concise": 0.03721614637823934,
        "trims": 0.03721614637823934,
        "list": 0.03721614637823934,
        "heavy": 0.03721614637823934,
        "sections": 0.03721614637823934,
        "comprehensive": 0.03721614637823934,
        "keeps": 0.03721614637823934,
        "full": 0.03721614637823934,
        "detail": 0.03721614637823934,
        "infrastructure": 0.03721614637823934,
        "patterns": 0.03721614637823934,
        "into": 0.03721614637823934,
        "guidance": 0.03721614637823934,
        "uvicorn": 0.03721614637823934,
        "docker": 0.11164843913471803,
        "compose": 0.03721614637823934,
        "up": 0.03721614637823934,
        "generates": 0.03721614637823934,
        "mermaid": 0.03721614637823934,
        "sequence": 0.03721614637823934,
        "diagrams": 0.03721614637823934,
        "highlighting": 0.03721614637823934,
        "request": 0.03721614637823934,
        "flow": 0.03721614637823934,
        "across": 0.03721614637823934,
        "when": 0.03721614637823934,
        "endpoints": 0.03721614637823934,
        "are": 0.03721614637823934,
        "6": 0.03721614637823934,
        "local": 0.03721614637823934,
        "runner": 0.11164843913471803,
        "pluggable": 0.03721614637823934,
        "runtime": 0.03721614637823934,
        "that": 0.03721614637823934,
        "prefers": 0.03721614637823934,
        "model": 0.07443229275647868,
        "host": 0.03721614637823934,
        "localhost": 0.03721614637823934,
        "12434": 0.03721614637823934,
        "engines": 0.07443229275647868,
        "v1": 0.07443229275647868,
        "container": 0.03721614637823934,
        "internal": 0.03721614637823934,
        "environment": 0.03721614637823934,
        "overrides": 0.03721614637823934,
        "an": 0.03721614637823934,
        "ollama": 0.03721614637823934,
        "cli": 0.03721614637823934,
        "fallback": 0.03721614637823934,
        "defaults": 0.03721614637823934,
        "ai": 0.03721614637823934,
        "smollm2": 0.03721614637823934,
        "360m": 0.03721614637823934,
        "q4_k_m": 0.03721614637823934,
        "but": 0.03721614637823934,
        "respects": 0.03721614637823934,
        "yml": 0.03721614637823934,
        "openai": 0.03721614637823934,
        "compatible": 0.03721614637823934,
        "env": 0.03721614637823934,
        "vars": 0.03721614637823934,
        "alternate": 0.03721614637823934,
        "weights": 0.03721614637823934,
        "keys": 0.03721614637823934,
        "supports": 0.03721614637823934,
        "function": 0.03721614637823934,
        "calling": 0.03721614637823934,
        "outputs": 0.03721614637823934
      },
      "text": "scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future runs. ### 3.3 Analyzers (Plugin-based) * **Language analyzers** (detect idioms, entrypoints, frameworks: Spring Boot, FastAPI, Node/Express, React, Next.js, Go HTTP, Rust bin/lib). * **Build analyzers** (Maven/Gradle, setuptools/Poetry, npm/pnpm/yarn, Go, Cargo). * **Dependency analyzers** (extract top-level libs & notable transitive categories). * **Entrypoint analyzers** (infer run commands for FastAPI, Django, Spring Boot, Node scripts). * **Pattern analyzers** (monorepo layout, CI/CD, containerization/K8s heuristics). * **Structure analyzer** (module topology, detected entities/DTOs, API endpoint sequences, service interactions). * Each analyzer returns **Signals** (key facts) to the knowledge graph. ### 3.4 Knowledge Graph & Embeddings (RAG) * Graph of Repo entities: modules, packages, services, scripts, configs, tests, docs. * Lightweight embedding store (e.g., `faiss`/in-memory) of **chunks**: code comments, README fragments, `docs/`, `CHANGELOG`, issues (optional), commit messages. * Provides **context retrieval** for prompt building (top-k by section) and persists embeddings under `.docgen/`, refreshing only the files whose hashes changed. ### 3.5 Prompt Builder * **Section-aware** Jinja2 templates with **guardrails**: * Project intro, key features, architecture overview, quick start, configuration, build/test, deployment, troubleshooting, FAQ, roadmap, contribution, license, badges. * Dynamically injects repo signals and retrieved context per section. * Produces **LLM-ready structured prompts** (system + user messages) with token budgets and honours `readme.style` presets (`concise` trims list-heavy sections, `comprehensive` keeps full detail). * Injects detected entrypoints and infrastructure patterns into Quick Start guidance (e.g., `uvicorn ...`, `docker compose up`). * Generates Mermaid sequence diagrams highlighting request flow across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#2",
      "vector": {
        "across": 0.028060676663315687,
        "services": 0.028060676663315687,
        "when": 0.08418202998994706,
        "api": 0.056121353326631374,
        "endpoints": 0.028060676663315687,
        "are": 0.056121353326631374,
        "detected": 0.056121353326631374,
        "3": 0.11224270665326275,
        "6": 0.028060676663315687,
        "local": 0.056121353326631374,
        "llm": 0.028060676663315687,
        "runner": 0.08418202998994706,
        "pluggable": 0.028060676663315687,
        "runtime": 0.028060676663315687,
        "that": 0.028060676663315687,
        "prefers": 0.028060676663315687,
        "the": 0.028060676663315687,
        "docker": 0.056121353326631374,
        "model": 0.08418202998994706,
        "http": 0.08418202998994706,
        "endpoint": 0.028060676663315687,
        "host": 0.028060676663315687,
        "localhost": 0.028060676663315687,
        "12434": 0.028060676663315687,
        "engines": 0.056121353326631374,
        "v1": 0.056121353326631374,
        "container": 0.028060676663315687,
        "internal": 0.08418202998994706,
        "with": 0.08418202998994706,
        "environment": 0.028060676663315687,
        "overrides": 0.028060676663315687,
        "and": 0.36478879662310393,
        "an": 0.028060676663315687,
        "ollama": 0.028060676663315687,
        "cli": 0.056121353326631374,
        "fallback": 0.028060676663315687,
        "defaults": 0.056121353326631374,
        "to": 0.08418202998994706,
        "ai": 0.028060676663315687,
        "smollm2": 0.028060676663315687,
        "360m": 0.028060676663315687,
        "q4_k_m": 0.028060676663315687,
        "but": 0.028060676663315687,
        "respects": 0.028060676663315687,
        "docgen": 0.11224270665326275,
        "yml": 0.028060676663315687,
        "openai": 0.028060676663315687,
        "compatible": 0.028060676663315687,
        "env": 0.028060676663315687,
        "vars": 0.028060676663315687,
        "for": 0.08418202998994706,
        "alternate": 0.028060676663315687,
        "weights": 0.028060676663315687,
        "keys": 0.028060676663315687,
        "supports": 0.056121353326631374,
        "function": 0.028060676663315687,
        "calling": 0.028060676663315687,
        "style": 0.056121353326631374,
        "structured": 0.028060676663315687,
        "outputs": 0.056121353326631374,
        "available": 0.028060676663315687,
        "streaming": 0.028060676663315687,
        "decode": 0.028060676663315687,
        "stop": 0.028060676663315687,
        "tokens": 0.028060676663315687,
        "section": 0.056121353326631374,
        "by": 0.056121353326631374,
        "generation": 0.028060676663315687,
        "stay": 0.056121353326631374,
        "within": 0.028060676663315687,
        "context": 0.028060676663315687,
        "limits": 0.028060676663315687,
        "validates": 0.056121353326631374,
        "configuration": 0.028060676663315687,
        "ensure": 0.028060676663315687,
        "runners": 0.028060676663315687,
        "loopback": 0.028060676663315687,
        "hosts": 0.028060676663315687,
        "only": 0.056121353326631374,
        "7": 0.028060676663315687,
        "post": 0.056121353326631374,
        "processor": 0.028060676663315687,
        "lints": 0.028060676663315687,
        "markdown": 0.028060676663315687,
        "builds": 0.028060676663315687,
        "toc": 0.028060676663315687,
        "adds": 0.056121353326631374,
        "shields": 0.028060676663315687,
        "badges": 0.056121353326631374,
        "normalizes": 0.028060676663315687,
        "heading": 0.028060676663315687,
        "hierarchy": 0.028060676663315687,
        "enforces": 0.028060676663315687,
        "guide": 0.028060676663315687,
        "readme": 0.08418202998994706,
        "contract": 0.028060676663315687,
        "required": 0.056121353326631374,
        "sections": 0.11224270665326275,
        "links": 0.028060676663315687,
        "relative": 0.028060676663315687,
        "absolute": 0.028060676663315687,
        "code": 0.028060676663315687,
        "block": 0.028060676663315687,
        "languages": 0.028060676663315687,
        "line": 0.028060676663315687,
        "length": 0.028060676663315687,
        "computes": 0.028060676663315687,
        "diff": 0.028060676663315687,
        "aware": 0.028060676663315687,
        "updates": 0.056121353326631374,
        "modifies": 0.028060676663315687,
        "impacted": 0.028060676663315687,
        "changes": 0.056121353326631374,
        "persists": 0.028060676663315687,
        "a": 0.08418202998994706,
        "scorecard": 0.056121353326631374,
        "json": 0.056121353326631374,
        "capturing": 0.028060676663315687,
        "coverage": 0.056121353326631374,
        "quick": 0.028060676663315687,
        "start": 0.028060676663315687,
        "health": 0.028060676663315687,
        "link": 0.056121353326631374,
        "results": 0.028060676663315687,
        "build": 0.056121353326631374,
        "license": 0.028060676663315687,
        "safe": 0.028060676663315687,
        "reports": 0.028060676663315687,
        "warnings": 0.028060676663315687,
        "during": 0.028060676663315687,
        "processing": 0.028060676663315687,
        "8": 0.028060676663315687,
        "doc": 0.028060676663315687,
        "store": 0.028060676663315687,
        "artifacts": 0.028060676663315687,
        "versions": 0.028060676663315687,
        "keeps": 0.028060676663315687,
        "generated": 0.028060676663315687,
        "drafts": 0.028060676663315687,
        "logs": 0.028060676663315687,
        "prompts": 0.028060676663315687,
        "inputs": 0.028060676663315687,
        "diffs": 0.028060676663315687,
        "under": 0.028060676663315687,
        "per": 0.028060676663315687,
        "repo": 0.028060676663315687,
        "rollback": 0.028060676663315687,
        "regression": 0.028060676663315687,
        "testing": 0.028060676663315687,
        "via": 0.028060676663315687,
        "golden": 0.028060676663315687,
        "readmes": 0.028060676663315687,
        "stores": 0.028060676663315687,
        "embedding": 0.028060676663315687,
        "cache": 0.028060676663315687,
        "embeddings": 0.028060676663315687,
        "scorecards": 0.028060676663315687,
        "so": 0.028060676663315687,
        "subsequent": 0.028060676663315687,
        "runs": 0.028060676663315687,
        "incremental": 0.028060676663315687,
        "9": 0.028060676663315687,
        "git": 0.028060676663315687,
        "publisher": 0.028060676663315687,
        "creates": 0.028060676663315687,
        "branch": 0.028060676663315687,
        "e": 0.056121353326631374,
        "g": 0.056121353326631374,
        "update": 0.028060676663315687,
        "yyyymmdd": 0.028060676663315687,
        "pr": 0.056121353326631374,
        "body": 0.028060676663315687,
        "explains": 0.028060676663315687,
        "what": 0.028060676663315687,
        "were": 0.028060676663315687,
        "updated": 0.028060676663315687,
        "can": 0.028060676663315687,
        "commit": 0.028060676663315687,
        "directly": 0.028060676663315687,
        "configurable": 0.028060676663315687,
        "on": 0.028060676663315687,
        "init": 0.028060676663315687,
        "empty": 0.028060676663315687,
        "repos": 0.028060676663315687,
        "applies": 0.028060676663315687,
        "labels": 0.028060676663315687,
        "docs": 0.056121353326631374,
        "auto": 0.028060676663315687,
        "existing": 0.028060676663315687,
        "prs": 0.028060676663315687,
        "configured": 0.028060676663315687,
        "4": 0.028060676663315687,
        "data": 0.028060676663315687,
        "python": 0.056121353326631374,
        "pydantic": 0.028060676663315687,
        "dataclasses": 0.056121353326631374,
        "from": 0.056121353326631374,
        "import": 0.056121353326631374,
        "dataclass": 0.2244854133065255,
        "typing": 0.028060676663315687,
        "list": 0.11224270665326275,
        "dict": 0.14030338331657843,
        "optional": 0.056121353326631374,
        "class": 0.1964247366432098,
        "filemeta": 0.056121353326631374,
        "path": 0.028060676663315687,
        "str": 0.5892742099296294,
        "size": 0.028060676663315687,
        "int": 0.028060676663315687,
        "language": 0.028060676663315687,
        "role": 0.028060676663315687,
        "src": 0.028060676663315687,
        "test": 0.056121353326631374,
        "config": 0.028060676663315687,
        "script": 0.028060676663315687,
        "infra": 0.028060676663315687,
        "other": 0.028060676663315687,
        "hash": 0.028060676663315687,
        "repomanifest": 0.056121353326631374,
        "root": 0.028060676663315687,
        "files": 0.028060676663315687,
        "detectors": 0.028060676663315687,
        "build_system": 0.028060676663315687,
        "maven": 0.028060676663315687,
        "framework": 0.056121353326631374,
        "spring": 0.028060676663315687,
        "boot": 0.028060676663315687,
        "dependency_files": 0.028060676663315687,
        "pom": 0.028060676663315687,
        "xml": 0.028060676663315687,
        "requirements": 0.028060676663315687,
        "txt": 0.028060676663315687,
        "signal": 0.056121353326631374,
        "kind": 0.028060676663315687,
        "service": 0.028060676663315687,
        "db": 0.028060676663315687,
        "queue": 0.028060676663315687,
        "dep": 0.028060676663315687,
        "entrypoint": 0.028060676663315687,
        "name": 0.028060676663315687,
        "detail": 0.028060676663315687,
        "analysisresult": 0.028060676663315687,
        "manifest": 0.028060676663315687,
        "signals": 0.028060676663315687,
        "embedding_index_path": 0.028060676663315687,
        "sectionspec": 0.028060676663315687,
        "key": 0.028060676663315687,
        "intro": 0.028060676663315687,
        "features": 0.028060676663315687,
        "arch": 0.028060676663315687,
        "quickstart": 0.028060676663315687,
        "bool": 0.028060676663315687,
        "sources": 0.028060676663315687,
        "preferred": 0.028060676663315687,
        "retrieval": 0.028060676663315687,
        "tags": 0.028060676663315687,
        "template_name": 0.028060676663315687,
        "readmedraft": 0.028060676663315687,
        "full_markdown": 0.028060676663315687,
        "updateplan": 0.028060676663315687,
        "strategy": 0.028060676663315687
      },
      "text": "across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs when available. * Streaming decode with stop tokens; **section-by-section** generation to stay within context limits. * Validates configuration to ensure runners stay local (loopback/`*.internal` hosts only). ### 3.7 Post-Processor * Lints Markdown, builds ToC, adds shields/badges, normalizes heading hierarchy. * Enforces internal style guide and **README contract** (required sections). * Validates links (relative/absolute), code block languages, and line length. * Computes **diff-aware updates**: only modifies sections impacted by changes. * Persists a README scorecard (`.docgen/scorecard.json`) capturing coverage, quick start health, and link results. * Adds build/coverage/license badges with safe defaults and reports link warnings during post-processing. ### 3.8 Doc Store (Artifacts & Versions) * Keeps generated drafts, logs, prompts, inputs/outputs, and diffs under `.docgen/` per repo. * Supports rollback and regression testing via \u201cgolden\u201d READMEs. * Stores embedding cache (`embeddings.json`) and scorecards so subsequent runs are incremental. ### 3.9 Git Publisher * Creates a branch (e.g., `docgen/readme-update-YYYYMMDD`) and a PR. * PR body explains detected changes and what sections were updated. * Can commit directly (configurable) on init for empty repos. * Applies labels (e.g., `docs:auto`) and updates existing PRs when configured. --- ## 4) Data Model (Python `pydantic`/`dataclasses`) ```python from dataclasses import dataclass from typing import List, Dict, Optional @dataclass class FileMeta: path: str size: int language: Optional[str] role: str # src|test|docs|config|build|script|infra|other hash: str @dataclass class RepoManifest: root: str files: List[FileMeta] detectors: Dict[str, str] # {\"build_system\": \"maven\", \"framework\":\"spring-boot\", ...} dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str #",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#3",
      "vector": {
        "dependency_files": 0.03280893574623933,
        "dict": 0.13123574298495733,
        "str": 0.5577519076860686,
        "pom": 0.098426807238718,
        "xml": 0.098426807238718,
        "requirements": 0.06561787149247866,
        "txt": 0.06561787149247866,
        "dataclass": 0.16404467873119666,
        "class": 0.16404467873119666,
        "signal": 0.06561787149247866,
        "kind": 0.03280893574623933,
        "framework": 0.03280893574623933,
        "service": 0.03280893574623933,
        "cli": 0.03280893574623933,
        "db": 0.03280893574623933,
        "queue": 0.03280893574623933,
        "dep": 0.03280893574623933,
        "entrypoint": 0.03280893574623933,
        "test": 0.06561787149247866,
        "name": 0.03280893574623933,
        "detail": 0.03280893574623933,
        "analysisresult": 0.03280893574623933,
        "manifest": 0.06561787149247866,
        "repomanifest": 0.03280893574623933,
        "signals": 0.06561787149247866,
        "list": 0.098426807238718,
        "embedding_index_path": 0.03280893574623933,
        "sectionspec": 0.03280893574623933,
        "key": 0.03280893574623933,
        "intro": 0.06561787149247866,
        "features": 0.098426807238718,
        "arch": 0.03280893574623933,
        "quickstart": 0.06561787149247866,
        "required": 0.03280893574623933,
        "bool": 0.03280893574623933,
        "sources": 0.03280893574623933,
        "preferred": 0.03280893574623933,
        "retrieval": 0.06561787149247866,
        "tags": 0.03280893574623933,
        "template_name": 0.03280893574623933,
        "readmedraft": 0.03280893574623933,
        "sections": 0.13123574298495733,
        "full_markdown": 0.03280893574623933,
        "updateplan": 0.06561787149247866,
        "strategy": 0.03280893574623933,
        "full": 0.03280893574623933,
        "patch": 0.06561787149247866,
        "changed_sections": 0.03280893574623933,
        "reasons": 0.03280893574623933,
        "section": 0.06561787149247866,
        "why": 0.03280893574623933,
        "5": 0.098426807238718,
        "configuration": 0.06561787149247866,
        "docgen": 0.196853614477436,
        "yml": 0.06561787149247866,
        "at": 0.03280893574623933,
        "repo": 0.06561787149247866,
        "root": 0.06561787149247866,
        "yaml": 0.03280893574623933,
        "llm": 0.03280893574623933,
        "runner": 0.03280893574623933,
        "ollama": 0.03280893574623933,
        "or": 0.06561787149247866,
        "llama": 0.03280893574623933,
        "cpp": 0.03280893574623933,
        "model": 0.03280893574623933,
        "llama3": 0.03280893574623933,
        "8b": 0.03280893574623933,
        "instruct": 0.03280893574623933,
        "example": 0.03280893574623933,
        "local": 0.03280893574623933,
        "only": 0.098426807238718,
        "max_tokens": 0.03280893574623933,
        "2048": 0.03280893574623933,
        "temperature": 0.03280893574623933,
        "0": 0.03280893574623933,
        "2": 0.13123574298495733,
        "readme": 0.196853614477436,
        "style": 0.03280893574623933,
        "concise": 0.03280893574623933,
        "comprehensive": 0.03280893574623933,
        "template_pack": 0.06561787149247866,
        "enterprise": 0.03280893574623933,
        "optional": 0.03280893574623933,
        "bundle": 0.03280893574623933,
        "shipped": 0.03280893574623933,
        "with": 0.06561787149247866,
        "required_sections": 0.03280893574623933,
        "architecture": 0.06561787149247866,
        "build_and_test": 0.03280893574623933,
        "deployment": 0.06561787149247866,
        "troubleshooting": 0.03280893574623933,
        "faq": 0.03280893574623933,
        "license": 0.03280893574623933,
        "publish": 0.06561787149247866,
        "mode": 0.03280893574623933,
        "pr": 0.13123574298495733,
        "commit": 0.098426807238718,
        "dry": 0.03280893574623933,
        "run": 0.03280893574623933,
        "branch_prefix": 0.03280893574623933,
        "labels": 0.03280893574623933,
        "docs": 0.06561787149247866,
        "auto": 0.03280893574623933,
        "update_existing": 0.03280893574623933,
        "true": 0.03280893574623933,
        "refresh": 0.03280893574623933,
        "an": 0.03280893574623933,
        "existing": 0.03280893574623933,
        "instead": 0.03280893574623933,
        "of": 0.03280893574623933,
        "opening": 0.03280893574623933,
        "a": 0.06561787149247866,
        "new": 0.03280893574623933,
        "one": 0.03280893574623933,
        "analyzers": 0.03280893574623933,
        "enabled": 0.03280893574623933,
        "language": 0.03280893574623933,
        "build": 0.196853614477436,
        "dependencies": 0.03280893574623933,
        "patterns": 0.03280893574623933,
        "exclude_paths": 0.03280893574623933,
        "git": 0.06561787149247866,
        "node_modules": 0.03280893574623933,
        "dist": 0.03280893574623933,
        "ci": 0.098426807238718,
        "update": 0.06561787149247866,
        "if": 0.098426807238718,
        "these": 0.03280893574623933,
        "paths": 0.03280893574623933,
        "change": 0.03280893574623933,
        "watched_globs": 0.06561787149247866,
        "src": 0.06561787149247866,
        "app": 0.03280893574623933,
        "cmd": 0.03280893574623933,
        "gradle": 0.06561787149247866,
        "package": 0.03280893574623933,
        "json": 0.03280893574623933,
        "pyproject": 0.03280893574623933,
        "toml": 0.03280893574623933,
        "dockerfile": 0.06561787149247866,
        "no": 0.06561787149247866,
        "templates_dir": 0.03280893574623933,
        "is": 0.03280893574623933,
        "provided": 0.03280893574623933,
        "automatically": 0.03280893574623933,
        "picks": 0.03280893574623933,
        "up": 0.03280893574623933,
        "templates": 0.06561787149247866,
        "bundles": 0.03280893574623933,
        "in": 0.06561787149247866,
        "the": 0.03280893574623933,
        "repository": 0.03280893574623933,
        "and": 0.03280893574623933,
        "supports": 0.03280893574623933,
        "built": 0.03280893574623933,
        "template": 0.03280893574623933,
        "packs": 0.03280893574623933,
        "via": 0.06561787149247866,
        "6": 0.098426807238718,
        "workflows": 0.03280893574623933,
        "1": 0.098426807238718,
        "initialization": 0.03280893574623933,
        "without": 0.03280893574623933,
        "scan": 0.03280893574623933,
        "analyze": 0.03280893574623933,
        "embeddings": 0.03280893574623933,
        "prompt": 0.03280893574623933,
        "default": 0.03280893574623933,
        "include": 0.03280893574623933,
        "getting": 0.03280893574623933,
        "started": 0.03280893574623933,
        "suggestions": 0.03280893574623933,
        "3": 0.06561787149247866,
        "generate": 0.06561787149247866,
        "sequentially": 0.03280893574623933,
        "streaming": 0.03280893574623933,
        "4": 0.06561787149247866,
        "post": 0.03280893574623933,
        "process": 0.03280893574623933,
        "toc": 0.03280893574623933,
        "badges": 0.03280893574623933,
        "status": 0.03280893574623933,
        "placeholder": 0.03280893574623933,
        "lint": 0.03280893574623933,
        "direct": 0.03280893574623933,
        "md": 0.03280893574623933,
        "artifacts": 0.03280893574623933,
        "on": 0.03280893574623933,
        "detect": 0.03280893574623933,
        "changes": 0.03280893574623933,
        "diff": 0.03280893574623933,
        "map": 0.03280893574623933,
        "files": 0.03280893574623933,
        "to": 0.098426807238718,
        "using": 0.03280893574623933,
        "rules": 0.03280893574623933,
        "matrix": 0.03280893574623933,
        "quick": 0.03280893574623933,
        "start": 0.03280893574623933,
        "k8s": 0.03280893574623933,
        "entrypoints": 0.03280893574623933,
        "decide": 0.03280893574623933,
        "impacted": 0.03280893574623933,
        "regenerate": 0.03280893574623933,
        "those": 0.03280893574623933,
        "skip": 0.03280893574623933,
        "changed": 0.03280893574623933,
        "file": 0.03280893574623933,
        "matches": 0.03280893574623933,
        "allows": 0.03280893574623933,
        "avoid": 0.03280893574623933,
        "unnecessary": 0.03280893574623933,
        "runs": 0.03280893574623933,
        "rag": 0.03280893574623933,
        "fetch": 0.03280893574623933,
        "top": 0.03280893574623933,
        "k": 0.03280893574623933,
        "chunks": 0.03280893574623933,
        "relevant": 0.03280893574623933,
        "each": 0.03280893574623933
      },
      "text": "dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str # \"full\"|\"patch\" changed_sections: List[str] reasons: Dict[str, str] # section->why ``` --- ## 5) Configuration (`.docgen.yml` at repo root) ```yaml llm: runner: \"ollama\" # or \"llama.cpp\" model: \"llama3:8b-instruct\" # example; local only max_tokens: 2048 temperature: 0.2 readme: style: \"concise\" # or \"comprehensive\" template_pack: \"enterprise\" # optional bundle shipped with docgen required_sections: - intro - features - architecture - quickstart - configuration - build_and_test - deployment - troubleshooting - faq - license publish: mode: \"pr\" # \"commit\" | \"pr\" | \"dry-run\" branch_prefix: \"docgen/\" labels: - \"docs:auto\" update_existing: true # refresh an existing PR instead of opening a new one analyzers: enabled: - language - build - dependencies - patterns exclude_paths: - \".git/\" - \"node_modules/\" - \"dist/\" ci: # Only update README if these paths change watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"pyproject.toml\" - \"Dockerfile\" ``` > If no `readme.templates_dir` is provided, docgen automatically picks up `docs/templates/` bundles in the repository root and supports built-in template packs via `readme.template_pack`. --- ## 6) Workflows ### 6.1 Initialization (Repo without README) 1. **Scan & Analyze** \u2192 Manifest + Signals + Embeddings. 2. **Prompt Build** with default templates, include \u201cgetting started\u201d suggestions. 3. **Generate Sections** sequentially (streaming). 4. **Post-process** \u2192 ToC, badges (build status placeholder), lint. 5. **Publish**: direct commit `README.md` + `.docgen/` artifacts. ### 6.2 Update on Commit/PR 1. **Detect changes** via Git diff; map files to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate**",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#4",
      "vector": {
        "to": 0.146943671674129,
        "sections": 0.11020775375559676,
        "using": 0.03673591791853225,
        "a": 0.11020775375559676,
        "rules": 0.03673591791853225,
        "matrix": 0.03673591791853225,
        "pom": 0.03673591791853225,
        "xml": 0.03673591791853225,
        "build": 0.18367958959266126,
        "gradle": 0.0734718358370645,
        "test": 0.0734718358370645,
        "quick": 0.0734718358370645,
        "start": 0.0734718358370645,
        "dockerfile": 0.03673591791853225,
        "k8s": 0.0734718358370645,
        "deployment": 0.0734718358370645,
        "src": 0.03673591791853225,
        "entrypoints": 0.0734718358370645,
        "architecture": 0.0734718358370645,
        "features": 0.0734718358370645,
        "2": 0.0734718358370645,
        "decide": 0.03673591791853225,
        "updateplan": 0.03673591791853225,
        "patch": 0.03673591791853225,
        "impacted": 0.03673591791853225,
        "regenerate": 0.11020775375559676,
        "only": 0.0734718358370645,
        "those": 0.03673591791853225,
        "3": 0.0734718358370645,
        "skip": 0.03673591791853225,
        "if": 0.146943671674129,
        "no": 0.0734718358370645,
        "changed": 0.03673591791853225,
        "file": 0.0734718358370645,
        "matches": 0.03673591791853225,
        "docgen": 0.146943671674129,
        "yml": 0.03673591791853225,
        "ci": 0.0734718358370645,
        "watched_globs": 0.03673591791853225,
        "allows": 0.03673591791853225,
        "avoid": 0.03673591791853225,
        "unnecessary": 0.03673591791853225,
        "runs": 0.03673591791853225,
        "4": 0.03673591791853225,
        "rag": 0.11020775375559676,
        "retrieval": 0.03673591791853225,
        "fetch": 0.03673591791853225,
        "top": 0.0734718358370645,
        "k": 0.0734718358370645,
        "chunks": 0.0734718358370645,
        "relevant": 0.03673591791853225,
        "each": 0.0734718358370645,
        "section": 0.18367958959266126,
        "5": 0.0734718358370645,
        "generate": 0.03673591791853225,
        "post": 0.0734718358370645,
        "process": 0.03673591791853225,
        "open": 0.03673591791853225,
        "pr": 0.03673591791853225,
        "with": 0.03673591791853225,
        "summary": 0.03673591791853225,
        "of": 0.03673591791853225,
        "deltas": 0.03673591791853225,
        "6": 0.0734718358370645,
        "dry": 0.0734718358370645,
        "run": 0.0734718358370645,
        "support": 0.0734718358370645,
        "update": 0.03673591791853225,
        "computes": 0.03673591791853225,
        "diffs": 0.03673591791853225,
        "and": 0.0734718358370645,
        "scorecards": 0.03673591791853225,
        "without": 0.03673591791853225,
        "writing": 0.03673591791853225,
        "or": 0.11020775375559676,
        "publishing": 0.03673591791853225,
        "manual": 0.03673591791853225,
        "full": 0.03673591791853225,
        "intro": 0.0734718358370645,
        "arch": 0.03673591791853225,
        "7": 0.03673591791853225,
        "contract": 0.03673591791853225,
        "readme": 0.0734718358370645,
        "what": 0.03673591791853225,
        "why": 0.03673591791853225,
        "who": 0.03673591791853225,
        "it": 0.03673591791853225,
        "s": 0.03673591791853225,
        "for": 0.0734718358370645,
        "key": 0.03673591791853225,
        "bullets": 0.03673591791853225,
        "grounded": 0.03673591791853225,
        "in": 0.03673591791853225,
        "real": 0.03673591791853225,
        "repo": 0.0734718358370645,
        "signals": 0.0734718358370645,
        "overview": 0.03673591791853225,
        "diagram": 0.03673591791853225,
        "ascii": 0.03673591791853225,
        "components": 0.03673591791853225,
        "minimal": 0.03673591791853225,
        "commands": 0.146943671674129,
        "per": 0.0734718358370645,
        "system": 0.0734718358370645,
        "configuration": 0.0734718358370645,
        "env": 0.03673591791853225,
        "vars": 0.03673591791853225,
        "files": 0.03673591791853225,
        "examples": 0.03673591791853225,
        "coverage": 0.03673591791853225,
        "hint": 0.03673591791853225,
        "container": 0.03673591791853225,
        "instructions": 0.03673591791853225,
        "detected": 0.11020775375559676,
        "troubleshooting": 0.03673591791853225,
        "common": 0.03673591791853225,
        "failures": 0.03673591791853225,
        "faq": 0.03673591791853225,
        "10": 0.0734718358370645,
        "concise": 0.03673591791853225,
        "q": 0.03673591791853225,
        "contributing": 0.0734718358370645,
        "md": 0.03673591791853225,
        "absent": 0.03673591791853225,
        "license": 0.03673591791853225,
        "templated": 0.03673591791853225,
        "must": 0.03673591791853225,
        "be": 0.0734718358370645,
        "independently": 0.03673591791853225,
        "regenerable": 0.03673591791853225,
        "self": 0.03673591791853225,
        "contained": 0.03673591791853225,
        "8": 0.03673591791853225,
        "prompting": 0.03673591791853225,
        "strategy": 0.03673591791853225,
        "local": 0.0734718358370645,
        "llm": 0.03673591791853225,
        "message": 0.0734718358370645,
        "fixed": 0.03673591791853225,
        "guardrails": 0.03673591791853225,
        "you": 0.03673591791853225,
        "are": 0.03673591791853225,
        "senior": 0.03673591791853225,
        "dev": 0.03673591791853225,
        "doc": 0.03673591791853225,
        "writer": 0.03673591791853225,
        "precise": 0.03673591791853225,
        "cite": 0.03673591791853225,
        "facts": 0.03673591791853225,
        "speculation": 0.03673591791853225,
        "never": 0.03673591791853225,
        "invent": 0.03673591791853225,
        "prefer": 0.03673591791853225,
        "by": 0.03673591791853225,
        "analyzers": 0.0734718358370645,
        "user": 0.03673591791853225,
        "objective": 0.03673591791853225,
        "constraints": 0.03673591791853225,
        "tone": 0.03673591791853225,
        "length": 0.03673591791853225,
        "inject": 0.03673591791853225,
        "provide": 0.03673591791853225,
        "style": 0.03673591791853225,
        "tokens": 0.03673591791853225,
        "headings": 0.03673591791853225,
        "code": 0.0734718358370645,
        "blocks": 0.03673591791853225,
        "tables": 0.03673591791853225,
        "filters": 0.03673591791853225,
        "refuse": 0.03673591791853225,
        "insufficient": 0.03673591791853225,
        "evidence": 0.03673591791853225,
        "fall": 0.03673591791853225,
        "back": 0.03673591791853225,
        "template": 0.03673591791853225,
        "stubs": 0.0734718358370645,
        "9": 0.03673591791853225,
        "language": 0.0734718358370645,
        "project": 0.03673591791853225,
        "poc": 0.0734718358370645,
        "targets": 0.03673591791853225,
        "tier": 0.0734718358370645,
        "1": 0.03673591791853225,
        "python": 0.03673591791853225,
        "poetry": 0.03673591791853225,
        "setuptools": 0.03673591791853225,
        "java": 0.03673591791853225,
        "maven": 0.03673591791853225,
        "spring": 0.0734718358370645,
        "boot": 0.03673591791853225,
        "node": 0.03673591791853225,
        "js": 0.03673591791853225,
        "npm": 0.03673591791853225,
        "pnpm": 0.03673591791853225,
        "express": 0.03673591791853225,
        "next": 0.03673591791853225,
        "soon": 0.03673591791853225,
        "go": 0.03673591791853225,
        "modules": 0.03673591791853225,
        "rust": 0.03673591791853225,
        "cargo": 0.03673591791853225,
        "ruby": 0.03673591791853225,
        "bundler": 0.03673591791853225,
        "php": 0.03673591791853225,
        "composer": 0.03673591791853225,
        "detection": 0.03673591791853225,
        "via": 0.03673591791853225,
        "heuristics": 0.03673591791853225,
        "optional": 0.03673591791853225,
        "tree": 0.03673591791853225,
        "sitter": 0.03673591791853225,
        "function": 0.03673591791853225,
        "class": 0.03673591791853225,
        "extraction": 0.03673591791853225,
        "pluggable": 0.03673591791853225,
        "entry": 0.03673591791853225,
        "points": 0.03673591791853225,
        "main": 0.03673591791853225,
        "springbootapplication": 0.03673591791853225,
        "fastapi": 0.03673591791853225,
        "app": 0.03673591791853225,
        "bin": 0.03673591791853225,
        "cmd": 0.03673591791853225,
        "interfaces": 0.03673591791853225,
        "skeleton": 0.03673591791853225,
        "__init__": 0.03673591791853225,
        "py": 0.5143028508594515,
        "cli": 0.0734718358370645,
        "click": 0.03673591791853225,
        "typer": 0.03673591791853225,
        "failsafe": 0.03673591791853225,
        "fail": 0.03673591791853225,
        "safe": 0.03673591791853225,
        "logging": 0.0734718358370645,
        "helpers": 0.03673591791853225,
        "orchestrator": 0.03673591791853225,
        "repo_scanner": 0.03673591791853225,
        "base": 0.03673591791853225,
        "analyzer": 0.03673591791853225,
        "abc": 0.03673591791853225,
        "dependencies": 0.03673591791853225,
        "patterns": 0.03673591791853225,
        "embedder": 0.03673591791853225,
        "embedding": 0.03673591791853225,
        "model": 0.03673591791853225,
        "store": 0.03673591791853225
      },
      "text": "to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate** \u2192 **Post-process** \u2192 **Open PR** with summary of deltas. 6. Dry-run support: `docgen update --dry-run` computes diffs and scorecards without writing or publishing. ### 6.3 Regenerate (Manual) * `docgen regenerate --full` or `--sections intro,arch`. --- ## 7) Section Contract (README) * **Intro**: what, why, who it\u2019s for * **Key Features**: bullets grounded in real repo signals * **Architecture**: overview diagram (ASCII) + components * **Quick Start**: minimal commands (per build system) * **Configuration**: env vars, files, examples * **Build & Test**: commands, coverage hint * **Deployment**: container/K8s instructions if detected * **Troubleshooting**: common failures * **FAQ**: 5\u201310 concise Q\\&A * **Contributing** (if `CONTRIBUTING.md` absent) * **License** (detected or templated) > Each section must be independently regenerable and self-contained. --- ## 8) Prompting Strategy (Local LLM) * **System message (fixed guardrails)**: * \u201cYou are a senior dev doc writer. Be precise. Cite repo facts only. No speculation.\u201d * \u201cNever invent commands. Prefer commands detected by analyzers.\u201d * **User message per section**: * Section objective + constraints (tone, length). * Inject **Signals** + **Top-k chunks** (RAG). * Provide **style tokens** (headings, code blocks, tables). * **Post-filters**: refuse if insufficient evidence; fall back to template stubs. --- ## 9) Language & Project Support (POC targets) * **Tier-1 (POC)**: Python (Poetry/Setuptools), Java (Maven/Gradle, Spring Boot), Node.js (npm/pnpm, Express/Next). * **Tier-2 (soon)**: Go (modules), Rust (Cargo), Ruby (Bundler), PHP (Composer). * Detection via: * File heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#5",
      "vector": {
        "heuristics": 0.028665182485640765,
        "optional": 0.0859955474569223,
        "tree": 0.028665182485640765,
        "sitter": 0.028665182485640765,
        "for": 0.11466072994256306,
        "function": 0.028665182485640765,
        "class": 0.05733036497128153,
        "extraction": 0.028665182485640765,
        "pluggable": 0.028665182485640765,
        "entry": 0.028665182485640765,
        "points": 0.028665182485640765,
        "main": 0.05733036497128153,
        "spring": 0.028665182485640765,
        "springbootapplication": 0.028665182485640765,
        "fastapi": 0.05733036497128153,
        "app": 0.14332591242820383,
        "bin": 0.028665182485640765,
        "cmd": 0.05733036497128153,
        "10": 0.028665182485640765,
        "interfaces": 0.028665182485640765,
        "code": 0.05733036497128153,
        "skeleton": 0.028665182485640765,
        "docgen": 0.0859955474569223,
        "__init__": 0.028665182485640765,
        "py": 0.7166295621410191,
        "cli": 0.0859955474569223,
        "click": 0.028665182485640765,
        "typer": 0.05733036497128153,
        "failsafe": 0.028665182485640765,
        "fail": 0.028665182485640765,
        "safe": 0.028665182485640765,
        "readme": 0.0859955474569223,
        "stubs": 0.028665182485640765,
        "logging": 0.05733036497128153,
        "configuration": 0.028665182485640765,
        "helpers": 0.028665182485640765,
        "orchestrator": 0.028665182485640765,
        "repo_scanner": 0.028665182485640765,
        "analyzers": 0.028665182485640765,
        "base": 0.028665182485640765,
        "analyzer": 0.0859955474569223,
        "abc": 0.14332591242820383,
        "language": 0.028665182485640765,
        "build": 0.14332591242820383,
        "dependencies": 0.028665182485640765,
        "entrypoints": 0.028665182485640765,
        "patterns": 0.028665182485640765,
        "rag": 0.028665182485640765,
        "embedder": 0.028665182485640765,
        "local": 0.05733036497128153,
        "embedding": 0.028665182485640765,
        "model": 0.028665182485640765,
        "store": 0.028665182485640765,
        "prompting": 0.028665182485640765,
        "builder": 0.028665182485640765,
        "jinja2": 0.028665182485640765,
        "templates": 0.05733036497128153,
        "token": 0.028665182485640765,
        "mgmt": 0.028665182485640765,
        "constants": 0.028665182485640765,
        "j2": 0.028665182485640765,
        "per": 0.028665182485640765,
        "section": 0.028665182485640765,
        "llm": 0.028665182485640765,
        "runner": 0.028665182485640765,
        "adapter": 0.028665182485640765,
        "ollama": 0.028665182485640765,
        "llama": 0.028665182485640765,
        "cpp": 0.028665182485640765,
        "postproc": 0.028665182485640765,
        "lint": 0.028665182485640765,
        "links": 0.05733036497128153,
        "markers": 0.0859955474569223,
        "toc": 0.05733036497128153,
        "git": 0.05733036497128153,
        "diff": 0.028665182485640765,
        "publisher": 0.028665182485640765,
        "config": 0.028665182485640765,
        "models": 0.05733036497128153,
        "python": 0.0859955474569223,
        "from": 0.05733036497128153,
        "import": 0.05733036497128153,
        "abstractmethod": 0.0859955474569223,
        "repomanifest": 0.0859955474569223,
        "signal": 0.05733036497128153,
        "def": 0.14332591242820383,
        "supports": 0.028665182485640765,
        "self": 0.05733036497128153,
        "manifest": 0.05733036497128153,
        "bool": 0.0859955474569223,
        "analyze": 0.05733036497128153,
        "list": 0.028665182485640765,
        "command": 0.0859955474569223,
        "init": 0.028665182485640765,
        "path": 0.0859955474569223,
        "str": 0.14332591242820383,
        "publish": 0.0859955474569223,
        "true": 0.028665182485640765,
        "update": 0.0859955474569223,
        "event": 0.028665182485640765,
        "commit": 0.05733036497128153,
        "diff_base": 0.028665182485640765,
        "origin": 0.028665182485640765,
        "regenerate": 0.028665182485640765,
        "sections": 0.11466072994256306,
        "full": 0.028665182485640765,
        "false": 0.028665182485640765,
        "service": 0.028665182485640765,
        "mode": 0.028665182485640765,
        "post": 0.1719910949138446,
        "generate": 0.028665182485640765,
        "arch": 0.028665182485640765,
        "quickstart": 0.0859955474569223,
        "get": 0.028665182485640765,
        "status": 0.028665182485640765,
        "run_id": 0.028665182485640765,
        "11": 0.028665182485640765,
        "change": 0.028665182485640765,
        "impact": 0.028665182485640765,
        "matrix": 0.028665182485640765,
        "examples": 0.028665182485640765,
        "changed": 0.05733036497128153,
        "pattern": 0.028665182485640765,
        "to": 0.0859955474569223,
        "rebuild": 0.028665182485640765,
        "notes": 0.028665182485640765,
        "pom": 0.028665182485640765,
        "xml": 0.028665182485640765,
        "gradle": 0.028665182485640765,
        "_and": 0.05733036497128153,
        "_test": 0.05733036497128153,
        "recompute": 0.028665182485640765,
        "commands": 0.028665182485640765,
        "requirements": 0.028665182485640765,
        "txt": 0.028665182485640765,
        "pyproject": 0.028665182485640765,
        "toml": 0.028665182485640765,
        "install": 0.028665182485640765,
        "steps": 0.028665182485640765,
        "dockerfile": 0.028665182485640765,
        "k8s": 0.028665182485640765,
        "deployment": 0.028665182485640765,
        "container": 0.028665182485640765,
        "changes": 0.028665182485640765,
        "src": 0.028665182485640765,
        "features": 0.028665182485640765,
        "architecture": 0.0859955474569223,
        "if": 0.028665182485640765,
        "entrypoint": 0.028665182485640765,
        "intro": 0.028665182485640765,
        "too": 0.028665182485640765,
        "docs": 0.028665182485640765,
        "all": 0.028665182485640765,
        "patch": 0.028665182485640765,
        "prefer": 0.028665182485640765,
        "doc": 0.028665182485640765,
        "driven": 0.028665182485640765,
        "md": 0.028665182485640765,
        "none": 0.028665182485640765,
        "unless": 0.028665182485640765,
        "empty": 0.028665182485640765,
        "prevent": 0.028665182485640765,
        "loops": 0.028665182485640765,
        "12": 0.028665182485640765,
        "processing": 0.028665182485640765,
        "rules": 0.028665182485640765,
        "headings": 0.028665182485640765,
        "start": 0.028665182485640765,
        "at": 0.028665182485640765,
        "title": 0.028665182485640765,
        "then": 0.028665182485640765,
        "add": 0.028665182485640765,
        "auto": 0.028665182485640765,
        "level": 0.028665182485640765,
        "3": 0.028665182485640765,
        "validate": 0.028665182485640765,
        "blocks": 0.028665182485640765,
        "bash": 0.028665182485640765,
        "convert": 0.028665182485640765,
        "absolute": 0.028665182485640765,
        "github": 0.028665182485640765,
        "relative": 0.028665182485640765,
        "where": 0.028665182485640765,
        "possible": 0.028665182485640765,
        "ensure": 0.028665182485640765,
        "idempotency": 0.028665182485640765,
        "only": 0.028665182485640765,
        "edit": 0.028665182485640765,
        "between": 0.028665182485640765,
        "managed": 0.028665182485640765,
        "begin": 0.028665182485640765,
        "end": 0.028665182485640765,
        "13": 0.028665182485640765,
        "ci": 0.028665182485640765,
        "integration": 0.028665182485640765,
        "pre": 0.028665182485640765,
        "forbid": 0.028665182485640765,
        "direct": 0.028665182485640765,
        "edits": 0.028665182485640765,
        "outside": 0.028665182485640765,
        "merge": 0.028665182485640765,
        "checkout": 0.028665182485640765,
        "remind": 0.028665182485640765
      },
      "text": "heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py prompting/ builder.py # Jinja2 templates, token mgmt constants.py templates/ # *.j2 per section llm/ runner.py # adapter for ollama/llama.cpp postproc/ lint.py links.py markers.py toc.py git/ diff.py publisher.py config.py models.py ``` **Analyzer ABC** ```python from abc import ABC, abstractmethod from .models import RepoManifest, Signal class Analyzer(ABC): @abstractmethod def supports(self, manifest: RepoManifest) -> bool: ... @abstractmethod def analyze(self, manifest: RepoManifest) -> list[Signal]: ... ``` **CLI (Typer)** ```python @app.command() def init(path: str = \".\", publish: bool = True): ... @app.command() def update(path: str = \".\", event: str = \"commit\", diff_base: str = \"origin/main\"): ... @app.command() def regenerate(sections: str = \"\", full: bool = False): ... ``` **FastAPI (optional service mode)** * `POST /analyze` * `POST /generate?sections=arch,quickstart` * `POST /publish` * `GET /status/{run_id}` --- ## 11) Change Impact Matrix (examples) | Changed Path Pattern | Sections to Rebuild | Notes | | ------------------------------------ | ---------------------------- | --------------------------------------- | | `pom.xml`, `build.gradle*` | build\\_and\\_test, quickstart | Recompute build commands | | `requirements.txt`, `pyproject.toml` | build\\_and\\_test, quickstart | Update install steps | | `Dockerfile`, `k8s/**` | deployment | Publish container changes | | `src/**`, `app/**`, `cmd/**` | features, architecture | If entrypoint changed, update intro too | | `docs/**` | all (patch) | Prefer doc-driven | | `README.md` | none (unless empty) | Prevent loops | --- ## 12) Post-Processing Rules * Headings start at `#` for title then `##` for sections. * Add **auto ToC** (<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#6",
      "vector": {
        "level": 0.04267895997763199,
        "3": 0.12803687993289598,
        "validate": 0.04267895997763199,
        "code": 0.04267895997763199,
        "blocks": 0.04267895997763199,
        "bash": 0.04267895997763199,
        "python": 0.08535791995526398,
        "convert": 0.04267895997763199,
        "absolute": 0.04267895997763199,
        "github": 0.12803687993289598,
        "links": 0.04267895997763199,
        "to": 0.08535791995526398,
        "relative": 0.04267895997763199,
        "where": 0.04267895997763199,
        "possible": 0.08535791995526398,
        "ensure": 0.04267895997763199,
        "idempotency": 0.04267895997763199,
        "only": 0.12803687993289598,
        "edit": 0.04267895997763199,
        "between": 0.04267895997763199,
        "managed": 0.08535791995526398,
        "markers": 0.12803687993289598,
        "docgen": 0.21339479988815996,
        "begin": 0.04267895997763199,
        "architecture": 0.21339479988815996,
        "end": 0.04267895997763199,
        "13": 0.04267895997763199,
        "git": 0.08535791995526398,
        "ci": 0.08535791995526398,
        "integration": 0.04267895997763199,
        "local": 0.12803687993289598,
        "pre": 0.04267895997763199,
        "commit": 0.08535791995526398,
        "forbid": 0.04267895997763199,
        "direct": 0.04267895997763199,
        "readme": 0.12803687993289598,
        "edits": 0.04267895997763199,
        "outside": 0.04267895997763199,
        "optional": 0.12803687993289598,
        "post": 0.12803687993289598,
        "merge": 0.04267895997763199,
        "checkout": 0.08535791995526398,
        "remind": 0.04267895997763199,
        "run": 0.04267895997763199,
        "update": 0.12803687993289598,
        "gitlab": 0.04267895997763199,
        "bitbucket": 0.04267895997763199,
        "on": 0.04267895997763199,
        "push": 0.04267895997763199,
        "pr": 0.25607375986579195,
        "1": 0.12803687993289598,
        "repo": 0.08535791995526398,
        "2": 0.17071583991052797,
        "event": 0.04267895997763199,
        "diff": 0.08535791995526398,
        "base": 0.04267895997763199,
        "base_sha": 0.04267895997763199,
        "if": 0.12803687993289598,
        "changes": 0.04267895997763199,
        "open": 0.04267895997763199,
        "with": 0.04267895997763199,
        "labeled": 0.04267895997763199,
        "docs": 0.08535791995526398,
        "auto": 0.04267895997763199,
        "tokenless": 0.04267895997763199,
        "mode": 0.12803687993289598,
        "created": 0.04267895997763199,
        "from": 0.08535791995526398,
        "a": 0.04267895997763199,
        "app": 0.04267895997763199,
        "bot": 0.04267895997763199,
        "account": 0.04267895997763199,
        "14": 0.04267895997763199,
        "quality": 0.04267895997763199,
        "gates": 0.04267895997763199,
        "evaluation": 0.04267895997763199,
        "consistency": 0.04267895997763199,
        "checks": 0.04267895997763199,
        "commands": 0.08535791995526398,
        "exist": 0.04267895997763199,
        "in": 0.12803687993289598,
        "ports": 0.04267895997763199,
        "env": 0.04267895997763199,
        "vars": 0.04267895997763199,
        "match": 0.04267895997763199,
        "configs": 0.04267895997763199,
        "no": 0.08535791995526398,
        "hallucinations": 0.04267895997763199,
        "reject": 0.04267895997763199,
        "new": 0.04267895997763199,
        "facts": 0.04267895997763199,
        "not": 0.04267895997763199,
        "found": 0.08535791995526398,
        "signals": 0.08535791995526398,
        "rag": 0.08535791995526398,
        "style": 0.04267895997763199,
        "concise": 0.04267895997763199,
        "paragraphs": 0.04267895997763199,
        "actionable": 0.04267895997763199,
        "filler": 0.04267895997763199,
        "marketing": 0.04267895997763199,
        "scorecard": 0.04267895997763199,
        "0": 0.04267895997763199,
        "100": 0.04267895997763199,
        "coverage": 0.04267895997763199,
        "of": 0.08535791995526398,
        "required": 0.04267895997763199,
        "sections": 0.08535791995526398,
        "30": 0.04267895997763199,
        "buildability": 0.04267895997763199,
        "quick": 0.08535791995526398,
        "start": 0.04267895997763199,
        "20": 0.12803687993289598,
        "link": 0.04267895997763199,
        "validity": 0.04267895997763199,
        "10": 0.12803687993289598,
        "alignment": 0.04267895997763199,
        "w": 0.04267895997763199,
        "change": 0.04267895997763199,
        "set": 0.04267895997763199,
        "lint": 0.04267895997763199,
        "reviewer": 0.04267895997763199,
        "feedback": 0.04267895997763199,
        "loop": 0.04267895997763199,
        "15": 0.04267895997763199,
        "security": 0.04267895997763199,
        "privacy": 0.04267895997763199,
        "llm": 0.08535791995526398,
        "and": 0.04267895997763199,
        "embedding": 0.04267895997763199,
        "models": 0.04267895997763199,
        "respect": 0.04267895997763199,
        "gitignore": 0.04267895997763199,
        "configurable": 0.04267895997763199,
        "exclude_paths": 0.04267895997763199,
        "never": 0.04267895997763199,
        "index": 0.04267895997763199,
        "large": 0.04267895997763199,
        "binaries": 0.04267895997763199,
        "secret": 0.08535791995526398,
        "files": 0.08535791995526398,
        "simple": 0.04267895997763199,
        "scan": 0.04267895997763199,
        "block": 0.04267895997763199,
        "16": 0.04267895997763199,
        "mvp": 0.04267895997763199,
        "plan": 0.04267895997763199,
        "weeks": 0.04267895997763199,
        "suggested": 0.04267895997763199,
        "breakdown": 0.04267895997763199,
        "core": 0.04267895997763199,
        "path": 0.04267895997763199,
        "cli": 0.04267895997763199,
        "scanner": 0.04267895997763199,
        "language": 0.04267895997763199,
        "build": 0.04267895997763199,
        "analyzers": 0.04267895997763199,
        "java": 0.04267895997763199,
        "node": 0.04267895997763199,
        "prompt": 0.04267895997763199,
        "builder": 0.04267895997763199,
        "runner": 0.04267895997763199,
        "ollama": 0.04267895997763199,
        "adapter": 0.04267895997763199,
        "processor": 0.04267895997763199,
        "publisher": 0.04267895997763199,
        "lite": 0.04267895997763199,
        "embed": 0.04267895997763199,
        "existing": 0.04267895997763199,
        "top": 0.04267895997763199,
        "largest": 0.04267895997763199,
        "source": 0.04267895997763199,
        "heads": 0.04267895997763199,
        "triggers": 0.04267895997763199,
        "single": 0.04267895997763199,
        "as": 0.08535791995526398,
        "stretch": 0.04267895997763199,
        "4": 0.04267895997763199,
        "templates": 0.08535791995526398,
        "8": 0.04267895997763199,
        "jinja2": 0.17071583991052797,
        "5": 0.04267895997763199,
        "config": 0.04267895997763199,
        "yml": 0.04267895997763199,
        "minimal": 0.04267895997763199,
        "17": 0.12803687993289598,
        "example": 0.04267895997763199,
        "section": 0.04267895997763199,
        "template": 0.04267895997763199,
        "j2": 0.08535791995526398,
        "project_name": 0.08535791995526398,
        "is": 0.04267895997763199,
        "structured": 0.04267895997763199,
        "ascii": 0.04267895997763199,
        "_architecture": 0.04267895997763199,
        "key": 0.04267895997763199,
        "components": 0.08535791995526398,
        "for": 0.04267895997763199,
        "comp": 0.12803687993289598,
        "name": 0.04267895997763199,
        "summary": 0.04267895997763199,
        "endfor": 0.04267895997763199,
        "data": 0.04267895997763199,
        "flow": 0.04267895997763199,
        "data_flow": 0.04267895997763199,
        "generated": 0.04267895997763199,
        "detected": 0.04267895997763199,
        "signals_summary": 0.04267895997763199,
        "frame": 0.04267895997763199,
        "composed": 0.04267895997763199,
        "intro": 0.04267895997763199,
        "features": 0.08535791995526398,
        "include": 0.04267895997763199
      },
      "text": "(<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to run `docgen update` (optional). ### CI (GitHub/GitLab/Bitbucket) * On push/PR: 1. Checkout repo. 2. `docgen update --event pr --diff-base $BASE_SHA` 3. If changes \u2192 open/update PR with labeled `docs:auto`. * Tokenless mode possible if PR created from a GitHub App/bot account. --- ## 14) Quality Gates & Evaluation * **Consistency checks**: commands exist in repo; ports/env vars match configs. * **No hallucinations**: reject new facts not found in signals/RAG. * **Style**: concise paragraphs, actionable commands, no filler marketing. * **Scorecard** (0\u2013100): * Coverage of required sections (30) * Buildability of quick start (20) * Link validity (10) * Diff alignment w/ change set (20) * Lint (10) * Reviewer feedback loop (10) --- ## 15) Security & Privacy * **Local only** LLM and embedding models. * Respect `.gitignore` + configurable `exclude_paths`. * Never index large binaries/secret files. * Optional simple **secret scan**; block if found. --- ## 16) MVP Plan (2 weeks suggested breakdown) 1. **Core path**: CLI, Scanner, Language+Build analyzers (Python/Java/Node), Prompt Builder, Local LLM runner (Ollama adapter), Post-processor, Git Publisher (PR). 2. **RAG Lite**: embed only `/docs`, existing `README`, top 20 largest source files\u2019 heads. 3. **Triggers**: single \u201ccommit\u201d mode; PR mode as stretch. 4. **Templates**: 8 sections, Jinja2; managed markers. 5. **Config**: `.docgen.yml` minimal. --- ## 17) Example Templates ### 17.1 Section Template (Jinja2 \u2014 architecture.j2) ```jinja2 ## Architecture {{ project_name }} is structured as: ``` {{ ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#7",
      "vector": {
        "ascii": 0.036588086663230115,
        "_architecture": 0.036588086663230115,
        "key": 0.14635234665292046,
        "components": 0.07317617332646023,
        "for": 0.2561166066426108,
        "comp": 0.10976425998969035,
        "in": 0.2195285199793807,
        "name": 0.036588086663230115,
        "summary": 0.036588086663230115,
        "endfor": 0.036588086663230115,
        "data": 0.036588086663230115,
        "flow": 0.036588086663230115,
        "data_flow": 0.036588086663230115,
        "generated": 0.036588086663230115,
        "from": 0.036588086663230115,
        "detected": 0.036588086663230115,
        "signals": 0.036588086663230115,
        "signals_summary": 0.036588086663230115,
        "17": 0.036588086663230115,
        "2": 0.036588086663230115,
        "readme": 0.10976425998969035,
        "frame": 0.036588086663230115,
        "composed": 0.036588086663230115,
        "jinja2": 0.036588086663230115,
        "project_name": 0.036588086663230115,
        "intro": 0.10976425998969035,
        "features": 0.10976425998969035,
        "include": 0.036588086663230115,
        "architecture": 0.07317617332646023,
        "j2": 0.036588086663230115,
        "quick": 0.07317617332646023,
        "start": 0.2195285199793807,
        "quickstart": 0.036588086663230115,
        "configuration": 0.07317617332646023,
        "build": 0.14635234665292046,
        "test": 0.036588086663230115,
        "build_and_test": 0.07317617332646023,
        "deployment": 0.10976425998969035,
        "troubleshooting": 0.07317617332646023,
        "faq": 0.07317617332646023,
        "license": 0.07317617332646023,
        "18": 0.036588086663230115,
        "minimal": 0.036588086663230115,
        "python": 0.14635234665292046,
        "snippets": 0.036588086663230115,
        "change": 0.036588086663230115,
        "impact": 0.036588086663230115,
        "heuristic": 0.036588086663230115,
        "section_rules": 0.07317617332646023,
        "pom": 0.10976425998969035,
        "xml": 0.10976425998969035,
        "gradle": 0.07317617332646023,
        "requirements": 0.10976425998969035,
        "txt": 0.10976425998969035,
        "pyproject": 0.036588086663230115,
        "toml": 0.036588086663230115,
        "package": 0.07317617332646023,
        "json": 0.07317617332646023,
        "dockerfile": 0.07317617332646023,
        "k8s": 0.036588086663230115,
        "src": 0.10976425998969035,
        "app": 0.10976425998969035,
        "cmd": 0.10976425998969035,
        "def": 0.07317617332646023,
        "sections_from_diff": 0.036588086663230115,
        "paths": 0.07317617332646023,
        "list": 0.036588086663230115,
        "str": 0.2195285199793807,
        "set": 0.07317617332646023,
        "out": 0.10976425998969035,
        "section": 0.07317617332646023,
        "patterns": 0.10976425998969035,
        "if": 0.18294043331615056,
        "any": 0.036588086663230115,
        "p": 0.10976425998969035,
        "pat": 0.07317617332646023,
        "startswith": 0.036588086663230115,
        "add": 0.036588086663230115,
        "return": 0.10976425998969035,
        "or": 0.10976425998969035,
        "fall": 0.036588086663230115,
        "back": 0.036588086663230115,
        "to": 0.07317617332646023,
        "uncertain": 0.036588086663230115,
        "managed": 0.036588086663230115,
        "markers": 0.07317617332646023,
        "patch": 0.036588086663230115,
        "replace_block": 0.036588086663230115,
        "md": 0.18294043331615056,
        "new": 0.07317617332646023,
        "f": 0.10976425998969035,
        "docgen": 0.18294043331615056,
        "begin": 0.036588086663230115,
        "end": 0.18294043331615056,
        "and": 0.036588086663230115,
        "pre": 0.07317617332646023,
        "rest": 0.07317617332646023,
        "split": 0.07317617332646023,
        "1": 0.07317617332646023,
        "_": 0.036588086663230115,
        "post": 0.07317617332646023,
        "n": 0.07317617332646023,
        "insert": 0.036588086663230115,
        "missing": 0.036588086663230115,
        "19": 0.036588086663230115,
        "open": 0.036588086663230115,
        "questions": 0.036588086663230115,
        "trade": 0.036588086663230115,
        "offs": 0.036588086663230115,
        "embeddings": 0.036588086663230115,
        "use": 0.036588086663230115,
        "a": 0.14635234665292046,
        "tiny": 0.036588086663230115,
        "local": 0.036588086663230115,
        "model": 0.07317617332646023,
        "vs": 0.07317617332646023,
        "rule": 0.036588086663230115,
        "based": 0.036588086663230115,
        "retrieval": 0.036588086663230115,
        "mvp": 0.036588086663230115,
        "tree": 0.036588086663230115,
        "sitter": 0.036588086663230115,
        "adds": 0.036588086663230115,
        "power": 0.036588086663230115,
        "but": 0.036588086663230115,
        "increases": 0.036588086663230115,
        "footprint": 0.036588086663230115,
        "gate": 0.036588086663230115,
        "behind": 0.036588086663230115,
        "flag": 0.036588086663230115,
        "pr": 0.10976425998969035,
        "author": 0.036588086663230115,
        "bot": 0.036588086663230115,
        "account": 0.036588086663230115,
        "developer": 0.036588086663230115,
        "token": 0.036588086663230115,
        "decide": 0.036588086663230115,
        "per": 0.036588086663230115,
        "environment": 0.036588086663230115,
        "markdown": 0.036588086663230115,
        "diffs": 0.036588086663230115,
        "keep": 0.036588086663230115,
        "sections": 0.036588086663230115,
        "atomic": 0.036588086663230115,
        "minimize": 0.036588086663230115,
        "noisy": 0.036588086663230115,
        "prs": 0.036588086663230115,
        "20": 0.036588086663230115,
        "example": 0.036588086663230115,
        "yml": 0.036588086663230115,
        "mixed": 0.036588086663230115,
        "repo": 0.036588086663230115,
        "yaml": 0.036588086663230115,
        "llm": 0.036588086663230115,
        "runner": 0.036588086663230115,
        "ollama": 0.036588086663230115,
        "llama3": 0.036588086663230115,
        "8b": 0.036588086663230115,
        "instruct": 0.036588086663230115,
        "temperature": 0.036588086663230115,
        "0": 0.036588086663230115,
        "15": 0.036588086663230115,
        "style": 0.036588086663230115,
        "comprehensive": 0.036588086663230115,
        "publish": 0.036588086663230115,
        "mode": 0.036588086663230115,
        "branch_prefix": 0.036588086663230115,
        "analyzers": 0.036588086663230115,
        "enabled": 0.036588086663230115,
        "language": 0.036588086663230115,
        "dependencies": 0.036588086663230115,
        "exclude_paths": 0.036588086663230115,
        "git": 0.036588086663230115,
        "node_modules": 0.036588086663230115,
        "dist": 0.036588086663230115,
        "target": 0.036588086663230115,
        "ci": 0.036588086663230115,
        "watched_globs": 0.036588086663230115,
        "21": 0.036588086663230115,
        "success": 0.036588086663230115,
        "criteria": 0.036588086663230115,
        "poc": 0.036588086663230115,
        "3": 0.036588086663230115,
        "diverse": 0.036588086663230115,
        "repos": 0.036588086663230115,
        "cli": 0.036588086663230115,
        "spring": 0.036588086663230115,
        "boot": 0.036588086663230115,
        "api": 0.036588086663230115,
        "node": 0.036588086663230115,
        "webapp": 0.036588086663230115,
        "init": 0.036588086663230115,
        "produces": 0.036588086663230115,
        "working": 0.036588086663230115,
        "linted": 0.036588086663230115,
        "with": 0.036588086663230115,
        "runnable": 0.036588086663230115,
        "on": 0.036588086663230115,
        "changing": 0.036588086663230115
      },
      "text": "ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick Start {{ quickstart }} ## Configuration {{ configuration }} ## Build & Test {{ build_and_test }} ## Deployment {{ deployment }} ## Troubleshooting {{ troubleshooting }} ## FAQ {{ faq }} ## License {{ license }} ``` --- ## 18) Minimal Python Snippets **Change impact heuristic** ```python SECTION_RULES = [ (\"build_and_test\", [\"pom.xml\",\"build.gradle\",\"requirements.txt\",\"pyproject.toml\",\"package.json\"]), (\"deployment\", [\"Dockerfile\",\"k8s/\"]), (\"architecture\", [\"src/\",\"app/\",\"cmd/\"]), (\"features\", [\"src/\",\"app/\",\"cmd/\"]), ] def sections_from_diff(paths: list[str]) -> set[str]: out = set() for section, patterns in SECTION_RULES: if any(p for p in paths for pat in patterns if p.startswith(pat)): out.add(section) return out or {\"intro\"} # fall back to intro if uncertain ``` **Managed markers (patch)** ```python def replace_block(md: str, key: str, new: str) -> str: start = f\"<!-- docgen:begin:{key} -->\" end = f\"<!-- docgen:end:{key} -->\" if start in md and end in md: pre, rest = md.split(start, 1) _, post = rest.split(end, 1) return f\"{pre}{start}\\n{new}\\n{end}{post}\" return md # or insert markers if missing ``` --- ## 19) Open Questions / Trade-offs * **Embeddings**: Use a tiny local model vs. rule-based retrieval for MVP? * **Tree-sitter**: Adds power but increases footprint\u2014gate behind a flag. * **PR author**: Bot account vs. developer token\u2014decide per environment. * **Markdown diffs**: Keep sections atomic to minimize noisy PRs. --- ## 20) Example `.docgen.yml` for a Mixed Repo ```yaml llm: runner: \"ollama\" model: \"llama3:8b-instruct\" temperature: 0.15 readme: style: \"comprehensive\" publish: mode: \"pr\" branch_prefix: \"docgen/\" analyzers: enabled: [language, build, dependencies, patterns] exclude_paths: [\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#8",
      "vector": {
        "git": 0.08838834764831843,
        "node_modules": 0.08838834764831843,
        "dist": 0.08838834764831843,
        "target": 0.08838834764831843,
        "ci": 0.08838834764831843,
        "watched_globs": 0.08838834764831843,
        "src": 0.08838834764831843,
        "app": 0.08838834764831843,
        "cmd": 0.08838834764831843,
        "pom": 0.17677669529663687,
        "xml": 0.17677669529663687,
        "build": 0.08838834764831843,
        "gradle": 0.08838834764831843,
        "package": 0.08838834764831843,
        "json": 0.08838834764831843,
        "requirements": 0.17677669529663687,
        "txt": 0.17677669529663687,
        "dockerfile": 0.08838834764831843,
        "21": 0.08838834764831843,
        "success": 0.08838834764831843,
        "criteria": 0.08838834764831843,
        "poc": 0.08838834764831843,
        "for": 0.08838834764831843,
        "3": 0.08838834764831843,
        "diverse": 0.08838834764831843,
        "repos": 0.08838834764831843,
        "python": 0.08838834764831843,
        "cli": 0.17677669529663687,
        "spring": 0.08838834764831843,
        "boot": 0.08838834764831843,
        "api": 0.08838834764831843,
        "node": 0.08838834764831843,
        "webapp": 0.08838834764831843,
        "docgen": 0.17677669529663687,
        "init": 0.17677669529663687,
        "produces": 0.08838834764831843,
        "a": 0.2651650429449553,
        "working": 0.08838834764831843,
        "linted": 0.08838834764831843,
        "readme": 0.08838834764831843,
        "with": 0.08838834764831843,
        "runnable": 0.08838834764831843,
        "quick": 0.08838834764831843,
        "start": 0.08838834764831843,
        "on": 0.08838834764831843,
        "changing": 0.08838834764831843,
        "or": 0.08838834764831843,
        "pr": 0.08838834764831843,
        "updates": 0.08838834764831843,
        "only": 0.08838834764831843,
        "relevant": 0.08838834764831843,
        "sections": 0.08838834764831843,
        "no": 0.08838834764831843,
        "hallucinated": 0.08838834764831843,
        "commands": 0.08838834764831843,
        "links": 0.08838834764831843,
        "and": 0.2651650429449553,
        "badges": 0.08838834764831843,
        "validate": 0.08838834764831843,
        "style": 0.08838834764831843,
        "consistent": 0.08838834764831843,
        "if": 0.08838834764831843,
        "you": 0.17677669529663687,
        "want": 0.08838834764831843,
        "i": 0.08838834764831843,
        "can": 0.17677669529663687,
        "spin": 0.08838834764831843,
        "up": 0.08838834764831843,
        "starter": 0.08838834764831843,
        "repo": 0.08838834764831843,
        "layout": 0.08838834764831843,
        "analyzers": 0.08838834764831843,
        "templates": 0.08838834764831843,
        "simple": 0.08838834764831843,
        "ollama": 0.08838834764831843,
        "adapter": 0.08838834764831843,
        "so": 0.08838834764831843,
        "drop": 0.08838834764831843,
        "it": 0.08838834764831843,
        "into": 0.08838834764831843,
        "your": 0.08838834764831843,
        "environment": 0.08838834764831843,
        "run": 0.08838834764831843,
        "right": 0.08838834764831843,
        "away": 0.08838834764831843
      },
      "text": "[\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR updates only relevant sections. * No hallucinated commands; links and badges validate; style consistent. --- If you want, I can spin up a **starter repo layout** (CLI, analyzers, templates, and a simple Ollama adapter) so you can drop it into your environment and run `docgen init` right away.",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "docgen/prompting/builder.py#0",
      "vector": {
        "builds": 0.037688918072220454,
        "prompts": 0.07537783614444091,
        "and": 0.18844459036110225,
        "templates": 0.11306675421666136,
        "for": 0.037688918072220454,
        "the": 0.037688918072220454,
        "local": 0.037688918072220454,
        "llm": 0.037688918072220454,
        "from": 0.3768891807222045,
        "__future__": 0.037688918072220454,
        "import": 0.3392002626499841,
        "annotations": 0.037688918072220454,
        "collections": 0.037688918072220454,
        "defaultdict": 0.037688918072220454,
        "dataclasses": 0.037688918072220454,
        "dataclass": 0.07537783614444091,
        "pathlib": 0.037688918072220454,
        "path": 0.11306675421666136,
        "typing": 0.037688918072220454,
        "dict": 0.11306675421666136,
        "iterable": 0.037688918072220454,
        "list": 0.037688918072220454,
        "sequence": 0.037688918072220454,
        "tuple": 0.037688918072220454,
        "try": 0.037688918072220454,
        "pragma": 0.07537783614444091,
        "no": 0.11306675421666136,
        "cover": 0.07537783614444091,
        "optional": 0.07537783614444091,
        "dependency": 0.07537783614444091,
        "jinja2": 0.037688918072220454,
        "environment": 0.11306675421666136,
        "filesystemloader": 0.037688918072220454,
        "templatenotfound": 0.07537783614444091,
        "except": 0.037688918072220454,
        "modulenotfounderror": 0.037688918072220454,
        "none": 0.30151134457776363,
        "exception": 0.037688918072220454,
        "type": 0.037688918072220454,
        "ignore": 0.037688918072220454,
        "assignment": 0.037688918072220454,
        "models": 0.037688918072220454,
        "repomanifest": 0.037688918072220454,
        "signal": 0.037688918072220454,
        "postproc": 0.037688918072220454,
        "toc": 0.037688918072220454,
        "tableofcontentsbuilder": 0.037688918072220454,
        "constants": 0.037688918072220454,
        "default_sections": 0.037688918072220454,
        "section_titles": 0.037688918072220454,
        "_role_descriptions": 0.037688918072220454,
        "str": 0.30151134457776363,
        "src": 0.037688918072220454,
        "primary": 0.037688918072220454,
        "application": 0.037688918072220454,
        "library": 0.037688918072220454,
        "code": 0.07537783614444091,
        "test": 0.037688918072220454,
        "automated": 0.037688918072220454,
        "tests": 0.037688918072220454,
        "that": 0.037688918072220454,
        "guard": 0.037688918072220454,
        "behaviour": 0.037688918072220454,
        "docs": 0.037688918072220454,
        "project": 0.037688918072220454,
        "documentation": 0.037688918072220454,
        "assets": 0.037688918072220454,
        "config": 0.037688918072220454,
        "configuration": 0.037688918072220454,
        "infrastructure": 0.07537783614444091,
        "files": 0.037688918072220454,
        "infra": 0.037688918072220454,
        "as": 0.037688918072220454,
        "or": 0.11306675421666136,
        "definitions": 0.037688918072220454,
        "examples": 0.037688918072220454,
        "example": 0.037688918072220454,
        "usages": 0.037688918072220454,
        "samples": 0.037688918072220454,
        "class": 0.07537783614444091,
        "section": 0.11306675421666136,
        "rendered": 0.037688918072220454,
        "readme": 0.037688918072220454,
        "details": 0.037688918072220454,
        "name": 0.037688918072220454,
        "title": 0.037688918072220454,
        "body": 0.037688918072220454,
        "metadata": 0.037688918072220454,
        "object": 0.037688918072220454,
        "promptbuilder": 0.037688918072220454,
        "assembles": 0.037688918072220454,
        "aware": 0.037688918072220454,
        "signals": 0.037688918072220454,
        "system_prompt": 0.037688918072220454,
        "you": 0.037688918072220454,
        "are": 0.037688918072220454,
        "a": 0.037688918072220454,
        "senior": 0.037688918072220454,
        "dev": 0.037688918072220454,
        "doc": 0.037688918072220454,
        "writer": 0.037688918072220454,
        "be": 0.037688918072220454,
        "precise": 0.037688918072220454,
        "cite": 0.037688918072220454,
        "repo": 0.037688918072220454,
        "facts": 0.037688918072220454,
        "only": 0.037688918072220454,
        "speculation": 0.037688918072220454,
        "never": 0.037688918072220454,
        "invent": 0.037688918072220454,
        "commands": 0.07537783614444091,
        "prefer": 0.037688918072220454,
        "detected": 0.037688918072220454,
        "by": 0.037688918072220454,
        "analyzers": 0.037688918072220454,
        "def": 0.037688918072220454,
        "__init__": 0.037688918072220454,
        "self": 0.3768891807222045,
        "templates_dir": 0.15075567228888181,
        "style": 0.18844459036110225,
        "template_pack": 0.11306675421666136,
        "__file__": 0.037688918072220454,
        "with_name": 0.037688918072220454,
        "comprehensive": 0.11306675421666136,
        "lower": 0.037688918072220454,
        "if": 0.037688918072220454,
        "not": 0.037688918072220454,
        "in": 0.037688918072220454,
        "concise": 0.037688918072220454,
        "_env": 0.037688918072220454,
        "_create_env": 0.037688918072220454,
        "_toc_placeho": 0.037688918072220454
      },
      "text": "\"\"\"Builds prompts and templates for the local LLM.\"\"\" from __future__ import annotations from collections import defaultdict from dataclasses import dataclass from pathlib import Path from typing import Dict, Iterable, List, Sequence, Tuple try: # pragma: no cover - optional dependency from jinja2 import Environment, FileSystemLoader, TemplateNotFound except ModuleNotFoundError: # pragma: no cover - optional dependency Environment = None TemplateNotFound = Exception # type: ignore[assignment] from ..models import RepoManifest, Signal from ..postproc.toc import TableOfContentsBuilder from .constants import DEFAULT_SECTIONS, SECTION_TITLES _ROLE_DESCRIPTIONS: Dict[str, str] = { \"src\": \"Primary application and library code\", \"test\": \"Automated tests that guard behaviour\", \"docs\": \"Project documentation assets\", \"config\": \"Configuration and infrastructure files\", \"infra\": \"Infrastructure as code or environment definitions\", \"examples\": \"Example usages and samples\", } @dataclass class Section: \"\"\"Rendered README section details.\"\"\" name: str title: str body: str metadata: Dict[str, object] class PromptBuilder: \"\"\"Assembles section-aware prompts from templates and signals.\"\"\" SYSTEM_PROMPT = ( \"You are a senior dev doc writer. Be precise. Cite repo facts only. No speculation. \" \"Never invent commands. Prefer commands detected by analyzers.\" ) def __init__( self, templates_dir: Path | None = None, *, style: str | None = None, template_pack: str | None = None, ) -> None: self.templates_dir = templates_dir or Path(__file__).with_name(\"templates\") self.style = (style or \"comprehensive\").lower() self.template_pack = template_pack if self.style not in {\"concise\", \"comprehensive\"}: self.style = \"comprehensive\" self._env = self._create_env(self.templates_dir) self._toc_placeho",
      "metadata": {
        "path": "docgen/prompting/builder.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "2a19d15f647c5e4c76e060d4471fd804c079e3067dedf0ce2e4e4a2a9b9dbded"
      }
    },
    {
      "id": "docgen/orchestrator.py#0",
      "vector": {
        "pipeline": 0.02361619114304532,
        "orchestration": 0.02361619114304532,
        "for": 0.02361619114304532,
        "init": 0.02361619114304532,
        "update": 0.04723238228609064,
        "regenerate": 0.02361619114304532,
        "flows": 0.02361619114304532,
        "from": 0.4959400140039517,
        "__future__": 0.02361619114304532,
        "import": 0.5431723962900423,
        "annotations": 0.02361619114304532,
        "logging": 0.04723238228609064,
        "dataclasses": 0.02361619114304532,
        "dataclass": 0.04723238228609064,
        "datetime": 0.04723238228609064,
        "difflib": 0.02361619114304532,
        "pathlib": 0.02361619114304532,
        "path": 0.07084857342913596,
        "typing": 0.02361619114304532,
        "dict": 0.02361619114304532,
        "iterable": 0.04723238228609064,
        "list": 0.02361619114304532,
        "optional": 0.04723238228609064,
        "sequence": 0.02361619114304532,
        "analyzers": 0.04723238228609064,
        "analyzer": 0.04723238228609064,
        "discover_analyzers": 0.02361619114304532,
        "config": 0.02361619114304532,
        "configerror": 0.02361619114304532,
        "docgenconfig": 0.02361619114304532,
        "load_config": 0.02361619114304532,
        "failsafe": 0.02361619114304532,
        "build_readme_stub": 0.02361619114304532,
        "build_section_stubs": 0.02361619114304532,
        "git": 0.04723238228609064,
        "diff": 0.04723238228609064,
        "diffanalyzer": 0.04723238228609064,
        "diffresult": 0.02361619114304532,
        "_pattern_matches": 0.02361619114304532,
        "as": 0.04723238228609064,
        "diff_pattern_matches": 0.02361619114304532,
        "publisher": 0.09446476457218128,
        "get_logger": 0.02361619114304532,
        "models": 0.02361619114304532,
        "repomanifest": 0.02361619114304532,
        "signal": 0.02361619114304532,
        "postproc": 0.14169714685827192,
        "lint": 0.02361619114304532,
        "markdownlinter": 0.04723238228609064,
        "markers": 0.02361619114304532,
        "markermanager": 0.04723238228609064,
        "toc": 0.02361619114304532,
        "tableofcontentsbuilder": 0.04723238228609064,
        "badges": 0.02361619114304532,
        "badgemanager": 0.04723238228609064,
        "links": 0.02361619114304532,
        "linkvalidator": 0.04723238228609064,
        "scorecard": 0.04723238228609064,
        "readmescorecard": 0.04723238228609064,
        "prompting": 0.02361619114304532,
        "builder": 0.02361619114304532,
        "promptbuilder": 0.04723238228609064,
        "rag": 0.02361619114304532,
        "indexer": 0.02361619114304532,
        "ragindexer": 0.04723238228609064,
        "repo_scanner": 0.02361619114304532,
        "reposcanner": 0.07084857342913596,
        "class": 0.04723238228609064,
        "updateoutcome": 0.02361619114304532,
        "result": 0.02361619114304532,
        "of": 0.02361619114304532,
        "a": 0.02361619114304532,
        "readme": 0.02361619114304532,
        "operation": 0.02361619114304532,
        "str": 0.02361619114304532,
        "dry_run": 0.02361619114304532,
        "bool": 0.02361619114304532,
        "orchestrator": 0.02361619114304532,
        "coordinates": 0.02361619114304532,
        "doc": 0.02361619114304532,
        "generation": 0.02361619114304532,
        "pipelines": 0.02361619114304532,
        "described": 0.02361619114304532,
        "in": 0.02361619114304532,
        "the": 0.02361619114304532,
        "spec": 0.02361619114304532,
        "def": 0.02361619114304532,
        "__init__": 0.02361619114304532,
        "self": 0.07084857342913596,
        "scanner": 0.07084857342913596,
        "none": 0.5667885874330877,
        "prompt_builder": 0.02361619114304532,
        "linter": 0.02361619114304532,
        "toc_builder": 0.02361619114304532,
        "rag_indexer": 0.02361619114304532,
        "diff_analyzer": 0.02361619114304532,
        "marker_manager": 0.02361619114304532,
        "badge_manager": 0.02361619114304532,
        "link_validator": 0.02361619114304532,
        "or": 0.02361619114304532,
        "_analyzer_overrides": 0.02361619114304532,
        "l": 0.02361619114304532
      },
      "text": "\"\"\"Pipeline orchestration for init/update/regenerate flows.\"\"\" from __future__ import annotations import logging from dataclasses import dataclass from datetime import datetime import difflib from pathlib import Path from typing import Dict, Iterable, List, Optional, Sequence from .analyzers import Analyzer, discover_analyzers from .config import ConfigError, DocGenConfig, load_config from .failsafe import build_readme_stub, build_section_stubs from .git.diff import DiffAnalyzer, DiffResult, _pattern_matches as diff_pattern_matches from .git.publisher import Publisher from .logging import get_logger from .models import RepoManifest, Signal from .postproc.lint import MarkdownLinter from .postproc.markers import MarkerManager from .postproc.toc import TableOfContentsBuilder from .postproc.badges import BadgeManager from .postproc.links import LinkValidator from .postproc.scorecard import ReadmeScorecard from .prompting.builder import PromptBuilder from .rag.indexer import RAGIndexer from .repo_scanner import RepoScanner @dataclass class UpdateOutcome: \"\"\"Result of a README update operation.\"\"\" path: Path diff: str dry_run: bool class Orchestrator: \"\"\"Coordinates doc generation pipelines as described in the spec.\"\"\" def __init__( self, scanner: RepoScanner | None = None, analyzers: Optional[Iterable[Analyzer]] = None, prompt_builder: PromptBuilder | None = None, publisher: Publisher | None = None, linter: MarkdownLinter | None = None, toc_builder: TableOfContentsBuilder | None = None, rag_indexer: RAGIndexer | None = None, diff_analyzer: DiffAnalyzer | None = None, marker_manager: MarkerManager | None = None, badge_manager: BadgeManager | None = None, link_validator: LinkValidator | None = None, scorecard: ReadmeScorecard | None = None, ) -> None: self.scanner = scanner or RepoScanner() self._analyzer_overrides = l",
      "metadata": {
        "path": "docgen/orchestrator.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "0cbc6a4727b259437e7a87dd3a500bf4f036ba5563cbb60ee321102b1b54b0cc"
      }
    },
    {
      "id": "docgen/config.py#0",
      "vector": {
        "configuration": 0.08495482076828985,
        "loading": 0.02831827358942995,
        "for": 0.0566365471788599,
        "docgen": 0.1132730943577198,
        "yml": 0.08495482076828985,
        "from": 0.1699096415365797,
        "__future__": 0.02831827358942995,
        "import": 0.14159136794714974,
        "annotations": 0.02831827358942995,
        "dataclasses": 0.02831827358942995,
        "dataclass": 0.1699096415365797,
        "field": 0.2265461887154396,
        "pathlib": 0.02831827358942995,
        "path": 0.1132730943577198,
        "typing": 0.02831827358942995,
        "any": 0.02831827358942995,
        "dict": 0.02831827358942995,
        "list": 0.31150100948372944,
        "optional": 0.48141065102030917,
        "sequence": 0.02831827358942995,
        "try": 0.02831827358942995,
        "pragma": 0.0566365471788599,
        "no": 0.0566365471788599,
        "cover": 0.0566365471788599,
        "dependency": 0.0566365471788599,
        "yaml": 0.02831827358942995,
        "as": 0.02831827358942995,
        "_yaml": 0.0566365471788599,
        "type": 0.02831827358942995,
        "ignore": 0.02831827358942995,
        "except": 0.02831827358942995,
        "modulenotfounderror": 0.02831827358942995,
        "none": 0.42477410384144926,
        "class": 0.1699096415365797,
        "configerror": 0.02831827358942995,
        "runtimeerror": 0.02831827358942995,
        "raised": 0.02831827358942995,
        "when": 0.02831827358942995,
        "the": 0.0566365471788599,
        "file": 0.02831827358942995,
        "cannot": 0.02831827358942995,
        "be": 0.02831827358942995,
        "parsed": 0.02831827358942995,
        "llmconfig": 0.0566365471788599,
        "llm": 0.0566365471788599,
        "runtime": 0.02831827358942995,
        "settings": 0.0566365471788599,
        "runner": 0.02831827358942995,
        "str": 0.36813755666258935,
        "model": 0.02831827358942995,
        "temperature": 0.02831827358942995,
        "float": 0.0566365471788599,
        "max_tokens": 0.02831827358942995,
        "int": 0.02831827358942995,
        "base_url": 0.02831827358942995,
        "api_key": 0.02831827358942995,
        "request_timeout": 0.02831827358942995,
        "publishconfig": 0.0566365471788599,
        "publish": 0.0566365471788599,
        "strategy": 0.02831827358942995,
        "readme": 0.02831827358942995,
        "updates": 0.02831827358942995,
        "mode": 0.02831827358942995,
        "branch_prefix": 0.02831827358942995,
        "labels": 0.02831827358942995,
        "default_factory": 0.19822791512600965,
        "update_existing": 0.02831827358942995,
        "bool": 0.02831827358942995,
        "false": 0.02831827358942995,
        "analyzerconfig": 0.08495482076828985,
        "analyzer": 0.02831827358942995,
        "enablement": 0.02831827358942995,
        "and": 0.02831827358942995,
        "exclusions": 0.02831827358942995,
        "enabled": 0.02831827358942995,
        "exclude_paths": 0.0566365471788599,
        "ciconfig": 0.08495482076828985,
        "continuous": 0.02831827358942995,
        "integration": 0.02831827358942995,
        "triggers": 0.02831827358942995,
        "watched_globs": 0.02831827358942995,
        "docgenconfig": 0.0566365471788599,
        "represents": 0.02831827358942995,
        "high": 0.02831827358942995,
        "level": 0.02831827358942995,
        "defined": 0.02831827358942995,
        "in": 0.02831827358942995,
        "root": 0.02831827358942995,
        "readme_style": 0.02831827358942995,
        "analyzers": 0.02831827358942995,
        "ci": 0.02831827358942995,
        "templates_dir": 0.02831827358942995,
        "template_pack": 0.02831827358942995,
        "def": 0.02831827358942995,
        "load_config": 0.02831827358942995,
        "config_path": 0.02831827358942995,
        "load": 0.02831827358942995,
        "disk": 0.02831827358942995,
        "config_file": 0.02831827358942995,
        "_res": 0.02831827358942995
      },
      "text": "\"\"\"Configuration loading for docgen (.docgen.yml).\"\"\" from __future__ import annotations from dataclasses import dataclass, field from pathlib import Path from typing import Any, Dict, List, Optional, Sequence try: # pragma: no cover - optional dependency import yaml as _yaml # type: ignore except ModuleNotFoundError: # pragma: no cover - optional dependency _yaml = None class ConfigError(RuntimeError): \"\"\"Raised when the configuration file cannot be parsed.\"\"\" @dataclass class LLMConfig: \"\"\"LLM runtime settings from .docgen.yml.\"\"\" runner: Optional[str] = None model: Optional[str] = None temperature: Optional[float] = None max_tokens: Optional[int] = None base_url: Optional[str] = None api_key: Optional[str] = None request_timeout: Optional[float] = None @dataclass class PublishConfig: \"\"\"Publish strategy for README updates.\"\"\" mode: Optional[str] = None branch_prefix: Optional[str] = None labels: List[str] = field(default_factory=list) update_existing: bool = False @dataclass class AnalyzerConfig: \"\"\"Analyzer enablement and exclusions.\"\"\" enabled: List[str] = field(default_factory=list) exclude_paths: List[str] = field(default_factory=list) @dataclass class CIConfig: \"\"\"Continuous integration triggers.\"\"\" watched_globs: List[str] = field(default_factory=list) @dataclass class DocGenConfig: \"\"\"Represents the high-level settings defined in .docgen.yml.\"\"\" root: Path llm: Optional[LLMConfig] = None readme_style: Optional[str] = None analyzers: AnalyzerConfig = field(default_factory=AnalyzerConfig) publish: Optional[PublishConfig] = None ci: CIConfig = field(default_factory=CIConfig) exclude_paths: List[str] = field(default_factory=list) templates_dir: Optional[Path] = None template_pack: Optional[str] = None def load_config(config_path: Path) -> DocGenConfig: \"\"\"Load configuration from disk.\"\"\" config_file = _res",
      "metadata": {
        "path": "docgen/config.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "a23124e93cd81e0166fcb8959b466d1c0fbe253a2bfa8f204ea7e58a3a299064"
      }
    },
    {
      "id": "docgen/repo_scanner.py#0",
      "vector": {
        "repository": 0.04233337566673017,
        "scanning": 0.04233337566673017,
        "and": 0.04233337566673017,
        "manifest": 0.04233337566673017,
        "building": 0.04233337566673017,
        "utilities": 0.04233337566673017,
        "from": 0.33866700533384136,
        "__future__": 0.04233337566673017,
        "import": 0.4233337566673017,
        "annotations": 0.04233337566673017,
        "hashlib": 0.04233337566673017,
        "json": 0.16933350266692068,
        "os": 0.04233337566673017,
        "dataclasses": 0.04233337566673017,
        "dataclass": 0.08466675133346034,
        "fnmatch": 0.04233337566673017,
        "fnmatchcase": 0.04233337566673017,
        "pathlib": 0.04233337566673017,
        "path": 0.04233337566673017,
        "typing": 0.04233337566673017,
        "dict": 0.04233337566673017,
        "iterator": 0.04233337566673017,
        "list": 0.04233337566673017,
        "sequence": 0.04233337566673017,
        "config": 0.1270001270001905,
        "configerror": 0.04233337566673017,
        "load_config": 0.04233337566673017,
        "models": 0.04233337566673017,
        "filemeta": 0.04233337566673017,
        "repomanifest": 0.04233337566673017,
        "_excluded_dirs": 0.04233337566673017,
        "git": 0.04233337566673017,
        "hg": 0.04233337566673017,
        "svn": 0.04233337566673017,
        "venv": 0.04233337566673017,
        "node_modules": 0.04233337566673017,
        "__pycache__": 0.04233337566673017,
        "pytest_cache": 0.04233337566673017,
        "mypy_cache": 0.04233337566673017,
        "idea": 0.04233337566673017,
        "docgen": 0.08466675133346034,
        "sandbox": 0.04233337566673017,
        "_excluded_files": 0.04233337566673017,
        "readme": 0.04233337566673017,
        "md": 0.04233337566673017,
        "ds_store": 0.04233337566673017,
        "thumbs": 0.04233337566673017,
        "db": 0.04233337566673017,
        "_language_by_suffix": 0.04233337566673017,
        "py": 0.04233337566673017,
        "python": 0.08466675133346034,
        "pyi": 0.04233337566673017,
        "js": 0.04233337566673017,
        "javascript": 0.08466675133346034,
        "ts": 0.04233337566673017,
        "typescript": 0.08466675133346034,
        "tsx": 0.04233337566673017,
        "jsx": 0.04233337566673017,
        "java": 0.08466675133346034,
        "kt": 0.04233337566673017,
        "kotlin": 0.08466675133346034,
        "kts": 0.04233337566673017,
        "go": 0.08466675133346034,
        "rs": 0.04233337566673017,
        "rust": 0.04233337566673017,
        "rb": 0.04233337566673017,
        "ruby": 0.04233337566673017,
        "php": 0.08466675133346034,
        "cs": 0.04233337566673017,
        "c": 0.4233337566673017,
        "h": 0.04233337566673017,
        "cpp": 0.04233337566673017,
        "hpp": 0.04233337566673017,
        "cc": 0.04233337566673017,
        "hh": 0.04233337566673017,
        "swift": 0.08466675133346034,
        "m": 0.04233337566673017,
        "objective": 0.08466675133346034,
        "mm": 0.04233337566673017,
        "scala": 0.08466675133346034,
        "r": 0.08466675133346034,
        "jl": 0.04233337566673017,
        "julia": 0.04233337566673017,
        "sh": 0.04233337566673017,
        "shell": 0.04233337566673017,
        "ps1": 0.04233337566673017,
        "powershell": 0.04233337566673017,
        "bat": 0.04233337566673017,
        "batch": 0.08466675133346034,
        "cmd": 0.04233337566673017,
        "yaml": 0.1270001270001905,
        "yml": 0.08466675133346034,
        "toml": 0.08466675133346034,
        "_role_rules": 0.04233337566673017,
        "tuple": 0.08466675133346034,
        "str": 0.16933350266692068,
        "tests": 0.04233337566673017,
        "test": 0.1270001270001905,
        "docs": 0.1270001270001905,
        "doc": 0.04233337566673017,
        "examples": 0.1270001270001905,
        "example": 0.04233337566673017,
        "infra": 0.08466675133346034,
        "_cache_filename": 0.04233337566673017,
        "manifest_cache": 0.04233337566673017,
        "_cache_version": 0.04233337566673017,
        "1": 0.04233337566673017,
        "class": 0.04233337566673017,
        "ignorerule": 0.04233337566673017,
        "represents": 0.04233337566673017,
        "an": 0.04233337566673017,
        "ignore": 0.04233337566673017,
        "rule": 0.04233337566673017,
        "parsed": 0.04233337566673017,
        "gitignore": 0.04233337566673017,
        "or": 0.04233337566673017,
        "pattern": 0.08466675133346034,
        "directory_only": 0.04233337566673017,
        "bool": 0.254000254000381,
        "anchored": 0.04233337566673017,
        "negate": 0.04233337566673017,
        "has_slash": 0.04233337566673017,
        "def": 0.04233337566673017,
        "matches": 0.04233337566673017,
        "self": 0.08466675133346034,
        "rel_path": 0.04233337566673017,
        "is_dir": 0.04233337566673017,
        "if": 0.04233337566673017,
        "not": 0.04233337566673017,
        "return": 0.04233337566673017,
        "false": 0.04233337566673017,
        "i": 0.04233337566673017
      },
      "text": "\"\"\"Repository scanning and manifest building utilities.\"\"\" from __future__ import annotations import hashlib import json import os from dataclasses import dataclass from fnmatch import fnmatchcase from pathlib import Path from typing import Dict, Iterator, List, Sequence from .config import ConfigError, load_config from .models import FileMeta, RepoManifest _EXCLUDED_DIRS = { \".git\", \".hg\", \".svn\", \".venv\", \"node_modules\", \"__pycache__\", \".pytest_cache\", \".mypy_cache\", \".idea\", \".docgen\", \"sandbox\", } _EXCLUDED_FILES = { \"README.md~\", \".DS_Store\", \"Thumbs.db\", } _LANGUAGE_BY_SUFFIX = { \".py\": \"Python\", \".pyi\": \"Python\", \".js\": \"JavaScript\", \".ts\": \"TypeScript\", \".tsx\": \"TypeScript\", \".jsx\": \"JavaScript\", \".java\": \"Java\", \".kt\": \"Kotlin\", \".kts\": \"Kotlin\", \".go\": \"Go\", \".rs\": \"Rust\", \".rb\": \"Ruby\", \".php\": \"PHP\", \".cs\": \"C#\", \".c\": \"C\", \".h\": \"C\", \".cpp\": \"C++\", \".hpp\": \"C++\", \".cc\": \"C++\", \".hh\": \"C++\", \".swift\": \"Swift\", \".m\": \"Objective-C\", \".mm\": \"Objective-C++\", \".scala\": \"Scala\", \".r\": \"R\", \".jl\": \"Julia\", \".sh\": \"Shell\", \".ps1\": \"PowerShell\", \".bat\": \"Batch\", \".cmd\": \"Batch\", \".yaml\": \"YAML\", \".yml\": \"YAML\", \".json\": \"JSON\", \".toml\": \"TOML\", } _ROLE_RULES: tuple[tuple[str, str], ...] = ( (\"tests\", \"test\"), (\"test\", \"test\"), (\"docs\", \"docs\"), (\"doc\", \"docs\"), (\"examples\", \"examples\"), (\"example\", \"examples\"), (\"config\", \"config\"), (\"infra\", \"infra\"), ) _CACHE_FILENAME = \"manifest_cache.json\" _CACHE_VERSION = 1 @dataclass class IgnoreRule: \"\"\"Represents an ignore rule parsed from .gitignore or .docgen.yml.\"\"\" pattern: str directory_only: bool anchored: bool negate: bool has_slash: bool def matches(self, rel_path: str, is_dir: bool) -> bool: if not self.pattern: return False i",
      "metadata": {
        "path": "docgen/repo_scanner.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "d3b42acab7acfa53312849c080c2858388857ed2ca00b45049527d26e6560a58"
      }
    },
    {
      "id": "docgen/llm/runner.py#0",
      "vector": {
        "adapters": 0.03477340712103605,
        "around": 0.03477340712103605,
        "local": 0.10432022136310813,
        "model": 0.2781872569682884,
        "runtimes": 0.03477340712103605,
        "runner": 0.1390936284841442,
        "ollama": 0.0695468142420721,
        "from": 0.20864044272621626,
        "__future__": 0.03477340712103605,
        "import": 0.34773407121036043,
        "annotations": 0.03477340712103605,
        "ipaddress": 0.03477340712103605,
        "json": 0.03477340712103605,
        "os": 0.03477340712103605,
        "subprocess": 0.03477340712103605,
        "dataclasses": 0.03477340712103605,
        "dataclass": 0.0695468142420721,
        "typing": 0.03477340712103605,
        "callable": 0.0695468142420721,
        "optional": 0.3825074783313965,
        "sequence": 0.03477340712103605,
        "urllib": 0.10432022136310813,
        "error": 0.03477340712103605,
        "httperror": 0.03477340712103605,
        "urlerror": 0.03477340712103605,
        "parse": 0.03477340712103605,
        "urlparse": 0.03477340712103605,
        "request": 0.10432022136310813,
        "urlopen": 0.03477340712103605,
        "_auto_base_url": 0.0695468142420721,
        "object": 0.1390936284841442,
        "_auto_api_key": 0.0695468142420721,
        "class": 0.0695468142420721,
        "llmrequest": 0.0695468142420721,
        "represents": 0.03477340712103605,
        "an": 0.03477340712103605,
        "inference": 0.03477340712103605,
        "for": 0.03477340712103605,
        "the": 0.0695468142420721,
        "prompt": 0.03477340712103605,
        "str": 0.3825074783313965,
        "system": 0.03477340712103605,
        "temperature": 0.1390936284841442,
        "float": 0.1390936284841442,
        "max_tokens": 0.1390936284841442,
        "int": 0.0695468142420721,
        "executable": 0.1390936284841442,
        "base_url": 0.1390936284841442,
        "api_key": 0.0695468142420721,
        "request_timeout": 0.0695468142420721,
        "llmrunner": 0.03477340712103605,
        "executes": 0.03477340712103605,
        "prompts": 0.03477340712103605,
        "against": 0.03477340712103605,
        "configured": 0.03477340712103605,
        "runtime": 0.03477340712103605,
        "default_model": 0.03477340712103605,
        "ai": 0.03477340712103605,
        "smollm2": 0.03477340712103605,
        "360m": 0.03477340712103605,
        "q4_k_m": 0.03477340712103605,
        "default_base_urls": 0.03477340712103605,
        "http": 0.0695468142420721,
        "localhost": 0.03477340712103605,
        "12434": 0.03477340712103605,
        "engines": 0.0695468142420721,
        "v1": 0.0695468142420721,
        "docker": 0.03477340712103605,
        "internal": 0.03477340712103605,
        "env_model_keys": 0.03477340712103605,
        "docgen_llm_model": 0.03477340712103605,
        "model_runner_model": 0.03477340712103605,
        "openai_model": 0.03477340712103605,
        "env_base_url_keys": 0.03477340712103605,
        "docgen_llm_base_url": 0.03477340712103605,
        "model_runner_base_url": 0.03477340712103605,
        "openai_base_url": 0.03477340712103605,
        "env_api_key_keys": 0.03477340712103605,
        "docgen_llm_api_key": 0.03477340712103605,
        "model_runner_api_key": 0.03477340712103605,
        "openai_api_key": 0.03477340712103605,
        "def": 0.03477340712103605,
        "__init__": 0.03477340712103605,
        "self": 0.2781872569682884,
        "none": 0.2781872569682884,
        "0": 0.0695468142420721,
        "2": 0.03477340712103605,
        "60": 0.03477340712103605,
        "_resolve_model": 0.03477340712103605,
        "_resolve_base_url": 0.03477340712103605
      },
      "text": "\"\"\"Adapters around local model runtimes (Model Runner / Ollama).\"\"\" from __future__ import annotations import ipaddress import json import os import subprocess from dataclasses import dataclass from typing import Callable, Optional, Sequence from urllib.error import HTTPError, URLError from urllib.parse import urlparse from urllib.request import Request, urlopen _AUTO_BASE_URL = object() _AUTO_API_KEY = object() @dataclass class LLMRequest: \"\"\"Represents an inference request for the local runner.\"\"\" prompt: str system: Optional[str] model: str temperature: Optional[float] max_tokens: Optional[int] executable: Optional[str] base_url: Optional[str] api_key: Optional[str] request_timeout: Optional[float] class LLMRunner: \"\"\"Executes prompts against the configured local model runtime.\"\"\" DEFAULT_MODEL = \"ai/smollm2:360M-Q4_K_M\" DEFAULT_BASE_URLS = ( \"http://localhost:12434/engines/v1\", \"http://model-runner.docker.internal/engines/v1\", ) ENV_MODEL_KEYS = (\"DOCGEN_LLM_MODEL\", \"MODEL_RUNNER_MODEL\", \"OPENAI_MODEL\") ENV_BASE_URL_KEYS = ( \"DOCGEN_LLM_BASE_URL\", \"MODEL_RUNNER_BASE_URL\", \"OPENAI_BASE_URL\", ) ENV_API_KEY_KEYS = ( \"DOCGEN_LLM_API_KEY\", \"MODEL_RUNNER_API_KEY\", \"OPENAI_API_KEY\", ) def __init__( self, model: str | None = None, *, base_url: str | None | object = _AUTO_BASE_URL, executable: str = \"ollama\", temperature: Optional[float] = 0.2, max_tokens: Optional[int] = None, api_key: str | None | object = _AUTO_API_KEY, request_timeout: Optional[float] = 60.0, runner: Callable[[LLMRequest], str] | None = None, ) -> None: self.model = self._resolve_model(model) self.base_url = self._resolve_base_url(base_url) self.executable = executable self.temperature = temperature self.max_tokens = max_tokens",
      "metadata": {
        "path": "docgen/llm/runner.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "f360c0541dcb4f08dcdc8e8ced7ba58c2bcca31cef9a188bb137020d9686ff04"
      }
    },
    {
      "id": "docgen/analyzers/structure.py#0",
      "vector": {
        "analyzer": 0.10947155477532401,
        "that": 0.03649051825844134,
        "infers": 0.03649051825844134,
        "repository": 0.03649051825844134,
        "architecture": 0.07298103651688267,
        "constructs": 0.03649051825844134,
        "for": 0.07298103651688267,
        "readme": 0.03649051825844134,
        "init": 0.03649051825844134,
        "from": 0.2919241460675307,
        "__future__": 0.03649051825844134,
        "import": 0.2919241460675307,
        "annotations": 0.03649051825844134,
        "re": 0.14596207303376535,
        "collections": 0.03649051825844134,
        "defaultdict": 0.07298103651688267,
        "dataclasses": 0.03649051825844134,
        "dataclass": 0.07298103651688267,
        "pathlib": 0.03649051825844134,
        "path": 0.07298103651688267,
        "typing": 0.03649051825844134,
        "dict": 0.10947155477532401,
        "iterable": 0.07298103651688267,
        "list": 0.10947155477532401,
        "sequence": 0.03649051825844134,
        "base": 0.03649051825844134,
        "models": 0.03649051825844134,
        "repomanifest": 0.14596207303376535,
        "signal": 0.14596207303376535,
        "_fastapi_decorator": 0.03649051825844134,
        "compile": 0.10947155477532401,
        "r": 0.10947155477532401,
        "w": 0.07298103651688267,
        "get": 0.07298103651688267,
        "post": 0.07298103651688267,
        "put": 0.07298103651688267,
        "delete": 0.07298103651688267,
        "patch": 0.07298103651688267,
        "3": 0.07298103651688267,
        "_express_route": 0.03649051825844134,
        "app": 0.03649051825844134,
        "router": 0.03649051825844134,
        "_py_model_class": 0.03649051825844134,
        "class": 0.10947155477532401,
        "s": 0.07298103651688267,
        "_filesummary": 0.10947155477532401,
        "count": 0.03649051825844134,
        "int": 0.03649051825844134,
        "0": 0.03649051825844134,
        "roles": 0.10947155477532401,
        "set": 0.14596207303376535,
        "str": 0.14596207303376535,
        "none": 0.1824525912922067,
        "type": 0.07298103651688267,
        "ignore": 0.07298103651688267,
        "assignment": 0.07298103651688267,
        "languages": 0.10947155477532401,
        "def": 0.14596207303376535,
        "__post_init__": 0.03649051825844134,
        "self": 0.4013957008428547,
        "if": 0.10947155477532401,
        "is": 0.07298103651688267,
        "structureanalyzer": 0.03649051825844134,
        "derives": 0.03649051825844134,
        "architectural": 0.03649051825844134,
        "signals": 0.21894310955064802,
        "source": 0.07298103651688267,
        "files": 0.10947155477532401,
        "and": 0.03649051825844134,
        "layout": 0.03649051825844134,
        "supports": 0.03649051825844134,
        "manifest": 0.2919241460675307,
        "bool": 0.07298103651688267,
        "return": 0.07298103651688267,
        "analyze": 0.03649051825844134,
        "modules": 0.21894310955064802,
        "_summarise_modules": 0.07298103651688267,
        "append": 0.03649051825844134,
        "name": 0.03649051825844134,
        "value": 0.03649051825844134,
        "structure": 0.03649051825844134,
        "metadata": 0.03649051825844134,
        "api_signals": 0.07298103651688267,
        "_detect_api_endpoints": 0.03649051825844134,
        "extend": 0.07298103651688267,
        "entity_signals": 0.07298103651688267,
        "_detect_entities": 0.03649051825844134,
        "object": 0.03649051825844134,
        "summaries": 0.03649051825844134,
        "meta": 0.07298103651688267,
        "in": 0.03649051825844134,
        "parts": 0.03649051825844134
      },
      "text": "\"\"\"Analyzer that infers repository architecture constructs for README init.\"\"\" from __future__ import annotations import re from collections import defaultdict from dataclasses import dataclass from pathlib import Path from typing import Dict, Iterable, List, Sequence from .base import Analyzer from ..models import RepoManifest, Signal _FASTAPI_DECORATOR = re.compile(r\"@(\\w+)\\.(get|post|put|delete|patch)\\((['\\\"])([^'\\\"]+)\\3\") _EXPRESS_ROUTE = re.compile(r\"(app|router)\\.(get|post|put|delete|patch)\\((['\\\"])([^'\\\"]+)\\3\") _PY_MODEL_CLASS = re.compile(r\"class\\s+(\\w+)\\(([^)]*)\\):\") @dataclass class _FileSummary: count: int = 0 roles: set[str] = None # type: ignore[assignment] languages: set[str] = None # type: ignore[assignment] def __post_init__(self) -> None: if self.roles is None: self.roles = set() if self.languages is None: self.languages = set() class StructureAnalyzer(Analyzer): \"\"\"Derives architectural signals from source files and layout.\"\"\" def supports(self, manifest: RepoManifest) -> bool: return bool(manifest.files) def analyze(self, manifest: RepoManifest) -> Iterable[Signal]: signals: List[Signal] = [] modules = self._summarise_modules(manifest) if modules: signals.append( Signal( name=\"architecture.modules\", value=\"modules\", source=\"structure\", metadata={\"modules\": modules}, ) ) api_signals = self._detect_api_endpoints(manifest) signals.extend(api_signals) entity_signals = self._detect_entities(manifest) signals.extend(entity_signals) return signals def _summarise_modules(self, manifest: RepoManifest) -> List[Dict[str, object]]: summaries: Dict[str, _FileSummary] = defaultdict(_FileSummary) for meta in manifest.files: parts = meta.path.s",
      "metadata": {
        "path": "docgen/analyzers/structure.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "7e426b802538dab6d253810a2d7d01914ac47fd2054061b7c6b373d6b4b62c8e"
      }
    },
    {
      "id": "docgen/git/diff.py#0",
      "vector": {
        "diff": 0.04867923835112355,
        "inspection": 0.04867923835112355,
        "utilities": 0.04867923835112355,
        "from": 0.24339619175561772,
        "__future__": 0.04867923835112355,
        "import": 0.24339619175561772,
        "annotations": 0.04867923835112355,
        "dataclasses": 0.04867923835112355,
        "dataclass": 0.14603771505337063,
        "fnmatch": 0.0973584767022471,
        "pathlib": 0.04867923835112355,
        "path": 0.14603771505337063,
        "typing": 0.04867923835112355,
        "callable": 0.04867923835112355,
        "iterable": 0.04867923835112355,
        "list": 0.04867923835112355,
        "sequence": 0.24339619175561772,
        "set": 0.04867923835112355,
        "frozen": 0.0973584767022471,
        "true": 0.14603771505337063,
        "class": 0.14603771505337063,
        "diffresult": 0.04867923835112355,
        "summary": 0.04867923835112355,
        "of": 0.04867923835112355,
        "repository": 0.0973584767022471,
        "changes": 0.0973584767022471,
        "and": 0.04867923835112355,
        "impacted": 0.04867923835112355,
        "readme": 0.24339619175561772,
        "sections": 0.1947169534044942,
        "base": 0.04867923835112355,
        "str": 0.29207543010674125,
        "changed_files": 0.04867923835112355,
        "sectionrule": 0.24339619175561772,
        "associates": 0.04867923835112355,
        "file": 0.04867923835112355,
        "change": 0.04867923835112355,
        "patterns": 0.24339619175561772,
        "with": 0.04867923835112355,
        "section": 0.14603771505337063,
        "def": 0.04867923835112355,
        "matches": 0.04867923835112355,
        "self": 0.0973584767022471,
        "bool": 0.04867923835112355,
        "for": 0.04867923835112355,
        "pattern": 0.0973584767022471,
        "in": 0.04867923835112355,
        "if": 0.04867923835112355,
        "_pattern_matches": 0.04867923835112355,
        "return": 0.0973584767022471,
        "false": 0.04867923835112355,
        "diffanalyzer": 0.04867923835112355,
        "maps": 0.04867923835112355,
        "to": 0.04867923835112355,
        "affected": 0.04867923835112355,
        "_ignored_paths": 0.04867923835112355,
        "md": 0.04867923835112355,
        "_section_rules": 0.04867923835112355,
        "build_and_test": 0.04867923835112355,
        "requirements": 0.0973584767022471,
        "txt": 0.14603771505337063,
        "pyproject": 0.0973584767022471,
        "toml": 0.0973584767022471,
        "poetry": 0.04867923835112355,
        "lock": 0.1947169534044942,
        "pipfile": 0.0973584767022471,
        "package": 0.14603771505337063,
        "json": 0.14603771505337063,
        "pnpm": 0.04867923835112355,
        "yaml": 0.0973584767022471,
        "yarn": 0.04867923835112355,
        "pom": 0.04867923835112355,
        "xml": 0.04867923835112355,
        "build": 0.0973584767022471,
        "gradle": 0.14603771505337063,
        "kts": 0.04867923835112355,
        "makefile": 0.0973584767022471,
        "cmakelists": 0.04867923835112355,
        "setup": 0.0973584767022471,
        "cfg": 0.04867923835112355,
        "py": 0.04867923835112355,
        "tox": 0.04867923835112355,
        "ini": 0.04867923835112355,
        "tests": 0.04867923835112355,
        "quickstart": 0.04867923835112355,
        "dockerfile": 0.04867923835112355,
        "docker": 0.0973584767022471,
        "compose": 0.0973584767022471,
        "yml": 0.04867923835112355,
        "scripts": 0.04867923835112355
      },
      "text": "\"\"\"Diff inspection utilities.\"\"\" from __future__ import annotations from dataclasses import dataclass from fnmatch import fnmatch from pathlib import Path from typing import Callable, Iterable, List, Sequence, Set @dataclass(frozen=True) class DiffResult: \"\"\"Summary of repository changes and impacted README sections.\"\"\" base: str changed_files: Sequence[str] sections: Sequence[str] @dataclass(frozen=True) class SectionRule: \"\"\"Associates file change patterns with README sections.\"\"\" section: str patterns: Sequence[str] def matches(self, path: str) -> bool: for pattern in self.patterns: if _pattern_matches(path, pattern): return True return False class DiffAnalyzer: \"\"\"Maps repository changes to affected README sections.\"\"\" _IGNORED_PATHS = {\"README.md\", \"README\"} _SECTION_RULES: Sequence[SectionRule] = ( SectionRule( section=\"build_and_test\", patterns=( \"requirements.txt\", \"pyproject.toml\", \"poetry.lock\", \"Pipfile\", \"package.json\", \"package-lock.json\", \"pnpm-lock.yaml\", \"yarn.lock\", \"pom.xml\", \"build.gradle\", \"build.gradle.kts\", \"gradle/\", \"Makefile\", \"CMakeLists.txt\", \"setup.cfg\", \"setup.py\", \"tox.ini\", \"tests/\", ), ), SectionRule( section=\"quickstart\", patterns=( \"requirements.txt\", \"pyproject.toml\", \"Pipfile\", \"package.json\", \"Dockerfile\", \"docker-compose.yml\", \"docker-compose.yaml\", \"Makefile\", \"scripts/\", ), ), SectionRule(",
      "metadata": {
        "path": "docgen/git/diff.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "805617fee00b02704767ca3f528aaddcf5310733c2087a424bc7900f8d236063"
      }
    },
    {
      "id": "docgen/analyzers/entrypoints.py#0",
      "vector": {
        "analyzer": 0.1138784427001685,
        "to": 0.037959480900056165,
        "detect": 0.07591896180011233,
        "executable": 0.07591896180011233,
        "entrypoints": 0.3795948090005617,
        "across": 0.037959480900056165,
        "supported": 0.037959480900056165,
        "languages": 0.037959480900056165,
        "from": 0.2657163663003932,
        "__future__": 0.037959480900056165,
        "import": 0.3036758472004493,
        "annotations": 0.037959480900056165,
        "re": 0.037959480900056165,
        "dataclasses": 0.037959480900056165,
        "dataclass": 0.07591896180011233,
        "pathlib": 0.037959480900056165,
        "path": 0.1138784427001685,
        "typing": 0.037959480900056165,
        "iterable": 0.07591896180011233,
        "list": 0.1138784427001685,
        "optional": 0.07591896180011233,
        "base": 0.037959480900056165,
        "utils": 0.037959480900056165,
        "build_node_script_command": 0.037959480900056165,
        "detect_node_package_manager": 0.037959480900056165,
        "load_node_dependencies": 0.037959480900056165,
        "load_package_json": 0.037959480900056165,
        "models": 0.037959480900056165,
        "repomanifest": 0.1138784427001685,
        "signal": 0.18979740450028085,
        "class": 0.07591896180011233,
        "entrypoint": 0.15183792360022466,
        "represents": 0.037959480900056165,
        "a": 0.037959480900056165,
        "detected": 0.037959480900056165,
        "with": 0.037959480900056165,
        "an": 0.037959480900056165,
        "associated": 0.037959480900056165,
        "command": 0.18979740450028085,
        "name": 0.1138784427001685,
        "str": 0.15183792360022466,
        "label": 0.1138784427001685,
        "priority": 0.18979740450028085,
        "int": 0.037959480900056165,
        "50": 0.037959480900056165,
        "framework": 0.15183792360022466,
        "none": 0.037959480900056165,
        "entrypointanalyzer": 0.037959480900056165,
        "for": 0.1138784427001685,
        "quick": 0.037959480900056165,
        "start": 0.037959480900056165,
        "guidance": 0.037959480900056165,
        "def": 0.07591896180011233,
        "supports": 0.037959480900056165,
        "self": 0.18979740450028085,
        "manifest": 0.2657163663003932,
        "bool": 0.07591896180011233,
        "return": 0.037959480900056165,
        "files": 0.07591896180011233,
        "analyze": 0.037959480900056165,
        "manifest_paths": 0.07591896180011233,
        "file": 0.07591896180011233,
        "in": 0.07591896180011233,
        "extend": 0.1138784427001685,
        "_python_entrypoints": 0.037959480900056165,
        "_node_entrypoints": 0.037959480900056165,
        "root": 0.037959480900056165,
        "_java_entrypoints": 0.037959480900056165,
        "signals": 0.1138784427001685,
        "entry": 0.3036758472004493,
        "sorted": 0.037959480900056165,
        "key": 0.07591896180011233,
        "lambda": 0.07591896180011233,
        "ep": 0.15183792360022466,
        "metadata": 0.15183792360022466,
        "if": 0.07591896180011233,
        "append": 0.07591896180011233,
        "f": 0.037959480900056165,
        "value": 0.037959480900056165,
        "source": 0.037959480900056165,
        "primary": 0.037959480900056165,
        "min": 0.037959480900056165
      },
      "text": "\"\"\"Analyzer to detect executable entrypoints across supported languages.\"\"\" from __future__ import annotations import re from dataclasses import dataclass from pathlib import Path from typing import Iterable, List, Optional from .base import Analyzer from .utils import ( build_node_script_command, detect_node_package_manager, load_node_dependencies, load_package_json, ) from ..models import RepoManifest, Signal @dataclass class EntryPoint: \"\"\"Represents a detected entrypoint with an associated command.\"\"\" name: str command: str label: str priority: int = 50 framework: Optional[str] = None class EntryPointAnalyzer(Analyzer): \"\"\"Detect executable entrypoints for quick-start guidance.\"\"\" def supports(self, manifest: RepoManifest) -> bool: return bool(manifest.files) def analyze(self, manifest: RepoManifest) -> Iterable[Signal]: entrypoints: List[EntryPoint] = [] manifest_paths = {file.path for file in manifest.files} entrypoints.extend(self._python_entrypoints(manifest)) entrypoints.extend(self._node_entrypoints(Path(manifest.root), manifest_paths)) entrypoints.extend(self._java_entrypoints(manifest)) signals: List[Signal] = [] for entry in sorted(entrypoints, key=lambda ep: ep.priority): metadata = { \"command\": entry.command, \"label\": entry.label, \"priority\": entry.priority, } if entry.framework: metadata[\"framework\"] = entry.framework signals.append( Signal( name=f\"entrypoint.{entry.name}\", value=entry.command, source=\"entrypoints\", metadata=metadata, ) ) if entrypoints: primary = min(entrypoints, key=lambda ep: ep.priority) signals.append( Signal(",
      "metadata": {
        "path": "docgen/analyzers/entrypoints.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "ac6fde3c11c9307a9404023a5c751a29b1b853fd3bce32a53799a0a80495371a"
      }
    },
    {
      "id": "docgen/analyzers/utils.py#0",
      "vector": {
        "shared": 0.03300491809922248,
        "helper": 0.03300491809922248,
        "utilities": 0.03300491809922248,
        "for": 0.13201967239688991,
        "analyzer": 0.03300491809922248,
        "implementations": 0.03300491809922248,
        "from": 0.13201967239688991,
        "__future__": 0.03300491809922248,
        "import": 0.23103442669455734,
        "annotations": 0.03300491809922248,
        "json": 0.03300491809922248,
        "re": 0.09901475429766744,
        "tomllib": 0.06600983619844496,
        "xml": 0.03300491809922248,
        "etree": 0.03300491809922248,
        "elementtree": 0.03300491809922248,
        "as": 0.03300491809922248,
        "et": 0.03300491809922248,
        "pathlib": 0.03300491809922248,
        "path": 0.26403934479377983,
        "typing": 0.03300491809922248,
        "dict": 0.13201967239688991,
        "iterable": 0.03300491809922248,
        "list": 0.1650245904961124,
        "optional": 0.13201967239688991,
        "set": 0.1650245904961124,
        "python": 0.06600983619844496,
        "dependency": 0.03300491809922248,
        "helpers": 0.03300491809922248,
        "def": 0.09901475429766744,
        "load_python_dependencies": 0.03300491809922248,
        "root": 0.09901475429766744,
        "str": 0.23103442669455734,
        "collect": 0.03300491809922248,
        "dependencies": 0.2970442628930023,
        "requirements": 0.1650245904961124,
        "txt": 0.06600983619844496,
        "and": 0.06600983619844496,
        "pyproject": 0.1650245904961124,
        "toml": 0.06600983619844496,
        "deps": 0.13201967239688991,
        "if": 0.2970442628930023,
        "exists": 0.06600983619844496,
        "update": 0.06600983619844496,
        "_parse_requirements": 0.06600983619844496,
        "_parse_pyproject": 0.06600983619844496,
        "return": 0.09901475429766744,
        "sorted": 0.03300491809922248,
        "packages": 0.13201967239688991,
        "line": 0.06600983619844496,
        "in": 0.09901475429766744,
        "read_text": 0.06600983619844496,
        "encoding": 0.06600983619844496,
        "utf": 0.06600983619844496,
        "8": 0.06600983619844496,
        "splitlines": 0.03300491809922248,
        "stripped": 0.13201967239688991,
        "strip": 0.09901475429766744,
        "not": 0.03300491809922248,
        "or": 0.1650245904961124,
        "startswith": 0.03300491809922248,
        "r": 0.09901475429766744,
        "continue": 0.03300491809922248,
        "name": 0.19802950859533489,
        "split": 0.06600983619844496,
        "1": 0.06600983619844496,
        "0": 0.06600983619844496,
        "append": 0.03300491809922248,
        "try": 0.03300491809922248,
        "data": 0.13201967239688991,
        "loads": 0.03300491809922248,
        "except": 0.03300491809922248,
        "exception": 0.03300491809922248,
        "project": 0.1650245904961124,
        "get": 0.23103442669455734,
        "isinstance": 0.13201967239688991,
        "extend": 0.09901475429766744,
        "values": 0.09901475429766744,
        "poetry": 0.13201967239688991,
        "tool": 0.06600983619844496,
        "else": 0.03300491809922248,
        "poetry_deps": 0.06600983619844496,
        "keys": 0.03300491809922248,
        "dep": 0.09901475429766744,
        "lo": 0.03300491809922248
      },
      "text": "\ufeff\"\"\"Shared helper utilities for analyzer implementations.\"\"\" from __future__ import annotations import json import re import tomllib import xml.etree.ElementTree as ET from pathlib import Path from typing import Dict, Iterable, List, Optional, Set # Python dependency helpers def load_python_dependencies(root: Path) -> List[str]: \"\"\"Collect Python dependencies from requirements.txt and pyproject.toml.\"\"\" deps: Set[str] = set() requirements = root / \"requirements.txt\" if requirements.exists(): deps.update(_parse_requirements(requirements)) pyproject = root / \"pyproject.toml\" if pyproject.exists(): deps.update(_parse_pyproject(pyproject)) return sorted(deps) def _parse_requirements(path: Path) -> List[str]: packages: List[str] = [] for line in path.read_text(encoding=\"utf-8\").splitlines(): stripped = line.strip() if not stripped or stripped.startswith((\"#\", \"-r\")): continue name = re.split(r\"[<>=!~]\", stripped, 1)[0].strip() if name: packages.append(name) return packages def _parse_pyproject(path: Path) -> List[str]: packages: Set[str] = set() try: data = tomllib.loads(path.read_text(encoding=\"utf-8\")) except Exception: return [] dependencies = [] project = data.get(\"project\") if isinstance(project, dict): dependencies.extend(project.get(\"dependencies\", []) or []) optional = project.get(\"optional-dependencies\", {}) or {} for values in optional.values(): dependencies.extend(values or []) poetry = data.get(\"tool\", {}).get(\"poetry\", {}) if isinstance(data.get(\"tool\"), dict) else {} if isinstance(poetry, dict): poetry_deps = poetry.get(\"dependencies\", {}) or {} dependencies.extend(poetry_deps.keys()) for dep in dependencies: if isinstance(dep, str): name = re.split(r\"[<>=!~]\", dep, 1)[0].strip() if name and name.lo",
      "metadata": {
        "path": "docgen/analyzers/utils.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "448e495f2d57a7a04fda31cb2aa2d728a77cee06dcefd4c14510e77183d77eb8"
      }
    },
    {
      "id": "docgen/rag/indexer.py#0",
      "vector": {
        "index": 0.09869275424396534,
        "builder": 0.03289758474798845,
        "for": 0.296078262731896,
        "minimal": 0.03289758474798845,
        "retrieval": 0.03289758474798845,
        "augmented": 0.03289758474798845,
        "generation": 0.0657951694959769,
        "from": 0.296078262731896,
        "__future__": 0.03289758474798845,
        "import": 0.3289758474798845,
        "annotations": 0.03289758474798845,
        "dataclasses": 0.03289758474798845,
        "dataclass": 0.0657951694959769,
        "pathlib": 0.03289758474798845,
        "path": 0.1315903389919538,
        "typing": 0.03289758474798845,
        "dict": 0.09869275424396534,
        "iterable": 0.03289758474798845,
        "list": 0.19738550848793068,
        "sequence": 0.0657951694959769,
        "set": 0.09869275424396534,
        "hashlib": 0.03289758474798845,
        "models": 0.03289758474798845,
        "repomanifest": 0.0657951694959769,
        "repo_scanner": 0.03289758474798845,
        "filemeta": 0.03289758474798845,
        "constants": 0.03289758474798845,
        "section_tags": 0.0657951694959769,
        "tag_sections": 0.03289758474798845,
        "embedder": 0.1315903389919538,
        "localembedder": 0.09869275424396534,
        "store": 0.296078262731896,
        "embeddingstore": 0.0657951694959769,
        "class": 0.0657951694959769,
        "ragindex": 0.0657951694959769,
        "holds": 0.03289758474798845,
        "contexts": 0.1315903389919538,
        "readme": 0.0657951694959769,
        "sections": 0.1315903389919538,
        "and": 0.03289758474798845,
        "metadata": 0.03289758474798845,
        "str": 0.19738550848793068,
        "store_path": 0.09869275424396534,
        "ragindexer": 0.03289758474798845,
        "builds": 0.03289758474798845,
        "a": 0.03289758474798845,
        "lightweight": 0.03289758474798845,
        "embedding": 0.03289758474798845,
        "def": 0.0657951694959769,
        "__init__": 0.03289758474798845,
        "self": 0.23028309323591914,
        "none": 0.16448792373994225,
        "top_source_files": 0.09869275424396534,
        "int": 0.03289758474798845,
        "20": 0.03289758474798845,
        "or": 0.03289758474798845,
        "build": 0.03289758474798845,
        "manifest": 0.16448792373994225,
        "target_sections": 0.09869275424396534,
        "if": 0.09869275424396534,
        "else": 0.03289758474798845,
        "keys": 0.03289758474798845,
        "root": 0.19738550848793068,
        "docgen": 0.03289758474798845,
        "embeddings": 0.03289758474798845,
        "json": 0.03289758474798845,
        "load_existing": 0.03289758474798845,
        "true": 0.03289758474798845,
        "section": 0.16448792373994225,
        "in": 0.23028309323591914,
        "meta_lookup": 0.0657951694959769,
        "file": 0.09869275424396534,
        "files": 0.09869275424396534,
        "visited_paths": 0.16448792373994225,
        "_index_readme": 0.03289758474798845,
        "_index_docs": 0.03289758474798845,
        "_index_source_files": 0.03289758474798845,
        "existing": 0.09869275424396534,
        "paths": 0.03289758474798845,
        "not": 0.03289758474798845,
        "remove_path": 0.03289758474798845,
        "persist": 0.03289758474798845,
        "snippets": 0.0657951694959769,
        "entry": 0.0657951694959769,
        "text": 0.03289758474798845,
        "query": 0.03289758474798845,
        "top_k": 0.03289758474798845,
        "3": 0.03289758474798845,
        "snippet": 0.09869275424396534,
        "strip": 0.0657951694959769
      },
      "text": "\"\"\"Index builder for minimal retrieval augmented generation.\"\"\" from __future__ import annotations from dataclasses import dataclass from pathlib import Path from typing import Dict, Iterable, List, Sequence, Set import hashlib from ..models import RepoManifest from ..repo_scanner import FileMeta from .constants import SECTION_TAGS, TAG_SECTIONS from .embedder import LocalEmbedder from .store import EmbeddingStore @dataclass class RAGIndex: \"\"\"Holds contexts for README sections and index metadata.\"\"\" contexts: Dict[str, List[str]] store_path: Path class RAGIndexer: \"\"\"Builds a lightweight embedding index for README generation.\"\"\" def __init__(self, *, embedder: LocalEmbedder | None = None, top_source_files: int = 20) -> None: self.embedder = embedder or LocalEmbedder() self.top_source_files = top_source_files def build(self, manifest: RepoManifest, *, sections: Sequence[str] | None = None) -> RAGIndex: target_sections = list(sections) if sections else list(SECTION_TAGS.keys()) root = Path(manifest.root) store_path = root / \".docgen\" / \"embeddings.json\" store = EmbeddingStore(store_path, load_existing=True) contexts: Dict[str, List[str]] = {section: [] for section in target_sections} meta_lookup = {file.path: file for file in manifest.files} visited_paths: Set[str] = set() self._index_readme(root, store, meta_lookup, visited_paths) self._index_docs(manifest.files, root, store, visited_paths) self._index_source_files(manifest.files, root, store, visited_paths) for existing in list(store.paths()): if existing not in visited_paths: store.remove_path(existing) store.persist() for section in target_sections: snippets = [entry[\"text\"] for entry in store.query(section, top_k=3)] contexts[section] = [snippet.strip() for snippet in snippets if snippet.strip()]",
      "metadata": {
        "path": "docgen/rag/indexer.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "b00985d9079cbacb889d84ee411faacd34c92475c5e849861eac317a9d3a77af"
      }
    },
    {
      "id": "docgen/git/publisher.py#0",
      "vector": {
        "git": 0.23596995186213474,
        "publishing": 0.033709993123162106,
        "utilities": 0.033709993123162106,
        "from": 0.10112997936948631,
        "__future__": 0.033709993123162106,
        "import": 0.1685499656158105,
        "annotations": 0.033709993123162106,
        "os": 0.06741998624632421,
        "subprocess": 0.033709993123162106,
        "pathlib": 0.033709993123162106,
        "path": 0.20225995873897262,
        "typing": 0.033709993123162106,
        "callable": 0.06741998624632421,
        "iterable": 0.033709993123162106,
        "sequence": 0.13483997249264842,
        "class": 0.033709993123162106,
        "publisher": 0.033709993123162106,
        "handles": 0.033709993123162106,
        "branch": 0.06741998624632421,
        "management": 0.033709993123162106,
        "and": 0.10112997936948631,
        "pr": 0.06741998624632421,
        "creation": 0.033709993123162106,
        "for": 0.10112997936948631,
        "readme": 0.06741998624632421,
        "updates": 0.033709993123162106,
        "def": 0.10112997936948631,
        "__init__": 0.033709993123162106,
        "self": 0.30338993810845893,
        "runner": 0.06741998624632421,
        "str": 0.37080992435478316,
        "none": 0.23596995186213474,
        "_runner": 0.033709993123162106,
        "or": 0.033709993123162106,
        "_default_runner": 0.033709993123162106,
        "commit": 0.13483997249264842,
        "repo_path": 0.13483997249264842,
        "files": 0.1685499656158105,
        "message": 0.06741998624632421,
        "docs": 0.033709993123162106,
        "bootstrap": 0.033709993123162106,
        "via": 0.06741998624632421,
        "docgen": 0.10112997936948631,
        "init": 0.033709993123162106,
        "bool": 0.13483997249264842,
        "stage": 0.033709993123162106,
        "the": 0.10112997936948631,
        "provided": 0.033709993123162106,
        "create": 0.06741998624632421,
        "a": 0.10112997936948631,
        "if": 0.13483997249264842,
        "changes": 0.033709993123162106,
        "exist": 0.033709993123162106,
        "repo": 0.26967994498529685,
        "not": 0.10112997936948631,
        "exists": 0.06741998624632421,
        "return": 0.13483997249264842,
        "false": 0.13483997249264842,
        "relative_files": 0.06741998624632421,
        "_to_relative": 0.033709993123162106,
        "file": 0.06741998624632421,
        "in": 0.06741998624632421,
        "rel": 0.06741998624632421,
        "_run": 0.10112997936948631,
        "add": 0.033709993123162106,
        "cwd": 0.10112997936948631,
        "status": 0.10112997936948631,
        "porcelain": 0.033709993123162106,
        "capture_output": 0.033709993123162106,
        "true": 0.10112997936948631,
        "strip": 0.033709993123162106,
        "env": 0.30338993810845893,
        "environ": 0.033709993123162106,
        "copy": 0.033709993123162106,
        "setdefault": 0.13483997249264842,
        "git_author_name": 0.06741998624632421,
        "git_author_email": 0.06741998624632421,
        "example": 0.033709993123162106,
        "com": 0.033709993123162106,
        "git_committer_name": 0.033709993123162106,
        "git_committer_email": 0.033709993123162106,
        "m": 0.033709993123162106,
        "publish_pr": 0.033709993123162106,
        "branch_name": 0.033709993123162106,
        "base_branch": 0.033709993123162106,
        "title": 0.033709993123162106,
        "body": 0.033709993123162106,
        "push": 0.033709993123162106,
        "labels": 0.033709993123162106,
        "update_existing": 0.033709993123162106,
        "open": 0.033709993123162106,
        "github": 0.033709993123162106,
        "cli": 0.033709993123162106,
        "checkout_cmd": 0.033709993123162106
      },
      "text": "\ufeff\"\"\"Git publishing utilities.\"\"\" from __future__ import annotations import os import subprocess from pathlib import Path from typing import Callable, Iterable, Sequence class Publisher: \"\"\"Handles branch management and PR creation for README updates.\"\"\" def __init__(self, runner: Callable[..., str] | None = None) -> None: self._runner = runner or self._default_runner def commit( self, repo_path: str, files: Sequence[Path | str], *, message: str = \"docs: bootstrap README via docgen init\", ) -> bool: \"\"\"Stage the provided files and create a commit if changes exist.\"\"\" repo = Path(repo_path) if not (repo / \".git\").exists(): return False relative_files = [self._to_relative(repo, Path(file)) for file in files] for rel in relative_files: self._run([\"git\", \"add\", rel], cwd=repo) status = self._run([\"git\", \"status\", \"--porcelain\"], cwd=repo, capture_output=True) if not status.strip(): return False env = os.environ.copy() env.setdefault(\"GIT_AUTHOR_NAME\", \"docgen\") env.setdefault(\"GIT_AUTHOR_EMAIL\", \"docgen@example.com\") env.setdefault(\"GIT_COMMITTER_NAME\", env[\"GIT_AUTHOR_NAME\"]) env.setdefault(\"GIT_COMMITTER_EMAIL\", env[\"GIT_AUTHOR_EMAIL\"]) self._run([\"git\", \"commit\", \"-m\", message], cwd=repo, env=env) return True def publish_pr( self, repo_path: str, files: Sequence[Path | str], *, branch_name: str, base_branch: str | None = None, title: str, body: str, push: bool = True, labels: Sequence[str] | None = None, update_existing: bool = False, ) -> bool: \"\"\"Create a branch, commit the files, and open a PR via the GitHub CLI.\"\"\" repo = Path(repo_path) if not (repo / \".git\").exists(): return False checkout_cmd = [\"git\", \"",
      "metadata": {
        "path": "docgen/git/publisher.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "e61cb8d9fdbb15ea210e641165049e271c7e75f7c21436933d3f5db0b3e04e28"
      }
    },
    {
      "id": "docgen/analyzers/patterns.py#0",
      "vector": {
        "analyzer": 0.13168538439184413,
        "for": 0.13168538439184413,
        "repository": 0.04389512813061471,
        "infrastructure": 0.08779025626122942,
        "and": 0.08779025626122942,
        "layout": 0.08779025626122942,
        "patterns": 0.17558051252245885,
        "from": 0.21947564065307354,
        "__future__": 0.04389512813061471,
        "import": 0.21947564065307354,
        "annotations": 0.04389512813061471,
        "pathlib": 0.04389512813061471,
        "path": 0.13168538439184413,
        "typing": 0.04389512813061471,
        "iterable": 0.08779025626122942,
        "list": 0.13168538439184413,
        "sequence": 0.04389512813061471,
        "base": 0.04389512813061471,
        "models": 0.04389512813061471,
        "repomanifest": 0.13168538439184413,
        "signal": 0.21947564065307354,
        "class": 0.04389512813061471,
        "patternanalyzer": 0.04389512813061471,
        "finds": 0.04389512813061471,
        "within": 0.04389512813061471,
        "the": 0.04389512813061471,
        "repo": 0.04389512813061471,
        "def": 0.08779025626122942,
        "supports": 0.04389512813061471,
        "self": 0.08779025626122942,
        "manifest": 0.21947564065307354,
        "bool": 0.08779025626122942,
        "return": 0.04389512813061471,
        "files": 0.13168538439184413,
        "analyze": 0.04389512813061471,
        "root": 0.08779025626122942,
        "paths": 0.17558051252245885,
        "file": 0.08779025626122942,
        "in": 0.17558051252245885,
        "signals": 0.13168538439184413,
        "docker_files": 0.21947564065307354,
        "_collect": 0.08779025626122942,
        "dockerfile": 0.08779025626122942,
        "docker": 0.3511610250449177,
        "compose": 0.21947564065307354,
        "yml": 0.08779025626122942,
        "yaml": 0.08779025626122942,
        "if": 0.17558051252245885,
        "quickstart": 0.21947564065307354,
        "str": 0.04389512813061471,
        "append": 0.17558051252245885,
        "build": 0.04389512813061471,
        "t": 0.04389512813061471,
        "image": 0.04389512813061471,
        "any": 0.04389512813061471,
        "name": 0.17558051252245885,
        "up": 0.04389512813061471,
        "pattern": 0.08779025626122942,
        "containerization": 0.04389512813061471,
        "value": 0.08779025626122942,
        "source": 0.08779025626122942,
        "metadata": 0.08779025626122942,
        "sorted": 0.04389512813061471,
        "summary": 0.08779025626122942,
        "artifacts": 0.04389512813061471,
        "detected": 0.08779025626122942,
        "_has_prefix": 0.04389512813061471,
        "k8s": 0.04389512813061471,
        "helm": 0.04389512813061471,
        "charts": 0.04389512813061471,
        "kubernetes": 0.13168538439184413,
        "manifests": 0.04389512813061471,
        "under": 0.04389512813061471,
        "deployment": 0.04389512813061471,
        "directories": 0.04389512813061471,
        "ci_files": 0.04389512813061471,
        "g": 0.04389512813061471
      },
      "text": "\"\"\"Analyzer for repository infrastructure and layout patterns.\"\"\" from __future__ import annotations from pathlib import Path from typing import Iterable, List, Sequence from .base import Analyzer from ..models import RepoManifest, Signal class PatternAnalyzer(Analyzer): \"\"\"Finds infrastructure and layout patterns within the repo.\"\"\" def supports(self, manifest: RepoManifest) -> bool: return bool(manifest.files) def analyze(self, manifest: RepoManifest) -> Iterable[Signal]: root = Path(manifest.root) paths = [file.path for file in manifest.files] signals: List[Signal] = [] docker_files = _collect(paths, {\"Dockerfile\", \"docker-compose.yml\", \"docker-compose.yaml\"}) if docker_files: quickstart: List[str] = [] if \"Dockerfile\" in docker_files: quickstart.append(\"docker build -t <image> .\") if any(name in docker_files for name in {\"docker-compose.yml\", \"docker-compose.yaml\"}): quickstart.append(\"docker compose up\") signals.append( Signal( name=\"pattern.containerization\", value=\"docker\", source=\"patterns\", metadata={ \"files\": sorted(docker_files), \"summary\": \"Docker artifacts detected\", \"quickstart\": quickstart, }, ) ) if _has_prefix(paths, (\"k8s/\", \"helm/\", \"charts/\")): signals.append( Signal( name=\"pattern.kubernetes\", value=\"kubernetes\", source=\"patterns\", metadata={ \"summary\": \"Kubernetes manifests detected under deployment directories\", }, ) ) ci_files = _collect( paths, { \".g",
      "metadata": {
        "path": "docgen/analyzers/patterns.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "7d8bdcdcef1e04812e2b30211dbf1d14551c2b08b8c339c29e5f3fc2701bd840"
      }
    },
    {
      "id": "docgen/cli.py#0",
      "vector": {
        "cli": 0.04311306135592269,
        "entrypoints": 0.04311306135592269,
        "for": 0.12933918406776806,
        "docgen": 0.08622612271184538,
        "commands": 0.04311306135592269,
        "from": 0.17245224542369075,
        "__future__": 0.04311306135592269,
        "import": 0.25867836813553613,
        "annotations": 0.04311306135592269,
        "argparse": 0.21556530677961344,
        "sys": 0.04311306135592269,
        "pathlib": 0.04311306135592269,
        "path": 0.21556530677961344,
        "orchestrator": 0.08622612271184538,
        "logging": 0.04311306135592269,
        "configure_logging": 0.04311306135592269,
        "def": 0.08622612271184538,
        "_add_verbose_option": 0.17245224542369075,
        "parser": 0.21556530677961344,
        "argumentparser": 0.12933918406776806,
        "suppress_default": 0.17245224542369075,
        "bool": 0.04311306135592269,
        "false": 0.08622612271184538,
        "none": 0.04311306135592269,
        "kwargs": 0.17245224542369075,
        "dict": 0.04311306135592269,
        "str": 0.04311306135592269,
        "object": 0.04311306135592269,
        "action": 0.08622612271184538,
        "store_true": 0.08622612271184538,
        "help": 0.3017914294914588,
        "increase": 0.04311306135592269,
        "log": 0.04311306135592269,
        "verbosity": 0.04311306135592269,
        "troubleshooting": 0.04311306135592269,
        "if": 0.04311306135592269,
        "default": 0.21556530677961344,
        "suppress": 0.04311306135592269,
        "else": 0.04311306135592269,
        "add_argument": 0.21556530677961344,
        "v": 0.04311306135592269,
        "verbose": 0.04311306135592269,
        "_build_parser": 0.04311306135592269,
        "prog": 0.04311306135592269,
        "description": 0.04311306135592269,
        "generate": 0.04311306135592269,
        "and": 0.04311306135592269,
        "maintain": 0.04311306135592269,
        "readme": 0.17245224542369075,
        "files": 0.04311306135592269,
        "using": 0.04311306135592269,
        "repository": 0.21556530677961344,
        "analysis": 0.04311306135592269,
        "subparsers": 0.12933918406776806,
        "add_subparsers": 0.04311306135592269,
        "dest": 0.04311306135592269,
        "command": 0.04311306135592269,
        "required": 0.04311306135592269,
        "true": 0.12933918406776806,
        "init_parser": 0.12933918406776806,
        "add_parser": 0.08622612271184538,
        "init": 0.04311306135592269,
        "initialize": 0.04311306135592269,
        "a": 0.08622612271184538,
        "that": 0.04311306135592269,
        "lacks": 0.04311306135592269,
        "one": 0.04311306135592269,
        "nargs": 0.08622612271184538,
        "to": 0.21556530677961344,
        "the": 0.08622612271184538,
        "root": 0.08622612271184538,
        "defaults": 0.08622612271184538,
        "current": 0.08622612271184538,
        "directory": 0.08622612271184538,
        "update_parser": 0.21556530677961344,
        "update": 0.08622612271184538,
        "sections": 0.04311306135592269,
        "after": 0.04311306135592269,
        "changes": 0.08622612271184538,
        "diff": 0.04311306135592269,
        "base": 0.04311306135592269,
        "origin": 0.04311306135592269,
        "main": 0.04311306135592269,
        "commit": 0.04311306135592269,
        "or": 0.08622612271184538,
        "ref": 0.04311306135592269,
        "compare": 0.04311306135592269,
        "against": 0.04311306135592269,
        "when": 0.04311306135592269,
        "computing": 0.04311306135592269,
        "diffs": 0.04311306135592269,
        "dry": 0.04311306135592269,
        "run": 0.04311306135592269,
        "preview": 0.04311306135592269,
        "without": 0.04311306135592269,
        "writing": 0.04311306135592269,
        "publishing": 0.04311306135592269
      },
      "text": "\ufeff\"\"\"CLI entrypoints for docgen commands.\"\"\" from __future__ import annotations import argparse import sys from pathlib import Path from .orchestrator import Orchestrator from .logging import configure_logging def _add_verbose_option( parser: argparse.ArgumentParser, *, suppress_default: bool = False ) -> None: kwargs: dict[str, object] = { \"action\": \"store_true\", \"help\": \"Increase log verbosity for troubleshooting.\", } if suppress_default: kwargs[\"default\"] = argparse.SUPPRESS else: kwargs[\"default\"] = False parser.add_argument( \"-v\", \"--verbose\", **kwargs, ) def _build_parser() -> argparse.ArgumentParser: parser = argparse.ArgumentParser( prog=\"docgen\", description=\"Generate and maintain README files using repository analysis.\", ) _add_verbose_option(parser) subparsers = parser.add_subparsers(dest=\"command\", required=True) init_parser = subparsers.add_parser( \"init\", help=\"Initialize a README for a repository that lacks one.\", ) _add_verbose_option(init_parser, suppress_default=True) init_parser.add_argument( \"path\", nargs=\"?\", default=\".\", help=\"Path to the repository root (defaults to current directory).\", ) update_parser = subparsers.add_parser( \"update\", help=\"Update README sections after repository changes.\", ) _add_verbose_option(update_parser, suppress_default=True) update_parser.add_argument( \"path\", nargs=\"?\", default=\".\", help=\"Path to the repository root (defaults to current directory).\", ) update_parser.add_argument( \"--diff-base\", default=\"origin/main\", help=\"Commit or ref to compare against when computing diffs.\", ) update_parser.add_argument( \"--dry-run\", action=\"store_true\", help=\"Preview README changes without writing or publishing.\"",
      "metadata": {
        "path": "docgen/cli.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "4063f183e7a0cbc3c2f53cb317e6c67fa8d91d3e6b94ae5297ce56236b0959ea"
      }
    },
    {
      "id": "docgen/analyzers/build.py#0",
      "vector": {
        "build": 0.19477234678290495,
        "system": 0.03895446935658099,
        "analyzer": 0.11686340806974296,
        "implementation": 0.03895446935658099,
        "from": 0.23372681613948593,
        "__future__": 0.03895446935658099,
        "import": 0.2726812854960669,
        "annotations": 0.03895446935658099,
        "os": 0.03895446935658099,
        "pathlib": 0.03895446935658099,
        "path": 0.11686340806974296,
        "typing": 0.03895446935658099,
        "iterable": 0.07790893871316198,
        "list": 0.07790893871316198,
        "optional": 0.07790893871316198,
        "base": 0.03895446935658099,
        "models": 0.03895446935658099,
        "repomanifest": 0.11686340806974296,
        "signal": 0.19477234678290495,
        "utils": 0.03895446935658099,
        "detect_node_package_manager": 0.03895446935658099,
        "class": 0.03895446935658099,
        "buildanalyzer": 0.03895446935658099,
        "detects": 0.03895446935658099,
        "systems": 0.03895446935658099,
        "and": 0.03895446935658099,
        "associated": 0.03895446935658099,
        "developer": 0.03895446935658099,
        "workflows": 0.03895446935658099,
        "_py_build_files": 0.07790893871316198,
        "pyproject": 0.03895446935658099,
        "toml": 0.03895446935658099,
        "setup": 0.03895446935658099,
        "cfg": 0.03895446935658099,
        "requirements": 0.11686340806974296,
        "txt": 0.11686340806974296,
        "def": 0.11686340806974296,
        "supports": 0.03895446935658099,
        "self": 0.31163575485264794,
        "manifest": 0.19477234678290495,
        "bool": 0.07790893871316198,
        "return": 0.11686340806974296,
        "files": 0.07790893871316198,
        "analyze": 0.03895446935658099,
        "root": 0.11686340806974296,
        "manifest_paths": 0.23372681613948593,
        "file": 0.07790893871316198,
        "for": 0.03895446935658099,
        "in": 0.07790893871316198,
        "signals": 0.2726812854960669,
        "python_signal": 0.11686340806974296,
        "_python_signal": 0.07790893871316198,
        "if": 0.2726812854960669,
        "is": 0.11686340806974296,
        "not": 0.23372681613948593,
        "none": 0.15581787742632397,
        "append": 0.15581787742632397,
        "node_signal": 0.11686340806974296,
        "_node_signal": 0.03895446935658099,
        "java_signal": 0.11686340806974296,
        "_java_signal": 0.03895446935658099,
        "name": 0.03895446935658099,
        "generic": 0.07790893871316198,
        "value": 0.03895446935658099,
        "source": 0.07790893871316198,
        "metadata": 0.03895446935658099,
        "commands": 0.07790893871316198,
        "document": 0.03895446935658099,
        "steps": 0.03895446935658099,
        "here": 0.03895446935658099,
        "set": 0.03895446935658099,
        "str": 0.03895446935658099,
        "python_files": 0.07790893871316198,
        "intersection": 0.03895446935658099,
        "python": 0.07790893871316198,
        "m": 0.07790893871316198,
        "venv": 0.15581787742632397,
        "bin": 0.03895446935658099,
        "activate": 0.07790893871316198,
        "_is_windows": 0.03895446935658099,
        "else": 0.03895446935658099,
        "scripts": 0.03895446935658099,
        "pip": 0.03895446935658099,
        "install": 0.03895446935658099,
        "r": 0.03895446935658099,
        "man": 0.03895446935658099
      },
      "text": "\ufeff\"\"\"Build system analyzer implementation.\"\"\" from __future__ import annotations import os from pathlib import Path from typing import Iterable, List, Optional from .base import Analyzer from ..models import RepoManifest, Signal from .utils import detect_node_package_manager class BuildAnalyzer(Analyzer): \"\"\"Detects build systems and associated developer workflows.\"\"\" _PY_BUILD_FILES = { \"pyproject.toml\", \"setup.cfg\", \"requirements.txt\", } def supports(self, manifest: RepoManifest) -> bool: return bool(manifest.files) def analyze(self, manifest: RepoManifest) -> Iterable[Signal]: root = Path(manifest.root) manifest_paths = {file.path for file in manifest.files} signals: List[Signal] = [] python_signal = self._python_signal(manifest_paths) if python_signal is not None: signals.append(python_signal) node_signal = self._node_signal(manifest_paths) if node_signal is not None: signals.append(node_signal) java_signal = self._java_signal(root, manifest_paths) if java_signal is not None: signals.append(java_signal) if not signals: signals.append( Signal( name=\"build.generic\", value=\"generic\", source=\"build\", metadata={\"commands\": [\"# Document build steps here.\"]}, ) ) return signals def _python_signal(self, manifest_paths: set[str]) -> Optional[Signal]: python_files = self._PY_BUILD_FILES.intersection(manifest_paths) if not python_files: return None commands = [ \"python -m venv .venv\", \"source .venv/bin/activate\" if not self._is_windows() else \".\\\\.venv\\\\Scripts\\\\activate\", \"python -m pip install -r requirements.txt\" if \"requirements.txt\" in man",
      "metadata": {
        "path": "docgen/analyzers/build.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "d4339beab368b38f3cc7639defbc5e41b6d4ed2588ad566f1849a23a1645153c"
      }
    },
    {
      "id": "docgen/rag/store.py#0",
      "vector": {
        "embedding": 0.027297554521630706,
        "store": 0.027297554521630706,
        "for": 0.16378532712978422,
        "retrieval": 0.027297554521630706,
        "augmented": 0.027297554521630706,
        "generation": 0.027297554521630706,
        "from": 0.10919021808652282,
        "__future__": 0.027297554521630706,
        "import": 0.10919021808652282,
        "annotations": 0.027297554521630706,
        "json": 0.027297554521630706,
        "pathlib": 0.027297554521630706,
        "path": 0.38216576330282986,
        "typing": 0.027297554521630706,
        "dict": 0.16378532712978422,
        "iterable": 0.05459510904326141,
        "list": 0.08189266356489211,
        "sequence": 0.05459510904326141,
        "class": 0.027297554521630706,
        "embeddingstore": 0.027297554521630706,
        "persists": 0.027297554521630706,
        "and": 0.05459510904326141,
        "retrieves": 0.027297554521630706,
        "embeddings": 0.05459510904326141,
        "scoped": 0.027297554521630706,
        "by": 0.027297554521630706,
        "readme": 0.027297554521630706,
        "sections": 0.10919021808652282,
        "def": 0.19108288165141493,
        "__init__": 0.027297554521630706,
        "self": 0.4094633178244606,
        "none": 0.21838043617304564,
        "load_existing": 0.05459510904326141,
        "bool": 0.05459510904326141,
        "true": 0.027297554521630706,
        "_path": 0.027297554521630706,
        "_store": 0.16378532712978422,
        "str": 0.4094633178244606,
        "object": 0.08189266356489211,
        "if": 0.13648777260815353,
        "is": 0.027297554521630706,
        "not": 0.13648777260815353,
        "_load": 0.027297554521630706,
        "clear": 0.05459510904326141,
        "remove": 0.027297554521630706,
        "all": 0.027297554521630706,
        "stored": 0.027297554521630706,
        "memory": 0.027297554521630706,
        "add": 0.05459510904326141,
        "chunk_id": 0.05459510904326141,
        "vector": 0.10919021808652282,
        "float": 0.027297554521630706,
        "text": 0.10919021808652282,
        "metadata": 0.19108288165141493,
        "or": 0.05459510904326141,
        "strip": 0.027297554521630706,
        "return": 0.08189266356489211,
        "entry": 0.19108288165141493,
        "id": 0.027297554521630706,
        "section": 0.10919021808652282,
        "in": 0.13648777260815353,
        "setdefault": 0.027297554521630706,
        "append": 0.027297554521630706,
        "query": 0.027297554521630706,
        "top_k": 0.05459510904326141,
        "int": 0.027297554521630706,
        "5": 0.027297554521630706,
        "entries": 0.19108288165141493,
        "get": 0.13648777260815353,
        "remove_path": 0.027297554521630706,
        "normalized": 0.05459510904326141,
        "replace": 0.027297554521630706,
        "values": 0.05459510904326141,
        "paths": 0.027297554521630706,
        "seen": 0.08189266356489211,
        "set": 0.05459510904326141,
        "isinstance": 0.027297554521630706,
        "has_path_with_hash": 0.027297554521630706,
        "file_hash": 0.027297554521630706
      },
      "text": "\"\"\"Embedding store for retrieval augmented generation.\"\"\" from __future__ import annotations import json from pathlib import Path from typing import Dict, Iterable, List, Sequence class EmbeddingStore: \"\"\"Persists and retrieves embeddings scoped by README sections.\"\"\" def __init__(self, path: Path | None = None, *, load_existing: bool = True) -> None: self._path = path self._store: Dict[str, List[Dict[str, object]]] = {} if path is not None and load_existing: self._load(path) def clear(self) -> None: \"\"\"Remove all stored embeddings from memory.\"\"\" self._store.clear() def add( self, sections: Sequence[str], *, chunk_id: str, vector: Dict[str, float], text: str, metadata: Dict[str, object], ) -> None: if not sections or not vector or not text.strip(): return entry = { \"id\": chunk_id, \"vector\": vector, \"text\": text, \"metadata\": metadata, } for section in sections: self._store.setdefault(section, []).append(entry) def query(self, section: str, top_k: int = 5) -> List[Dict[str, object]]: entries = self._store.get(section, []) return entries[:top_k] def remove_path(self, path: str) -> None: normalized = path.replace(\"\\\\\", \"/\") for entries in self._store.values(): entries[:] = [entry for entry in entries if entry.get(\"metadata\", {}).get(\"path\") != normalized] def paths(self) -> Iterable[str]: seen: set[str] = set() for entries in self._store.values(): for entry in entries: metadata = entry.get(\"metadata\", {}) path = metadata.get(\"path\") if isinstance(path, str): seen.add(path) return seen def has_path_with_hash(self, path: str, file_hash: str | None) -> bool: if not",
      "metadata": {
        "path": "docgen/rag/store.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "fd5e63043e1782c1f6be549823a88ccad9f6d8177d87654dbde60d2034df5ecf"
      }
    },
    {
      "id": "docgen/failsafe.py#0",
      "vector": {
        "fail": 0.0692958928675237,
        "safe": 0.03464794643376185,
        "stubs": 0.03464794643376185,
        "for": 0.1385917857350474,
        "readme": 0.0692958928675237,
        "generation": 0.0692958928675237,
        "when": 0.0692958928675237,
        "pipelines": 0.03464794643376185,
        "from": 0.24253562503633297,
        "__future__": 0.03464794643376185,
        "import": 0.24253562503633297,
        "annotations": 0.03464794643376185,
        "pathlib": 0.03464794643376185,
        "path": 0.0692958928675237,
        "typing": 0.03464794643376185,
        "dict": 0.10394383930128556,
        "iterable": 0.0692958928675237,
        "sequence": 0.0692958928675237,
        "prompting": 0.0692958928675237,
        "builder": 0.03464794643376185,
        "section": 0.1385917857350474,
        "constants": 0.03464794643376185,
        "default_sections": 0.03464794643376185,
        "section_titles": 0.1385917857350474,
        "postproc": 0.0692958928675237,
        "markers": 0.03464794643376185,
        "markermanager": 0.0692958928675237,
        "sectioncontent": 0.10394383930128556,
        "toc": 0.03464794643376185,
        "tableofcontentsbuilder": 0.0692958928675237,
        "def": 0.0692958928675237,
        "build_readme_stub": 0.03464794643376185,
        "repo_path": 0.0692958928675237,
        "sections": 0.10394383930128556,
        "str": 0.2771835714700948,
        "none": 0.20788767860257112,
        "reason": 0.1385917857350474,
        "return": 0.10394383930128556,
        "a": 0.03464794643376185,
        "placeholder": 0.0692958928675237,
        "fails": 0.03464794643376185,
        "project_name": 0.17323973216880928,
        "name": 0.41577535720514225,
        "or": 0.03464794643376185,
        "repository": 0.03464794643376185,
        "ordered_sections": 0.0692958928675237,
        "_normalise_sections": 0.03464794643376185,
        "marker_manager": 0.10394383930128556,
        "cleaned_reason": 0.1385917857350474,
        "_format_reason": 0.0692958928675237,
        "lines": 0.2771835714700948,
        "f": 0.0692958928675237,
        "intro_body": 0.0692958928675237,
        "_section_stub_body": 0.0692958928675237,
        "intro": 0.1385917857350474,
        "intro_block": 0.0692958928675237,
        "wrap": 0.0692958928675237,
        "title": 0.2771835714700948,
        "get": 0.10394383930128556,
        "introduction": 0.03464794643376185,
        "body": 0.1385917857350474,
        "append": 0.20788767860257112,
        "in": 0.0692958928675237,
        "if": 0.03464794643376185,
        "continue": 0.03464794643376185,
        "replace": 0.0692958928675237,
        "_": 0.0692958928675237,
        "wrapped": 0.0692958928675237,
        "n": 0.0692958928675237,
        "join": 0.03464794643376185,
        "strip": 0.03464794643376185,
        "build_section_stubs": 0.03464794643376185,
        "section_names": 0.0692958928675237,
        "fallback": 0.03464794643376185,
        "objects": 0.03464794643376185,
        "targeted": 0.03464794643376185,
        "updates": 0.03464794643376185
      },
      "text": "\"\"\"Fail-safe stubs for README generation when pipelines fail.\"\"\" from __future__ import annotations from pathlib import Path from typing import Dict, Iterable, Sequence from .prompting.builder import Section from .prompting.constants import DEFAULT_SECTIONS, SECTION_TITLES from .postproc.markers import MarkerManager, SectionContent from .postproc.toc import TableOfContentsBuilder def build_readme_stub( repo_path: Path, sections: Sequence[str] | None = None, *, reason: str | None = None, ) -> str: \"\"\"Return a placeholder README when generation fails.\"\"\" project_name = repo_path.name or \"Repository\" ordered_sections = _normalise_sections(sections) marker_manager = MarkerManager() cleaned_reason = _format_reason(reason) lines = [f\"# {project_name}\", \"\", TableOfContentsBuilder.PLACEHOLDER, \"\"] intro_body = _section_stub_body(\"intro\", project_name, cleaned_reason) intro_block = marker_manager.wrap( SectionContent(name=\"intro\", title=SECTION_TITLES.get(\"intro\", \"Introduction\"), body=intro_body) ) lines.append(intro_block) lines.append(\"\") for name in ordered_sections: if name == \"intro\": continue title = SECTION_TITLES.get(name, name.replace(\"_\", \" \").title()) body = _section_stub_body(name, project_name, cleaned_reason) wrapped = marker_manager.wrap(SectionContent(name=name, title=title, body=body)) lines.append(f\"## {title}\") lines.append(\"\") lines.append(wrapped) lines.append(\"\") return \"\\n\".join(lines).strip() + \"\\n\" def build_section_stubs( section_names: Iterable[str], *, project_name: str, reason: str | None = None, ) -> Dict[str, Section]: \"\"\"Return fallback section objects for targeted updates.\"\"\" cleaned_reason = _format_reason(reason) sections: Dict[str, Section] = {} for name in section_names: title = SECTION_TITLES.get(name, name.replace(\"_\", \" \").title())",
      "metadata": {
        "path": "docgen/failsafe.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "c4f71796d2ccdefeef4604a2ec43249c389a842ef05bcb584b6647083b26c281"
      }
    },
    {
      "id": "docgen/analyzers/language.py#0",
      "vector": {
        "language": 0.5536601028941717,
        "specific": 0.03691067352627811,
        "analyzer": 0.11073202057883434,
        "implementation": 0.03691067352627811,
        "from": 0.2583747146839468,
        "__future__": 0.03691067352627811,
        "import": 0.2583747146839468,
        "annotations": 0.03691067352627811,
        "collections": 0.03691067352627811,
        "counter": 0.07382134705255622,
        "pathlib": 0.03691067352627811,
        "path": 0.07382134705255622,
        "typing": 0.03691067352627811,
        "dict": 0.11073202057883434,
        "iterable": 0.07382134705255622,
        "list": 0.11073202057883434,
        "base": 0.03691067352627811,
        "utils": 0.03691067352627811,
        "detect_java_frameworks": 0.03691067352627811,
        "detect_node_frameworks": 0.03691067352627811,
        "detect_python_frameworks": 0.03691067352627811,
        "load_java_dependencies": 0.03691067352627811,
        "load_node_dependencies": 0.03691067352627811,
        "load_python_dependencies": 0.03691067352627811,
        "models": 0.03691067352627811,
        "repomanifest": 0.11073202057883434,
        "signal": 0.22146404115766868,
        "class": 0.03691067352627811,
        "languageanalyzer": 0.03691067352627811,
        "detects": 0.03691067352627811,
        "frameworks": 0.22146404115766868,
        "and": 0.03691067352627811,
        "idioms": 0.03691067352627811,
        "for": 0.14764269410511244,
        "supported": 0.03691067352627811,
        "languages": 0.18455336763139055,
        "def": 0.07382134705255622,
        "supports": 0.03691067352627811,
        "self": 0.11073202057883434,
        "manifest": 0.18455336763139055,
        "bool": 0.07382134705255622,
        "return": 0.07382134705255622,
        "files": 0.07382134705255622,
        "analyze": 0.03691067352627811,
        "str": 0.03691067352627811,
        "file": 0.11073202057883434,
        "in": 0.11073202057883434,
        "if": 0.11073202057883434,
        "is": 0.03691067352627811,
        "not": 0.07382134705255622,
        "none": 0.03691067352627811,
        "counts": 0.22146404115766868,
        "ordered": 0.14764269410511244,
        "_": 0.07382134705255622,
        "most_common": 0.03691067352627811,
        "primary": 0.11073202057883434,
        "0": 0.03691067352627811,
        "root": 0.11073202057883434,
        "_detect_frameworks": 0.03691067352627811,
        "signals": 0.07382134705255622,
        "name": 0.11073202057883434,
        "value": 0.11073202057883434,
        "source": 0.11073202057883434,
        "metadata": 0.11073202057883434,
        "all": 0.03691067352627811,
        "join": 0.07382134705255622,
        "items": 0.14764269410511244,
        "append": 0.03691067352627811,
        "f": 0.03691067352627811,
        "lower": 0.03691067352627811,
        "replace": 0.03691067352627811
      },
      "text": "\ufeff\"\"\"Language-specific analyzer implementation.\"\"\" from __future__ import annotations from collections import Counter from pathlib import Path from typing import Dict, Iterable, List from .base import Analyzer from .utils import ( detect_java_frameworks, detect_node_frameworks, detect_python_frameworks, load_java_dependencies, load_node_dependencies, load_python_dependencies, ) from ..models import RepoManifest, Signal class LanguageAnalyzer(Analyzer): \"\"\"Detects frameworks and idioms for supported languages.\"\"\" def supports(self, manifest: RepoManifest) -> bool: return bool(manifest.files) def analyze(self, manifest: RepoManifest) -> Iterable[Signal]: languages: List[str] = [ file.language for file in manifest.files if file.language is not None ] if not languages: return [] counts = Counter(languages) ordered = [language for language, _ in counts.most_common()] primary = ordered[0] root = Path(manifest.root) frameworks = self._detect_frameworks(root) signals: List[Signal] = [ Signal( name=\"language.primary\", value=primary, source=\"language\", metadata={\"counts\": dict(counts)}, ), Signal( name=\"language.all\", value=\", \".join(ordered), source=\"language\", metadata={\"languages\": ordered, \"counts\": dict(counts)}, ), ] if frameworks: for language, items in frameworks.items(): signals.append( Signal( name=f\"language.frameworks.{language.lower().replace(' ', '_')}\", value=\", \".join(items), source=\"language\", metadata={\"language\": language, \"frameworks\": items}, )",
      "metadata": {
        "path": "docgen/analyzers/language.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "007635184f693cb4092ef60f38d21bff6e9a0035eee4131b26dae67c21f743e9"
      }
    },
    {
      "id": "docgen/analyzers/__init__.py#0",
      "vector": {
        "analyzer": 0.3287979746107146,
        "plugin": 0.032879797461071454,
        "implementations": 0.032879797461071454,
        "and": 0.06575959492214291,
        "discovery": 0.032879797461071454,
        "utilities": 0.032879797461071454,
        "from": 0.3287979746107146,
        "__future__": 0.032879797461071454,
        "import": 0.3287979746107146,
        "annotations": 0.032879797461071454,
        "importlib": 0.032879797461071454,
        "metadata": 0.032879797461071454,
        "typing": 0.032879797461071454,
        "callable": 0.09863939238321437,
        "iterable": 0.032879797461071454,
        "list": 0.09863939238321437,
        "sequence": 0.06575959492214291,
        "set": 0.13151918984428582,
        "type": 0.032879797461071454,
        "base": 0.032879797461071454,
        "build": 0.06575959492214291,
        "buildanalyzer": 0.06575959492214291,
        "dependencies": 0.06575959492214291,
        "dependencyanalyzer": 0.06575959492214291,
        "entrypoints": 0.06575959492214291,
        "entrypointanalyzer": 0.06575959492214291,
        "language": 0.06575959492214291,
        "languageanalyzer": 0.06575959492214291,
        "patterns": 0.06575959492214291,
        "patternanalyzer": 0.06575959492214291,
        "structure": 0.06575959492214291,
        "structureanalyzer": 0.06575959492214291,
        "_entry_point_group": 0.032879797461071454,
        "docgen": 0.032879797461071454,
        "analyzers": 0.13151918984428582,
        "_builtin_factories": 0.06575959492214291,
        "dict": 0.032879797461071454,
        "str": 0.1643989873053573,
        "def": 0.06575959492214291,
        "discover_analyzers": 0.032879797461071454,
        "enabled": 0.13151918984428582,
        "none": 0.26303837968857163,
        "return": 0.13151918984428582,
        "instantiated": 0.032879797461071454,
        "honoring": 0.032879797461071454,
        "optional": 0.032879797461071454,
        "names": 0.032879797461071454,
        "enabled_set": 0.23015858222750019,
        "if": 0.1643989873053573,
        "is": 0.09863939238321437,
        "not": 0.19727878476642874,
        "name": 0.29591817714964314,
        "lower": 0.06575959492214291,
        "for": 0.13151918984428582,
        "in": 0.1643989873053573,
        "seen": 0.09863939238321437,
        "_add": 0.06575959492214291,
        "factory": 0.1643989873053573,
        "nonlocal": 0.032879797461071454,
        "key": 0.1643989873053573,
        "instance": 0.13151918984428582,
        "isinstance": 0.032879797461071454,
        "raise": 0.06575959492214291,
        "typeerror": 0.032879797461071454,
        "f": 0.06575959492214291,
        "did": 0.032879797461071454,
        "an": 0.032879797461071454,
        "append": 0.032879797461071454,
        "add": 0.032879797461071454,
        "discard": 0.032879797461071454,
        "items": 0.032879797461071454,
        "entry": 0.09863939238321437,
        "_iter_entry_points": 0.032879797461071454,
        "try": 0.032879797461071454,
        "loaded": 0.032879797461071454,
        "load": 0.06575959492214291,
        "except": 0.032879797461071454,
        "exception": 0.032879797461071454,
        "as": 0.032879797461071454,
        "exc": 0.032879797461071454,
        "pragma": 0.032879797461071454,
        "no": 0.032879797461071454,
        "cover": 0.032879797461071454,
        "defensive": 0.032879797461071454,
        "guard": 0.032879797461071454,
        "runtimeerror": 0.032879797461071454,
        "failed": 0.032879797461071454,
        "to": 0.032879797461071454,
        "ent": 0.032879797461071454
      },
      "text": "\ufeff\"\"\"Analyzer plugin implementations and discovery utilities.\"\"\" from __future__ import annotations from importlib import metadata from typing import Callable, Iterable, List, Sequence, Set, Type from .base import Analyzer from .build import BuildAnalyzer from .dependencies import DependencyAnalyzer from .entrypoints import EntryPointAnalyzer from .language import LanguageAnalyzer from .patterns import PatternAnalyzer from .structure import StructureAnalyzer _ENTRY_POINT_GROUP = \"docgen.analyzers\" _BUILTIN_FACTORIES: dict[str, Callable[[], Analyzer]] = { \"language\": LanguageAnalyzer, \"build\": BuildAnalyzer, \"dependencies\": DependencyAnalyzer, \"entrypoints\": EntryPointAnalyzer, \"patterns\": PatternAnalyzer, \"structure\": StructureAnalyzer, } def discover_analyzers(enabled: Sequence[str] | None = None) -> List[Analyzer]: \"\"\"Return instantiated analyzers, honoring optional enabled names.\"\"\" enabled_set: Set[str] | None = None if enabled is not None: enabled_set = {name.lower() for name in enabled} analyzers: List[Analyzer] = [] seen: Set[str] = set() def _add(name: str, factory: Callable[[], Analyzer]) -> None: nonlocal enabled_set key = name.lower() if enabled_set is not None and key not in enabled_set: return if key in seen: return instance = factory() if not isinstance(instance, Analyzer): raise TypeError(f\"Analyzer factory for '{name}' did not return an Analyzer instance\") analyzers.append(instance) seen.add(key) if enabled_set is not None: enabled_set.discard(key) for name, factory in _BUILTIN_FACTORIES.items(): _add(name, factory) for entry in _iter_entry_points(): name = entry.name try: loaded = entry.load() except Exception as exc: # pragma: no cover - defensive guard raise RuntimeError(f\"Failed to load analyzer ent",
      "metadata": {
        "path": "docgen/analyzers/__init__.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "a8201a8db824d294bf5fb2a6528bfe88f2ad7a193d9b14121589c38cc0170ad2"
      }
    },
    {
      "id": "docgen/analyzers/dependencies.py#0",
      "vector": {
        "dependency": 0.04485613040162566,
        "analyzer": 0.13456839120487699,
        "implementation": 0.04485613040162566,
        "from": 0.3139929128113796,
        "__future__": 0.04485613040162566,
        "import": 0.26913678240975397,
        "annotations": 0.04485613040162566,
        "pathlib": 0.04485613040162566,
        "path": 0.13456839120487699,
        "typing": 0.04485613040162566,
        "iterable": 0.08971226080325131,
        "list": 0.08971226080325131,
        "base": 0.04485613040162566,
        "utils": 0.04485613040162566,
        "load_java_dependencies": 0.08971226080325131,
        "load_node_dependencies": 0.08971226080325131,
        "load_python_dependencies": 0.08971226080325131,
        "models": 0.04485613040162566,
        "repomanifest": 0.13456839120487699,
        "signal": 0.2242806520081283,
        "class": 0.04485613040162566,
        "dependencyanalyzer": 0.04485613040162566,
        "extracts": 0.04485613040162566,
        "notable": 0.04485613040162566,
        "dependencies": 0.26913678240975397,
        "manifest": 0.2242806520081283,
        "files": 0.08971226080325131,
        "python_files": 0.08971226080325131,
        "requirements": 0.04485613040162566,
        "txt": 0.04485613040162566,
        "pyproject": 0.04485613040162566,
        "toml": 0.04485613040162566,
        "node_files": 0.08971226080325131,
        "package": 0.04485613040162566,
        "json": 0.04485613040162566,
        "java_files": 0.08971226080325131,
        "pom": 0.04485613040162566,
        "xml": 0.04485613040162566,
        "build": 0.08971226080325131,
        "gradle": 0.08971226080325131,
        "kts": 0.04485613040162566,
        "def": 0.08971226080325131,
        "supports": 0.04485613040162566,
        "self": 0.2242806520081283,
        "bool": 0.08971226080325131,
        "manifest_paths": 0.17942452160650263,
        "file": 0.08971226080325131,
        "for": 0.04485613040162566,
        "in": 0.04485613040162566,
        "return": 0.04485613040162566,
        "intersection": 0.13456839120487699,
        "or": 0.13456839120487699,
        "analyze": 0.04485613040162566,
        "root": 0.2242806520081283,
        "signals": 0.13456839120487699,
        "python_packages": 0.17942452160650263,
        "if": 0.17942452160650263,
        "append": 0.08971226080325131,
        "name": 0.08971226080325131,
        "python": 0.04485613040162566,
        "value": 0.08971226080325131,
        "join": 0.08971226080325131,
        "5": 0.13456839120487699,
        "source": 0.08971226080325131,
        "metadata": 0.08971226080325131,
        "packages": 0.04485613040162566,
        "node_deps": 0.17942452160650263,
        "runtime": 0.17942452160650263,
        "get": 0.08971226080325131,
        "dev": 0.13456839120487699,
        "devdependencies": 0.04485613040162566,
        "summary": 0.08971226080325131,
        "else": 0.04485613040162566,
        "node": 0.04485613040162566,
        "java_deps": 0.08971226080325131
      },
      "text": "\ufeff\"\"\"Dependency analyzer implementation.\"\"\" from __future__ import annotations from pathlib import Path from typing import Iterable, List from .base import Analyzer from .utils import ( load_java_dependencies, load_node_dependencies, load_python_dependencies, ) from ..models import RepoManifest, Signal class DependencyAnalyzer(Analyzer): \"\"\"Extracts notable dependencies from manifest files.\"\"\" PYTHON_FILES = {\"requirements.txt\", \"pyproject.toml\"} NODE_FILES = {\"package.json\"} JAVA_FILES = {\"pom.xml\", \"build.gradle\", \"build.gradle.kts\"} def supports(self, manifest: RepoManifest) -> bool: manifest_paths = {file.path for file in manifest.files} return bool( self.PYTHON_FILES.intersection(manifest_paths) or self.NODE_FILES.intersection(manifest_paths) or self.JAVA_FILES.intersection(manifest_paths) ) def analyze(self, manifest: RepoManifest) -> Iterable[Signal]: root = Path(manifest.root) signals: List[Signal] = [] python_packages = load_python_dependencies(root) if python_packages: signals.append( Signal( name=\"dependencies.python\", value=\", \".join(python_packages[:5]), source=\"dependencies\", metadata={\"packages\": python_packages}, ) ) node_deps = load_node_dependencies(root) runtime = node_deps.get(\"dependencies\", []) dev = node_deps.get(\"devDependencies\", []) if runtime or dev: summary = runtime[:5] if runtime else dev[:5] signals.append( Signal( name=\"dependencies.node\", value=\", \".join(summary), source=\"dependencies\", metadata=node_deps, ) ) java_deps = load_java_dependencies(root) if java_deps:",
      "metadata": {
        "path": "docgen/analyzers/dependencies.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "84b96084924390ebb035e82a517df72ea7318f5b2889271208081cc22c4b6595"
      }
    },
    {
      "id": "docgen/postproc/scorecard.py#0",
      "vector": {
        "readme": 0.07367094686837573,
        "scorecard": 0.07367094686837573,
        "computation": 0.03683547343418787,
        "from": 0.18417736717093933,
        "__future__": 0.03683547343418787,
        "import": 0.2210128406051272,
        "annotations": 0.03683547343418787,
        "json": 0.1105064203025636,
        "dataclasses": 0.03683547343418787,
        "dataclass": 0.07367094686837573,
        "pathlib": 0.03683547343418787,
        "path": 0.07367094686837573,
        "typing": 0.03683547343418787,
        "dict": 0.1105064203025636,
        "list": 0.14734189373675147,
        "prompting": 0.03683547343418787,
        "constants": 0.03683547343418787,
        "default_sections": 0.1105064203025636,
        "class": 0.03683547343418787,
        "readmescorecard": 0.03683547343418787,
        "evaluates": 0.03683547343418787,
        "content": 0.03683547343418787,
        "against": 0.03683547343418787,
        "basic": 0.03683547343418787,
        "quality": 0.03683547343418787,
        "gates": 0.03683547343418787,
        "def": 0.14734189373675147,
        "evaluate": 0.03683547343418787,
        "self": 0.29468378747350293,
        "markdown": 0.29468378747350293,
        "str": 0.29468378747350293,
        "link_issues": 0.2578483140393151,
        "none": 0.1105064203025636,
        "object": 0.07367094686837573,
        "or": 0.03683547343418787,
        "coverage": 0.1105064203025636,
        "_section_coverage": 0.07367094686837573,
        "quickstart_ok": 0.1105064203025636,
        "_quickstart_has_commands": 0.03683547343418787,
        "badges_present": 0.14734189373675147,
        "docgen": 0.1105064203025636,
        "begin": 0.07367094686837573,
        "badges": 0.03683547343418787,
        "in": 0.1105064203025636,
        "score": 0.36835473434187865,
        "100": 0.07367094686837573,
        "minus": 0.03683547343418787,
        "penalties": 0.03683547343418787,
        "int": 0.03683547343418787,
        "1": 0.07367094686837573,
        "40": 0.03683547343418787,
        "if": 0.18417736717093933,
        "not": 0.1105064203025636,
        "20": 0.07367094686837573,
        "min": 0.03683547343418787,
        "len": 0.1105064203025636,
        "5": 0.07367094686837573,
        "max": 0.03683547343418787,
        "0": 0.1105064203025636,
        "return": 0.1105064203025636,
        "section_coverage": 0.03683547343418787,
        "missing_sections": 0.03683547343418787,
        "_missing_sections": 0.1105064203025636,
        "quickstart_has_commands": 0.03683547343418787,
        "save": 0.03683547343418787,
        "repo_path": 0.07367094686837573,
        "data": 0.07367094686837573,
        "output": 0.1105064203025636,
        "parent": 0.03683547343418787,
        "mkdir": 0.03683547343418787,
        "parents": 0.03683547343418787,
        "true": 0.1105064203025636,
        "exist_ok": 0.03683547343418787,
        "write_text": 0.03683547343418787,
        "dumps": 0.03683547343418787,
        "indent": 0.03683547343418787,
        "2": 0.03683547343418787,
        "sort_keys": 0.03683547343418787,
        "encoding": 0.03683547343418787,
        "utf": 0.03683547343418787,
        "8": 0.03683547343418787,
        "float": 0.03683547343418787,
        "total": 0.14734189373675147,
        "present": 0.07367094686837573,
        "missing": 0.03683547343418787,
        "for": 0.03683547343418787,
        "section": 0.07367094686837573,
        "token": 0.07367094686837573,
        "f": 0.03683547343418787,
        "mar": 0.03683547343418787
      },
      "text": "\"\"\"README scorecard computation.\"\"\" from __future__ import annotations import json from dataclasses import dataclass from pathlib import Path from typing import Dict, List from ..prompting.constants import DEFAULT_SECTIONS @dataclass class ReadmeScorecard: \"\"\"Evaluates README content against basic quality gates.\"\"\" def evaluate(self, markdown: str, *, link_issues: List[str] | None = None) -> Dict[str, object]: link_issues = link_issues or [] coverage = self._section_coverage(markdown) quickstart_ok = self._quickstart_has_commands(markdown) badges_present = \"<!-- docgen:begin:badges -->\" in markdown # score 100 minus penalties score = 100 score -= int((1 - coverage) * 40) if not quickstart_ok: score -= 20 if link_issues: score -= min(len(link_issues) * 5, 20) if not badges_present: score -= 5 score = max(score, 0) return { \"score\": score, \"section_coverage\": coverage, \"missing_sections\": self._missing_sections(markdown), \"quickstart_has_commands\": quickstart_ok, \"badges_present\": badges_present, \"link_issues\": link_issues, } def save(self, repo_path: Path, data: Dict[str, object]) -> None: output = repo_path / \".docgen\" / \"scorecard.json\" output.parent.mkdir(parents=True, exist_ok=True) output.write_text(json.dumps(data, indent=2, sort_keys=True), encoding=\"utf-8\") def _section_coverage(self, markdown: str) -> float: total = len(DEFAULT_SECTIONS) present = total - len(self._missing_sections(markdown)) if total == 0: return 1.0 return present / total def _missing_sections(self, markdown: str) -> List[str]: missing: List[str] = [] for section in DEFAULT_SECTIONS: token = f\"<!-- docgen:begin:{section} -->\" if token not in mar",
      "metadata": {
        "path": "docgen/postproc/scorecard.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "c7f7ca12efa0c1b9a308948c3c0fee582b3fdcc97fbb63ab6ef1f73c4c564483"
      }
    }
  ],
  "architecture": [
    {
      "id": "AGENTS.md#0",
      "vector": {
        "repository": 0.06757373783994859,
        "guidelines": 0.1013606067599229,
        "project": 0.033786868919974296,
        "structure": 0.033786868919974296,
        "module": 0.06757373783994859,
        "organization": 0.033786868919974296,
        "spec": 0.06757373783994859,
        "md": 0.033786868919974296,
        "captures": 0.033786868919974296,
        "the": 0.27029495135979437,
        "end": 0.06757373783994859,
        "to": 0.1013606067599229,
        "architecture": 0.033786868919974296,
        "component": 0.06757373783994859,
        "contracts": 0.033786868919974296,
        "and": 0.43922929595966587,
        "must": 0.033786868919974296,
        "be": 0.033786868919974296,
        "updated": 0.033786868919974296,
        "whenever": 0.033786868919974296,
        "responsibilities": 0.033786868919974296,
        "shift": 0.033786868919974296,
        "place": 0.033786868919974296,
        "python": 0.2027212135198458,
        "source": 0.033786868919974296,
        "in": 0.16893434459987147,
        "a": 0.23650808243982008,
        "docgen": 0.16893434459987147,
        "package": 0.033786868919974296,
        "create": 0.033786868919974296,
        "it": 0.033786868919974296,
        "when": 0.06757373783994859,
        "implementation": 0.033786868919974296,
        "starts": 0.033786868919974296,
        "with": 0.16893434459987147,
        "clear": 0.033786868919974296,
        "submodules": 0.033786868919974296,
        "for": 0.1013606067599229,
        "orchestrator": 0.1013606067599229,
        "analyzers": 0.033786868919974296,
        "runners": 0.033786868919974296,
        "stores": 0.033786868919974296,
        "avoid": 0.06757373783994859,
        "leaving": 0.033786868919974296,
        "logic": 0.033786868919974296,
        "repo": 0.06757373783994859,
        "root": 0.033786868919974296,
        "mirror": 0.033786868919974296,
        "runtime": 0.033786868919974296,
        "modules": 0.06757373783994859,
        "under": 0.1013606067599229,
        "tests": 0.2027212135198458,
        "using": 0.033786868919974296,
        "test_": 0.033786868919974296,
        "py": 0.1013606067599229,
        "co": 0.033786868919974296,
        "locate": 0.033786868919974296,
        "fixtures": 0.06757373783994859,
        "_fixtures": 0.033786868919974296,
        "so": 0.13514747567989718,
        "imports": 0.06757373783994859,
        "stay": 0.06757373783994859,
        "clean": 0.033786868919974296,
        "reusable": 0.033786868919974296,
        "keep": 0.13514747567989718,
        "throwaway": 0.033786868919974296,
        "experiments": 0.033786868919974296,
        "inside": 0.033786868919974296,
        "an": 0.06757373783994859,
        "ignored": 0.033786868919974296,
        "sandbox": 0.033786868919974296,
        "directory": 0.033786868919974296,
        "scans": 0.033786868919974296,
        "remain": 0.033786868919974296,
        "focused": 0.033786868919974296,
        "on": 0.06757373783994859,
        "production": 0.033786868919974296,
        "code": 0.033786868919974296,
        "paths": 0.033786868919974296,
        "build": 0.033786868919974296,
        "test": 0.06757373783994859,
        "development": 0.033786868919974296,
        "commands": 0.033786868919974296,
        "m": 0.16893434459987147,
        "venv": 0.1013606067599229,
        "followed": 0.033786868919974296,
        "by": 0.033786868919974296,
        "scripts": 0.06757373783994859,
        "activate": 0.033786868919974296,
        "aligns": 0.033786868919974296,
        "local": 0.033786868919974296,
        "shells": 0.033786868919974296,
        "pycharm": 0.033786868919974296,
        "interpreter": 0.033786868919974296,
        "settings": 0.033786868919974296,
        "pip": 0.033786868919974296,
        "install": 0.033786868919974296,
        "e": 0.033786868919974296,
        "dev": 0.033786868919974296,
        "after": 0.06757373783994859,
        "pyproject": 0.033786868919974296,
        "toml": 0.033786868919974296,
        "is": 0.1013606067599229,
        "committed": 0.033786868919974296,
        "exposes": 0.033786868919974296,
        "cli": 0.033786868919974296,
        "plugins": 0.033786868919974296,
        "editable": 0.033786868919974296,
        "form": 0.033786868919974296,
        "without": 0.033786868919974296,
        "repeated": 0.033786868919974296,
        "reinstalls": 0.033786868919974296,
        "pytest": 0.06757373783994859,
        "runs": 0.033786868919974296,
        "full": 0.033786868919974296,
        "suite": 0.033786868919974296,
        "append": 0.033786868919974296,
        "k": 0.033786868919974296,
        "pattern": 0.033786868919974296,
        "iterate": 0.033786868919974296,
        "single": 0.06757373783994859,
        "analyzer": 0.06757373783994859,
        "or": 0.06757373783994859,
        "pipeline": 0.1013606067599229,
        "stage": 0.033786868919974296,
        "mypy": 0.033786868919974296,
        "ruff": 0.033786868919974296,
        "check": 0.033786868919974296,
        "catch": 0.033786868919974296,
        "type": 0.033786868919974296,
        "drift": 0.033786868919974296,
        "lint": 0.033786868919974296,
        "violations": 0.033786868919974296,
        "before": 0.06757373783994859,
        "readme": 0.06757373783994859,
        "generation": 0.06757373783994859,
        "attempted": 0.033786868919974296,
        "coding": 0.033786868919974296,
        "style": 0.033786868919974296,
        "naming": 0.033786868919974296,
        "conventions": 0.033786868919974296,
        "follow": 0.06757373783994859,
        "pep": 0.033786868919974296,
        "8": 0.033786868919974296,
        "4": 0.033786868919974296,
        "space": 0.033786868919974296,
        "indents": 0.033786868919974296,
        "explicit": 0.033786868919974296,
        "example": 0.033786868919974296,
        "from": 0.033786868919974296,
        "import": 0.033786868919974296,
        "static": 0.033786868919974296,
        "tooling": 0.033786868919974296,
        "can": 0.033786868919974296,
        "trace": 0.033786868919974296,
        "dependencies": 0.033786868919974296,
        "name": 0.033786868919974296,
        "their": 0.033786868919974296,
        "roles": 0.033786868919974296,
        "prompt_builder": 0.033786868919974296,
        "functions": 0.033786868919974296,
        "snake_case": 0.033786868919974296,
        "descriptive": 0.06757373783994859,
        "nouns": 0.033786868919974296,
        "first": 0.033786868919974296,
        "build_prompt_section": 0.033786868919974296,
        "run": 0.033786868919974296,
        "black": 0.033786868919974296,
        "commits": 0.06757373783994859,
        "manual": 0.033786868919974296,
        "reformatting": 0.033786868919974296,
        "unless": 0.033786868919974296,
        "formatter": 0.033786868919974296,
        "cannot": 0.033786868919974296,
        "resolve": 0.033786868919974296,
        "construct": 0.033786868919974296,
        "testing": 0.06757373783994859,
        "default": 0.033786868919974296,
        "harness": 0.033786868919974296,
        "every": 0.033786868919974296,
        "needs": 0.033786868919974296,
        "unit": 0.033786868919974296,
        "coverage": 0.033786868919974296,
        "plus": 0.033786868919974296,
        "integration": 0.06757373783994859,
        "case": 0.033786868919974296,
        "that": 0.06757373783994859,
        "walks": 0.033786868919974296,
        "snapshot": 0.033786868919974296,
        "through": 0.033786868919974296,
        "use": 0.033786868919974296,
        "names": 0.033786868919974296,
        "such": 0.033786868919974296,
        "as": 0.033786868919974296,
        "test_prompt_builder_handles_missing_signals": 0.033786868919974296,
        "arrange": 0.033786868919974296,
        "act": 0.033786868919974296,
        "assert": 0.033786868919974296,
        "comments": 0.033786868919974296,
        "minimal": 0.033786868919974296,
        "but": 0.033786868919974296,
        "intentional": 0.033786868919974296,
        "store": 0.033786868919974296,
        "regression": 0.033786868919974296,
        "generated": 0.033786868919974296,
        "slices": 0.033786868919974296,
        "data": 0.033786868919974296,
        "update": 0.033786868919974296,
        "them": 0.033786868919974296,
        "helper": 0.033786868919974296,
        "diffs": 0.033786868919974296,
        "reviewable": 0.033786868919974296,
        "commit": 0.033786868919974296,
        "pull": 0.033786868919974296,
        "request": 0.033786868919974296,
        "conventional": 0.033786868919974296,
        "feat": 0.033786868919974296,
        "fix": 0.033786868919974296,
        "docs": 0.033786868919974296,
        "subject": 0.033786868919974296,
        "lines": 0.033786868919974296,
        "72": 0.033786868919974296,
        "characters": 0.033786868919974296,
        "explain": 0.033786868919974296,
        "broader": 0.033786868919974296,
        "scope": 0.033786868919974296,
        "body": 0.033786868919974296,
        "multiple": 0.033786868919974296,
        "subsystems": 0.033786868919974296,
        "change": 0.033786868919974296,
        "bundle": 0.033786868919974296,
        "related": 0.033786868919974296,
        "work": 0.033786868919974296,
        "into": 0.033786868919974296,
        "pr": 0.033786868919974296,
        "includes": 0.033786868919974296,
        "summary": 0.033786868919974296,
        "notes": 0.033786868919974296,
        "links": 0.033786868919974296
      },
      "text": "# Repository Guidelines ## Project Structure & Module Organization - `spec/spec.md` captures the end-to-end architecture, component contracts, and must be updated whenever responsibilities shift. - Place Python source in a `docgen/` package (create it when implementation starts) with clear submodules for orchestrator, analyzers, runners, and stores; avoid leaving logic in the repo root. - Mirror runtime modules under `tests/` using `test_<module>.py`; co-locate fixtures in `tests/_fixtures/` so imports stay clean and reusable. - Keep throwaway experiments inside an ignored `sandbox/` directory so repository scans remain focused on production code paths. ## Build, Test, and Development Commands - `python -m venv .venv` followed by `.\\\\.venv\\\\Scripts\\\\activate` aligns local shells with the PyCharm interpreter settings. - `python -m pip install -e .[dev]` (after a `pyproject.toml` is committed) exposes the CLI and plugins in editable form without repeated reinstalls. - `python -m pytest` runs the full suite; append `-k <pattern>` to iterate on a single analyzer or pipeline stage. - `python -m mypy docgen` and `python -m ruff check docgen tests` catch type drift and lint violations before README generation is attempted. ## Coding Style & Naming Conventions - Follow PEP 8 with 4-space indents and explicit imports (for example, `from docgen.orchestrator import Pipeline`) so static tooling can trace dependencies. - Name modules after their roles (`orchestrator.py`, `prompt_builder.py`) and keep functions snake_case with descriptive nouns first (`build_prompt_section`). - Run `black docgen tests` before commits; avoid manual reformatting unless the formatter cannot resolve a construct. ## Testing Guidelines - Pytest is the default harness; every analyzer or pipeline component needs unit coverage plus an integration case under `tests/integration/` that walks a repo snapshot through generation. - Use descriptive test names such as `test_prompt_builder_handles_missing_signals` and keep Arrange-Act-Assert comments minimal but intentional. - Store regression fixtures for generated README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "AGENTS.md#1",
      "vector": {
        "readme": 0.1270001270001905,
        "slices": 0.06350006350009525,
        "under": 0.06350006350009525,
        "tests": 0.06350006350009525,
        "data": 0.06350006350009525,
        "and": 0.4445004445006667,
        "update": 0.06350006350009525,
        "them": 0.06350006350009525,
        "with": 0.06350006350009525,
        "helper": 0.06350006350009525,
        "scripts": 0.06350006350009525,
        "so": 0.06350006350009525,
        "diffs": 0.06350006350009525,
        "stay": 0.06350006350009525,
        "reviewable": 0.06350006350009525,
        "commit": 0.1270001270001905,
        "pull": 0.06350006350009525,
        "request": 0.06350006350009525,
        "guidelines": 0.06350006350009525,
        "follow": 0.06350006350009525,
        "conventional": 0.06350006350009525,
        "commits": 0.06350006350009525,
        "feat": 0.06350006350009525,
        "fix": 0.06350006350009525,
        "docs": 0.1270001270001905,
        "keep": 0.1270001270001905,
        "subject": 0.06350006350009525,
        "lines": 0.06350006350009525,
        "72": 0.06350006350009525,
        "characters": 0.06350006350009525,
        "explain": 0.06350006350009525,
        "broader": 0.06350006350009525,
        "scope": 0.06350006350009525,
        "in": 0.254000254000381,
        "the": 0.31750031750047625,
        "body": 0.06350006350009525,
        "when": 0.1270001270001905,
        "multiple": 0.06350006350009525,
        "subsystems": 0.06350006350009525,
        "change": 0.06350006350009525,
        "bundle": 0.06350006350009525,
        "related": 0.06350006350009525,
        "work": 0.1270001270001905,
        "into": 0.06350006350009525,
        "a": 0.254000254000381,
        "single": 0.06350006350009525,
        "pr": 0.1270001270001905,
        "that": 0.06350006350009525,
        "includes": 0.06350006350009525,
        "summary": 0.06350006350009525,
        "testing": 0.06350006350009525,
        "notes": 0.1270001270001905,
        "links": 0.06350006350009525,
        "to": 0.06350006350009525,
        "relevant": 0.06350006350009525,
        "issues": 0.06350006350009525,
        "or": 0.06350006350009525,
        "spec": 0.06350006350009525,
        "sections": 0.06350006350009525,
        "attach": 0.06350006350009525,
        "before": 0.1270001270001905,
        "after": 0.06350006350009525,
        "excerpts": 0.06350006350009525,
        "altering": 0.06350006350009525,
        "generation": 0.06350006350009525,
        "output": 0.06350006350009525,
        "run": 0.06350006350009525,
        "lint": 0.06350006350009525,
        "type": 0.06350006350009525,
        "check": 0.06350006350009525,
        "test": 0.06350006350009525,
        "commands": 0.06350006350009525,
        "opening": 0.06350006350009525,
        "paste": 0.06350006350009525,
        "condensed": 0.06350006350009525,
        "results": 0.06350006350009525,
        "description": 0.06350006350009525,
        "for": 0.06350006350009525,
        "quick": 0.06350006350009525,
        "verification": 0.06350006350009525,
        "environment": 0.1270001270001905,
        "tooling": 0.06350006350009525,
        "reuse": 0.06350006350009525,
        "local": 0.1270001270001905,
        "venv": 0.06350006350009525,
        "seeded": 0.06350006350009525,
        "by": 0.1270001270001905,
        "pycharm": 0.06350006350009525,
        "do": 0.06350006350009525,
        "not": 0.06350006350009525,
        "artifacts": 0.06350006350009525,
        "store": 0.06350006350009525,
        "secrets": 0.06350006350009525,
        "env": 0.06350006350009525,
        "consumed": 0.06350006350009525,
        "llm": 0.06350006350009525,
        "runner": 0.06350006350009525,
        "large": 0.06350006350009525,
        "model": 0.06350006350009525,
        "weights": 0.06350006350009525,
        "outside": 0.06350006350009525,
        "repository": 0.06350006350009525,
        "document": 0.06350006350009525,
        "their": 0.06350006350009525,
        "locations": 0.06350006350009525,
        "models": 0.06350006350009525,
        "md": 0.06350006350009525,
        "once": 0.06350006350009525,
        "integration": 0.06350006350009525,
        "begins": 0.06350006350009525
      },
      "text": "README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to relevant issues or spec sections; attach before/after README excerpts when altering generation output. - Run lint, type-check, and test commands before opening a PR and paste condensed results in the description for quick verification. ## Environment & Tooling Notes - Reuse the local `.venv` seeded by PyCharm; do not commit environment artifacts and store secrets in a `.env` consumed by the local LLM runner. - Keep large model weights outside the repository and document their locations in `docs/models.md` once integration work begins.",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "docs/ci/docgen-update.yml#0",
      "vector": {
        "name": 0.2773500981126145,
        "docgen": 0.1849000654084097,
        "update": 0.2311250817605121,
        "on": 0.09245003270420485,
        "push": 0.046225016352102424,
        "branches": 0.09245003270420485,
        "main": 0.13867504905630726,
        "pull_request": 0.13867504905630726,
        "jobs": 0.046225016352102424,
        "readme": 0.1849000654084097,
        "runs": 0.046225016352102424,
        "self": 0.046225016352102424,
        "hosted": 0.046225016352102424,
        "steps": 0.09245003270420485,
        "uses": 0.13867504905630726,
        "actions": 0.2311250817605121,
        "checkout": 0.046225016352102424,
        "v4": 0.09245003270420485,
        "with": 0.13867504905630726,
        "fetch": 0.046225016352102424,
        "depth": 0.046225016352102424,
        "0": 0.046225016352102424,
        "setup": 0.046225016352102424,
        "python": 0.2311250817605121,
        "v5": 0.046225016352102424,
        "version": 0.046225016352102424,
        "3": 0.046225016352102424,
        "11": 0.046225016352102424,
        "cache": 0.09245003270420485,
        "path": 0.046225016352102424,
        "pip": 0.2773500981126145,
        "key": 0.046225016352102424,
        "runner": 0.09245003270420485,
        "os": 0.09245003270420485,
        "hashfiles": 0.046225016352102424,
        "pyproject": 0.046225016352102424,
        "toml": 0.046225016352102424,
        "restore": 0.046225016352102424,
        "keys": 0.046225016352102424,
        "install": 0.13867504905630726,
        "dependencies": 0.046225016352102424,
        "run": 0.2311250817605121,
        "m": 0.13867504905630726,
        "upgrade": 0.046225016352102424,
        "e": 0.046225016352102424,
        "dev": 0.046225016352102424,
        "determine": 0.046225016352102424,
        "diff": 0.1849000654084097,
        "base": 0.2773500981126145,
        "id": 0.046225016352102424,
        "if": 0.09245003270420485,
        "github": 0.2311250817605121,
        "event_name": 0.046225016352102424,
        "then": 0.09245003270420485,
        "echo": 0.09245003270420485,
        "event": 0.046225016352102424,
        "sha": 0.046225016352102424,
        "github_output": 0.09245003270420485,
        "else": 0.046225016352102424,
        "origin": 0.046225016352102424,
        "fi": 0.09245003270420485,
        "env": 0.046225016352102424,
        "docgen_llm_base_url": 0.046225016352102424,
        "http": 0.046225016352102424,
        "localhost": 0.046225016352102424,
        "12434": 0.046225016352102424,
        "engines": 0.046225016352102424,
        "v1": 0.046225016352102424,
        "cli": 0.046225016352102424,
        "outputs": 0.046225016352102424,
        "commit": 0.09245003270420485,
        "md": 0.09245003270420485,
        "optional": 0.046225016352102424,
        "git": 0.1849000654084097,
        "status": 0.046225016352102424,
        "short": 0.046225016352102424,
        "grep": 0.046225016352102424,
        "q": 0.046225016352102424,
        "config": 0.09245003270420485,
        "user": 0.09245003270420485,
        "email": 0.046225016352102424,
        "users": 0.046225016352102424,
        "noreply": 0.046225016352102424,
        "com": 0.046225016352102424,
        "am": 0.046225016352102424,
        "docs": 0.046225016352102424,
        "via": 0.046225016352102424
      },
      "text": "name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted steps: - uses: actions/checkout@v4 with: fetch-depth: 0 - uses: actions/setup-python@v5 with: python-version: '3.11' - uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install dependencies run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README.md (optional) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi",
      "metadata": {
        "path": "docs/ci/docgen-update.yml",
        "tags": [
          "docs"
        ],
        "hash": "48bec2bc404707486fcb1661def194395cc581bf55cb2f610704d495663e6a14"
      }
    },
    {
      "id": "docs/ci/github-actions.md#0",
      "vector": {
        "github": 0.2528558164964056,
        "actions": 0.2212488394343549,
        "integration": 0.0316069770620507,
        "the": 0.18964186237230418,
        "workflow": 0.0632139541241014,
        "below": 0.0316069770620507,
        "runs": 0.0632139541241014,
        "docgen": 0.2212488394343549,
        "update": 0.18964186237230418,
        "on": 0.1264279082482028,
        "pushes": 0.0316069770620507,
        "and": 0.0316069770620507,
        "pull": 0.0316069770620507,
        "requests": 0.0316069770620507,
        "it": 0.0316069770620507,
        "assumes": 0.0316069770620507,
        "a": 0.0632139541241014,
        "self": 0.0632139541241014,
        "hosted": 0.1264279082482028,
        "runner": 0.15803488531025348,
        "or": 0.09482093118615209,
        "with": 0.18964186237230418,
        "network": 0.0632139541241014,
        "access": 0.0632139541241014,
        "to": 0.1264279082482028,
        "your": 0.0632139541241014,
        "local": 0.09482093118615209,
        "model": 0.0316069770620507,
        "runtime": 0.0316069770620507,
        "job": 0.0316069770620507,
        "skips": 0.0316069770620507,
        "early": 0.0316069770620507,
        "when": 0.0316069770620507,
        "no": 0.0316069770620507,
        "files": 0.0316069770620507,
        "match": 0.0316069770620507,
        "yml": 0.0316069770620507,
        "s": 0.0316069770620507,
        "ci": 0.0316069770620507,
        "watched_globs": 0.0316069770620507,
        "entries": 0.0316069770620507,
        "so": 0.0316069770620507,
        "that": 0.0316069770620507,
        "purely": 0.0316069770620507,
        "documentation": 0.0316069770620507,
        "only": 0.0316069770620507,
        "changes": 0.0316069770620507,
        "do": 0.0316069770620507,
        "not": 0.0316069770620507,
        "trigger": 0.0316069770620507,
        "generator": 0.0316069770620507,
        "yaml": 0.0316069770620507,
        "name": 0.3476767476825577,
        "push": 0.0316069770620507,
        "branches": 0.0632139541241014,
        "main": 0.09482093118615209,
        "pull_request": 0.09482093118615209,
        "jobs": 0.0316069770620507,
        "readme": 0.2212488394343549,
        "requires": 0.0316069770620507,
        "llm": 0.0316069770620507,
        "steps": 0.0632139541241014,
        "checkout": 0.0632139541241014,
        "repository": 0.0316069770620507,
        "uses": 0.1264279082482028,
        "v4": 0.09482093118615209,
        "fetch": 0.0316069770620507,
        "depth": 0.0316069770620507,
        "0": 0.0316069770620507,
        "set": 0.0316069770620507,
        "up": 0.0316069770620507,
        "python": 0.18964186237230418,
        "setup": 0.0316069770620507,
        "v5": 0.0316069770620507,
        "version": 0.0316069770620507,
        "3": 0.0316069770620507,
        "11": 0.0316069770620507,
        "cache": 0.09482093118615209,
        "pip": 0.2212488394343549,
        "dependencies": 0.0316069770620507,
        "path": 0.0632139541241014,
        "key": 0.0316069770620507,
        "os": 0.0632139541241014,
        "hashfiles": 0.0316069770620507,
        "pyproject": 0.0316069770620507,
        "toml": 0.0316069770620507,
        "restore": 0.0316069770620507,
        "keys": 0.0316069770620507,
        "install": 0.09482093118615209,
        "in": 0.0316069770620507,
        "editable": 0.0316069770620507,
        "mode": 0.0316069770620507,
        "run": 0.15803488531025348,
        "m": 0.09482093118615209,
        "upgrade": 0.0316069770620507,
        "e": 0.0316069770620507,
        "dev": 0.0316069770620507,
        "determine": 0.0316069770620507,
        "diff": 0.1264279082482028,
        "base": 0.18964186237230418,
        "id": 0.0316069770620507,
        "if": 0.1264279082482028,
        "event_name": 0.0316069770620507,
        "then": 0.0632139541241014,
        "echo": 0.0632139541241014,
        "event": 0.0316069770620507,
        "sha": 0.0316069770620507,
        "github_output": 0.0632139541241014,
        "else": 0.0316069770620507,
        "origin": 0.0316069770620507,
        "fi": 0.0632139541241014,
        "env": 0.0316069770620507,
        "docgen_llm_base_url": 0.0632139541241014,
        "http": 0.0316069770620507,
        "localhost": 0.0316069770620507,
        "12434": 0.0316069770620507,
        "engines": 0.0316069770620507,
        "v1": 0.0316069770620507,
        "cli": 0.0632139541241014,
        "outputs": 0.0316069770620507,
        "commit": 0.0632139541241014,
        "updates": 0.0316069770620507,
        "any": 0.0316069770620507,
        "git": 0.1264279082482028,
        "status": 0.0316069770620507,
        "short": 0.0316069770620507,
        "grep": 0.0316069770620507,
        "q": 0.0316069770620507,
        "md": 0.0632139541241014,
        "config": 0.0632139541241014,
        "user": 0.0632139541241014,
        "email": 0.0316069770620507,
        "users": 0.0316069770620507,
        "noreply": 0.0316069770620507,
        "com": 0.0316069770620507,
        "am": 0.0316069770620507,
        "docs": 0.0316069770620507,
        "via": 0.0316069770620507,
        "upload": 0.0632139541241014,
        "artifact": 0.0632139541241014,
        "success": 0.0316069770620507,
        "generated": 0.0316069770620507,
        "note": 0.0316069770620507,
        "relies": 0.0316069770620507,
        "pointing": 0.0316069770620507,
        "private": 0.0632139541241014,
        "inference": 0.0316069770620507,
        "endpoint": 0.0316069770620507,
        "for": 0.0316069770620507,
        "runners": 0.0316069770620507,
        "you": 0.0316069770620507,
        "will": 0.0316069770620507,
        "need": 0.0316069770620507,
        "expose": 0.0316069770620507,
        "within": 0.0316069770620507,
        "switch": 0.0316069770620507,
        "ollama": 0.0316069770620507,
        "appropriate": 0.0316069770620507,
        "caching": 0.0316069770620507
      },
      "text": "# GitHub Actions Integration The workflow below runs `docgen update` on pushes and pull requests. It assumes a self-hosted runner (or GitHub-hosted runner with network access to your local model runtime). The job skips early when no files match `.docgen.yml`'s `ci.watched_globs` entries so that purely documentation-only changes do not trigger the generator. ```yaml name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted # requires local LLM access steps: - name: Checkout repository uses: actions/checkout@v4 with: fetch-depth: 0 - name: Set up Python uses: actions/setup-python@v5 with: python-version: '3.11' - name: Cache pip dependencies uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install docgen in editable mode run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: | python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README updates (if any) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi - name: Upload README artifact if: success() uses: actions/upload-artifact@v4 with: name: generated-readme path: README.md ``` > **Note:** the workflow relies on `DOCGEN_LLM_BASE_URL` pointing to a local or > private inference endpoint. For GitHub-hosted runners you will need to expose > the runner within your private network or switch to the `ollama` CLI with > appropriate caching. ```",
      "metadata": {
        "path": "docs/ci/github-actions.md",
        "tags": [
          "docs"
        ],
        "hash": "178c6f25ecf7325348a9158158c6e6f36c29d520a922a6f0c2c739f4efe1b0d8"
      }
    },
    {
      "id": "spec/feature_checklist.md#0",
      "vector": {
        "intelligent": 0.028513297425610054,
        "readme": 0.08553989227683016,
        "generator": 0.028513297425610054,
        "feature": 0.028513297425610054,
        "checklist": 0.028513297425610054,
        "status": 0.028513297425610054,
        "legend": 0.028513297425610054,
        "not": 0.028513297425610054,
        "started": 0.028513297425610054,
        "in": 0.028513297425610054,
        "progress": 0.028513297425610054,
        "done": 0.028513297425610054,
        "scope": 0.028513297425610054,
        "tags": 0.028513297425610054,
        "mvp": 0.4847260562353709,
        "required": 0.028513297425610054,
        "for": 0.11405318970244022,
        "proof": 0.028513297425610054,
        "of": 0.08553989227683016,
        "concept": 0.028513297425610054,
        "next": 0.2851329742561005,
        "nice": 0.028513297425610054,
        "to": 0.08553989227683016,
        "have": 0.028513297425610054,
        "soon": 0.028513297425610054,
        "stretch": 0.11405318970244022,
        "later": 0.028513297425610054,
        "1": 0.05702659485122011,
        "core": 0.028513297425610054,
        "workflows": 0.028513297425610054,
        "x": 0.570265948512201,
        "docgen": 0.11405318970244022,
        "init": 0.028513297425610054,
        "initialize": 0.028513297425610054,
        "repos": 0.028513297425610054,
        "without": 0.05702659485122011,
        "docs": 0.11405318970244022,
        "update": 0.028513297425610054,
        "detect": 0.028513297425610054,
        "changes": 0.028513297425610054,
        "on": 0.028513297425610054,
        "commit": 0.028513297425610054,
        "pr": 0.028513297425610054,
        "and": 0.028513297425610054,
        "patch": 0.028513297425610054,
        "affected": 0.028513297425610054,
        "sections": 0.05702659485122011,
        "regenerate": 0.028513297425610054,
        "manual": 0.028513297425610054,
        "full": 0.028513297425610054,
        "partial": 0.028513297425610054,
        "regeneration": 0.028513297425610054,
        "dry": 0.05702659485122011,
        "run": 0.05702659485122011,
        "mode": 0.05702659485122011,
        "preview": 0.028513297425610054,
        "diffs": 0.028513297425610054,
        "writing": 0.028513297425610054,
        "service": 0.028513297425610054,
        "fastapi": 0.05702659485122011,
        "endpoints": 0.028513297425610054,
        "ci": 0.05702659485122011,
        "bots": 0.028513297425610054,
        "2": 0.028513297425610054,
        "repository": 0.028513297425610054,
        "scanning": 0.028513297425610054,
        "indexing": 0.028513297425610054,
        "walk": 0.028513297425610054,
        "filesystem": 0.028513297425610054,
        "with": 0.028513297425610054,
        "ignore": 0.028513297425610054,
        "rules": 0.028513297425610054,
        "gitignore": 0.028513297425610054,
        "yml": 0.028513297425610054,
        "build": 0.08553989227683016,
        "normalized": 0.028513297425610054,
        "manifest": 0.05702659485122011,
        "files": 0.05702659485122011,
        "roles": 0.028513297425610054,
        "src": 0.028513297425610054,
        "test": 0.05702659485122011,
        "config": 0.08553989227683016,
        "infra": 0.028513297425610054,
        "hash": 0.028513297425610054,
        "cache": 0.028513297425610054,
        "file": 0.028513297425610054,
        "metadata": 0.028513297425610054,
        "speed": 0.028513297425610054,
        "subsequent": 0.028513297425610054,
        "runs": 0.028513297425610054,
        "entrypoint": 0.05702659485122011,
        "detection": 0.05702659485122011,
        "e": 0.028513297425610054,
        "g": 0.028513297425610054,
        "main": 0.028513297425610054,
        "springbootapplication": 0.028513297425610054,
        "app": 0.028513297425610054,
        "monorepo": 0.05702659485122011,
        "module": 0.028513297425610054,
        "3": 0.028513297425610054,
        "analyzers": 0.14256648712805026,
        "plugin": 0.028513297425610054,
        "based": 0.028513297425610054,
        "language": 0.028513297425610054,
        "python": 0.028513297425610054,
        "java": 0.028513297425610054,
        "node": 0.028513297425610054,
        "js": 0.05702659485122011,
        "tier": 0.028513297425610054,
        "poetry": 0.028513297425610054,
        "setuptools": 0.028513297425610054,
        "maven": 0.028513297425610054,
        "gradle": 0.028513297425610054,
        "npm": 0.028513297425610054,
        "pnpm": 0.028513297425610054,
        "yarn": 0.028513297425610054,
        "dependency": 0.028513297425610054,
        "from": 0.028513297425610054,
        "pattern": 0.028513297425610054,
        "docker": 0.028513297425610054,
        "k8s": 0.028513297425610054,
        "layout": 0.028513297425610054,
        "tree": 0.028513297425610054,
        "sitter": 0.028513297425610054,
        "powered": 0.028513297425610054,
        "symbol": 0.028513297425610054,
        "extraction": 0.028513297425610054,
        "flagged": 0.028513297425610054,
        "4": 0.028513297425610054,
        "knowledge": 0.05702659485122011,
        "store": 0.028513297425610054,
        "rag": 0.028513297425610054,
        "local": 0.05702659485122011,
        "embedding": 0.028513297425610054,
        "model": 0.05702659485122011,
        "chunking": 0.028513297425610054,
        "strategy": 0.028513297425610054,
        "index": 0.028513297425610054,
        "top": 0.05702659485122011,
        "n": 0.028513297425610054,
        "source": 0.028513297425610054,
        "headers": 0.028513297425610054,
        "comments": 0.028513297425610054,
        "section": 0.14256648712805026,
        "scoped": 0.028513297425610054,
        "retrieval": 0.028513297425610054,
        "k": 0.028513297425610054,
        "per": 0.05702659485122011,
        "lightweight": 0.028513297425610054,
        "graph": 0.028513297425610054,
        "modules": 0.028513297425610054,
        "services": 0.028513297425610054,
        "signals": 0.028513297425610054,
        "5": 0.028513297425610054,
        "prompting": 0.028513297425610054,
        "templates": 0.08553989227683016,
        "jinja2": 0.028513297425610054,
        "intro": 0.028513297425610054,
        "features": 0.028513297425610054,
        "architecture": 0.05702659485122011,
        "quickstart": 0.028513297425610054,
        "deployment": 0.028513297425610054,
        "troubleshooting": 0.028513297425610054,
        "faq": 0.028513297425610054,
        "license": 0.028513297425610054,
        "guardrailed": 0.028513297425610054,
        "system": 0.028513297425610054,
        "prompt": 0.028513297425610054,
        "no": 0.028513297425610054,
        "speculation": 0.028513297425610054,
        "cite": 0.028513297425610054,
        "repo": 0.028513297425610054,
        "facts": 0.028513297425610054,
        "only": 0.028513297425610054,
        "token": 0.028513297425610054,
        "budgeting": 0.028513297425610054,
        "streaming": 0.028513297425610054,
        "by": 0.028513297425610054,
        "generation": 0.028513297425610054,
        "template": 0.028513297425610054,
        "override": 0.028513297425610054,
        "mechanism": 0.028513297425610054,
        "j2": 0.028513297425610054,
        "style": 0.028513297425610054,
        "presets": 0.028513297425610054,
        "concise": 0.028513297425610054,
        "vs": 0.028513297425610054,
        "comprehensive": 0.028513297425610054,
        "mermaid": 0.028513297425610054,
        "diagrams": 0.028513297425610054,
        "flow": 0.028513297425610054,
        "where": 0.028513297425610054,
        "appropriate": 0.028513297425610054,
        "6": 0.028513297425610054,
        "llm": 0.028513297425610054,
        "runner": 0.05702659485122011,
        "http": 0.028513297425610054,
        "adapter": 0.05702659485122011,
        "host": 0.028513297425610054,
        "container": 0.028513297425610054,
        "defaults": 0.028513297425610054,
        "env": 0.028513297425610054,
        "api": 0.028513297425610054,
        "key": 0.028513297425610054,
        "overrides": 0.028513297425610054,
        "llama": 0.028513297425610054,
        "cpp": 0.028513297425610054,
        "structured": 0.028513297425610054,
        "outputs": 0.028513297425610054,
        "tool": 0.028513297425610054,
        "use": 0.028513297425610054,
        "compatibility": 0.028513297425610054,
        "7": 0.028513297425610054,
        "post": 0.028513297425610054,
        "processing": 0.028513297425610054,
        "markdown": 0.028513297425610054,
        "lint": 0.028513297425610054,
        "heading": 0.028513297425610054,
        "hierarchy": 0.028513297425610054
      },
      "text": "# Intelligent README Generator \u2014 Feature Checklist > Status legend: \u2610 Not started \u00b7 \u25d0 In progress \u00b7 \u2714 Done > Scope tags: **[MVP]** required for proof\u2011of\u2011concept, **[NEXT]** nice\u2011to\u2011have soon, **[STRETCH]** later ## 1) Core Workflows - [x] **docgen init** \u2014 Initialize README for repos without docs **[MVP]** - [x] **docgen update** \u2014 Detect changes on commit/PR and patch affected sections **[MVP]** - [ ] **docgen regenerate** \u2014 Manual full/partial regeneration **[MVP]** - [x] Dry\u2011run mode (`--dry-run`) to preview diffs without writing **[NEXT]** - [ ] Service mode (FastAPI) endpoints for CI/bots **[STRETCH]** ## 2) Repository Scanning & Indexing - [x] Walk filesystem with ignore rules (`.gitignore`, `.docgen.yml`) **[MVP]** - [x] Build normalized manifest of files, roles (src/test/docs/config/infra) **[MVP]** - [x] Hash & cache file metadata to speed subsequent runs **[MVP]** - [x] Entrypoint detection (e.g., `main()`, `@SpringBootApplication`, FastAPI app) **[NEXT]** - [x] Monorepo module detection **[NEXT]** ## 3) Analyzers (Plugin\u2011based) - [x] Language analyzers: Python, Java, Node.js (Tier\u20111) **[MVP]** - [x] Build analyzers: Poetry/Setuptools, Maven/Gradle, npm/pnpm/yarn **[MVP]** - [x] Dependency analyzers from manifest files **[MVP]** - [x] Pattern analyzers: Docker/K8s, CI config, monorepo layout **[NEXT]** - [ ] Tree\u2011sitter powered symbol/entrypoint extraction (flagged) **[STRETCH]** ## 4) Knowledge Store (RAG) - [ ] Local embedding model + chunking strategy **[MVP]** - [ ] Index `README`, `/docs`, top N source headers & comments **[MVP]** - [ ] Section\u2011scoped retrieval (top\u2011k per section) **[MVP]** - [ ] Lightweight knowledge graph of modules/services/signals **[NEXT]** ## 5) Prompting & Templates - [x] Jinja2 templates per section (intro, features, architecture, quickstart, config, build/test, deployment, troubleshooting, FAQ, license) **[MVP]** - [x] Guardrailed system prompt (\u201cno speculation; cite repo facts only\u201d) **[MVP]** - [x] Token budgeting & streaming section-by-section generation **[MVP]** - [x] Template override mechanism (`docs/templates/*.j2`) **[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy,",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#1",
      "vector": {
        "next": 0.3907019005301633,
        "x": 0.5860528507952449,
        "style": 0.05581455721859476,
        "presets": 0.02790727860929738,
        "concise": 0.02790727860929738,
        "vs": 0.02790727860929738,
        "comprehensive": 0.02790727860929738,
        "mermaid": 0.02790727860929738,
        "js": 0.05581455721859476,
        "diagrams": 0.02790727860929738,
        "for": 0.11162911443718952,
        "architecture": 0.02790727860929738,
        "flow": 0.02790727860929738,
        "sections": 0.05581455721859476,
        "where": 0.02790727860929738,
        "appropriate": 0.02790727860929738,
        "6": 0.02790727860929738,
        "local": 0.05581455721859476,
        "llm": 0.05581455721859476,
        "runner": 0.05581455721859476,
        "model": 0.02790727860929738,
        "http": 0.02790727860929738,
        "adapter": 0.05581455721859476,
        "host": 0.02790727860929738,
        "container": 0.02790727860929738,
        "defaults": 0.05581455721859476,
        "env": 0.02790727860929738,
        "api": 0.02790727860929738,
        "key": 0.02790727860929738,
        "overrides": 0.02790727860929738,
        "mvp": 0.47442373635805546,
        "llama": 0.02790727860929738,
        "cpp": 0.02790727860929738,
        "structured": 0.02790727860929738,
        "outputs": 0.05581455721859476,
        "tool": 0.02790727860929738,
        "use": 0.02790727860929738,
        "compatibility": 0.02790727860929738,
        "stretch": 0.05581455721859476,
        "7": 0.02790727860929738,
        "post": 0.02790727860929738,
        "processing": 0.02790727860929738,
        "markdown": 0.02790727860929738,
        "lint": 0.05581455721859476,
        "heading": 0.02790727860929738,
        "hierarchy": 0.02790727860929738,
        "code": 0.05581455721859476,
        "fences": 0.02790727860929738,
        "line": 0.02790727860929738,
        "length": 0.02790727860929738,
        "auto": 0.05581455721859476,
        "toc": 0.02790727860929738,
        "level": 0.02790727860929738,
        "3": 0.02790727860929738,
        "badges": 0.02790727860929738,
        "build": 0.05581455721859476,
        "coverage": 0.05581455721859476,
        "license": 0.02790727860929738,
        "with": 0.05581455721859476,
        "safe": 0.05581455721859476,
        "link": 0.05581455721859476,
        "validator": 0.02790727860929738,
        "relative": 0.02790727860929738,
        "absolute": 0.02790727860929738,
        "managed": 0.02790727860929738,
        "markers": 0.02790727860929738,
        "idempotent": 0.02790727860929738,
        "patching": 0.02790727860929738,
        "docgen": 0.08372183582789214,
        "begin": 0.02790727860929738,
        "end": 0.02790727860929738,
        "8": 0.02790727860929738,
        "git": 0.02790727860929738,
        "integration": 0.05581455721859476,
        "diff": 0.05581455721859476,
        "detection": 0.02790727860929738,
        "map": 0.02790727860929738,
        "changed": 0.05581455721859476,
        "files": 0.05581455721859476,
        "impacted": 0.02790727860929738,
        "branch": 0.02790727860929738,
        "pr": 0.05581455721859476,
        "creation": 0.02790727860929738,
        "summary": 0.02790727860929738,
        "of": 0.02790727860929738,
        "readme": 0.11162911443718952,
        "deltas": 0.02790727860929738,
        "commit": 0.02790727860929738,
        "mode": 0.02790727860929738,
        "init": 0.02790727860929738,
        "or": 0.02790727860929738,
        "small": 0.02790727860929738,
        "changes": 0.05581455721859476,
        "configurable": 0.02790727860929738,
        "prevent": 0.02790727860929738,
        "loops": 0.02790727860929738,
        "on": 0.05581455721859476,
        "only": 0.08372183582789214,
        "9": 0.02790727860929738,
        "configuration": 0.02790727860929738,
        "parse": 0.02790727860929738,
        "yml": 0.02790727860929738,
        "analyzers": 0.02790727860929738,
        "publish": 0.02790727860929738,
        "path": 0.02790727860929738,
        "exclusions": 0.02790727860929738,
        "watched_globs": 0.02790727860929738,
        "ci": 0.08372183582789214,
        "triggers": 0.02790727860929738,
        "per": 0.05581455721859476,
        "section": 0.02790727860929738,
        "off": 0.02790727860929738,
        "toggles": 0.02790727860929738,
        "and": 0.08372183582789214,
        "titles": 0.02790727860929738,
        "10": 0.02790727860929738,
        "github": 0.02790727860929738,
        "actions": 0.02790727860929738,
        "example": 0.02790727860929738,
        "workflow": 0.02790727860929738,
        "gitlab": 0.02790727860929738,
        "bitbucket": 0.02790727860929738,
        "pipelines": 0.02790727860929738,
        "samples": 0.02790727860929738,
        "labeling": 0.02790727860929738,
        "docs": 0.02790727860929738,
        "update": 0.02790727860929738,
        "behavior": 0.02790727860929738,
        "11": 0.02790727860929738,
        "security": 0.02790727860929738,
        "privacy": 0.02790727860929738,
        "models": 0.02790727860929738,
        "never": 0.02790727860929738,
        "exfiltrate": 0.02790727860929738,
        "respect": 0.02790727860929738,
        "gitignore": 0.02790727860929738,
        "exclude": 0.02790727860929738,
        "large": 0.02790727860929738,
        "binaries": 0.02790727860929738,
        "secrets": 0.02790727860929738,
        "optional": 0.02790727860929738,
        "simple": 0.02790727860929738,
        "secret": 0.02790727860929738,
        "scanner": 0.02790727860929738,
        "gate": 0.02790727860929738,
        "12": 0.02790727860929738,
        "multi": 0.02790727860929738,
        "language": 0.02790727860929738,
        "project": 0.02790727860929738,
        "types": 0.02790727860929738,
        "tier": 0.05581455721859476,
        "1": 0.02790727860929738,
        "python": 0.02790727860929738,
        "poetry": 0.02790727860929738,
        "setuptools": 0.02790727860929738,
        "java": 0.02790727860929738,
        "maven": 0.02790727860929738,
        "gradle": 0.02790727860929738,
        "spring": 0.02790727860929738,
        "boot": 0.02790727860929738,
        "node": 0.02790727860929738,
        "npm": 0.02790727860929738,
        "pnpm": 0.02790727860929738,
        "express": 0.02790727860929738,
        "2": 0.02790727860929738,
        "go": 0.02790727860929738,
        "rust": 0.02790727860929738,
        "ruby": 0.02790727860929738,
        "php": 0.02790727860929738,
        "framework": 0.02790727860929738,
        "aware": 0.02790727860929738,
        "quickstart": 0.02790727860929738,
        "commands": 0.02790727860929738,
        "system": 0.02790727860929738,
        "13": 0.02790727860929738,
        "quality": 0.02790727860929738,
        "gates": 0.02790727860929738,
        "evaluation": 0.02790727860929738,
        "command": 0.02790727860929738,
        "validation": 0.02790727860929738,
        "existence": 0.02790727860929738,
        "checks": 0.05581455721859476,
        "no": 0.02790727860929738,
        "hallucination": 0.02790727860929738,
        "reject": 0.02790727860929738,
        "facts": 0.02790727860929738,
        "not": 0.02790727860929738,
        "in": 0.02790727860929738,
        "signals": 0.02790727860929738,
        "rag": 0.05581455721859476,
        "scorecard": 0.02790727860929738,
        "buildability": 0.02790727860929738,
        "validity": 0.02790727860929738,
        "alignment": 0.02790727860929738,
        "14": 0.02790727860929738,
        "performance": 0.02790727860929738,
        "caching": 0.02790727860929738,
        "persist": 0.02790727860929738,
        "analyzer": 0.02790727860929738,
        "embeddings": 0.02790727860929738,
        "under": 0.02790727860929738,
        "incremental": 0.02790727860929738,
        "refresh": 0.02790727860929738,
        "15": 0.02790727860929738,
        "error": 0.02790727860929738,
        "handling": 0.02790727860929738,
        "ux": 0.02790727860929738,
        "fail": 0.02790727860929738,
        "stub": 0.02790727860929738,
        "generation": 0.02790727860929738,
        "when": 0.02790727860929738,
        "evidence": 0.02790727860929738
      },
      "text": "**[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy, code fences, line length **[MVP]** - [x] Auto ToC (\u2264 level 3) **[MVP]** - [x] Badges (build, coverage, license) with safe defaults **[NEXT]** - [x] Link validator (relative/absolute) **[NEXT]** - [x] Managed markers for idempotent patching (`<!-- docgen:begin:end -->`) **[MVP]** ## 8) Git Integration - [x] Diff detection (map changed files \u2192 impacted sections) **[MVP]** - [x] Branch + PR creation with summary of README deltas **[MVP]** - [x] Commit mode for init or small changes (configurable) **[NEXT]** - [ ] Prevent loops on README\u2011only changes **[MVP]** ## 9) Configuration - [x] Parse `.docgen.yml` (LLM, readme style, analyzers, publish) **[MVP]** - [x] Path exclusions & `watched_globs` for CI triggers **[MVP]** - [ ] Per-section on/off toggles and titles **[NEXT]** ## 10) CI Integration - [x] GitHub Actions example workflow **[MVP]** - [ ] GitLab CI and Bitbucket Pipelines samples **[NEXT]** - [x] Labeling (`docs:auto`) and PR update behavior **[NEXT]** ## 11) Security & Privacy - [x] Local-only models; never exfiltrate code **[MVP]** - [ ] Respect `.gitignore`; exclude large binaries/secrets **[MVP]** - [ ] Optional simple secret scanner gate **[NEXT]** ## 12) Multi\u2011Language & Project Types - [ ] Tier\u20111: Python (Poetry/Setuptools), Java (Maven/Gradle/Spring Boot), Node.js (npm/pnpm/Express/Next) **[MVP]** - [ ] Tier\u20112: Go, Rust, Ruby, PHP **[STRETCH]** - [x] Framework\u2011aware quickstart commands per build system **[MVP]** ## 13) Quality Gates & Evaluation - [ ] Command validation (existence checks) **[MVP]** - [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#2",
      "vector": {
        "no": 0.07018624063435965,
        "hallucination": 0.07018624063435965,
        "checks": 0.07018624063435965,
        "reject": 0.07018624063435965,
        "facts": 0.07018624063435965,
        "not": 0.07018624063435965,
        "in": 0.07018624063435965,
        "signals": 0.07018624063435965,
        "rag": 0.1403724812687193,
        "mvp": 0.42111744380615784,
        "x": 0.49130368444051753,
        "readme": 0.1403724812687193,
        "scorecard": 0.07018624063435965,
        "coverage": 0.07018624063435965,
        "buildability": 0.07018624063435965,
        "link": 0.07018624063435965,
        "validity": 0.07018624063435965,
        "diff": 0.07018624063435965,
        "alignment": 0.07018624063435965,
        "lint": 0.1403724812687193,
        "next": 0.21055872190307892,
        "14": 0.07018624063435965,
        "performance": 0.07018624063435965,
        "caching": 0.07018624063435965,
        "persist": 0.07018624063435965,
        "analyzer": 0.1403724812687193,
        "outputs": 0.07018624063435965,
        "embeddings": 0.07018624063435965,
        "under": 0.07018624063435965,
        "docgen": 0.07018624063435965,
        "incremental": 0.07018624063435965,
        "refresh": 0.07018624063435965,
        "changed": 0.07018624063435965,
        "files": 0.07018624063435965,
        "only": 0.07018624063435965,
        "15": 0.07018624063435965,
        "error": 0.07018624063435965,
        "handling": 0.07018624063435965,
        "ux": 0.07018624063435965,
        "fail": 0.07018624063435965,
        "safe": 0.07018624063435965,
        "stub": 0.07018624063435965,
        "generation": 0.07018624063435965,
        "when": 0.07018624063435965,
        "evidence": 0.07018624063435965,
        "is": 0.07018624063435965,
        "insufficient": 0.07018624063435965,
        "clear": 0.07018624063435965,
        "run": 0.07018624063435965,
        "logs": 0.07018624063435965,
        "pr": 0.07018624063435965,
        "body": 0.07018624063435965,
        "with": 0.07018624063435965,
        "rationale": 0.07018624063435965,
        "sections": 0.07018624063435965,
        "updated": 0.07018624063435965,
        "because": 0.07018624063435965,
        "helpful": 0.07018624063435965,
        "cli": 0.07018624063435965,
        "errors": 0.07018624063435965,
        "and": 0.1403724812687193,
        "verbose": 0.07018624063435965,
        "flag": 0.07018624063435965,
        "works": 0.07018624063435965,
        "pre": 0.07018624063435965,
        "post": 0.07018624063435965,
        "subcommand": 0.07018624063435965,
        "16": 0.07018624063435965,
        "extensibility": 0.07018624063435965,
        "abc": 0.07018624063435965,
        "plugin": 0.07018624063435965,
        "discovery": 0.07018624063435965,
        "template": 0.07018624063435965,
        "packs": 0.07018624063435965,
        "org": 0.07018624063435965,
        "style": 0.1403724812687193,
        "definition": 0.07018624063435965,
        "of": 0.07018624063435965,
        "done": 0.07018624063435965,
        "per": 0.07018624063435965,
        "section": 0.07018624063435965,
        "passing": 0.07018624063435965,
        "unit": 0.07018624063435965,
        "integration": 0.07018624063435965,
        "tests": 0.07018624063435965,
        "for": 0.07018624063435965,
        "core": 0.07018624063435965,
        "logic": 0.07018624063435965,
        "golden": 0.07018624063435965,
        "regression": 0.07018624063435965,
        "test": 0.07018624063435965,
        "s": 0.07018624063435965,
        "meets": 0.07018624063435965,
        "requirements": 0.07018624063435965
      },
      "text": "- [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence is insufficient **[MVP]** - [ ] Clear run logs + PR body with rationale (\u201csections updated because\u2026\u201d) **[MVP]** - [x] Helpful CLI errors and `--verbose` flag (works pre/post subcommand) **[MVP]** ## 16) Extensibility - [x] Analyzer ABC and plugin discovery **[MVP]** - [x] Template packs (org\u2011style) **[NEXT]** --- ### Definition of Done (per section) - [ ] Passing unit & integration tests for core logic - [ ] Golden README regression test(s) - [ ] Meets lint/style requirements",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_order.md#0",
      "vector": {
        "docgen": 0.23979625973207228,
        "development": 0.029974532466509034,
        "roadmap": 0.029974532466509034,
        "phase": 0.20982172726556325,
        "0": 0.029974532466509034,
        "bootstrap": 0.029974532466509034,
        "the": 0.029974532466509034,
        "skeleton": 0.05994906493301807,
        "1": 0.3596943895981084,
        "project": 0.029974532466509034,
        "cli": 0.05994906493301807,
        "config": 0.11989812986603614,
        "loader": 0.029974532466509034,
        "yml": 0.029974532466509034,
        "models": 0.029974532466509034,
        "covers": 0.47959251946414455,
        "commands": 0.029974532466509034,
        "scaffolding": 0.029974532466509034,
        "9": 0.05994906493301807,
        "parse": 0.029974532466509034,
        "16": 0.05994906493301807,
        "analyzer": 0.05994906493301807,
        "abc": 0.05994906493301807,
        "2": 0.23979625973207228,
        "plugin": 0.05994906493301807,
        "discovery": 0.05994906493301807,
        "init": 0.11989812986603614,
        "happy": 0.029974532466509034,
        "path": 0.05994906493301807,
        "single": 0.029974532466509034,
        "repo": 0.11989812986603614,
        "local": 0.11989812986603614,
        "scanner": 0.029974532466509034,
        "manifest": 0.05994906493301807,
        "roles": 0.029974532466509034,
        "hashing": 0.029974532466509034,
        "ignores": 0.05994906493301807,
        "walk": 0.029974532466509034,
        "fs": 0.029974532466509034,
        "cache": 0.029974532466509034,
        "tier": 0.029974532466509034,
        "analyzers": 0.0899235973995271,
        "python": 0.029974532466509034,
        "java": 0.029974532466509034,
        "node": 0.029974532466509034,
        "build": 0.05994906493301807,
        "dependency": 0.029974532466509034,
        "3": 0.0899235973995271,
        "language": 0.05994906493301807,
        "deps": 0.029974532466509034,
        "templates": 0.05994906493301807,
        "prompt": 0.05994906493301807,
        "builder": 0.029974532466509034,
        "section": 0.14987266233254518,
        "by": 0.029974532466509034,
        "guardrailed": 0.029974532466509034,
        "system": 0.029974532466509034,
        "5": 0.11989812986603614,
        "jinja2": 0.029974532466509034,
        "guardrails": 0.029974532466509034,
        "token": 0.029974532466509034,
        "budget": 0.029974532466509034,
        "4": 0.0899235973995271,
        "llm": 0.029974532466509034,
        "runner": 0.029974532466509034,
        "ollama": 0.05994906493301807,
        "adapter": 0.029974532466509034,
        "6": 0.0899235973995271,
        "post": 0.029974532466509034,
        "processor": 0.029974532466509034,
        "managed": 0.029974532466509034,
        "markers": 0.0899235973995271,
        "toc": 0.05994906493301807,
        "markdown": 0.029974532466509034,
        "lint": 0.05994906493301807,
        "7": 0.029974532466509034,
        "git": 0.05994906493301807,
        "publisher": 0.05994906493301807,
        "commit": 0.05994906493301807,
        "mode": 0.05994906493301807,
        "for": 0.05994906493301807,
        "only": 0.0899235973995271,
        "8": 0.0899235973995271,
        "end": 0.05994906493301807,
        "to": 0.029974532466509034,
        "milestone": 0.0899235973995271,
        "generates": 0.029974532466509034,
        "a": 0.0899235973995271,
        "clean": 0.029974532466509034,
        "readme": 0.05994906493301807,
        "with": 0.0899235973995271,
        "no": 0.0899235973995271,
        "docs": 0.05994906493301807,
        "update": 0.11989812986603614,
        "on": 0.029974532466509034,
        "change": 0.05994906493301807,
        "pr": 0.14987266233254518,
        "workflow": 0.029974532466509034,
        "diff": 0.05994906493301807,
        "detection": 0.05994906493301807,
        "mapping": 0.05994906493301807,
        "patching": 0.029974532466509034,
        "inside": 0.029974532466509034,
        "prevent": 0.029974532466509034,
        "loops": 0.029974532466509034,
        "branch": 0.05994906493301807,
        "delta": 0.029974532466509034,
        "summary": 0.029974532466509034,
        "10": 0.05994906493301807,
        "labeling": 0.029974532466509034,
        "later": 0.029974532466509034,
        "opens": 0.029974532466509034,
        "updating": 0.029974532466509034,
        "impacted": 0.029974532466509034,
        "sections": 0.029974532466509034,
        "minimal": 0.029974532466509034,
        "rag": 0.05994906493301807,
        "accuracy": 0.029974532466509034,
        "lite": 0.029974532466509034,
        "embed": 0.029974532466509034,
        "top": 0.029974532466509034,
        "n": 0.029974532466509034,
        "source": 0.029974532466509034,
        "headers": 0.029974532466509034,
        "scoped": 0.029974532466509034,
        "retrieval": 0.05994906493301807,
        "embedding": 0.029974532466509034,
        "index": 0.029974532466509034,
        "sources": 0.029974532466509034,
        "per": 0.029974532466509034,
        "hallucination": 0.05994906493301807,
        "command": 0.05994906493301807,
        "existence": 0.029974532466509034,
        "checks": 0.029974532466509034,
        "13": 0.029974532466509034,
        "validation": 0.029974532466509034,
        "outputs": 0.029974532466509034,
        "grounded": 0.029974532466509034,
        "in": 0.029974532466509034,
        "facts": 0.029974532466509034,
        "targeted": 0.029974532466509034,
        "context": 0.029974532466509034,
        "hardening": 0.029974532466509034,
        "dx": 0.029974532466509034,
        "error": 0.029974532466509034,
        "handling": 0.029974532466509034,
        "clear": 0.029974532466509034,
        "logs": 0.05994906493301807,
        "verbose": 0.029974532466509034,
        "fail": 0.05994906493301807,
        "safe": 0.05994906493301807,
        "stubs": 0.029974532466509034,
        "15": 0.029974532466509034,
        "ux": 0.029974532466509034,
        "security": 0.029974532466509034,
        "gitignore": 0.029974532466509034,
        "respect": 0.029974532466509034,
        "excludes": 0.05994906493301807,
        "enforcement": 0.029974532466509034,
        "11": 0.029974532466509034,
        "privacy": 0.029974532466509034,
        "ci": 0.029974532466509034,
        "integration": 0.029974532466509034,
        "polish": 0.029974532466509034,
        "github": 0.029974532466509034,
        "actions": 0.05994906493301807,
        "sample": 0.029974532466509034,
        "push": 0.029974532466509034,
        "trigger": 0.029974532466509034,
        "calling": 0.029974532466509034,
        "gh": 0.029974532466509034,
        "refinements": 0.029974532466509034,
        "watched": 0.029974532466509034,
        "globs": 0.029974532466509034,
        "style": 0.05994906493301807,
        "preset": 0.029974532466509034,
        "concise": 0.029974532466509034,
        "comprehensive": 0.029974532466509034,
        "watched_globs": 0.029974532466509034,
        "presets": 0.029974532466509034,
        "multi": 0.029974532466509034,
        "breadth": 0.029974532466509034,
        "framework": 0.029974532466509034,
        "smarts": 0.029974532466509034,
        "entrypoint": 0.029974532466509034,
        "main": 0.029974532466509034,
        "spring": 0.029974532466509034,
        "boot": 0.029974532466509034,
        "fastapi": 0.029974532466509034
      },
      "text": "# DocGen Development Roadmap ## Phase 0 \u2014 Bootstrap the skeleton 1. **Project skeleton + CLI (`docgen`) + config loader (`.docgen.yml`) + models** * Covers: 1 (commands scaffolding), 9 (parse config), 16 (Analyzer ABC) 2. **Analyzer plugin ABC & discovery** * Covers: 16 (plugin discovery) ## Phase 1 \u2014 \"Init\" happy-path (single repo, local) 1. **Repo scanner & manifest (roles, hashing, ignores)** * Covers: 2 (walk FS, manifest, cache, ignores) 2. **Tier-1 analyzers (Python, Java, Node) + build analyzers + dependency analyzers** * Covers: 3 (language/build/deps) 3. **Templates + prompt builder (section-by-section) + guardrailed system prompt** * Covers: 5 (Jinja2 templates, guardrails, token budget) 4. **Local LLM runner (Ollama adapter)** * Covers: 6 (Ollama) 5. **Post-processor: managed markers, ToC, markdown lint** * Covers: 7 (markers, ToC, lint) 6. **Git publisher: commit mode (for init only)** * Covers: 8 (commit mode), 1 (`docgen init` end-to-end) \u2705 **Milestone**: `docgen init` generates a clean README for a repo with no docs. ## Phase 2 \u2014 Update-on-change (PR workflow) 1. **Diff detection + change\u2192section mapping + patching inside markers** * Covers: 8 (diff mapping, prevent loops), 1 (`docgen update`) 2. **Git publisher: branch + PR with delta summary** * Covers: 8 (branch/PR), 10 (labeling later) \u2705 **Milestone**: `docgen update` opens a PR updating only impacted sections. ## Phase 3 \u2014 Minimal RAG & accuracy 1. **RAG Lite: embed README/docs/top N source headers; section-scoped retrieval** * Covers: 4 (local embedding, index sources, per-section retrieval) 2. **No-hallucination & command existence checks** * Covers: 13 (command validation, no-hallucination) \u2705 **Milestone**: outputs grounded in repo facts with targeted context. ## Phase 4 \u2014 Hardening & DX 1. **Error handling, clear logs, `--verbose`, fail-safe stubs** * Covers: 15 (fail-safe, logs, CLI UX) 2. **Security: .gitignore respect, path excludes, local-only enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI)",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/feature_order.md#1",
      "vector": {
        "enforcement": 0.04252432555625623,
        "covers": 0.4252432555625623,
        "11": 0.04252432555625623,
        "privacy": 0.04252432555625623,
        "excludes": 0.04252432555625623,
        "phase": 0.17009730222502492,
        "5": 0.12757297666876868,
        "ci": 0.12757297666876868,
        "integration": 0.04252432555625623,
        "config": 0.12757297666876868,
        "polish": 0.08504865111251246,
        "1": 0.25514595333753737,
        "github": 0.04252432555625623,
        "actions": 0.08504865111251246,
        "sample": 0.04252432555625623,
        "push": 0.04252432555625623,
        "pr": 0.17009730222502492,
        "trigger": 0.04252432555625623,
        "calling": 0.04252432555625623,
        "docgen": 0.12757297666876868,
        "update": 0.04252432555625623,
        "10": 0.08504865111251246,
        "gh": 0.04252432555625623,
        "2": 0.21262162778128116,
        "refinements": 0.04252432555625623,
        "watched": 0.04252432555625623,
        "globs": 0.04252432555625623,
        "style": 0.08504865111251246,
        "preset": 0.04252432555625623,
        "concise": 0.04252432555625623,
        "comprehensive": 0.04252432555625623,
        "9": 0.04252432555625623,
        "watched_globs": 0.04252432555625623,
        "presets": 0.04252432555625623,
        "6": 0.08504865111251246,
        "multi": 0.04252432555625623,
        "language": 0.08504865111251246,
        "breadth": 0.08504865111251246,
        "framework": 0.17009730222502492,
        "smarts": 0.04252432555625623,
        "entrypoint": 0.04252432555625623,
        "detection": 0.04252432555625623,
        "main": 0.04252432555625623,
        "spring": 0.04252432555625623,
        "boot": 0.04252432555625623,
        "fastapi": 0.08504865111251246,
        "aware": 0.08504865111251246,
        "quick": 0.04252432555625623,
        "start": 0.04252432555625623,
        "entrypoints": 0.04252432555625623,
        "12": 0.04252432555625623,
        "commands": 0.04252432555625623,
        "pattern": 0.08504865111251246,
        "analyzers": 0.08504865111251246,
        "docker": 0.04252432555625623,
        "k8s": 0.04252432555625623,
        "monorepo": 0.04252432555625623,
        "layout": 0.04252432555625623,
        "3": 0.12757297666876868,
        "7": 0.12757297666876868,
        "quality": 0.08504865111251246,
        "gates": 0.08504865111251246,
        "performance": 0.08504865111251246,
        "readme": 0.08504865111251246,
        "scorecard": 0.08504865111251246,
        "link": 0.08504865111251246,
        "validator": 0.08504865111251246,
        "badges": 0.08504865111251246,
        "13": 0.04252432555625623,
        "artifact": 0.04252432555625623,
        "embedding": 0.04252432555625623,
        "caching": 0.08504865111251246,
        "in": 0.04252432555625623,
        "incremental": 0.08504865111251246,
        "rag": 0.12757297666876868,
        "refresh": 0.08504865111251246,
        "14": 0.04252432555625623,
        "persist": 0.04252432555625623,
        "outputs": 0.04252432555625623,
        "8": 0.04252432555625623,
        "nice": 0.04252432555625623,
        "to": 0.12757297666876868,
        "have": 0.04252432555625623,
        "stretch": 0.04252432555625623,
        "dry": 0.08504865111251246,
        "run": 0.08504865111251246,
        "mode": 0.12757297666876868,
        "labeling": 0.08504865111251246,
        "updates": 0.08504865111251246,
        "commit": 0.08504865111251246,
        "policy": 0.04252432555625623,
        "tuning": 0.04252432555625623,
        "template": 0.12757297666876868,
        "overrides": 0.04252432555625623,
        "docs": 0.04252432555625623,
        "templates": 0.04252432555625623,
        "j2": 0.04252432555625623,
        "org": 0.04252432555625623,
        "packs": 0.08504865111251246,
        "override": 0.04252432555625623,
        "16": 0.04252432555625623,
        "service": 0.08504865111251246,
        "llama": 0.08504865111251246,
        "cpp": 0.08504865111251246,
        "adapter": 0.04252432555625623,
        "tree": 0.08504865111251246,
        "sitter": 0.08504865111251246,
        "extraction": 0.04252432555625623,
        "why": 0.04252432555625623,
        "this": 0.04252432555625623,
        "order": 0.04252432555625623,
        "fastest": 0.04252432555625623,
        "path": 0.04252432555625623,
        "value": 0.04252432555625623,
        "get": 0.04252432555625623,
        "init": 0.04252432555625623,
        "producing": 0.04252432555625623,
        "a": 0.04252432555625623,
        "solid": 0.04252432555625623,
        "before": 0.04252432555625623,
        "adding": 0.04252432555625623,
        "diffing": 0.04252432555625623,
        "contain": 0.04252432555625623,
        "risk": 0.04252432555625623,
        "early": 0.04252432555625623,
        "section": 0.04252432555625623,
        "markers": 0.04252432555625623,
        "lint": 0.04252432555625623,
        "and": 0.12757297666876868,
        "publishing": 0.04252432555625623,
        "ensure": 0.04252432555625623,
        "safe": 0.04252432555625623,
        "idempotent": 0.04252432555625623,
        "edits": 0.04252432555625623,
        "accuracy": 0.04252432555625623,
        "next": 0.04252432555625623,
        "add": 0.04252432555625623,
        "validation": 0.04252432555625623,
        "avoid": 0.04252432555625623,
        "hallucinations": 0.04252432555625623,
        "once": 0.04252432555625623,
        "the": 0.08504865111251246,
        "pipeline": 0.04252432555625623,
        "works": 0.04252432555625623,
        "scale": 0.04252432555625623,
        "later": 0.04252432555625623,
        "only": 0.04252432555625623,
        "after": 0.04252432555625623,
        "core": 0.04252432555625623,
        "loop": 0.04252432555625623,
        "is": 0.04252432555625623,
        "robust": 0.04252432555625623,
        "do": 0.04252432555625623,
        "we": 0.04252432555625623,
        "widen": 0.04252432555625623,
        "coverage": 0.04252432555625623,
        "last": 0.04252432555625623,
        "refine": 0.04252432555625623,
        "dev": 0.04252432555625623,
        "experience": 0.04252432555625623
      },
      "text": "enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI) + framework-aware Quick Start** * Covers: 2 (entrypoints), 12 (framework-aware commands) 2. **Pattern analyzers (Docker/K8s, CI config, monorepo layout)** * Covers: 3 (pattern analyzers) ## Phase 7 \u2014 Quality gates & performance 1. **README scorecard + link validator + badges** * Covers: 13 (scorecard), 7 (link validator), 7 (badges) 2. **Artifact & embedding caching in `.docgen/` + incremental RAG refresh** * Covers: 14 (persist outputs, incremental refresh) ## Phase 8 \u2014 \"Nice to have\" & stretch 1. **Dry-run mode, PR labeling/updates, commit/PR policy tuning** * Covers: 1 (dry-run), 10 (labeling/PR updates) 2. **Template overrides (`docs/templates/*.j2`) & org template packs** * Covers: 5 (override), 16 (template packs) 3. **Service mode (FastAPI), llama.cpp adapter, tree-sitter extraction** * Covers: 1 (service mode), 6 (llama.cpp), 3 (tree-sitter) ## Why this order * **Fastest path to value**: get `docgen init` producing a solid README before adding diffing/RAG. * **Contain risk early**: section markers, lint, and commit publishing ensure safe/idempotent edits. * **Accuracy next**: add RAG + validation to avoid hallucinations once the pipeline works. * **Scale breadth later**: only after the core loop is robust do we widen language/framework coverage. * **Polish last**: CI, caching, and quality gates refine dev experience and performance.",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/spec.md#0",
      "vector": {
        "intelligent": 0.04393747751637468,
        "readme": 0.17574991006549873,
        "generator": 0.04393747751637468,
        "architecture": 0.08787495503274936,
        "spec": 0.04393747751637468,
        "python": 0.08787495503274936,
        "local": 0.13181243254912403,
        "llm": 0.13181243254912403,
        "1": 0.08787495503274936,
        "purpose": 0.04393747751637468,
        "scope": 0.04393747751637468,
        "build": 0.17574991006549873,
        "a": 0.26362486509824806,
        "based": 0.04393747751637468,
        "system": 0.04393747751637468,
        "that": 0.04393747751637468,
        "analyzes": 0.04393747751637468,
        "git": 0.26362486509824806,
        "repository": 0.04393747751637468,
        "structure": 0.04393747751637468,
        "code": 0.04393747751637468,
        "dependencies": 0.04393747751637468,
        "then": 0.04393747751637468,
        "generates": 0.04393747751637468,
        "and": 0.2196873875818734,
        "maintains": 0.04393747751637468,
        "high": 0.08787495503274936,
        "quality": 0.04393747751637468,
        "md": 0.04393747751637468,
        "using": 0.04393747751637468,
        "it": 0.04393747751637468,
        "initializes": 0.04393747751637468,
        "repos": 0.04393747751637468,
        "with": 0.08787495503274936,
        "no": 0.04393747751637468,
        "docs": 0.17574991006549873,
        "keeps": 0.04393747751637468,
        "up": 0.04393747751637468,
        "to": 0.2196873875818734,
        "date": 0.04393747751637468,
        "on": 0.04393747751637468,
        "commits": 0.04393747751637468,
        "prs": 0.04393747751637468,
        "supports": 0.08787495503274936,
        "multiple": 0.04393747751637468,
        "languages": 0.04393747751637468,
        "project": 0.04393747751637468,
        "types": 0.04393747751637468,
        "via": 0.04393747751637468,
        "analyzers": 0.08787495503274936,
        "non": 0.04393747751637468,
        "goals": 0.04393747751637468,
        "for": 0.08787495503274936,
        "the": 0.04393747751637468,
        "poc": 0.04393747751637468,
        "multi": 0.04393747751637468,
        "repo": 0.2196873875818734,
        "orchestration": 0.04393747751637468,
        "full": 0.08787495503274936,
        "website": 0.04393747751637468,
        "api": 0.04393747751637468,
        "reference": 0.04393747751637468,
        "extraction": 0.04393747751637468,
        "beyond": 0.04393747751637468,
        "summaries": 0.04393747751637468,
        "cloud": 0.04393747751637468,
        "llms": 0.04393747751637468,
        "2": 0.08787495503274936,
        "level": 0.04393747751637468,
        "at": 0.04393747751637468,
        "glance": 0.04393747751637468,
        "events": 0.04393747751637468,
        "event": 0.04393747751637468,
        "sources": 0.04393747751637468,
        "cli": 0.04393747751637468,
        "commands": 0.04393747751637468,
        "hooks": 0.04393747751637468,
        "webhooks": 0.04393747751637468,
        "ci": 0.08787495503274936,
        "commit": 0.08787495503274936,
        "pr": 0.08787495503274936,
        "orchestr": 0.04393747751637468,
        "async": 0.04393747751637468,
        "task": 0.04393747751637468,
        "graph": 0.08787495503274936,
        "scanner": 0.08787495503274936,
        "doc": 0.04393747751637468,
        "store": 0.04393747751637468,
        "indexer": 0.08787495503274936,
        "language": 0.08787495503274936,
        "artifacts": 0.08787495503274936,
        "fs": 0.04393747751637468,
        "deps": 0.04393747751637468,
        "cache": 0.04393747751637468,
        "versions": 0.04393747751637468,
        "knowledge": 0.04393747751637468,
        "embeddings": 0.04393747751637468,
        "prompt": 0.04393747751637468,
        "builder": 0.04393747751637468,
        "templates": 0.04393747751637468,
        "rag": 0.04393747751637468,
        "runner": 0.04393747751637468,
        "llama": 0.04393747751637468,
        "cpp": 0.04393747751637468,
        "ollama": 0.04393747751637468,
        "post": 0.04393747751637468,
        "processor": 0.04393747751637468,
        "lint": 0.04393747751637468,
        "toc": 0.04393747751637468,
        "badges": 0.04393747751637468,
        "links": 0.04393747751637468,
        "publisher": 0.04393747751637468,
        "branch": 0.04393747751637468,
        "3": 0.13181243254912403,
        "components": 0.04393747751637468,
        "responsibilities": 0.04393747751637468,
        "orchestrator": 0.04393747751637468,
        "coordinates": 0.04393747751637468,
        "end": 0.08787495503274936,
        "pipelines": 0.04393747751637468,
        "init": 0.04393747751637468,
        "update": 0.08787495503274936,
        "regenerate": 0.08787495503274936,
        "computes": 0.04393747751637468,
        "change": 0.04393747751637468,
        "impact": 0.04393747751637468,
        "from": 0.04393747751637468,
        "diff": 0.04393747751637468,
        "decides": 0.04393747751637468,
        "whether": 0.04393747751637468,
        "or": 0.04393747751637468,
        "patch": 0.04393747751637468,
        "sections": 0.04393747751637468,
        "schedules": 0.04393747751637468,
        "tasks": 0.04393747751637468,
        "caches": 0.04393747751637468,
        "intermediate": 0.04393747751637468,
        "results": 0.04393747751637468,
        "emits": 0.04393747751637468,
        "structured": 0.04393747751637468,
        "logs": 0.04393747751637468,
        "info": 0.04393747751637468,
        "by": 0.04393747751637468,
        "default": 0.04393747751637468,
        "debug": 0.04393747751637468,
        "verbose": 0.04393747751637468,
        "respects": 0.04393747751637468,
        "docgen": 0.13181243254912403,
        "yml": 0.04393747751637468,
        "watched_globs": 0.04393747751637468,
        "skip": 0.04393747751637468,
        "unrelated": 0.04393747751637468,
        "diffs": 0.04393747751637468,
        "substitutes": 0.04393747751637468,
        "fail": 0.04393747751637468,
        "safe": 0.04393747751637468,
        "stubs": 0.04393747751637468,
        "when": 0.04393747751637468,
        "generation": 0.04393747751637468,
        "fails": 0.04393747751637468,
        "dry": 0.08787495503274936,
        "run": 0.13181243254912403,
        "previews": 0.04393747751637468,
        "records": 0.04393747751637468,
        "scorecards": 0.04393747751637468,
        "each": 0.04393747751637468,
        "under": 0.04393747751637468,
        "walks": 0.04393747751637468,
        "builds": 0.04393747751637468,
        "normalized": 0.04393747751637468,
        "manifest": 0.04393747751637468,
        "files": 0.08787495503274936,
        "sizes": 0.04393747751637468,
        "tags": 0.04393747751637468,
        "path": 0.04393747751637468,
        "roles": 0.04393747751637468,
        "src": 0.04393747751637468,
        "test": 0.08787495503274936,
        "examples": 0.04393747751637468,
        "dependency": 0.04393747751637468,
        "manifests": 0.04393747751637468,
        "e": 0.04393747751637468,
        "g": 0.04393747751637468,
        "pom": 0.04393747751637468,
        "xml": 0.04393747751637468,
        "gradle": 0.04393747751637468,
        "package": 0.04393747751637468,
        "json": 0.13181243254912403,
        "requirements": 0.04393747751637468,
        "txt": 0.04393747751637468,
        "pyproject": 0.04393747751637468,
        "toml": 0.08787495503274936,
        "go": 0.04393747751637468,
        "mod": 0.04393747751637468,
        "cargo": 0.04393747751637468,
        "gemfile": 0.04393747751637468,
        "composer": 0.04393747751637468,
        "entrypoints": 0.04393747751637468,
        "clis": 0.04393747751637468,
        "services": 0.04393747751637468,
        "coverage": 0.04393747751637468,
        "if": 0.04393747751637468,
        "available": 0.04393747751637468,
        "stores": 0.04393747751637468,
        "per": 0.04393747751637468,
        "index": 0.04393747751637468,
        "speed": 0.04393747751637468,
        "future": 0.04393747751637468
      },
      "text": "# Intelligent README Generator \u2014 Architecture & Spec (Python, Local LLM) ## 1) Purpose & Scope Build a Python-based system that **analyzes a Git repository** (structure, code, dependencies), then **generates and maintains a high-quality README.md** using a **local LLM**. It initializes repos with no docs and **keeps docs up to date** on commits/PRs. Supports **multiple languages/project types** via analyzers. Non-goals (for the POC): multi-repo orchestration, full website docs, API reference extraction (beyond README summaries), cloud LLMs. --- ## 2) High-Level Architecture (at a glance) ``` \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 Git Events \u2502 Event Sources \u2502 CLI commands, Git hooks, Webhooks/CI (commit/PR) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Orchestr \u2502 (Async task graph) \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Repo Scanner\u2502 \u2502 Analyzers \u2502 \u2502 Doc Store \u2502 \u2502 + Indexer \u2502 \u2502 (Language, \u2502 \u2502 (Artifacts, \u2502 \u2502 (Git, FS) \u2502 \u2502 Build, Deps) \u2502 \u2502 Cache, \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 Versions) \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 Knowledge Graph \u2502 \u2502 \u2502 \u2502 & Embeddings \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Prompt Builder \u2502 (Templates + RAG) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Local LLM Runner \u2502 (llama.cpp/Ollama) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 Post-Processor \u2502 (lint, ToC, badges, links) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Git Publisher \u2502 (branch/PR/commit) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 ``` --- ## 3) Components & Responsibilities ### 3.1 Orchestrator * Coordinates end-to-end pipelines (init, update, regenerate). * Computes *change impact* from Git diff; decides whether to regenerate full README or patch sections. * Schedules tasks and caches intermediate results. * Emits structured logs (info by default, debug with `--verbose`), respects `.docgen.yml` `ci.watched_globs` to skip unrelated diffs, and substitutes fail-safe stubs when generation fails. * Supports dry-run previews (`docgen update --dry-run`) and records scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#1",
      "vector": {
        "scorecards": 0.03721614637823934,
        "for": 0.18608073189119673,
        "each": 0.07443229275647868,
        "run": 0.07443229275647868,
        "under": 0.07443229275647868,
        "docgen": 0.11164843913471803,
        "3": 0.22329687826943606,
        "2": 0.03721614637823934,
        "repo": 0.18608073189119673,
        "scanner": 0.03721614637823934,
        "indexer": 0.03721614637823934,
        "walks": 0.03721614637823934,
        "builds": 0.03721614637823934,
        "normalized": 0.03721614637823934,
        "manifest": 0.03721614637823934,
        "files": 0.11164843913471803,
        "sizes": 0.03721614637823934,
        "language": 0.07443229275647868,
        "tags": 0.03721614637823934,
        "path": 0.03721614637823934,
        "roles": 0.03721614637823934,
        "src": 0.03721614637823934,
        "test": 0.11164843913471803,
        "docs": 0.11164843913471803,
        "examples": 0.03721614637823934,
        "build": 0.14886458551295736,
        "dependency": 0.07443229275647868,
        "manifests": 0.03721614637823934,
        "e": 0.11164843913471803,
        "g": 0.11164843913471803,
        "pom": 0.03721614637823934,
        "xml": 0.03721614637823934,
        "gradle": 0.07443229275647868,
        "package": 0.03721614637823934,
        "json": 0.11164843913471803,
        "requirements": 0.03721614637823934,
        "txt": 0.03721614637823934,
        "pyproject": 0.03721614637823934,
        "toml": 0.07443229275647868,
        "go": 0.11164843913471803,
        "mod": 0.03721614637823934,
        "cargo": 0.07443229275647868,
        "gemfile": 0.03721614637823934,
        "composer": 0.03721614637823934,
        "entrypoints": 0.11164843913471803,
        "clis": 0.03721614637823934,
        "services": 0.11164843913471803,
        "coverage": 0.03721614637823934,
        "artifacts": 0.03721614637823934,
        "if": 0.03721614637823934,
        "available": 0.03721614637823934,
        "stores": 0.03721614637823934,
        "a": 0.03721614637823934,
        "per": 0.07443229275647868,
        "index": 0.03721614637823934,
        "to": 0.11164843913471803,
        "speed": 0.03721614637823934,
        "future": 0.03721614637823934,
        "runs": 0.03721614637823934,
        "analyzers": 0.22329687826943606,
        "plugin": 0.03721614637823934,
        "based": 0.03721614637823934,
        "detect": 0.03721614637823934,
        "idioms": 0.03721614637823934,
        "frameworks": 0.03721614637823934,
        "spring": 0.07443229275647868,
        "boot": 0.07443229275647868,
        "fastapi": 0.07443229275647868,
        "node": 0.07443229275647868,
        "express": 0.03721614637823934,
        "react": 0.03721614637823934,
        "next": 0.03721614637823934,
        "js": 0.03721614637823934,
        "http": 0.14886458551295736,
        "rust": 0.03721614637823934,
        "bin": 0.03721614637823934,
        "lib": 0.03721614637823934,
        "maven": 0.03721614637823934,
        "setuptools": 0.03721614637823934,
        "poetry": 0.03721614637823934,
        "npm": 0.03721614637823934,
        "pnpm": 0.03721614637823934,
        "yarn": 0.03721614637823934,
        "extract": 0.03721614637823934,
        "top": 0.07443229275647868,
        "level": 0.03721614637823934,
        "libs": 0.03721614637823934,
        "notable": 0.03721614637823934,
        "transitive": 0.03721614637823934,
        "categories": 0.03721614637823934,
        "entrypoint": 0.03721614637823934,
        "infer": 0.03721614637823934,
        "commands": 0.03721614637823934,
        "django": 0.03721614637823934,
        "scripts": 0.07443229275647868,
        "pattern": 0.03721614637823934,
        "monorepo": 0.03721614637823934,
        "layout": 0.03721614637823934,
        "ci": 0.03721614637823934,
        "cd": 0.03721614637823934,
        "containerization": 0.03721614637823934,
        "k8s": 0.03721614637823934,
        "heuristics": 0.03721614637823934,
        "structure": 0.03721614637823934,
        "analyzer": 0.07443229275647868,
        "module": 0.03721614637823934,
        "topology": 0.03721614637823934,
        "detected": 0.11164843913471803,
        "entities": 0.07443229275647868,
        "dtos": 0.03721614637823934,
        "api": 0.11164843913471803,
        "endpoint": 0.07443229275647868,
        "sequences": 0.03721614637823934,
        "service": 0.03721614637823934,
        "interactions": 0.03721614637823934,
        "returns": 0.03721614637823934,
        "signals": 0.07443229275647868,
        "key": 0.07443229275647868,
        "facts": 0.03721614637823934,
        "the": 0.11164843913471803,
        "knowledge": 0.07443229275647868,
        "graph": 0.11164843913471803,
        "4": 0.03721614637823934,
        "embeddings": 0.07443229275647868,
        "rag": 0.03721614637823934,
        "of": 0.07443229275647868,
        "modules": 0.03721614637823934,
        "packages": 0.03721614637823934,
        "configs": 0.03721614637823934,
        "tests": 0.03721614637823934,
        "lightweight": 0.03721614637823934,
        "embedding": 0.03721614637823934,
        "store": 0.03721614637823934,
        "faiss": 0.03721614637823934,
        "in": 0.03721614637823934,
        "memory": 0.03721614637823934,
        "chunks": 0.03721614637823934,
        "code": 0.03721614637823934,
        "comments": 0.03721614637823934,
        "readme": 0.07443229275647868,
        "fragments": 0.03721614637823934,
        "changelog": 0.03721614637823934,
        "issues": 0.03721614637823934,
        "optional": 0.03721614637823934,
        "commit": 0.03721614637823934,
        "messages": 0.07443229275647868,
        "provides": 0.03721614637823934,
        "context": 0.07443229275647868,
        "retrieval": 0.03721614637823934,
        "prompt": 0.07443229275647868,
        "building": 0.03721614637823934,
        "k": 0.03721614637823934,
        "by": 0.03721614637823934,
        "section": 0.11164843913471803,
        "and": 0.2605130246476754,
        "persists": 0.03721614637823934,
        "refreshing": 0.03721614637823934,
        "only": 0.03721614637823934,
        "whose": 0.03721614637823934,
        "hashes": 0.03721614637823934,
        "changed": 0.03721614637823934,
        "5": 0.03721614637823934,
        "builder": 0.03721614637823934,
        "aware": 0.03721614637823934,
        "jinja2": 0.03721614637823934,
        "templates": 0.03721614637823934,
        "with": 0.11164843913471803,
        "guardrails": 0.03721614637823934,
        "project": 0.03721614637823934,
        "intro": 0.03721614637823934,
        "features": 0.03721614637823934,
        "architecture": 0.03721614637823934,
        "overview": 0.03721614637823934,
        "quick": 0.07443229275647868,
        "start": 0.07443229275647868,
        "configuration": 0.03721614637823934,
        "deployment": 0.03721614637823934,
        "troubleshooting": 0.03721614637823934,
        "faq": 0.03721614637823934,
        "roadmap": 0.03721614637823934,
        "contribution": 0.03721614637823934,
        "license": 0.03721614637823934,
        "badges": 0.03721614637823934,
        "dynamically": 0.03721614637823934,
        "injects": 0.07443229275647868,
        "retrieved": 0.03721614637823934,
        "produces": 0.03721614637823934,
        "llm": 0.07443229275647868,
        "ready": 0.03721614637823934,
        "structured": 0.07443229275647868,
        "prompts": 0.03721614637823934,
        "system": 0.03721614637823934,
        "user": 0.03721614637823934,
        "token": 0.03721614637823934,
        "budgets": 0.03721614637823934,
        "honours": 0.03721614637823934,
        "style": 0.07443229275647868,
        "presets": 0.03721614637823934,
        "concise": 0.03721614637823934,
        "trims": 0.03721614637823934,
        "list": 0.03721614637823934,
        "heavy": 0.03721614637823934,
        "sections": 0.03721614637823934,
        "comprehensive": 0.03721614637823934,
        "keeps": 0.03721614637823934,
        "full": 0.03721614637823934,
        "detail": 0.03721614637823934,
        "infrastructure": 0.03721614637823934,
        "patterns": 0.03721614637823934,
        "into": 0.03721614637823934,
        "guidance": 0.03721614637823934,
        "uvicorn": 0.03721614637823934,
        "docker": 0.11164843913471803,
        "compose": 0.03721614637823934,
        "up": 0.03721614637823934,
        "generates": 0.03721614637823934,
        "mermaid": 0.03721614637823934,
        "sequence": 0.03721614637823934,
        "diagrams": 0.03721614637823934,
        "highlighting": 0.03721614637823934,
        "request": 0.03721614637823934,
        "flow": 0.03721614637823934,
        "across": 0.03721614637823934,
        "when": 0.03721614637823934,
        "endpoints": 0.03721614637823934,
        "are": 0.03721614637823934,
        "6": 0.03721614637823934,
        "local": 0.03721614637823934,
        "runner": 0.11164843913471803,
        "pluggable": 0.03721614637823934,
        "runtime": 0.03721614637823934,
        "that": 0.03721614637823934,
        "prefers": 0.03721614637823934,
        "model": 0.07443229275647868,
        "host": 0.03721614637823934,
        "localhost": 0.03721614637823934,
        "12434": 0.03721614637823934,
        "engines": 0.07443229275647868,
        "v1": 0.07443229275647868,
        "container": 0.03721614637823934,
        "internal": 0.03721614637823934,
        "environment": 0.03721614637823934,
        "overrides": 0.03721614637823934,
        "an": 0.03721614637823934,
        "ollama": 0.03721614637823934,
        "cli": 0.03721614637823934,
        "fallback": 0.03721614637823934,
        "defaults": 0.03721614637823934,
        "ai": 0.03721614637823934,
        "smollm2": 0.03721614637823934,
        "360m": 0.03721614637823934,
        "q4_k_m": 0.03721614637823934,
        "but": 0.03721614637823934,
        "respects": 0.03721614637823934,
        "yml": 0.03721614637823934,
        "openai": 0.03721614637823934,
        "compatible": 0.03721614637823934,
        "env": 0.03721614637823934,
        "vars": 0.03721614637823934,
        "alternate": 0.03721614637823934,
        "weights": 0.03721614637823934,
        "keys": 0.03721614637823934,
        "supports": 0.03721614637823934,
        "function": 0.03721614637823934,
        "calling": 0.03721614637823934,
        "outputs": 0.03721614637823934
      },
      "text": "scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future runs. ### 3.3 Analyzers (Plugin-based) * **Language analyzers** (detect idioms, entrypoints, frameworks: Spring Boot, FastAPI, Node/Express, React, Next.js, Go HTTP, Rust bin/lib). * **Build analyzers** (Maven/Gradle, setuptools/Poetry, npm/pnpm/yarn, Go, Cargo). * **Dependency analyzers** (extract top-level libs & notable transitive categories). * **Entrypoint analyzers** (infer run commands for FastAPI, Django, Spring Boot, Node scripts). * **Pattern analyzers** (monorepo layout, CI/CD, containerization/K8s heuristics). * **Structure analyzer** (module topology, detected entities/DTOs, API endpoint sequences, service interactions). * Each analyzer returns **Signals** (key facts) to the knowledge graph. ### 3.4 Knowledge Graph & Embeddings (RAG) * Graph of Repo entities: modules, packages, services, scripts, configs, tests, docs. * Lightweight embedding store (e.g., `faiss`/in-memory) of **chunks**: code comments, README fragments, `docs/`, `CHANGELOG`, issues (optional), commit messages. * Provides **context retrieval** for prompt building (top-k by section) and persists embeddings under `.docgen/`, refreshing only the files whose hashes changed. ### 3.5 Prompt Builder * **Section-aware** Jinja2 templates with **guardrails**: * Project intro, key features, architecture overview, quick start, configuration, build/test, deployment, troubleshooting, FAQ, roadmap, contribution, license, badges. * Dynamically injects repo signals and retrieved context per section. * Produces **LLM-ready structured prompts** (system + user messages) with token budgets and honours `readme.style` presets (`concise` trims list-heavy sections, `comprehensive` keeps full detail). * Injects detected entrypoints and infrastructure patterns into Quick Start guidance (e.g., `uvicorn ...`, `docker compose up`). * Generates Mermaid sequence diagrams highlighting request flow across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#2",
      "vector": {
        "across": 0.028060676663315687,
        "services": 0.028060676663315687,
        "when": 0.08418202998994706,
        "api": 0.056121353326631374,
        "endpoints": 0.028060676663315687,
        "are": 0.056121353326631374,
        "detected": 0.056121353326631374,
        "3": 0.11224270665326275,
        "6": 0.028060676663315687,
        "local": 0.056121353326631374,
        "llm": 0.028060676663315687,
        "runner": 0.08418202998994706,
        "pluggable": 0.028060676663315687,
        "runtime": 0.028060676663315687,
        "that": 0.028060676663315687,
        "prefers": 0.028060676663315687,
        "the": 0.028060676663315687,
        "docker": 0.056121353326631374,
        "model": 0.08418202998994706,
        "http": 0.08418202998994706,
        "endpoint": 0.028060676663315687,
        "host": 0.028060676663315687,
        "localhost": 0.028060676663315687,
        "12434": 0.028060676663315687,
        "engines": 0.056121353326631374,
        "v1": 0.056121353326631374,
        "container": 0.028060676663315687,
        "internal": 0.08418202998994706,
        "with": 0.08418202998994706,
        "environment": 0.028060676663315687,
        "overrides": 0.028060676663315687,
        "and": 0.36478879662310393,
        "an": 0.028060676663315687,
        "ollama": 0.028060676663315687,
        "cli": 0.056121353326631374,
        "fallback": 0.028060676663315687,
        "defaults": 0.056121353326631374,
        "to": 0.08418202998994706,
        "ai": 0.028060676663315687,
        "smollm2": 0.028060676663315687,
        "360m": 0.028060676663315687,
        "q4_k_m": 0.028060676663315687,
        "but": 0.028060676663315687,
        "respects": 0.028060676663315687,
        "docgen": 0.11224270665326275,
        "yml": 0.028060676663315687,
        "openai": 0.028060676663315687,
        "compatible": 0.028060676663315687,
        "env": 0.028060676663315687,
        "vars": 0.028060676663315687,
        "for": 0.08418202998994706,
        "alternate": 0.028060676663315687,
        "weights": 0.028060676663315687,
        "keys": 0.028060676663315687,
        "supports": 0.056121353326631374,
        "function": 0.028060676663315687,
        "calling": 0.028060676663315687,
        "style": 0.056121353326631374,
        "structured": 0.028060676663315687,
        "outputs": 0.056121353326631374,
        "available": 0.028060676663315687,
        "streaming": 0.028060676663315687,
        "decode": 0.028060676663315687,
        "stop": 0.028060676663315687,
        "tokens": 0.028060676663315687,
        "section": 0.056121353326631374,
        "by": 0.056121353326631374,
        "generation": 0.028060676663315687,
        "stay": 0.056121353326631374,
        "within": 0.028060676663315687,
        "context": 0.028060676663315687,
        "limits": 0.028060676663315687,
        "validates": 0.056121353326631374,
        "configuration": 0.028060676663315687,
        "ensure": 0.028060676663315687,
        "runners": 0.028060676663315687,
        "loopback": 0.028060676663315687,
        "hosts": 0.028060676663315687,
        "only": 0.056121353326631374,
        "7": 0.028060676663315687,
        "post": 0.056121353326631374,
        "processor": 0.028060676663315687,
        "lints": 0.028060676663315687,
        "markdown": 0.028060676663315687,
        "builds": 0.028060676663315687,
        "toc": 0.028060676663315687,
        "adds": 0.056121353326631374,
        "shields": 0.028060676663315687,
        "badges": 0.056121353326631374,
        "normalizes": 0.028060676663315687,
        "heading": 0.028060676663315687,
        "hierarchy": 0.028060676663315687,
        "enforces": 0.028060676663315687,
        "guide": 0.028060676663315687,
        "readme": 0.08418202998994706,
        "contract": 0.028060676663315687,
        "required": 0.056121353326631374,
        "sections": 0.11224270665326275,
        "links": 0.028060676663315687,
        "relative": 0.028060676663315687,
        "absolute": 0.028060676663315687,
        "code": 0.028060676663315687,
        "block": 0.028060676663315687,
        "languages": 0.028060676663315687,
        "line": 0.028060676663315687,
        "length": 0.028060676663315687,
        "computes": 0.028060676663315687,
        "diff": 0.028060676663315687,
        "aware": 0.028060676663315687,
        "updates": 0.056121353326631374,
        "modifies": 0.028060676663315687,
        "impacted": 0.028060676663315687,
        "changes": 0.056121353326631374,
        "persists": 0.028060676663315687,
        "a": 0.08418202998994706,
        "scorecard": 0.056121353326631374,
        "json": 0.056121353326631374,
        "capturing": 0.028060676663315687,
        "coverage": 0.056121353326631374,
        "quick": 0.028060676663315687,
        "start": 0.028060676663315687,
        "health": 0.028060676663315687,
        "link": 0.056121353326631374,
        "results": 0.028060676663315687,
        "build": 0.056121353326631374,
        "license": 0.028060676663315687,
        "safe": 0.028060676663315687,
        "reports": 0.028060676663315687,
        "warnings": 0.028060676663315687,
        "during": 0.028060676663315687,
        "processing": 0.028060676663315687,
        "8": 0.028060676663315687,
        "doc": 0.028060676663315687,
        "store": 0.028060676663315687,
        "artifacts": 0.028060676663315687,
        "versions": 0.028060676663315687,
        "keeps": 0.028060676663315687,
        "generated": 0.028060676663315687,
        "drafts": 0.028060676663315687,
        "logs": 0.028060676663315687,
        "prompts": 0.028060676663315687,
        "inputs": 0.028060676663315687,
        "diffs": 0.028060676663315687,
        "under": 0.028060676663315687,
        "per": 0.028060676663315687,
        "repo": 0.028060676663315687,
        "rollback": 0.028060676663315687,
        "regression": 0.028060676663315687,
        "testing": 0.028060676663315687,
        "via": 0.028060676663315687,
        "golden": 0.028060676663315687,
        "readmes": 0.028060676663315687,
        "stores": 0.028060676663315687,
        "embedding": 0.028060676663315687,
        "cache": 0.028060676663315687,
        "embeddings": 0.028060676663315687,
        "scorecards": 0.028060676663315687,
        "so": 0.028060676663315687,
        "subsequent": 0.028060676663315687,
        "runs": 0.028060676663315687,
        "incremental": 0.028060676663315687,
        "9": 0.028060676663315687,
        "git": 0.028060676663315687,
        "publisher": 0.028060676663315687,
        "creates": 0.028060676663315687,
        "branch": 0.028060676663315687,
        "e": 0.056121353326631374,
        "g": 0.056121353326631374,
        "update": 0.028060676663315687,
        "yyyymmdd": 0.028060676663315687,
        "pr": 0.056121353326631374,
        "body": 0.028060676663315687,
        "explains": 0.028060676663315687,
        "what": 0.028060676663315687,
        "were": 0.028060676663315687,
        "updated": 0.028060676663315687,
        "can": 0.028060676663315687,
        "commit": 0.028060676663315687,
        "directly": 0.028060676663315687,
        "configurable": 0.028060676663315687,
        "on": 0.028060676663315687,
        "init": 0.028060676663315687,
        "empty": 0.028060676663315687,
        "repos": 0.028060676663315687,
        "applies": 0.028060676663315687,
        "labels": 0.028060676663315687,
        "docs": 0.056121353326631374,
        "auto": 0.028060676663315687,
        "existing": 0.028060676663315687,
        "prs": 0.028060676663315687,
        "configured": 0.028060676663315687,
        "4": 0.028060676663315687,
        "data": 0.028060676663315687,
        "python": 0.056121353326631374,
        "pydantic": 0.028060676663315687,
        "dataclasses": 0.056121353326631374,
        "from": 0.056121353326631374,
        "import": 0.056121353326631374,
        "dataclass": 0.2244854133065255,
        "typing": 0.028060676663315687,
        "list": 0.11224270665326275,
        "dict": 0.14030338331657843,
        "optional": 0.056121353326631374,
        "class": 0.1964247366432098,
        "filemeta": 0.056121353326631374,
        "path": 0.028060676663315687,
        "str": 0.5892742099296294,
        "size": 0.028060676663315687,
        "int": 0.028060676663315687,
        "language": 0.028060676663315687,
        "role": 0.028060676663315687,
        "src": 0.028060676663315687,
        "test": 0.056121353326631374,
        "config": 0.028060676663315687,
        "script": 0.028060676663315687,
        "infra": 0.028060676663315687,
        "other": 0.028060676663315687,
        "hash": 0.028060676663315687,
        "repomanifest": 0.056121353326631374,
        "root": 0.028060676663315687,
        "files": 0.028060676663315687,
        "detectors": 0.028060676663315687,
        "build_system": 0.028060676663315687,
        "maven": 0.028060676663315687,
        "framework": 0.056121353326631374,
        "spring": 0.028060676663315687,
        "boot": 0.028060676663315687,
        "dependency_files": 0.028060676663315687,
        "pom": 0.028060676663315687,
        "xml": 0.028060676663315687,
        "requirements": 0.028060676663315687,
        "txt": 0.028060676663315687,
        "signal": 0.056121353326631374,
        "kind": 0.028060676663315687,
        "service": 0.028060676663315687,
        "db": 0.028060676663315687,
        "queue": 0.028060676663315687,
        "dep": 0.028060676663315687,
        "entrypoint": 0.028060676663315687,
        "name": 0.028060676663315687,
        "detail": 0.028060676663315687,
        "analysisresult": 0.028060676663315687,
        "manifest": 0.028060676663315687,
        "signals": 0.028060676663315687,
        "embedding_index_path": 0.028060676663315687,
        "sectionspec": 0.028060676663315687,
        "key": 0.028060676663315687,
        "intro": 0.028060676663315687,
        "features": 0.028060676663315687,
        "arch": 0.028060676663315687,
        "quickstart": 0.028060676663315687,
        "bool": 0.028060676663315687,
        "sources": 0.028060676663315687,
        "preferred": 0.028060676663315687,
        "retrieval": 0.028060676663315687,
        "tags": 0.028060676663315687,
        "template_name": 0.028060676663315687,
        "readmedraft": 0.028060676663315687,
        "full_markdown": 0.028060676663315687,
        "updateplan": 0.028060676663315687,
        "strategy": 0.028060676663315687
      },
      "text": "across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs when available. * Streaming decode with stop tokens; **section-by-section** generation to stay within context limits. * Validates configuration to ensure runners stay local (loopback/`*.internal` hosts only). ### 3.7 Post-Processor * Lints Markdown, builds ToC, adds shields/badges, normalizes heading hierarchy. * Enforces internal style guide and **README contract** (required sections). * Validates links (relative/absolute), code block languages, and line length. * Computes **diff-aware updates**: only modifies sections impacted by changes. * Persists a README scorecard (`.docgen/scorecard.json`) capturing coverage, quick start health, and link results. * Adds build/coverage/license badges with safe defaults and reports link warnings during post-processing. ### 3.8 Doc Store (Artifacts & Versions) * Keeps generated drafts, logs, prompts, inputs/outputs, and diffs under `.docgen/` per repo. * Supports rollback and regression testing via \u201cgolden\u201d READMEs. * Stores embedding cache (`embeddings.json`) and scorecards so subsequent runs are incremental. ### 3.9 Git Publisher * Creates a branch (e.g., `docgen/readme-update-YYYYMMDD`) and a PR. * PR body explains detected changes and what sections were updated. * Can commit directly (configurable) on init for empty repos. * Applies labels (e.g., `docs:auto`) and updates existing PRs when configured. --- ## 4) Data Model (Python `pydantic`/`dataclasses`) ```python from dataclasses import dataclass from typing import List, Dict, Optional @dataclass class FileMeta: path: str size: int language: Optional[str] role: str # src|test|docs|config|build|script|infra|other hash: str @dataclass class RepoManifest: root: str files: List[FileMeta] detectors: Dict[str, str] # {\"build_system\": \"maven\", \"framework\":\"spring-boot\", ...} dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str #",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#3",
      "vector": {
        "dependency_files": 0.03280893574623933,
        "dict": 0.13123574298495733,
        "str": 0.5577519076860686,
        "pom": 0.098426807238718,
        "xml": 0.098426807238718,
        "requirements": 0.06561787149247866,
        "txt": 0.06561787149247866,
        "dataclass": 0.16404467873119666,
        "class": 0.16404467873119666,
        "signal": 0.06561787149247866,
        "kind": 0.03280893574623933,
        "framework": 0.03280893574623933,
        "service": 0.03280893574623933,
        "cli": 0.03280893574623933,
        "db": 0.03280893574623933,
        "queue": 0.03280893574623933,
        "dep": 0.03280893574623933,
        "entrypoint": 0.03280893574623933,
        "test": 0.06561787149247866,
        "name": 0.03280893574623933,
        "detail": 0.03280893574623933,
        "analysisresult": 0.03280893574623933,
        "manifest": 0.06561787149247866,
        "repomanifest": 0.03280893574623933,
        "signals": 0.06561787149247866,
        "list": 0.098426807238718,
        "embedding_index_path": 0.03280893574623933,
        "sectionspec": 0.03280893574623933,
        "key": 0.03280893574623933,
        "intro": 0.06561787149247866,
        "features": 0.098426807238718,
        "arch": 0.03280893574623933,
        "quickstart": 0.06561787149247866,
        "required": 0.03280893574623933,
        "bool": 0.03280893574623933,
        "sources": 0.03280893574623933,
        "preferred": 0.03280893574623933,
        "retrieval": 0.06561787149247866,
        "tags": 0.03280893574623933,
        "template_name": 0.03280893574623933,
        "readmedraft": 0.03280893574623933,
        "sections": 0.13123574298495733,
        "full_markdown": 0.03280893574623933,
        "updateplan": 0.06561787149247866,
        "strategy": 0.03280893574623933,
        "full": 0.03280893574623933,
        "patch": 0.06561787149247866,
        "changed_sections": 0.03280893574623933,
        "reasons": 0.03280893574623933,
        "section": 0.06561787149247866,
        "why": 0.03280893574623933,
        "5": 0.098426807238718,
        "configuration": 0.06561787149247866,
        "docgen": 0.196853614477436,
        "yml": 0.06561787149247866,
        "at": 0.03280893574623933,
        "repo": 0.06561787149247866,
        "root": 0.06561787149247866,
        "yaml": 0.03280893574623933,
        "llm": 0.03280893574623933,
        "runner": 0.03280893574623933,
        "ollama": 0.03280893574623933,
        "or": 0.06561787149247866,
        "llama": 0.03280893574623933,
        "cpp": 0.03280893574623933,
        "model": 0.03280893574623933,
        "llama3": 0.03280893574623933,
        "8b": 0.03280893574623933,
        "instruct": 0.03280893574623933,
        "example": 0.03280893574623933,
        "local": 0.03280893574623933,
        "only": 0.098426807238718,
        "max_tokens": 0.03280893574623933,
        "2048": 0.03280893574623933,
        "temperature": 0.03280893574623933,
        "0": 0.03280893574623933,
        "2": 0.13123574298495733,
        "readme": 0.196853614477436,
        "style": 0.03280893574623933,
        "concise": 0.03280893574623933,
        "comprehensive": 0.03280893574623933,
        "template_pack": 0.06561787149247866,
        "enterprise": 0.03280893574623933,
        "optional": 0.03280893574623933,
        "bundle": 0.03280893574623933,
        "shipped": 0.03280893574623933,
        "with": 0.06561787149247866,
        "required_sections": 0.03280893574623933,
        "architecture": 0.06561787149247866,
        "build_and_test": 0.03280893574623933,
        "deployment": 0.06561787149247866,
        "troubleshooting": 0.03280893574623933,
        "faq": 0.03280893574623933,
        "license": 0.03280893574623933,
        "publish": 0.06561787149247866,
        "mode": 0.03280893574623933,
        "pr": 0.13123574298495733,
        "commit": 0.098426807238718,
        "dry": 0.03280893574623933,
        "run": 0.03280893574623933,
        "branch_prefix": 0.03280893574623933,
        "labels": 0.03280893574623933,
        "docs": 0.06561787149247866,
        "auto": 0.03280893574623933,
        "update_existing": 0.03280893574623933,
        "true": 0.03280893574623933,
        "refresh": 0.03280893574623933,
        "an": 0.03280893574623933,
        "existing": 0.03280893574623933,
        "instead": 0.03280893574623933,
        "of": 0.03280893574623933,
        "opening": 0.03280893574623933,
        "a": 0.06561787149247866,
        "new": 0.03280893574623933,
        "one": 0.03280893574623933,
        "analyzers": 0.03280893574623933,
        "enabled": 0.03280893574623933,
        "language": 0.03280893574623933,
        "build": 0.196853614477436,
        "dependencies": 0.03280893574623933,
        "patterns": 0.03280893574623933,
        "exclude_paths": 0.03280893574623933,
        "git": 0.06561787149247866,
        "node_modules": 0.03280893574623933,
        "dist": 0.03280893574623933,
        "ci": 0.098426807238718,
        "update": 0.06561787149247866,
        "if": 0.098426807238718,
        "these": 0.03280893574623933,
        "paths": 0.03280893574623933,
        "change": 0.03280893574623933,
        "watched_globs": 0.06561787149247866,
        "src": 0.06561787149247866,
        "app": 0.03280893574623933,
        "cmd": 0.03280893574623933,
        "gradle": 0.06561787149247866,
        "package": 0.03280893574623933,
        "json": 0.03280893574623933,
        "pyproject": 0.03280893574623933,
        "toml": 0.03280893574623933,
        "dockerfile": 0.06561787149247866,
        "no": 0.06561787149247866,
        "templates_dir": 0.03280893574623933,
        "is": 0.03280893574623933,
        "provided": 0.03280893574623933,
        "automatically": 0.03280893574623933,
        "picks": 0.03280893574623933,
        "up": 0.03280893574623933,
        "templates": 0.06561787149247866,
        "bundles": 0.03280893574623933,
        "in": 0.06561787149247866,
        "the": 0.03280893574623933,
        "repository": 0.03280893574623933,
        "and": 0.03280893574623933,
        "supports": 0.03280893574623933,
        "built": 0.03280893574623933,
        "template": 0.03280893574623933,
        "packs": 0.03280893574623933,
        "via": 0.06561787149247866,
        "6": 0.098426807238718,
        "workflows": 0.03280893574623933,
        "1": 0.098426807238718,
        "initialization": 0.03280893574623933,
        "without": 0.03280893574623933,
        "scan": 0.03280893574623933,
        "analyze": 0.03280893574623933,
        "embeddings": 0.03280893574623933,
        "prompt": 0.03280893574623933,
        "default": 0.03280893574623933,
        "include": 0.03280893574623933,
        "getting": 0.03280893574623933,
        "started": 0.03280893574623933,
        "suggestions": 0.03280893574623933,
        "3": 0.06561787149247866,
        "generate": 0.06561787149247866,
        "sequentially": 0.03280893574623933,
        "streaming": 0.03280893574623933,
        "4": 0.06561787149247866,
        "post": 0.03280893574623933,
        "process": 0.03280893574623933,
        "toc": 0.03280893574623933,
        "badges": 0.03280893574623933,
        "status": 0.03280893574623933,
        "placeholder": 0.03280893574623933,
        "lint": 0.03280893574623933,
        "direct": 0.03280893574623933,
        "md": 0.03280893574623933,
        "artifacts": 0.03280893574623933,
        "on": 0.03280893574623933,
        "detect": 0.03280893574623933,
        "changes": 0.03280893574623933,
        "diff": 0.03280893574623933,
        "map": 0.03280893574623933,
        "files": 0.03280893574623933,
        "to": 0.098426807238718,
        "using": 0.03280893574623933,
        "rules": 0.03280893574623933,
        "matrix": 0.03280893574623933,
        "quick": 0.03280893574623933,
        "start": 0.03280893574623933,
        "k8s": 0.03280893574623933,
        "entrypoints": 0.03280893574623933,
        "decide": 0.03280893574623933,
        "impacted": 0.03280893574623933,
        "regenerate": 0.03280893574623933,
        "those": 0.03280893574623933,
        "skip": 0.03280893574623933,
        "changed": 0.03280893574623933,
        "file": 0.03280893574623933,
        "matches": 0.03280893574623933,
        "allows": 0.03280893574623933,
        "avoid": 0.03280893574623933,
        "unnecessary": 0.03280893574623933,
        "runs": 0.03280893574623933,
        "rag": 0.03280893574623933,
        "fetch": 0.03280893574623933,
        "top": 0.03280893574623933,
        "k": 0.03280893574623933,
        "chunks": 0.03280893574623933,
        "relevant": 0.03280893574623933,
        "each": 0.03280893574623933
      },
      "text": "dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str # \"full\"|\"patch\" changed_sections: List[str] reasons: Dict[str, str] # section->why ``` --- ## 5) Configuration (`.docgen.yml` at repo root) ```yaml llm: runner: \"ollama\" # or \"llama.cpp\" model: \"llama3:8b-instruct\" # example; local only max_tokens: 2048 temperature: 0.2 readme: style: \"concise\" # or \"comprehensive\" template_pack: \"enterprise\" # optional bundle shipped with docgen required_sections: - intro - features - architecture - quickstart - configuration - build_and_test - deployment - troubleshooting - faq - license publish: mode: \"pr\" # \"commit\" | \"pr\" | \"dry-run\" branch_prefix: \"docgen/\" labels: - \"docs:auto\" update_existing: true # refresh an existing PR instead of opening a new one analyzers: enabled: - language - build - dependencies - patterns exclude_paths: - \".git/\" - \"node_modules/\" - \"dist/\" ci: # Only update README if these paths change watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"pyproject.toml\" - \"Dockerfile\" ``` > If no `readme.templates_dir` is provided, docgen automatically picks up `docs/templates/` bundles in the repository root and supports built-in template packs via `readme.template_pack`. --- ## 6) Workflows ### 6.1 Initialization (Repo without README) 1. **Scan & Analyze** \u2192 Manifest + Signals + Embeddings. 2. **Prompt Build** with default templates, include \u201cgetting started\u201d suggestions. 3. **Generate Sections** sequentially (streaming). 4. **Post-process** \u2192 ToC, badges (build status placeholder), lint. 5. **Publish**: direct commit `README.md` + `.docgen/` artifacts. ### 6.2 Update on Commit/PR 1. **Detect changes** via Git diff; map files to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate**",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#4",
      "vector": {
        "to": 0.146943671674129,
        "sections": 0.11020775375559676,
        "using": 0.03673591791853225,
        "a": 0.11020775375559676,
        "rules": 0.03673591791853225,
        "matrix": 0.03673591791853225,
        "pom": 0.03673591791853225,
        "xml": 0.03673591791853225,
        "build": 0.18367958959266126,
        "gradle": 0.0734718358370645,
        "test": 0.0734718358370645,
        "quick": 0.0734718358370645,
        "start": 0.0734718358370645,
        "dockerfile": 0.03673591791853225,
        "k8s": 0.0734718358370645,
        "deployment": 0.0734718358370645,
        "src": 0.03673591791853225,
        "entrypoints": 0.0734718358370645,
        "architecture": 0.0734718358370645,
        "features": 0.0734718358370645,
        "2": 0.0734718358370645,
        "decide": 0.03673591791853225,
        "updateplan": 0.03673591791853225,
        "patch": 0.03673591791853225,
        "impacted": 0.03673591791853225,
        "regenerate": 0.11020775375559676,
        "only": 0.0734718358370645,
        "those": 0.03673591791853225,
        "3": 0.0734718358370645,
        "skip": 0.03673591791853225,
        "if": 0.146943671674129,
        "no": 0.0734718358370645,
        "changed": 0.03673591791853225,
        "file": 0.0734718358370645,
        "matches": 0.03673591791853225,
        "docgen": 0.146943671674129,
        "yml": 0.03673591791853225,
        "ci": 0.0734718358370645,
        "watched_globs": 0.03673591791853225,
        "allows": 0.03673591791853225,
        "avoid": 0.03673591791853225,
        "unnecessary": 0.03673591791853225,
        "runs": 0.03673591791853225,
        "4": 0.03673591791853225,
        "rag": 0.11020775375559676,
        "retrieval": 0.03673591791853225,
        "fetch": 0.03673591791853225,
        "top": 0.0734718358370645,
        "k": 0.0734718358370645,
        "chunks": 0.0734718358370645,
        "relevant": 0.03673591791853225,
        "each": 0.0734718358370645,
        "section": 0.18367958959266126,
        "5": 0.0734718358370645,
        "generate": 0.03673591791853225,
        "post": 0.0734718358370645,
        "process": 0.03673591791853225,
        "open": 0.03673591791853225,
        "pr": 0.03673591791853225,
        "with": 0.03673591791853225,
        "summary": 0.03673591791853225,
        "of": 0.03673591791853225,
        "deltas": 0.03673591791853225,
        "6": 0.0734718358370645,
        "dry": 0.0734718358370645,
        "run": 0.0734718358370645,
        "support": 0.0734718358370645,
        "update": 0.03673591791853225,
        "computes": 0.03673591791853225,
        "diffs": 0.03673591791853225,
        "and": 0.0734718358370645,
        "scorecards": 0.03673591791853225,
        "without": 0.03673591791853225,
        "writing": 0.03673591791853225,
        "or": 0.11020775375559676,
        "publishing": 0.03673591791853225,
        "manual": 0.03673591791853225,
        "full": 0.03673591791853225,
        "intro": 0.0734718358370645,
        "arch": 0.03673591791853225,
        "7": 0.03673591791853225,
        "contract": 0.03673591791853225,
        "readme": 0.0734718358370645,
        "what": 0.03673591791853225,
        "why": 0.03673591791853225,
        "who": 0.03673591791853225,
        "it": 0.03673591791853225,
        "s": 0.03673591791853225,
        "for": 0.0734718358370645,
        "key": 0.03673591791853225,
        "bullets": 0.03673591791853225,
        "grounded": 0.03673591791853225,
        "in": 0.03673591791853225,
        "real": 0.03673591791853225,
        "repo": 0.0734718358370645,
        "signals": 0.0734718358370645,
        "overview": 0.03673591791853225,
        "diagram": 0.03673591791853225,
        "ascii": 0.03673591791853225,
        "components": 0.03673591791853225,
        "minimal": 0.03673591791853225,
        "commands": 0.146943671674129,
        "per": 0.0734718358370645,
        "system": 0.0734718358370645,
        "configuration": 0.0734718358370645,
        "env": 0.03673591791853225,
        "vars": 0.03673591791853225,
        "files": 0.03673591791853225,
        "examples": 0.03673591791853225,
        "coverage": 0.03673591791853225,
        "hint": 0.03673591791853225,
        "container": 0.03673591791853225,
        "instructions": 0.03673591791853225,
        "detected": 0.11020775375559676,
        "troubleshooting": 0.03673591791853225,
        "common": 0.03673591791853225,
        "failures": 0.03673591791853225,
        "faq": 0.03673591791853225,
        "10": 0.0734718358370645,
        "concise": 0.03673591791853225,
        "q": 0.03673591791853225,
        "contributing": 0.0734718358370645,
        "md": 0.03673591791853225,
        "absent": 0.03673591791853225,
        "license": 0.03673591791853225,
        "templated": 0.03673591791853225,
        "must": 0.03673591791853225,
        "be": 0.0734718358370645,
        "independently": 0.03673591791853225,
        "regenerable": 0.03673591791853225,
        "self": 0.03673591791853225,
        "contained": 0.03673591791853225,
        "8": 0.03673591791853225,
        "prompting": 0.03673591791853225,
        "strategy": 0.03673591791853225,
        "local": 0.0734718358370645,
        "llm": 0.03673591791853225,
        "message": 0.0734718358370645,
        "fixed": 0.03673591791853225,
        "guardrails": 0.03673591791853225,
        "you": 0.03673591791853225,
        "are": 0.03673591791853225,
        "senior": 0.03673591791853225,
        "dev": 0.03673591791853225,
        "doc": 0.03673591791853225,
        "writer": 0.03673591791853225,
        "precise": 0.03673591791853225,
        "cite": 0.03673591791853225,
        "facts": 0.03673591791853225,
        "speculation": 0.03673591791853225,
        "never": 0.03673591791853225,
        "invent": 0.03673591791853225,
        "prefer": 0.03673591791853225,
        "by": 0.03673591791853225,
        "analyzers": 0.0734718358370645,
        "user": 0.03673591791853225,
        "objective": 0.03673591791853225,
        "constraints": 0.03673591791853225,
        "tone": 0.03673591791853225,
        "length": 0.03673591791853225,
        "inject": 0.03673591791853225,
        "provide": 0.03673591791853225,
        "style": 0.03673591791853225,
        "tokens": 0.03673591791853225,
        "headings": 0.03673591791853225,
        "code": 0.0734718358370645,
        "blocks": 0.03673591791853225,
        "tables": 0.03673591791853225,
        "filters": 0.03673591791853225,
        "refuse": 0.03673591791853225,
        "insufficient": 0.03673591791853225,
        "evidence": 0.03673591791853225,
        "fall": 0.03673591791853225,
        "back": 0.03673591791853225,
        "template": 0.03673591791853225,
        "stubs": 0.0734718358370645,
        "9": 0.03673591791853225,
        "language": 0.0734718358370645,
        "project": 0.03673591791853225,
        "poc": 0.0734718358370645,
        "targets": 0.03673591791853225,
        "tier": 0.0734718358370645,
        "1": 0.03673591791853225,
        "python": 0.03673591791853225,
        "poetry": 0.03673591791853225,
        "setuptools": 0.03673591791853225,
        "java": 0.03673591791853225,
        "maven": 0.03673591791853225,
        "spring": 0.0734718358370645,
        "boot": 0.03673591791853225,
        "node": 0.03673591791853225,
        "js": 0.03673591791853225,
        "npm": 0.03673591791853225,
        "pnpm": 0.03673591791853225,
        "express": 0.03673591791853225,
        "next": 0.03673591791853225,
        "soon": 0.03673591791853225,
        "go": 0.03673591791853225,
        "modules": 0.03673591791853225,
        "rust": 0.03673591791853225,
        "cargo": 0.03673591791853225,
        "ruby": 0.03673591791853225,
        "bundler": 0.03673591791853225,
        "php": 0.03673591791853225,
        "composer": 0.03673591791853225,
        "detection": 0.03673591791853225,
        "via": 0.03673591791853225,
        "heuristics": 0.03673591791853225,
        "optional": 0.03673591791853225,
        "tree": 0.03673591791853225,
        "sitter": 0.03673591791853225,
        "function": 0.03673591791853225,
        "class": 0.03673591791853225,
        "extraction": 0.03673591791853225,
        "pluggable": 0.03673591791853225,
        "entry": 0.03673591791853225,
        "points": 0.03673591791853225,
        "main": 0.03673591791853225,
        "springbootapplication": 0.03673591791853225,
        "fastapi": 0.03673591791853225,
        "app": 0.03673591791853225,
        "bin": 0.03673591791853225,
        "cmd": 0.03673591791853225,
        "interfaces": 0.03673591791853225,
        "skeleton": 0.03673591791853225,
        "__init__": 0.03673591791853225,
        "py": 0.5143028508594515,
        "cli": 0.0734718358370645,
        "click": 0.03673591791853225,
        "typer": 0.03673591791853225,
        "failsafe": 0.03673591791853225,
        "fail": 0.03673591791853225,
        "safe": 0.03673591791853225,
        "logging": 0.0734718358370645,
        "helpers": 0.03673591791853225,
        "orchestrator": 0.03673591791853225,
        "repo_scanner": 0.03673591791853225,
        "base": 0.03673591791853225,
        "analyzer": 0.03673591791853225,
        "abc": 0.03673591791853225,
        "dependencies": 0.03673591791853225,
        "patterns": 0.03673591791853225,
        "embedder": 0.03673591791853225,
        "embedding": 0.03673591791853225,
        "model": 0.03673591791853225,
        "store": 0.03673591791853225
      },
      "text": "to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate** \u2192 **Post-process** \u2192 **Open PR** with summary of deltas. 6. Dry-run support: `docgen update --dry-run` computes diffs and scorecards without writing or publishing. ### 6.3 Regenerate (Manual) * `docgen regenerate --full` or `--sections intro,arch`. --- ## 7) Section Contract (README) * **Intro**: what, why, who it\u2019s for * **Key Features**: bullets grounded in real repo signals * **Architecture**: overview diagram (ASCII) + components * **Quick Start**: minimal commands (per build system) * **Configuration**: env vars, files, examples * **Build & Test**: commands, coverage hint * **Deployment**: container/K8s instructions if detected * **Troubleshooting**: common failures * **FAQ**: 5\u201310 concise Q\\&A * **Contributing** (if `CONTRIBUTING.md` absent) * **License** (detected or templated) > Each section must be independently regenerable and self-contained. --- ## 8) Prompting Strategy (Local LLM) * **System message (fixed guardrails)**: * \u201cYou are a senior dev doc writer. Be precise. Cite repo facts only. No speculation.\u201d * \u201cNever invent commands. Prefer commands detected by analyzers.\u201d * **User message per section**: * Section objective + constraints (tone, length). * Inject **Signals** + **Top-k chunks** (RAG). * Provide **style tokens** (headings, code blocks, tables). * **Post-filters**: refuse if insufficient evidence; fall back to template stubs. --- ## 9) Language & Project Support (POC targets) * **Tier-1 (POC)**: Python (Poetry/Setuptools), Java (Maven/Gradle, Spring Boot), Node.js (npm/pnpm, Express/Next). * **Tier-2 (soon)**: Go (modules), Rust (Cargo), Ruby (Bundler), PHP (Composer). * Detection via: * File heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#5",
      "vector": {
        "heuristics": 0.028665182485640765,
        "optional": 0.0859955474569223,
        "tree": 0.028665182485640765,
        "sitter": 0.028665182485640765,
        "for": 0.11466072994256306,
        "function": 0.028665182485640765,
        "class": 0.05733036497128153,
        "extraction": 0.028665182485640765,
        "pluggable": 0.028665182485640765,
        "entry": 0.028665182485640765,
        "points": 0.028665182485640765,
        "main": 0.05733036497128153,
        "spring": 0.028665182485640765,
        "springbootapplication": 0.028665182485640765,
        "fastapi": 0.05733036497128153,
        "app": 0.14332591242820383,
        "bin": 0.028665182485640765,
        "cmd": 0.05733036497128153,
        "10": 0.028665182485640765,
        "interfaces": 0.028665182485640765,
        "code": 0.05733036497128153,
        "skeleton": 0.028665182485640765,
        "docgen": 0.0859955474569223,
        "__init__": 0.028665182485640765,
        "py": 0.7166295621410191,
        "cli": 0.0859955474569223,
        "click": 0.028665182485640765,
        "typer": 0.05733036497128153,
        "failsafe": 0.028665182485640765,
        "fail": 0.028665182485640765,
        "safe": 0.028665182485640765,
        "readme": 0.0859955474569223,
        "stubs": 0.028665182485640765,
        "logging": 0.05733036497128153,
        "configuration": 0.028665182485640765,
        "helpers": 0.028665182485640765,
        "orchestrator": 0.028665182485640765,
        "repo_scanner": 0.028665182485640765,
        "analyzers": 0.028665182485640765,
        "base": 0.028665182485640765,
        "analyzer": 0.0859955474569223,
        "abc": 0.14332591242820383,
        "language": 0.028665182485640765,
        "build": 0.14332591242820383,
        "dependencies": 0.028665182485640765,
        "entrypoints": 0.028665182485640765,
        "patterns": 0.028665182485640765,
        "rag": 0.028665182485640765,
        "embedder": 0.028665182485640765,
        "local": 0.05733036497128153,
        "embedding": 0.028665182485640765,
        "model": 0.028665182485640765,
        "store": 0.028665182485640765,
        "prompting": 0.028665182485640765,
        "builder": 0.028665182485640765,
        "jinja2": 0.028665182485640765,
        "templates": 0.05733036497128153,
        "token": 0.028665182485640765,
        "mgmt": 0.028665182485640765,
        "constants": 0.028665182485640765,
        "j2": 0.028665182485640765,
        "per": 0.028665182485640765,
        "section": 0.028665182485640765,
        "llm": 0.028665182485640765,
        "runner": 0.028665182485640765,
        "adapter": 0.028665182485640765,
        "ollama": 0.028665182485640765,
        "llama": 0.028665182485640765,
        "cpp": 0.028665182485640765,
        "postproc": 0.028665182485640765,
        "lint": 0.028665182485640765,
        "links": 0.05733036497128153,
        "markers": 0.0859955474569223,
        "toc": 0.05733036497128153,
        "git": 0.05733036497128153,
        "diff": 0.028665182485640765,
        "publisher": 0.028665182485640765,
        "config": 0.028665182485640765,
        "models": 0.05733036497128153,
        "python": 0.0859955474569223,
        "from": 0.05733036497128153,
        "import": 0.05733036497128153,
        "abstractmethod": 0.0859955474569223,
        "repomanifest": 0.0859955474569223,
        "signal": 0.05733036497128153,
        "def": 0.14332591242820383,
        "supports": 0.028665182485640765,
        "self": 0.05733036497128153,
        "manifest": 0.05733036497128153,
        "bool": 0.0859955474569223,
        "analyze": 0.05733036497128153,
        "list": 0.028665182485640765,
        "command": 0.0859955474569223,
        "init": 0.028665182485640765,
        "path": 0.0859955474569223,
        "str": 0.14332591242820383,
        "publish": 0.0859955474569223,
        "true": 0.028665182485640765,
        "update": 0.0859955474569223,
        "event": 0.028665182485640765,
        "commit": 0.05733036497128153,
        "diff_base": 0.028665182485640765,
        "origin": 0.028665182485640765,
        "regenerate": 0.028665182485640765,
        "sections": 0.11466072994256306,
        "full": 0.028665182485640765,
        "false": 0.028665182485640765,
        "service": 0.028665182485640765,
        "mode": 0.028665182485640765,
        "post": 0.1719910949138446,
        "generate": 0.028665182485640765,
        "arch": 0.028665182485640765,
        "quickstart": 0.0859955474569223,
        "get": 0.028665182485640765,
        "status": 0.028665182485640765,
        "run_id": 0.028665182485640765,
        "11": 0.028665182485640765,
        "change": 0.028665182485640765,
        "impact": 0.028665182485640765,
        "matrix": 0.028665182485640765,
        "examples": 0.028665182485640765,
        "changed": 0.05733036497128153,
        "pattern": 0.028665182485640765,
        "to": 0.0859955474569223,
        "rebuild": 0.028665182485640765,
        "notes": 0.028665182485640765,
        "pom": 0.028665182485640765,
        "xml": 0.028665182485640765,
        "gradle": 0.028665182485640765,
        "_and": 0.05733036497128153,
        "_test": 0.05733036497128153,
        "recompute": 0.028665182485640765,
        "commands": 0.028665182485640765,
        "requirements": 0.028665182485640765,
        "txt": 0.028665182485640765,
        "pyproject": 0.028665182485640765,
        "toml": 0.028665182485640765,
        "install": 0.028665182485640765,
        "steps": 0.028665182485640765,
        "dockerfile": 0.028665182485640765,
        "k8s": 0.028665182485640765,
        "deployment": 0.028665182485640765,
        "container": 0.028665182485640765,
        "changes": 0.028665182485640765,
        "src": 0.028665182485640765,
        "features": 0.028665182485640765,
        "architecture": 0.0859955474569223,
        "if": 0.028665182485640765,
        "entrypoint": 0.028665182485640765,
        "intro": 0.028665182485640765,
        "too": 0.028665182485640765,
        "docs": 0.028665182485640765,
        "all": 0.028665182485640765,
        "patch": 0.028665182485640765,
        "prefer": 0.028665182485640765,
        "doc": 0.028665182485640765,
        "driven": 0.028665182485640765,
        "md": 0.028665182485640765,
        "none": 0.028665182485640765,
        "unless": 0.028665182485640765,
        "empty": 0.028665182485640765,
        "prevent": 0.028665182485640765,
        "loops": 0.028665182485640765,
        "12": 0.028665182485640765,
        "processing": 0.028665182485640765,
        "rules": 0.028665182485640765,
        "headings": 0.028665182485640765,
        "start": 0.028665182485640765,
        "at": 0.028665182485640765,
        "title": 0.028665182485640765,
        "then": 0.028665182485640765,
        "add": 0.028665182485640765,
        "auto": 0.028665182485640765,
        "level": 0.028665182485640765,
        "3": 0.028665182485640765,
        "validate": 0.028665182485640765,
        "blocks": 0.028665182485640765,
        "bash": 0.028665182485640765,
        "convert": 0.028665182485640765,
        "absolute": 0.028665182485640765,
        "github": 0.028665182485640765,
        "relative": 0.028665182485640765,
        "where": 0.028665182485640765,
        "possible": 0.028665182485640765,
        "ensure": 0.028665182485640765,
        "idempotency": 0.028665182485640765,
        "only": 0.028665182485640765,
        "edit": 0.028665182485640765,
        "between": 0.028665182485640765,
        "managed": 0.028665182485640765,
        "begin": 0.028665182485640765,
        "end": 0.028665182485640765,
        "13": 0.028665182485640765,
        "ci": 0.028665182485640765,
        "integration": 0.028665182485640765,
        "pre": 0.028665182485640765,
        "forbid": 0.028665182485640765,
        "direct": 0.028665182485640765,
        "edits": 0.028665182485640765,
        "outside": 0.028665182485640765,
        "merge": 0.028665182485640765,
        "checkout": 0.028665182485640765,
        "remind": 0.028665182485640765
      },
      "text": "heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py prompting/ builder.py # Jinja2 templates, token mgmt constants.py templates/ # *.j2 per section llm/ runner.py # adapter for ollama/llama.cpp postproc/ lint.py links.py markers.py toc.py git/ diff.py publisher.py config.py models.py ``` **Analyzer ABC** ```python from abc import ABC, abstractmethod from .models import RepoManifest, Signal class Analyzer(ABC): @abstractmethod def supports(self, manifest: RepoManifest) -> bool: ... @abstractmethod def analyze(self, manifest: RepoManifest) -> list[Signal]: ... ``` **CLI (Typer)** ```python @app.command() def init(path: str = \".\", publish: bool = True): ... @app.command() def update(path: str = \".\", event: str = \"commit\", diff_base: str = \"origin/main\"): ... @app.command() def regenerate(sections: str = \"\", full: bool = False): ... ``` **FastAPI (optional service mode)** * `POST /analyze` * `POST /generate?sections=arch,quickstart` * `POST /publish` * `GET /status/{run_id}` --- ## 11) Change Impact Matrix (examples) | Changed Path Pattern | Sections to Rebuild | Notes | | ------------------------------------ | ---------------------------- | --------------------------------------- | | `pom.xml`, `build.gradle*` | build\\_and\\_test, quickstart | Recompute build commands | | `requirements.txt`, `pyproject.toml` | build\\_and\\_test, quickstart | Update install steps | | `Dockerfile`, `k8s/**` | deployment | Publish container changes | | `src/**`, `app/**`, `cmd/**` | features, architecture | If entrypoint changed, update intro too | | `docs/**` | all (patch) | Prefer doc-driven | | `README.md` | none (unless empty) | Prevent loops | --- ## 12) Post-Processing Rules * Headings start at `#` for title then `##` for sections. * Add **auto ToC** (<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#6",
      "vector": {
        "level": 0.04267895997763199,
        "3": 0.12803687993289598,
        "validate": 0.04267895997763199,
        "code": 0.04267895997763199,
        "blocks": 0.04267895997763199,
        "bash": 0.04267895997763199,
        "python": 0.08535791995526398,
        "convert": 0.04267895997763199,
        "absolute": 0.04267895997763199,
        "github": 0.12803687993289598,
        "links": 0.04267895997763199,
        "to": 0.08535791995526398,
        "relative": 0.04267895997763199,
        "where": 0.04267895997763199,
        "possible": 0.08535791995526398,
        "ensure": 0.04267895997763199,
        "idempotency": 0.04267895997763199,
        "only": 0.12803687993289598,
        "edit": 0.04267895997763199,
        "between": 0.04267895997763199,
        "managed": 0.08535791995526398,
        "markers": 0.12803687993289598,
        "docgen": 0.21339479988815996,
        "begin": 0.04267895997763199,
        "architecture": 0.21339479988815996,
        "end": 0.04267895997763199,
        "13": 0.04267895997763199,
        "git": 0.08535791995526398,
        "ci": 0.08535791995526398,
        "integration": 0.04267895997763199,
        "local": 0.12803687993289598,
        "pre": 0.04267895997763199,
        "commit": 0.08535791995526398,
        "forbid": 0.04267895997763199,
        "direct": 0.04267895997763199,
        "readme": 0.12803687993289598,
        "edits": 0.04267895997763199,
        "outside": 0.04267895997763199,
        "optional": 0.12803687993289598,
        "post": 0.12803687993289598,
        "merge": 0.04267895997763199,
        "checkout": 0.08535791995526398,
        "remind": 0.04267895997763199,
        "run": 0.04267895997763199,
        "update": 0.12803687993289598,
        "gitlab": 0.04267895997763199,
        "bitbucket": 0.04267895997763199,
        "on": 0.04267895997763199,
        "push": 0.04267895997763199,
        "pr": 0.25607375986579195,
        "1": 0.12803687993289598,
        "repo": 0.08535791995526398,
        "2": 0.17071583991052797,
        "event": 0.04267895997763199,
        "diff": 0.08535791995526398,
        "base": 0.04267895997763199,
        "base_sha": 0.04267895997763199,
        "if": 0.12803687993289598,
        "changes": 0.04267895997763199,
        "open": 0.04267895997763199,
        "with": 0.04267895997763199,
        "labeled": 0.04267895997763199,
        "docs": 0.08535791995526398,
        "auto": 0.04267895997763199,
        "tokenless": 0.04267895997763199,
        "mode": 0.12803687993289598,
        "created": 0.04267895997763199,
        "from": 0.08535791995526398,
        "a": 0.04267895997763199,
        "app": 0.04267895997763199,
        "bot": 0.04267895997763199,
        "account": 0.04267895997763199,
        "14": 0.04267895997763199,
        "quality": 0.04267895997763199,
        "gates": 0.04267895997763199,
        "evaluation": 0.04267895997763199,
        "consistency": 0.04267895997763199,
        "checks": 0.04267895997763199,
        "commands": 0.08535791995526398,
        "exist": 0.04267895997763199,
        "in": 0.12803687993289598,
        "ports": 0.04267895997763199,
        "env": 0.04267895997763199,
        "vars": 0.04267895997763199,
        "match": 0.04267895997763199,
        "configs": 0.04267895997763199,
        "no": 0.08535791995526398,
        "hallucinations": 0.04267895997763199,
        "reject": 0.04267895997763199,
        "new": 0.04267895997763199,
        "facts": 0.04267895997763199,
        "not": 0.04267895997763199,
        "found": 0.08535791995526398,
        "signals": 0.08535791995526398,
        "rag": 0.08535791995526398,
        "style": 0.04267895997763199,
        "concise": 0.04267895997763199,
        "paragraphs": 0.04267895997763199,
        "actionable": 0.04267895997763199,
        "filler": 0.04267895997763199,
        "marketing": 0.04267895997763199,
        "scorecard": 0.04267895997763199,
        "0": 0.04267895997763199,
        "100": 0.04267895997763199,
        "coverage": 0.04267895997763199,
        "of": 0.08535791995526398,
        "required": 0.04267895997763199,
        "sections": 0.08535791995526398,
        "30": 0.04267895997763199,
        "buildability": 0.04267895997763199,
        "quick": 0.08535791995526398,
        "start": 0.04267895997763199,
        "20": 0.12803687993289598,
        "link": 0.04267895997763199,
        "validity": 0.04267895997763199,
        "10": 0.12803687993289598,
        "alignment": 0.04267895997763199,
        "w": 0.04267895997763199,
        "change": 0.04267895997763199,
        "set": 0.04267895997763199,
        "lint": 0.04267895997763199,
        "reviewer": 0.04267895997763199,
        "feedback": 0.04267895997763199,
        "loop": 0.04267895997763199,
        "15": 0.04267895997763199,
        "security": 0.04267895997763199,
        "privacy": 0.04267895997763199,
        "llm": 0.08535791995526398,
        "and": 0.04267895997763199,
        "embedding": 0.04267895997763199,
        "models": 0.04267895997763199,
        "respect": 0.04267895997763199,
        "gitignore": 0.04267895997763199,
        "configurable": 0.04267895997763199,
        "exclude_paths": 0.04267895997763199,
        "never": 0.04267895997763199,
        "index": 0.04267895997763199,
        "large": 0.04267895997763199,
        "binaries": 0.04267895997763199,
        "secret": 0.08535791995526398,
        "files": 0.08535791995526398,
        "simple": 0.04267895997763199,
        "scan": 0.04267895997763199,
        "block": 0.04267895997763199,
        "16": 0.04267895997763199,
        "mvp": 0.04267895997763199,
        "plan": 0.04267895997763199,
        "weeks": 0.04267895997763199,
        "suggested": 0.04267895997763199,
        "breakdown": 0.04267895997763199,
        "core": 0.04267895997763199,
        "path": 0.04267895997763199,
        "cli": 0.04267895997763199,
        "scanner": 0.04267895997763199,
        "language": 0.04267895997763199,
        "build": 0.04267895997763199,
        "analyzers": 0.04267895997763199,
        "java": 0.04267895997763199,
        "node": 0.04267895997763199,
        "prompt": 0.04267895997763199,
        "builder": 0.04267895997763199,
        "runner": 0.04267895997763199,
        "ollama": 0.04267895997763199,
        "adapter": 0.04267895997763199,
        "processor": 0.04267895997763199,
        "publisher": 0.04267895997763199,
        "lite": 0.04267895997763199,
        "embed": 0.04267895997763199,
        "existing": 0.04267895997763199,
        "top": 0.04267895997763199,
        "largest": 0.04267895997763199,
        "source": 0.04267895997763199,
        "heads": 0.04267895997763199,
        "triggers": 0.04267895997763199,
        "single": 0.04267895997763199,
        "as": 0.08535791995526398,
        "stretch": 0.04267895997763199,
        "4": 0.04267895997763199,
        "templates": 0.08535791995526398,
        "8": 0.04267895997763199,
        "jinja2": 0.17071583991052797,
        "5": 0.04267895997763199,
        "config": 0.04267895997763199,
        "yml": 0.04267895997763199,
        "minimal": 0.04267895997763199,
        "17": 0.12803687993289598,
        "example": 0.04267895997763199,
        "section": 0.04267895997763199,
        "template": 0.04267895997763199,
        "j2": 0.08535791995526398,
        "project_name": 0.08535791995526398,
        "is": 0.04267895997763199,
        "structured": 0.04267895997763199,
        "ascii": 0.04267895997763199,
        "_architecture": 0.04267895997763199,
        "key": 0.04267895997763199,
        "components": 0.08535791995526398,
        "for": 0.04267895997763199,
        "comp": 0.12803687993289598,
        "name": 0.04267895997763199,
        "summary": 0.04267895997763199,
        "endfor": 0.04267895997763199,
        "data": 0.04267895997763199,
        "flow": 0.04267895997763199,
        "data_flow": 0.04267895997763199,
        "generated": 0.04267895997763199,
        "detected": 0.04267895997763199,
        "signals_summary": 0.04267895997763199,
        "frame": 0.04267895997763199,
        "composed": 0.04267895997763199,
        "intro": 0.04267895997763199,
        "features": 0.08535791995526398,
        "include": 0.04267895997763199
      },
      "text": "(<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to run `docgen update` (optional). ### CI (GitHub/GitLab/Bitbucket) * On push/PR: 1. Checkout repo. 2. `docgen update --event pr --diff-base $BASE_SHA` 3. If changes \u2192 open/update PR with labeled `docs:auto`. * Tokenless mode possible if PR created from a GitHub App/bot account. --- ## 14) Quality Gates & Evaluation * **Consistency checks**: commands exist in repo; ports/env vars match configs. * **No hallucinations**: reject new facts not found in signals/RAG. * **Style**: concise paragraphs, actionable commands, no filler marketing. * **Scorecard** (0\u2013100): * Coverage of required sections (30) * Buildability of quick start (20) * Link validity (10) * Diff alignment w/ change set (20) * Lint (10) * Reviewer feedback loop (10) --- ## 15) Security & Privacy * **Local only** LLM and embedding models. * Respect `.gitignore` + configurable `exclude_paths`. * Never index large binaries/secret files. * Optional simple **secret scan**; block if found. --- ## 16) MVP Plan (2 weeks suggested breakdown) 1. **Core path**: CLI, Scanner, Language+Build analyzers (Python/Java/Node), Prompt Builder, Local LLM runner (Ollama adapter), Post-processor, Git Publisher (PR). 2. **RAG Lite**: embed only `/docs`, existing `README`, top 20 largest source files\u2019 heads. 3. **Triggers**: single \u201ccommit\u201d mode; PR mode as stretch. 4. **Templates**: 8 sections, Jinja2; managed markers. 5. **Config**: `.docgen.yml` minimal. --- ## 17) Example Templates ### 17.1 Section Template (Jinja2 \u2014 architecture.j2) ```jinja2 ## Architecture {{ project_name }} is structured as: ``` {{ ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#7",
      "vector": {
        "ascii": 0.036588086663230115,
        "_architecture": 0.036588086663230115,
        "key": 0.14635234665292046,
        "components": 0.07317617332646023,
        "for": 0.2561166066426108,
        "comp": 0.10976425998969035,
        "in": 0.2195285199793807,
        "name": 0.036588086663230115,
        "summary": 0.036588086663230115,
        "endfor": 0.036588086663230115,
        "data": 0.036588086663230115,
        "flow": 0.036588086663230115,
        "data_flow": 0.036588086663230115,
        "generated": 0.036588086663230115,
        "from": 0.036588086663230115,
        "detected": 0.036588086663230115,
        "signals": 0.036588086663230115,
        "signals_summary": 0.036588086663230115,
        "17": 0.036588086663230115,
        "2": 0.036588086663230115,
        "readme": 0.10976425998969035,
        "frame": 0.036588086663230115,
        "composed": 0.036588086663230115,
        "jinja2": 0.036588086663230115,
        "project_name": 0.036588086663230115,
        "intro": 0.10976425998969035,
        "features": 0.10976425998969035,
        "include": 0.036588086663230115,
        "architecture": 0.07317617332646023,
        "j2": 0.036588086663230115,
        "quick": 0.07317617332646023,
        "start": 0.2195285199793807,
        "quickstart": 0.036588086663230115,
        "configuration": 0.07317617332646023,
        "build": 0.14635234665292046,
        "test": 0.036588086663230115,
        "build_and_test": 0.07317617332646023,
        "deployment": 0.10976425998969035,
        "troubleshooting": 0.07317617332646023,
        "faq": 0.07317617332646023,
        "license": 0.07317617332646023,
        "18": 0.036588086663230115,
        "minimal": 0.036588086663230115,
        "python": 0.14635234665292046,
        "snippets": 0.036588086663230115,
        "change": 0.036588086663230115,
        "impact": 0.036588086663230115,
        "heuristic": 0.036588086663230115,
        "section_rules": 0.07317617332646023,
        "pom": 0.10976425998969035,
        "xml": 0.10976425998969035,
        "gradle": 0.07317617332646023,
        "requirements": 0.10976425998969035,
        "txt": 0.10976425998969035,
        "pyproject": 0.036588086663230115,
        "toml": 0.036588086663230115,
        "package": 0.07317617332646023,
        "json": 0.07317617332646023,
        "dockerfile": 0.07317617332646023,
        "k8s": 0.036588086663230115,
        "src": 0.10976425998969035,
        "app": 0.10976425998969035,
        "cmd": 0.10976425998969035,
        "def": 0.07317617332646023,
        "sections_from_diff": 0.036588086663230115,
        "paths": 0.07317617332646023,
        "list": 0.036588086663230115,
        "str": 0.2195285199793807,
        "set": 0.07317617332646023,
        "out": 0.10976425998969035,
        "section": 0.07317617332646023,
        "patterns": 0.10976425998969035,
        "if": 0.18294043331615056,
        "any": 0.036588086663230115,
        "p": 0.10976425998969035,
        "pat": 0.07317617332646023,
        "startswith": 0.036588086663230115,
        "add": 0.036588086663230115,
        "return": 0.10976425998969035,
        "or": 0.10976425998969035,
        "fall": 0.036588086663230115,
        "back": 0.036588086663230115,
        "to": 0.07317617332646023,
        "uncertain": 0.036588086663230115,
        "managed": 0.036588086663230115,
        "markers": 0.07317617332646023,
        "patch": 0.036588086663230115,
        "replace_block": 0.036588086663230115,
        "md": 0.18294043331615056,
        "new": 0.07317617332646023,
        "f": 0.10976425998969035,
        "docgen": 0.18294043331615056,
        "begin": 0.036588086663230115,
        "end": 0.18294043331615056,
        "and": 0.036588086663230115,
        "pre": 0.07317617332646023,
        "rest": 0.07317617332646023,
        "split": 0.07317617332646023,
        "1": 0.07317617332646023,
        "_": 0.036588086663230115,
        "post": 0.07317617332646023,
        "n": 0.07317617332646023,
        "insert": 0.036588086663230115,
        "missing": 0.036588086663230115,
        "19": 0.036588086663230115,
        "open": 0.036588086663230115,
        "questions": 0.036588086663230115,
        "trade": 0.036588086663230115,
        "offs": 0.036588086663230115,
        "embeddings": 0.036588086663230115,
        "use": 0.036588086663230115,
        "a": 0.14635234665292046,
        "tiny": 0.036588086663230115,
        "local": 0.036588086663230115,
        "model": 0.07317617332646023,
        "vs": 0.07317617332646023,
        "rule": 0.036588086663230115,
        "based": 0.036588086663230115,
        "retrieval": 0.036588086663230115,
        "mvp": 0.036588086663230115,
        "tree": 0.036588086663230115,
        "sitter": 0.036588086663230115,
        "adds": 0.036588086663230115,
        "power": 0.036588086663230115,
        "but": 0.036588086663230115,
        "increases": 0.036588086663230115,
        "footprint": 0.036588086663230115,
        "gate": 0.036588086663230115,
        "behind": 0.036588086663230115,
        "flag": 0.036588086663230115,
        "pr": 0.10976425998969035,
        "author": 0.036588086663230115,
        "bot": 0.036588086663230115,
        "account": 0.036588086663230115,
        "developer": 0.036588086663230115,
        "token": 0.036588086663230115,
        "decide": 0.036588086663230115,
        "per": 0.036588086663230115,
        "environment": 0.036588086663230115,
        "markdown": 0.036588086663230115,
        "diffs": 0.036588086663230115,
        "keep": 0.036588086663230115,
        "sections": 0.036588086663230115,
        "atomic": 0.036588086663230115,
        "minimize": 0.036588086663230115,
        "noisy": 0.036588086663230115,
        "prs": 0.036588086663230115,
        "20": 0.036588086663230115,
        "example": 0.036588086663230115,
        "yml": 0.036588086663230115,
        "mixed": 0.036588086663230115,
        "repo": 0.036588086663230115,
        "yaml": 0.036588086663230115,
        "llm": 0.036588086663230115,
        "runner": 0.036588086663230115,
        "ollama": 0.036588086663230115,
        "llama3": 0.036588086663230115,
        "8b": 0.036588086663230115,
        "instruct": 0.036588086663230115,
        "temperature": 0.036588086663230115,
        "0": 0.036588086663230115,
        "15": 0.036588086663230115,
        "style": 0.036588086663230115,
        "comprehensive": 0.036588086663230115,
        "publish": 0.036588086663230115,
        "mode": 0.036588086663230115,
        "branch_prefix": 0.036588086663230115,
        "analyzers": 0.036588086663230115,
        "enabled": 0.036588086663230115,
        "language": 0.036588086663230115,
        "dependencies": 0.036588086663230115,
        "exclude_paths": 0.036588086663230115,
        "git": 0.036588086663230115,
        "node_modules": 0.036588086663230115,
        "dist": 0.036588086663230115,
        "target": 0.036588086663230115,
        "ci": 0.036588086663230115,
        "watched_globs": 0.036588086663230115,
        "21": 0.036588086663230115,
        "success": 0.036588086663230115,
        "criteria": 0.036588086663230115,
        "poc": 0.036588086663230115,
        "3": 0.036588086663230115,
        "diverse": 0.036588086663230115,
        "repos": 0.036588086663230115,
        "cli": 0.036588086663230115,
        "spring": 0.036588086663230115,
        "boot": 0.036588086663230115,
        "api": 0.036588086663230115,
        "node": 0.036588086663230115,
        "webapp": 0.036588086663230115,
        "init": 0.036588086663230115,
        "produces": 0.036588086663230115,
        "working": 0.036588086663230115,
        "linted": 0.036588086663230115,
        "with": 0.036588086663230115,
        "runnable": 0.036588086663230115,
        "on": 0.036588086663230115,
        "changing": 0.036588086663230115
      },
      "text": "ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick Start {{ quickstart }} ## Configuration {{ configuration }} ## Build & Test {{ build_and_test }} ## Deployment {{ deployment }} ## Troubleshooting {{ troubleshooting }} ## FAQ {{ faq }} ## License {{ license }} ``` --- ## 18) Minimal Python Snippets **Change impact heuristic** ```python SECTION_RULES = [ (\"build_and_test\", [\"pom.xml\",\"build.gradle\",\"requirements.txt\",\"pyproject.toml\",\"package.json\"]), (\"deployment\", [\"Dockerfile\",\"k8s/\"]), (\"architecture\", [\"src/\",\"app/\",\"cmd/\"]), (\"features\", [\"src/\",\"app/\",\"cmd/\"]), ] def sections_from_diff(paths: list[str]) -> set[str]: out = set() for section, patterns in SECTION_RULES: if any(p for p in paths for pat in patterns if p.startswith(pat)): out.add(section) return out or {\"intro\"} # fall back to intro if uncertain ``` **Managed markers (patch)** ```python def replace_block(md: str, key: str, new: str) -> str: start = f\"<!-- docgen:begin:{key} -->\" end = f\"<!-- docgen:end:{key} -->\" if start in md and end in md: pre, rest = md.split(start, 1) _, post = rest.split(end, 1) return f\"{pre}{start}\\n{new}\\n{end}{post}\" return md # or insert markers if missing ``` --- ## 19) Open Questions / Trade-offs * **Embeddings**: Use a tiny local model vs. rule-based retrieval for MVP? * **Tree-sitter**: Adds power but increases footprint\u2014gate behind a flag. * **PR author**: Bot account vs. developer token\u2014decide per environment. * **Markdown diffs**: Keep sections atomic to minimize noisy PRs. --- ## 20) Example `.docgen.yml` for a Mixed Repo ```yaml llm: runner: \"ollama\" model: \"llama3:8b-instruct\" temperature: 0.15 readme: style: \"comprehensive\" publish: mode: \"pr\" branch_prefix: \"docgen/\" analyzers: enabled: [language, build, dependencies, patterns] exclude_paths: [\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#8",
      "vector": {
        "git": 0.08838834764831843,
        "node_modules": 0.08838834764831843,
        "dist": 0.08838834764831843,
        "target": 0.08838834764831843,
        "ci": 0.08838834764831843,
        "watched_globs": 0.08838834764831843,
        "src": 0.08838834764831843,
        "app": 0.08838834764831843,
        "cmd": 0.08838834764831843,
        "pom": 0.17677669529663687,
        "xml": 0.17677669529663687,
        "build": 0.08838834764831843,
        "gradle": 0.08838834764831843,
        "package": 0.08838834764831843,
        "json": 0.08838834764831843,
        "requirements": 0.17677669529663687,
        "txt": 0.17677669529663687,
        "dockerfile": 0.08838834764831843,
        "21": 0.08838834764831843,
        "success": 0.08838834764831843,
        "criteria": 0.08838834764831843,
        "poc": 0.08838834764831843,
        "for": 0.08838834764831843,
        "3": 0.08838834764831843,
        "diverse": 0.08838834764831843,
        "repos": 0.08838834764831843,
        "python": 0.08838834764831843,
        "cli": 0.17677669529663687,
        "spring": 0.08838834764831843,
        "boot": 0.08838834764831843,
        "api": 0.08838834764831843,
        "node": 0.08838834764831843,
        "webapp": 0.08838834764831843,
        "docgen": 0.17677669529663687,
        "init": 0.17677669529663687,
        "produces": 0.08838834764831843,
        "a": 0.2651650429449553,
        "working": 0.08838834764831843,
        "linted": 0.08838834764831843,
        "readme": 0.08838834764831843,
        "with": 0.08838834764831843,
        "runnable": 0.08838834764831843,
        "quick": 0.08838834764831843,
        "start": 0.08838834764831843,
        "on": 0.08838834764831843,
        "changing": 0.08838834764831843,
        "or": 0.08838834764831843,
        "pr": 0.08838834764831843,
        "updates": 0.08838834764831843,
        "only": 0.08838834764831843,
        "relevant": 0.08838834764831843,
        "sections": 0.08838834764831843,
        "no": 0.08838834764831843,
        "hallucinated": 0.08838834764831843,
        "commands": 0.08838834764831843,
        "links": 0.08838834764831843,
        "and": 0.2651650429449553,
        "badges": 0.08838834764831843,
        "validate": 0.08838834764831843,
        "style": 0.08838834764831843,
        "consistent": 0.08838834764831843,
        "if": 0.08838834764831843,
        "you": 0.17677669529663687,
        "want": 0.08838834764831843,
        "i": 0.08838834764831843,
        "can": 0.17677669529663687,
        "spin": 0.08838834764831843,
        "up": 0.08838834764831843,
        "starter": 0.08838834764831843,
        "repo": 0.08838834764831843,
        "layout": 0.08838834764831843,
        "analyzers": 0.08838834764831843,
        "templates": 0.08838834764831843,
        "simple": 0.08838834764831843,
        "ollama": 0.08838834764831843,
        "adapter": 0.08838834764831843,
        "so": 0.08838834764831843,
        "drop": 0.08838834764831843,
        "it": 0.08838834764831843,
        "into": 0.08838834764831843,
        "your": 0.08838834764831843,
        "environment": 0.08838834764831843,
        "run": 0.08838834764831843,
        "right": 0.08838834764831843,
        "away": 0.08838834764831843
      },
      "text": "[\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR updates only relevant sections. * No hallucinated commands; links and badges validate; style consistent. --- If you want, I can spin up a **starter repo layout** (CLI, analyzers, templates, and a simple Ollama adapter) so you can drop it into your environment and run `docgen init` right away.",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "docgen/prompting/builder.py#0",
      "vector": {
        "builds": 0.037688918072220454,
        "prompts": 0.07537783614444091,
        "and": 0.18844459036110225,
        "templates": 0.11306675421666136,
        "for": 0.037688918072220454,
        "the": 0.037688918072220454,
        "local": 0.037688918072220454,
        "llm": 0.037688918072220454,
        "from": 0.3768891807222045,
        "__future__": 0.037688918072220454,
        "import": 0.3392002626499841,
        "annotations": 0.037688918072220454,
        "collections": 0.037688918072220454,
        "defaultdict": 0.037688918072220454,
        "dataclasses": 0.037688918072220454,
        "dataclass": 0.07537783614444091,
        "pathlib": 0.037688918072220454,
        "path": 0.11306675421666136,
        "typing": 0.037688918072220454,
        "dict": 0.11306675421666136,
        "iterable": 0.037688918072220454,
        "list": 0.037688918072220454,
        "sequence": 0.037688918072220454,
        "tuple": 0.037688918072220454,
        "try": 0.037688918072220454,
        "pragma": 0.07537783614444091,
        "no": 0.11306675421666136,
        "cover": 0.07537783614444091,
        "optional": 0.07537783614444091,
        "dependency": 0.07537783614444091,
        "jinja2": 0.037688918072220454,
        "environment": 0.11306675421666136,
        "filesystemloader": 0.037688918072220454,
        "templatenotfound": 0.07537783614444091,
        "except": 0.037688918072220454,
        "modulenotfounderror": 0.037688918072220454,
        "none": 0.30151134457776363,
        "exception": 0.037688918072220454,
        "type": 0.037688918072220454,
        "ignore": 0.037688918072220454,
        "assignment": 0.037688918072220454,
        "models": 0.037688918072220454,
        "repomanifest": 0.037688918072220454,
        "signal": 0.037688918072220454,
        "postproc": 0.037688918072220454,
        "toc": 0.037688918072220454,
        "tableofcontentsbuilder": 0.037688918072220454,
        "constants": 0.037688918072220454,
        "default_sections": 0.037688918072220454,
        "section_titles": 0.037688918072220454,
        "_role_descriptions": 0.037688918072220454,
        "str": 0.30151134457776363,
        "src": 0.037688918072220454,
        "primary": 0.037688918072220454,
        "application": 0.037688918072220454,
        "library": 0.037688918072220454,
        "code": 0.07537783614444091,
        "test": 0.037688918072220454,
        "automated": 0.037688918072220454,
        "tests": 0.037688918072220454,
        "that": 0.037688918072220454,
        "guard": 0.037688918072220454,
        "behaviour": 0.037688918072220454,
        "docs": 0.037688918072220454,
        "project": 0.037688918072220454,
        "documentation": 0.037688918072220454,
        "assets": 0.037688918072220454,
        "config": 0.037688918072220454,
        "configuration": 0.037688918072220454,
        "infrastructure": 0.07537783614444091,
        "files": 0.037688918072220454,
        "infra": 0.037688918072220454,
        "as": 0.037688918072220454,
        "or": 0.11306675421666136,
        "definitions": 0.037688918072220454,
        "examples": 0.037688918072220454,
        "example": 0.037688918072220454,
        "usages": 0.037688918072220454,
        "samples": 0.037688918072220454,
        "class": 0.07537783614444091,
        "section": 0.11306675421666136,
        "rendered": 0.037688918072220454,
        "readme": 0.037688918072220454,
        "details": 0.037688918072220454,
        "name": 0.037688918072220454,
        "title": 0.037688918072220454,
        "body": 0.037688918072220454,
        "metadata": 0.037688918072220454,
        "object": 0.037688918072220454,
        "promptbuilder": 0.037688918072220454,
        "assembles": 0.037688918072220454,
        "aware": 0.037688918072220454,
        "signals": 0.037688918072220454,
        "system_prompt": 0.037688918072220454,
        "you": 0.037688918072220454,
        "are": 0.037688918072220454,
        "a": 0.037688918072220454,
        "senior": 0.037688918072220454,
        "dev": 0.037688918072220454,
        "doc": 0.037688918072220454,
        "writer": 0.037688918072220454,
        "be": 0.037688918072220454,
        "precise": 0.037688918072220454,
        "cite": 0.037688918072220454,
        "repo": 0.037688918072220454,
        "facts": 0.037688918072220454,
        "only": 0.037688918072220454,
        "speculation": 0.037688918072220454,
        "never": 0.037688918072220454,
        "invent": 0.037688918072220454,
        "commands": 0.07537783614444091,
        "prefer": 0.037688918072220454,
        "detected": 0.037688918072220454,
        "by": 0.037688918072220454,
        "analyzers": 0.037688918072220454,
        "def": 0.037688918072220454,
        "__init__": 0.037688918072220454,
        "self": 0.3768891807222045,
        "templates_dir": 0.15075567228888181,
        "style": 0.18844459036110225,
        "template_pack": 0.11306675421666136,
        "__file__": 0.037688918072220454,
        "with_name": 0.037688918072220454,
        "comprehensive": 0.11306675421666136,
        "lower": 0.037688918072220454,
        "if": 0.037688918072220454,
        "not": 0.037688918072220454,
        "in": 0.037688918072220454,
        "concise": 0.037688918072220454,
        "_env": 0.037688918072220454,
        "_create_env": 0.037688918072220454,
        "_toc_placeho": 0.037688918072220454
      },
      "text": "\"\"\"Builds prompts and templates for the local LLM.\"\"\" from __future__ import annotations from collections import defaultdict from dataclasses import dataclass from pathlib import Path from typing import Dict, Iterable, List, Sequence, Tuple try: # pragma: no cover - optional dependency from jinja2 import Environment, FileSystemLoader, TemplateNotFound except ModuleNotFoundError: # pragma: no cover - optional dependency Environment = None TemplateNotFound = Exception # type: ignore[assignment] from ..models import RepoManifest, Signal from ..postproc.toc import TableOfContentsBuilder from .constants import DEFAULT_SECTIONS, SECTION_TITLES _ROLE_DESCRIPTIONS: Dict[str, str] = { \"src\": \"Primary application and library code\", \"test\": \"Automated tests that guard behaviour\", \"docs\": \"Project documentation assets\", \"config\": \"Configuration and infrastructure files\", \"infra\": \"Infrastructure as code or environment definitions\", \"examples\": \"Example usages and samples\", } @dataclass class Section: \"\"\"Rendered README section details.\"\"\" name: str title: str body: str metadata: Dict[str, object] class PromptBuilder: \"\"\"Assembles section-aware prompts from templates and signals.\"\"\" SYSTEM_PROMPT = ( \"You are a senior dev doc writer. Be precise. Cite repo facts only. No speculation. \" \"Never invent commands. Prefer commands detected by analyzers.\" ) def __init__( self, templates_dir: Path | None = None, *, style: str | None = None, template_pack: str | None = None, ) -> None: self.templates_dir = templates_dir or Path(__file__).with_name(\"templates\") self.style = (style or \"comprehensive\").lower() self.template_pack = template_pack if self.style not in {\"concise\", \"comprehensive\"}: self.style = \"comprehensive\" self._env = self._create_env(self.templates_dir) self._toc_placeho",
      "metadata": {
        "path": "docgen/prompting/builder.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "2a19d15f647c5e4c76e060d4471fd804c079e3067dedf0ce2e4e4a2a9b9dbded"
      }
    },
    {
      "id": "docgen/orchestrator.py#0",
      "vector": {
        "pipeline": 0.02361619114304532,
        "orchestration": 0.02361619114304532,
        "for": 0.02361619114304532,
        "init": 0.02361619114304532,
        "update": 0.04723238228609064,
        "regenerate": 0.02361619114304532,
        "flows": 0.02361619114304532,
        "from": 0.4959400140039517,
        "__future__": 0.02361619114304532,
        "import": 0.5431723962900423,
        "annotations": 0.02361619114304532,
        "logging": 0.04723238228609064,
        "dataclasses": 0.02361619114304532,
        "dataclass": 0.04723238228609064,
        "datetime": 0.04723238228609064,
        "difflib": 0.02361619114304532,
        "pathlib": 0.02361619114304532,
        "path": 0.07084857342913596,
        "typing": 0.02361619114304532,
        "dict": 0.02361619114304532,
        "iterable": 0.04723238228609064,
        "list": 0.02361619114304532,
        "optional": 0.04723238228609064,
        "sequence": 0.02361619114304532,
        "analyzers": 0.04723238228609064,
        "analyzer": 0.04723238228609064,
        "discover_analyzers": 0.02361619114304532,
        "config": 0.02361619114304532,
        "configerror": 0.02361619114304532,
        "docgenconfig": 0.02361619114304532,
        "load_config": 0.02361619114304532,
        "failsafe": 0.02361619114304532,
        "build_readme_stub": 0.02361619114304532,
        "build_section_stubs": 0.02361619114304532,
        "git": 0.04723238228609064,
        "diff": 0.04723238228609064,
        "diffanalyzer": 0.04723238228609064,
        "diffresult": 0.02361619114304532,
        "_pattern_matches": 0.02361619114304532,
        "as": 0.04723238228609064,
        "diff_pattern_matches": 0.02361619114304532,
        "publisher": 0.09446476457218128,
        "get_logger": 0.02361619114304532,
        "models": 0.02361619114304532,
        "repomanifest": 0.02361619114304532,
        "signal": 0.02361619114304532,
        "postproc": 0.14169714685827192,
        "lint": 0.02361619114304532,
        "markdownlinter": 0.04723238228609064,
        "markers": 0.02361619114304532,
        "markermanager": 0.04723238228609064,
        "toc": 0.02361619114304532,
        "tableofcontentsbuilder": 0.04723238228609064,
        "badges": 0.02361619114304532,
        "badgemanager": 0.04723238228609064,
        "links": 0.02361619114304532,
        "linkvalidator": 0.04723238228609064,
        "scorecard": 0.04723238228609064,
        "readmescorecard": 0.04723238228609064,
        "prompting": 0.02361619114304532,
        "builder": 0.02361619114304532,
        "promptbuilder": 0.04723238228609064,
        "rag": 0.02361619114304532,
        "indexer": 0.02361619114304532,
        "ragindexer": 0.04723238228609064,
        "repo_scanner": 0.02361619114304532,
        "reposcanner": 0.07084857342913596,
        "class": 0.04723238228609064,
        "updateoutcome": 0.02361619114304532,
        "result": 0.02361619114304532,
        "of": 0.02361619114304532,
        "a": 0.02361619114304532,
        "readme": 0.02361619114304532,
        "operation": 0.02361619114304532,
        "str": 0.02361619114304532,
        "dry_run": 0.02361619114304532,
        "bool": 0.02361619114304532,
        "orchestrator": 0.02361619114304532,
        "coordinates": 0.02361619114304532,
        "doc": 0.02361619114304532,
        "generation": 0.02361619114304532,
        "pipelines": 0.02361619114304532,
        "described": 0.02361619114304532,
        "in": 0.02361619114304532,
        "the": 0.02361619114304532,
        "spec": 0.02361619114304532,
        "def": 0.02361619114304532,
        "__init__": 0.02361619114304532,
        "self": 0.07084857342913596,
        "scanner": 0.07084857342913596,
        "none": 0.5667885874330877,
        "prompt_builder": 0.02361619114304532,
        "linter": 0.02361619114304532,
        "toc_builder": 0.02361619114304532,
        "rag_indexer": 0.02361619114304532,
        "diff_analyzer": 0.02361619114304532,
        "marker_manager": 0.02361619114304532,
        "badge_manager": 0.02361619114304532,
        "link_validator": 0.02361619114304532,
        "or": 0.02361619114304532,
        "_analyzer_overrides": 0.02361619114304532,
        "l": 0.02361619114304532
      },
      "text": "\"\"\"Pipeline orchestration for init/update/regenerate flows.\"\"\" from __future__ import annotations import logging from dataclasses import dataclass from datetime import datetime import difflib from pathlib import Path from typing import Dict, Iterable, List, Optional, Sequence from .analyzers import Analyzer, discover_analyzers from .config import ConfigError, DocGenConfig, load_config from .failsafe import build_readme_stub, build_section_stubs from .git.diff import DiffAnalyzer, DiffResult, _pattern_matches as diff_pattern_matches from .git.publisher import Publisher from .logging import get_logger from .models import RepoManifest, Signal from .postproc.lint import MarkdownLinter from .postproc.markers import MarkerManager from .postproc.toc import TableOfContentsBuilder from .postproc.badges import BadgeManager from .postproc.links import LinkValidator from .postproc.scorecard import ReadmeScorecard from .prompting.builder import PromptBuilder from .rag.indexer import RAGIndexer from .repo_scanner import RepoScanner @dataclass class UpdateOutcome: \"\"\"Result of a README update operation.\"\"\" path: Path diff: str dry_run: bool class Orchestrator: \"\"\"Coordinates doc generation pipelines as described in the spec.\"\"\" def __init__( self, scanner: RepoScanner | None = None, analyzers: Optional[Iterable[Analyzer]] = None, prompt_builder: PromptBuilder | None = None, publisher: Publisher | None = None, linter: MarkdownLinter | None = None, toc_builder: TableOfContentsBuilder | None = None, rag_indexer: RAGIndexer | None = None, diff_analyzer: DiffAnalyzer | None = None, marker_manager: MarkerManager | None = None, badge_manager: BadgeManager | None = None, link_validator: LinkValidator | None = None, scorecard: ReadmeScorecard | None = None, ) -> None: self.scanner = scanner or RepoScanner() self._analyzer_overrides = l",
      "metadata": {
        "path": "docgen/orchestrator.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "0cbc6a4727b259437e7a87dd3a500bf4f036ba5563cbb60ee321102b1b54b0cc"
      }
    },
    {
      "id": "docgen/config.py#0",
      "vector": {
        "configuration": 0.08495482076828985,
        "loading": 0.02831827358942995,
        "for": 0.0566365471788599,
        "docgen": 0.1132730943577198,
        "yml": 0.08495482076828985,
        "from": 0.1699096415365797,
        "__future__": 0.02831827358942995,
        "import": 0.14159136794714974,
        "annotations": 0.02831827358942995,
        "dataclasses": 0.02831827358942995,
        "dataclass": 0.1699096415365797,
        "field": 0.2265461887154396,
        "pathlib": 0.02831827358942995,
        "path": 0.1132730943577198,
        "typing": 0.02831827358942995,
        "any": 0.02831827358942995,
        "dict": 0.02831827358942995,
        "list": 0.31150100948372944,
        "optional": 0.48141065102030917,
        "sequence": 0.02831827358942995,
        "try": 0.02831827358942995,
        "pragma": 0.0566365471788599,
        "no": 0.0566365471788599,
        "cover": 0.0566365471788599,
        "dependency": 0.0566365471788599,
        "yaml": 0.02831827358942995,
        "as": 0.02831827358942995,
        "_yaml": 0.0566365471788599,
        "type": 0.02831827358942995,
        "ignore": 0.02831827358942995,
        "except": 0.02831827358942995,
        "modulenotfounderror": 0.02831827358942995,
        "none": 0.42477410384144926,
        "class": 0.1699096415365797,
        "configerror": 0.02831827358942995,
        "runtimeerror": 0.02831827358942995,
        "raised": 0.02831827358942995,
        "when": 0.02831827358942995,
        "the": 0.0566365471788599,
        "file": 0.02831827358942995,
        "cannot": 0.02831827358942995,
        "be": 0.02831827358942995,
        "parsed": 0.02831827358942995,
        "llmconfig": 0.0566365471788599,
        "llm": 0.0566365471788599,
        "runtime": 0.02831827358942995,
        "settings": 0.0566365471788599,
        "runner": 0.02831827358942995,
        "str": 0.36813755666258935,
        "model": 0.02831827358942995,
        "temperature": 0.02831827358942995,
        "float": 0.0566365471788599,
        "max_tokens": 0.02831827358942995,
        "int": 0.02831827358942995,
        "base_url": 0.02831827358942995,
        "api_key": 0.02831827358942995,
        "request_timeout": 0.02831827358942995,
        "publishconfig": 0.0566365471788599,
        "publish": 0.0566365471788599,
        "strategy": 0.02831827358942995,
        "readme": 0.02831827358942995,
        "updates": 0.02831827358942995,
        "mode": 0.02831827358942995,
        "branch_prefix": 0.02831827358942995,
        "labels": 0.02831827358942995,
        "default_factory": 0.19822791512600965,
        "update_existing": 0.02831827358942995,
        "bool": 0.02831827358942995,
        "false": 0.02831827358942995,
        "analyzerconfig": 0.08495482076828985,
        "analyzer": 0.02831827358942995,
        "enablement": 0.02831827358942995,
        "and": 0.02831827358942995,
        "exclusions": 0.02831827358942995,
        "enabled": 0.02831827358942995,
        "exclude_paths": 0.0566365471788599,
        "ciconfig": 0.08495482076828985,
        "continuous": 0.02831827358942995,
        "integration": 0.02831827358942995,
        "triggers": 0.02831827358942995,
        "watched_globs": 0.02831827358942995,
        "docgenconfig": 0.0566365471788599,
        "represents": 0.02831827358942995,
        "high": 0.02831827358942995,
        "level": 0.02831827358942995,
        "defined": 0.02831827358942995,
        "in": 0.02831827358942995,
        "root": 0.02831827358942995,
        "readme_style": 0.02831827358942995,
        "analyzers": 0.02831827358942995,
        "ci": 0.02831827358942995,
        "templates_dir": 0.02831827358942995,
        "template_pack": 0.02831827358942995,
        "def": 0.02831827358942995,
        "load_config": 0.02831827358942995,
        "config_path": 0.02831827358942995,
        "load": 0.02831827358942995,
        "disk": 0.02831827358942995,
        "config_file": 0.02831827358942995,
        "_res": 0.02831827358942995
      },
      "text": "\"\"\"Configuration loading for docgen (.docgen.yml).\"\"\" from __future__ import annotations from dataclasses import dataclass, field from pathlib import Path from typing import Any, Dict, List, Optional, Sequence try: # pragma: no cover - optional dependency import yaml as _yaml # type: ignore except ModuleNotFoundError: # pragma: no cover - optional dependency _yaml = None class ConfigError(RuntimeError): \"\"\"Raised when the configuration file cannot be parsed.\"\"\" @dataclass class LLMConfig: \"\"\"LLM runtime settings from .docgen.yml.\"\"\" runner: Optional[str] = None model: Optional[str] = None temperature: Optional[float] = None max_tokens: Optional[int] = None base_url: Optional[str] = None api_key: Optional[str] = None request_timeout: Optional[float] = None @dataclass class PublishConfig: \"\"\"Publish strategy for README updates.\"\"\" mode: Optional[str] = None branch_prefix: Optional[str] = None labels: List[str] = field(default_factory=list) update_existing: bool = False @dataclass class AnalyzerConfig: \"\"\"Analyzer enablement and exclusions.\"\"\" enabled: List[str] = field(default_factory=list) exclude_paths: List[str] = field(default_factory=list) @dataclass class CIConfig: \"\"\"Continuous integration triggers.\"\"\" watched_globs: List[str] = field(default_factory=list) @dataclass class DocGenConfig: \"\"\"Represents the high-level settings defined in .docgen.yml.\"\"\" root: Path llm: Optional[LLMConfig] = None readme_style: Optional[str] = None analyzers: AnalyzerConfig = field(default_factory=AnalyzerConfig) publish: Optional[PublishConfig] = None ci: CIConfig = field(default_factory=CIConfig) exclude_paths: List[str] = field(default_factory=list) templates_dir: Optional[Path] = None template_pack: Optional[str] = None def load_config(config_path: Path) -> DocGenConfig: \"\"\"Load configuration from disk.\"\"\" config_file = _res",
      "metadata": {
        "path": "docgen/config.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "a23124e93cd81e0166fcb8959b466d1c0fbe253a2bfa8f204ea7e58a3a299064"
      }
    },
    {
      "id": "docgen/repo_scanner.py#0",
      "vector": {
        "repository": 0.04233337566673017,
        "scanning": 0.04233337566673017,
        "and": 0.04233337566673017,
        "manifest": 0.04233337566673017,
        "building": 0.04233337566673017,
        "utilities": 0.04233337566673017,
        "from": 0.33866700533384136,
        "__future__": 0.04233337566673017,
        "import": 0.4233337566673017,
        "annotations": 0.04233337566673017,
        "hashlib": 0.04233337566673017,
        "json": 0.16933350266692068,
        "os": 0.04233337566673017,
        "dataclasses": 0.04233337566673017,
        "dataclass": 0.08466675133346034,
        "fnmatch": 0.04233337566673017,
        "fnmatchcase": 0.04233337566673017,
        "pathlib": 0.04233337566673017,
        "path": 0.04233337566673017,
        "typing": 0.04233337566673017,
        "dict": 0.04233337566673017,
        "iterator": 0.04233337566673017,
        "list": 0.04233337566673017,
        "sequence": 0.04233337566673017,
        "config": 0.1270001270001905,
        "configerror": 0.04233337566673017,
        "load_config": 0.04233337566673017,
        "models": 0.04233337566673017,
        "filemeta": 0.04233337566673017,
        "repomanifest": 0.04233337566673017,
        "_excluded_dirs": 0.04233337566673017,
        "git": 0.04233337566673017,
        "hg": 0.04233337566673017,
        "svn": 0.04233337566673017,
        "venv": 0.04233337566673017,
        "node_modules": 0.04233337566673017,
        "__pycache__": 0.04233337566673017,
        "pytest_cache": 0.04233337566673017,
        "mypy_cache": 0.04233337566673017,
        "idea": 0.04233337566673017,
        "docgen": 0.08466675133346034,
        "sandbox": 0.04233337566673017,
        "_excluded_files": 0.04233337566673017,
        "readme": 0.04233337566673017,
        "md": 0.04233337566673017,
        "ds_store": 0.04233337566673017,
        "thumbs": 0.04233337566673017,
        "db": 0.04233337566673017,
        "_language_by_suffix": 0.04233337566673017,
        "py": 0.04233337566673017,
        "python": 0.08466675133346034,
        "pyi": 0.04233337566673017,
        "js": 0.04233337566673017,
        "javascript": 0.08466675133346034,
        "ts": 0.04233337566673017,
        "typescript": 0.08466675133346034,
        "tsx": 0.04233337566673017,
        "jsx": 0.04233337566673017,
        "java": 0.08466675133346034,
        "kt": 0.04233337566673017,
        "kotlin": 0.08466675133346034,
        "kts": 0.04233337566673017,
        "go": 0.08466675133346034,
        "rs": 0.04233337566673017,
        "rust": 0.04233337566673017,
        "rb": 0.04233337566673017,
        "ruby": 0.04233337566673017,
        "php": 0.08466675133346034,
        "cs": 0.04233337566673017,
        "c": 0.4233337566673017,
        "h": 0.04233337566673017,
        "cpp": 0.04233337566673017,
        "hpp": 0.04233337566673017,
        "cc": 0.04233337566673017,
        "hh": 0.04233337566673017,
        "swift": 0.08466675133346034,
        "m": 0.04233337566673017,
        "objective": 0.08466675133346034,
        "mm": 0.04233337566673017,
        "scala": 0.08466675133346034,
        "r": 0.08466675133346034,
        "jl": 0.04233337566673017,
        "julia": 0.04233337566673017,
        "sh": 0.04233337566673017,
        "shell": 0.04233337566673017,
        "ps1": 0.04233337566673017,
        "powershell": 0.04233337566673017,
        "bat": 0.04233337566673017,
        "batch": 0.08466675133346034,
        "cmd": 0.04233337566673017,
        "yaml": 0.1270001270001905,
        "yml": 0.08466675133346034,
        "toml": 0.08466675133346034,
        "_role_rules": 0.04233337566673017,
        "tuple": 0.08466675133346034,
        "str": 0.16933350266692068,
        "tests": 0.04233337566673017,
        "test": 0.1270001270001905,
        "docs": 0.1270001270001905,
        "doc": 0.04233337566673017,
        "examples": 0.1270001270001905,
        "example": 0.04233337566673017,
        "infra": 0.08466675133346034,
        "_cache_filename": 0.04233337566673017,
        "manifest_cache": 0.04233337566673017,
        "_cache_version": 0.04233337566673017,
        "1": 0.04233337566673017,
        "class": 0.04233337566673017,
        "ignorerule": 0.04233337566673017,
        "represents": 0.04233337566673017,
        "an": 0.04233337566673017,
        "ignore": 0.04233337566673017,
        "rule": 0.04233337566673017,
        "parsed": 0.04233337566673017,
        "gitignore": 0.04233337566673017,
        "or": 0.04233337566673017,
        "pattern": 0.08466675133346034,
        "directory_only": 0.04233337566673017,
        "bool": 0.254000254000381,
        "anchored": 0.04233337566673017,
        "negate": 0.04233337566673017,
        "has_slash": 0.04233337566673017,
        "def": 0.04233337566673017,
        "matches": 0.04233337566673017,
        "self": 0.08466675133346034,
        "rel_path": 0.04233337566673017,
        "is_dir": 0.04233337566673017,
        "if": 0.04233337566673017,
        "not": 0.04233337566673017,
        "return": 0.04233337566673017,
        "false": 0.04233337566673017,
        "i": 0.04233337566673017
      },
      "text": "\"\"\"Repository scanning and manifest building utilities.\"\"\" from __future__ import annotations import hashlib import json import os from dataclasses import dataclass from fnmatch import fnmatchcase from pathlib import Path from typing import Dict, Iterator, List, Sequence from .config import ConfigError, load_config from .models import FileMeta, RepoManifest _EXCLUDED_DIRS = { \".git\", \".hg\", \".svn\", \".venv\", \"node_modules\", \"__pycache__\", \".pytest_cache\", \".mypy_cache\", \".idea\", \".docgen\", \"sandbox\", } _EXCLUDED_FILES = { \"README.md~\", \".DS_Store\", \"Thumbs.db\", } _LANGUAGE_BY_SUFFIX = { \".py\": \"Python\", \".pyi\": \"Python\", \".js\": \"JavaScript\", \".ts\": \"TypeScript\", \".tsx\": \"TypeScript\", \".jsx\": \"JavaScript\", \".java\": \"Java\", \".kt\": \"Kotlin\", \".kts\": \"Kotlin\", \".go\": \"Go\", \".rs\": \"Rust\", \".rb\": \"Ruby\", \".php\": \"PHP\", \".cs\": \"C#\", \".c\": \"C\", \".h\": \"C\", \".cpp\": \"C++\", \".hpp\": \"C++\", \".cc\": \"C++\", \".hh\": \"C++\", \".swift\": \"Swift\", \".m\": \"Objective-C\", \".mm\": \"Objective-C++\", \".scala\": \"Scala\", \".r\": \"R\", \".jl\": \"Julia\", \".sh\": \"Shell\", \".ps1\": \"PowerShell\", \".bat\": \"Batch\", \".cmd\": \"Batch\", \".yaml\": \"YAML\", \".yml\": \"YAML\", \".json\": \"JSON\", \".toml\": \"TOML\", } _ROLE_RULES: tuple[tuple[str, str], ...] = ( (\"tests\", \"test\"), (\"test\", \"test\"), (\"docs\", \"docs\"), (\"doc\", \"docs\"), (\"examples\", \"examples\"), (\"example\", \"examples\"), (\"config\", \"config\"), (\"infra\", \"infra\"), ) _CACHE_FILENAME = \"manifest_cache.json\" _CACHE_VERSION = 1 @dataclass class IgnoreRule: \"\"\"Represents an ignore rule parsed from .gitignore or .docgen.yml.\"\"\" pattern: str directory_only: bool anchored: bool negate: bool has_slash: bool def matches(self, rel_path: str, is_dir: bool) -> bool: if not self.pattern: return False i",
      "metadata": {
        "path": "docgen/repo_scanner.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "d3b42acab7acfa53312849c080c2858388857ed2ca00b45049527d26e6560a58"
      }
    },
    {
      "id": "docgen/llm/runner.py#0",
      "vector": {
        "adapters": 0.03477340712103605,
        "around": 0.03477340712103605,
        "local": 0.10432022136310813,
        "model": 0.2781872569682884,
        "runtimes": 0.03477340712103605,
        "runner": 0.1390936284841442,
        "ollama": 0.0695468142420721,
        "from": 0.20864044272621626,
        "__future__": 0.03477340712103605,
        "import": 0.34773407121036043,
        "annotations": 0.03477340712103605,
        "ipaddress": 0.03477340712103605,
        "json": 0.03477340712103605,
        "os": 0.03477340712103605,
        "subprocess": 0.03477340712103605,
        "dataclasses": 0.03477340712103605,
        "dataclass": 0.0695468142420721,
        "typing": 0.03477340712103605,
        "callable": 0.0695468142420721,
        "optional": 0.3825074783313965,
        "sequence": 0.03477340712103605,
        "urllib": 0.10432022136310813,
        "error": 0.03477340712103605,
        "httperror": 0.03477340712103605,
        "urlerror": 0.03477340712103605,
        "parse": 0.03477340712103605,
        "urlparse": 0.03477340712103605,
        "request": 0.10432022136310813,
        "urlopen": 0.03477340712103605,
        "_auto_base_url": 0.0695468142420721,
        "object": 0.1390936284841442,
        "_auto_api_key": 0.0695468142420721,
        "class": 0.0695468142420721,
        "llmrequest": 0.0695468142420721,
        "represents": 0.03477340712103605,
        "an": 0.03477340712103605,
        "inference": 0.03477340712103605,
        "for": 0.03477340712103605,
        "the": 0.0695468142420721,
        "prompt": 0.03477340712103605,
        "str": 0.3825074783313965,
        "system": 0.03477340712103605,
        "temperature": 0.1390936284841442,
        "float": 0.1390936284841442,
        "max_tokens": 0.1390936284841442,
        "int": 0.0695468142420721,
        "executable": 0.1390936284841442,
        "base_url": 0.1390936284841442,
        "api_key": 0.0695468142420721,
        "request_timeout": 0.0695468142420721,
        "llmrunner": 0.03477340712103605,
        "executes": 0.03477340712103605,
        "prompts": 0.03477340712103605,
        "against": 0.03477340712103605,
        "configured": 0.03477340712103605,
        "runtime": 0.03477340712103605,
        "default_model": 0.03477340712103605,
        "ai": 0.03477340712103605,
        "smollm2": 0.03477340712103605,
        "360m": 0.03477340712103605,
        "q4_k_m": 0.03477340712103605,
        "default_base_urls": 0.03477340712103605,
        "http": 0.0695468142420721,
        "localhost": 0.03477340712103605,
        "12434": 0.03477340712103605,
        "engines": 0.0695468142420721,
        "v1": 0.0695468142420721,
        "docker": 0.03477340712103605,
        "internal": 0.03477340712103605,
        "env_model_keys": 0.03477340712103605,
        "docgen_llm_model": 0.03477340712103605,
        "model_runner_model": 0.03477340712103605,
        "openai_model": 0.03477340712103605,
        "env_base_url_keys": 0.03477340712103605,
        "docgen_llm_base_url": 0.03477340712103605,
        "model_runner_base_url": 0.03477340712103605,
        "openai_base_url": 0.03477340712103605,
        "env_api_key_keys": 0.03477340712103605,
        "docgen_llm_api_key": 0.03477340712103605,
        "model_runner_api_key": 0.03477340712103605,
        "openai_api_key": 0.03477340712103605,
        "def": 0.03477340712103605,
        "__init__": 0.03477340712103605,
        "self": 0.2781872569682884,
        "none": 0.2781872569682884,
        "0": 0.0695468142420721,
        "2": 0.03477340712103605,
        "60": 0.03477340712103605,
        "_resolve_model": 0.03477340712103605,
        "_resolve_base_url": 0.03477340712103605
      },
      "text": "\"\"\"Adapters around local model runtimes (Model Runner / Ollama).\"\"\" from __future__ import annotations import ipaddress import json import os import subprocess from dataclasses import dataclass from typing import Callable, Optional, Sequence from urllib.error import HTTPError, URLError from urllib.parse import urlparse from urllib.request import Request, urlopen _AUTO_BASE_URL = object() _AUTO_API_KEY = object() @dataclass class LLMRequest: \"\"\"Represents an inference request for the local runner.\"\"\" prompt: str system: Optional[str] model: str temperature: Optional[float] max_tokens: Optional[int] executable: Optional[str] base_url: Optional[str] api_key: Optional[str] request_timeout: Optional[float] class LLMRunner: \"\"\"Executes prompts against the configured local model runtime.\"\"\" DEFAULT_MODEL = \"ai/smollm2:360M-Q4_K_M\" DEFAULT_BASE_URLS = ( \"http://localhost:12434/engines/v1\", \"http://model-runner.docker.internal/engines/v1\", ) ENV_MODEL_KEYS = (\"DOCGEN_LLM_MODEL\", \"MODEL_RUNNER_MODEL\", \"OPENAI_MODEL\") ENV_BASE_URL_KEYS = ( \"DOCGEN_LLM_BASE_URL\", \"MODEL_RUNNER_BASE_URL\", \"OPENAI_BASE_URL\", ) ENV_API_KEY_KEYS = ( \"DOCGEN_LLM_API_KEY\", \"MODEL_RUNNER_API_KEY\", \"OPENAI_API_KEY\", ) def __init__( self, model: str | None = None, *, base_url: str | None | object = _AUTO_BASE_URL, executable: str = \"ollama\", temperature: Optional[float] = 0.2, max_tokens: Optional[int] = None, api_key: str | None | object = _AUTO_API_KEY, request_timeout: Optional[float] = 60.0, runner: Callable[[LLMRequest], str] | None = None, ) -> None: self.model = self._resolve_model(model) self.base_url = self._resolve_base_url(base_url) self.executable = executable self.temperature = temperature self.max_tokens = max_tokens",
      "metadata": {
        "path": "docgen/llm/runner.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "f360c0541dcb4f08dcdc8e8ced7ba58c2bcca31cef9a188bb137020d9686ff04"
      }
    },
    {
      "id": "docgen/analyzers/structure.py#0",
      "vector": {
        "analyzer": 0.10947155477532401,
        "that": 0.03649051825844134,
        "infers": 0.03649051825844134,
        "repository": 0.03649051825844134,
        "architecture": 0.07298103651688267,
        "constructs": 0.03649051825844134,
        "for": 0.07298103651688267,
        "readme": 0.03649051825844134,
        "init": 0.03649051825844134,
        "from": 0.2919241460675307,
        "__future__": 0.03649051825844134,
        "import": 0.2919241460675307,
        "annotations": 0.03649051825844134,
        "re": 0.14596207303376535,
        "collections": 0.03649051825844134,
        "defaultdict": 0.07298103651688267,
        "dataclasses": 0.03649051825844134,
        "dataclass": 0.07298103651688267,
        "pathlib": 0.03649051825844134,
        "path": 0.07298103651688267,
        "typing": 0.03649051825844134,
        "dict": 0.10947155477532401,
        "iterable": 0.07298103651688267,
        "list": 0.10947155477532401,
        "sequence": 0.03649051825844134,
        "base": 0.03649051825844134,
        "models": 0.03649051825844134,
        "repomanifest": 0.14596207303376535,
        "signal": 0.14596207303376535,
        "_fastapi_decorator": 0.03649051825844134,
        "compile": 0.10947155477532401,
        "r": 0.10947155477532401,
        "w": 0.07298103651688267,
        "get": 0.07298103651688267,
        "post": 0.07298103651688267,
        "put": 0.07298103651688267,
        "delete": 0.07298103651688267,
        "patch": 0.07298103651688267,
        "3": 0.07298103651688267,
        "_express_route": 0.03649051825844134,
        "app": 0.03649051825844134,
        "router": 0.03649051825844134,
        "_py_model_class": 0.03649051825844134,
        "class": 0.10947155477532401,
        "s": 0.07298103651688267,
        "_filesummary": 0.10947155477532401,
        "count": 0.03649051825844134,
        "int": 0.03649051825844134,
        "0": 0.03649051825844134,
        "roles": 0.10947155477532401,
        "set": 0.14596207303376535,
        "str": 0.14596207303376535,
        "none": 0.1824525912922067,
        "type": 0.07298103651688267,
        "ignore": 0.07298103651688267,
        "assignment": 0.07298103651688267,
        "languages": 0.10947155477532401,
        "def": 0.14596207303376535,
        "__post_init__": 0.03649051825844134,
        "self": 0.4013957008428547,
        "if": 0.10947155477532401,
        "is": 0.07298103651688267,
        "structureanalyzer": 0.03649051825844134,
        "derives": 0.03649051825844134,
        "architectural": 0.03649051825844134,
        "signals": 0.21894310955064802,
        "source": 0.07298103651688267,
        "files": 0.10947155477532401,
        "and": 0.03649051825844134,
        "layout": 0.03649051825844134,
        "supports": 0.03649051825844134,
        "manifest": 0.2919241460675307,
        "bool": 0.07298103651688267,
        "return": 0.07298103651688267,
        "analyze": 0.03649051825844134,
        "modules": 0.21894310955064802,
        "_summarise_modules": 0.07298103651688267,
        "append": 0.03649051825844134,
        "name": 0.03649051825844134,
        "value": 0.03649051825844134,
        "structure": 0.03649051825844134,
        "metadata": 0.03649051825844134,
        "api_signals": 0.07298103651688267,
        "_detect_api_endpoints": 0.03649051825844134,
        "extend": 0.07298103651688267,
        "entity_signals": 0.07298103651688267,
        "_detect_entities": 0.03649051825844134,
        "object": 0.03649051825844134,
        "summaries": 0.03649051825844134,
        "meta": 0.07298103651688267,
        "in": 0.03649051825844134,
        "parts": 0.03649051825844134
      },
      "text": "\"\"\"Analyzer that infers repository architecture constructs for README init.\"\"\" from __future__ import annotations import re from collections import defaultdict from dataclasses import dataclass from pathlib import Path from typing import Dict, Iterable, List, Sequence from .base import Analyzer from ..models import RepoManifest, Signal _FASTAPI_DECORATOR = re.compile(r\"@(\\w+)\\.(get|post|put|delete|patch)\\((['\\\"])([^'\\\"]+)\\3\") _EXPRESS_ROUTE = re.compile(r\"(app|router)\\.(get|post|put|delete|patch)\\((['\\\"])([^'\\\"]+)\\3\") _PY_MODEL_CLASS = re.compile(r\"class\\s+(\\w+)\\(([^)]*)\\):\") @dataclass class _FileSummary: count: int = 0 roles: set[str] = None # type: ignore[assignment] languages: set[str] = None # type: ignore[assignment] def __post_init__(self) -> None: if self.roles is None: self.roles = set() if self.languages is None: self.languages = set() class StructureAnalyzer(Analyzer): \"\"\"Derives architectural signals from source files and layout.\"\"\" def supports(self, manifest: RepoManifest) -> bool: return bool(manifest.files) def analyze(self, manifest: RepoManifest) -> Iterable[Signal]: signals: List[Signal] = [] modules = self._summarise_modules(manifest) if modules: signals.append( Signal( name=\"architecture.modules\", value=\"modules\", source=\"structure\", metadata={\"modules\": modules}, ) ) api_signals = self._detect_api_endpoints(manifest) signals.extend(api_signals) entity_signals = self._detect_entities(manifest) signals.extend(entity_signals) return signals def _summarise_modules(self, manifest: RepoManifest) -> List[Dict[str, object]]: summaries: Dict[str, _FileSummary] = defaultdict(_FileSummary) for meta in manifest.files: parts = meta.path.s",
      "metadata": {
        "path": "docgen/analyzers/structure.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "7e426b802538dab6d253810a2d7d01914ac47fd2054061b7c6b373d6b4b62c8e"
      }
    },
    {
      "id": "docgen/git/diff.py#0",
      "vector": {
        "diff": 0.04867923835112355,
        "inspection": 0.04867923835112355,
        "utilities": 0.04867923835112355,
        "from": 0.24339619175561772,
        "__future__": 0.04867923835112355,
        "import": 0.24339619175561772,
        "annotations": 0.04867923835112355,
        "dataclasses": 0.04867923835112355,
        "dataclass": 0.14603771505337063,
        "fnmatch": 0.0973584767022471,
        "pathlib": 0.04867923835112355,
        "path": 0.14603771505337063,
        "typing": 0.04867923835112355,
        "callable": 0.04867923835112355,
        "iterable": 0.04867923835112355,
        "list": 0.04867923835112355,
        "sequence": 0.24339619175561772,
        "set": 0.04867923835112355,
        "frozen": 0.0973584767022471,
        "true": 0.14603771505337063,
        "class": 0.14603771505337063,
        "diffresult": 0.04867923835112355,
        "summary": 0.04867923835112355,
        "of": 0.04867923835112355,
        "repository": 0.0973584767022471,
        "changes": 0.0973584767022471,
        "and": 0.04867923835112355,
        "impacted": 0.04867923835112355,
        "readme": 0.24339619175561772,
        "sections": 0.1947169534044942,
        "base": 0.04867923835112355,
        "str": 0.29207543010674125,
        "changed_files": 0.04867923835112355,
        "sectionrule": 0.24339619175561772,
        "associates": 0.04867923835112355,
        "file": 0.04867923835112355,
        "change": 0.04867923835112355,
        "patterns": 0.24339619175561772,
        "with": 0.04867923835112355,
        "section": 0.14603771505337063,
        "def": 0.04867923835112355,
        "matches": 0.04867923835112355,
        "self": 0.0973584767022471,
        "bool": 0.04867923835112355,
        "for": 0.04867923835112355,
        "pattern": 0.0973584767022471,
        "in": 0.04867923835112355,
        "if": 0.04867923835112355,
        "_pattern_matches": 0.04867923835112355,
        "return": 0.0973584767022471,
        "false": 0.04867923835112355,
        "diffanalyzer": 0.04867923835112355,
        "maps": 0.04867923835112355,
        "to": 0.04867923835112355,
        "affected": 0.04867923835112355,
        "_ignored_paths": 0.04867923835112355,
        "md": 0.04867923835112355,
        "_section_rules": 0.04867923835112355,
        "build_and_test": 0.04867923835112355,
        "requirements": 0.0973584767022471,
        "txt": 0.14603771505337063,
        "pyproject": 0.0973584767022471,
        "toml": 0.0973584767022471,
        "poetry": 0.04867923835112355,
        "lock": 0.1947169534044942,
        "pipfile": 0.0973584767022471,
        "package": 0.14603771505337063,
        "json": 0.14603771505337063,
        "pnpm": 0.04867923835112355,
        "yaml": 0.0973584767022471,
        "yarn": 0.04867923835112355,
        "pom": 0.04867923835112355,
        "xml": 0.04867923835112355,
        "build": 0.0973584767022471,
        "gradle": 0.14603771505337063,
        "kts": 0.04867923835112355,
        "makefile": 0.0973584767022471,
        "cmakelists": 0.04867923835112355,
        "setup": 0.0973584767022471,
        "cfg": 0.04867923835112355,
        "py": 0.04867923835112355,
        "tox": 0.04867923835112355,
        "ini": 0.04867923835112355,
        "tests": 0.04867923835112355,
        "quickstart": 0.04867923835112355,
        "dockerfile": 0.04867923835112355,
        "docker": 0.0973584767022471,
        "compose": 0.0973584767022471,
        "yml": 0.04867923835112355,
        "scripts": 0.04867923835112355
      },
      "text": "\"\"\"Diff inspection utilities.\"\"\" from __future__ import annotations from dataclasses import dataclass from fnmatch import fnmatch from pathlib import Path from typing import Callable, Iterable, List, Sequence, Set @dataclass(frozen=True) class DiffResult: \"\"\"Summary of repository changes and impacted README sections.\"\"\" base: str changed_files: Sequence[str] sections: Sequence[str] @dataclass(frozen=True) class SectionRule: \"\"\"Associates file change patterns with README sections.\"\"\" section: str patterns: Sequence[str] def matches(self, path: str) -> bool: for pattern in self.patterns: if _pattern_matches(path, pattern): return True return False class DiffAnalyzer: \"\"\"Maps repository changes to affected README sections.\"\"\" _IGNORED_PATHS = {\"README.md\", \"README\"} _SECTION_RULES: Sequence[SectionRule] = ( SectionRule( section=\"build_and_test\", patterns=( \"requirements.txt\", \"pyproject.toml\", \"poetry.lock\", \"Pipfile\", \"package.json\", \"package-lock.json\", \"pnpm-lock.yaml\", \"yarn.lock\", \"pom.xml\", \"build.gradle\", \"build.gradle.kts\", \"gradle/\", \"Makefile\", \"CMakeLists.txt\", \"setup.cfg\", \"setup.py\", \"tox.ini\", \"tests/\", ), ), SectionRule( section=\"quickstart\", patterns=( \"requirements.txt\", \"pyproject.toml\", \"Pipfile\", \"package.json\", \"Dockerfile\", \"docker-compose.yml\", \"docker-compose.yaml\", \"Makefile\", \"scripts/\", ), ), SectionRule(",
      "metadata": {
        "path": "docgen/git/diff.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "805617fee00b02704767ca3f528aaddcf5310733c2087a424bc7900f8d236063"
      }
    },
    {
      "id": "docgen/analyzers/entrypoints.py#0",
      "vector": {
        "analyzer": 0.1138784427001685,
        "to": 0.037959480900056165,
        "detect": 0.07591896180011233,
        "executable": 0.07591896180011233,
        "entrypoints": 0.3795948090005617,
        "across": 0.037959480900056165,
        "supported": 0.037959480900056165,
        "languages": 0.037959480900056165,
        "from": 0.2657163663003932,
        "__future__": 0.037959480900056165,
        "import": 0.3036758472004493,
        "annotations": 0.037959480900056165,
        "re": 0.037959480900056165,
        "dataclasses": 0.037959480900056165,
        "dataclass": 0.07591896180011233,
        "pathlib": 0.037959480900056165,
        "path": 0.1138784427001685,
        "typing": 0.037959480900056165,
        "iterable": 0.07591896180011233,
        "list": 0.1138784427001685,
        "optional": 0.07591896180011233,
        "base": 0.037959480900056165,
        "utils": 0.037959480900056165,
        "build_node_script_command": 0.037959480900056165,
        "detect_node_package_manager": 0.037959480900056165,
        "load_node_dependencies": 0.037959480900056165,
        "load_package_json": 0.037959480900056165,
        "models": 0.037959480900056165,
        "repomanifest": 0.1138784427001685,
        "signal": 0.18979740450028085,
        "class": 0.07591896180011233,
        "entrypoint": 0.15183792360022466,
        "represents": 0.037959480900056165,
        "a": 0.037959480900056165,
        "detected": 0.037959480900056165,
        "with": 0.037959480900056165,
        "an": 0.037959480900056165,
        "associated": 0.037959480900056165,
        "command": 0.18979740450028085,
        "name": 0.1138784427001685,
        "str": 0.15183792360022466,
        "label": 0.1138784427001685,
        "priority": 0.18979740450028085,
        "int": 0.037959480900056165,
        "50": 0.037959480900056165,
        "framework": 0.15183792360022466,
        "none": 0.037959480900056165,
        "entrypointanalyzer": 0.037959480900056165,
        "for": 0.1138784427001685,
        "quick": 0.037959480900056165,
        "start": 0.037959480900056165,
        "guidance": 0.037959480900056165,
        "def": 0.07591896180011233,
        "supports": 0.037959480900056165,
        "self": 0.18979740450028085,
        "manifest": 0.2657163663003932,
        "bool": 0.07591896180011233,
        "return": 0.037959480900056165,
        "files": 0.07591896180011233,
        "analyze": 0.037959480900056165,
        "manifest_paths": 0.07591896180011233,
        "file": 0.07591896180011233,
        "in": 0.07591896180011233,
        "extend": 0.1138784427001685,
        "_python_entrypoints": 0.037959480900056165,
        "_node_entrypoints": 0.037959480900056165,
        "root": 0.037959480900056165,
        "_java_entrypoints": 0.037959480900056165,
        "signals": 0.1138784427001685,
        "entry": 0.3036758472004493,
        "sorted": 0.037959480900056165,
        "key": 0.07591896180011233,
        "lambda": 0.07591896180011233,
        "ep": 0.15183792360022466,
        "metadata": 0.15183792360022466,
        "if": 0.07591896180011233,
        "append": 0.07591896180011233,
        "f": 0.037959480900056165,
        "value": 0.037959480900056165,
        "source": 0.037959480900056165,
        "primary": 0.037959480900056165,
        "min": 0.037959480900056165
      },
      "text": "\"\"\"Analyzer to detect executable entrypoints across supported languages.\"\"\" from __future__ import annotations import re from dataclasses import dataclass from pathlib import Path from typing import Iterable, List, Optional from .base import Analyzer from .utils import ( build_node_script_command, detect_node_package_manager, load_node_dependencies, load_package_json, ) from ..models import RepoManifest, Signal @dataclass class EntryPoint: \"\"\"Represents a detected entrypoint with an associated command.\"\"\" name: str command: str label: str priority: int = 50 framework: Optional[str] = None class EntryPointAnalyzer(Analyzer): \"\"\"Detect executable entrypoints for quick-start guidance.\"\"\" def supports(self, manifest: RepoManifest) -> bool: return bool(manifest.files) def analyze(self, manifest: RepoManifest) -> Iterable[Signal]: entrypoints: List[EntryPoint] = [] manifest_paths = {file.path for file in manifest.files} entrypoints.extend(self._python_entrypoints(manifest)) entrypoints.extend(self._node_entrypoints(Path(manifest.root), manifest_paths)) entrypoints.extend(self._java_entrypoints(manifest)) signals: List[Signal] = [] for entry in sorted(entrypoints, key=lambda ep: ep.priority): metadata = { \"command\": entry.command, \"label\": entry.label, \"priority\": entry.priority, } if entry.framework: metadata[\"framework\"] = entry.framework signals.append( Signal( name=f\"entrypoint.{entry.name}\", value=entry.command, source=\"entrypoints\", metadata=metadata, ) ) if entrypoints: primary = min(entrypoints, key=lambda ep: ep.priority) signals.append( Signal(",
      "metadata": {
        "path": "docgen/analyzers/entrypoints.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "ac6fde3c11c9307a9404023a5c751a29b1b853fd3bce32a53799a0a80495371a"
      }
    },
    {
      "id": "docgen/analyzers/utils.py#0",
      "vector": {
        "shared": 0.03300491809922248,
        "helper": 0.03300491809922248,
        "utilities": 0.03300491809922248,
        "for": 0.13201967239688991,
        "analyzer": 0.03300491809922248,
        "implementations": 0.03300491809922248,
        "from": 0.13201967239688991,
        "__future__": 0.03300491809922248,
        "import": 0.23103442669455734,
        "annotations": 0.03300491809922248,
        "json": 0.03300491809922248,
        "re": 0.09901475429766744,
        "tomllib": 0.06600983619844496,
        "xml": 0.03300491809922248,
        "etree": 0.03300491809922248,
        "elementtree": 0.03300491809922248,
        "as": 0.03300491809922248,
        "et": 0.03300491809922248,
        "pathlib": 0.03300491809922248,
        "path": 0.26403934479377983,
        "typing": 0.03300491809922248,
        "dict": 0.13201967239688991,
        "iterable": 0.03300491809922248,
        "list": 0.1650245904961124,
        "optional": 0.13201967239688991,
        "set": 0.1650245904961124,
        "python": 0.06600983619844496,
        "dependency": 0.03300491809922248,
        "helpers": 0.03300491809922248,
        "def": 0.09901475429766744,
        "load_python_dependencies": 0.03300491809922248,
        "root": 0.09901475429766744,
        "str": 0.23103442669455734,
        "collect": 0.03300491809922248,
        "dependencies": 0.2970442628930023,
        "requirements": 0.1650245904961124,
        "txt": 0.06600983619844496,
        "and": 0.06600983619844496,
        "pyproject": 0.1650245904961124,
        "toml": 0.06600983619844496,
        "deps": 0.13201967239688991,
        "if": 0.2970442628930023,
        "exists": 0.06600983619844496,
        "update": 0.06600983619844496,
        "_parse_requirements": 0.06600983619844496,
        "_parse_pyproject": 0.06600983619844496,
        "return": 0.09901475429766744,
        "sorted": 0.03300491809922248,
        "packages": 0.13201967239688991,
        "line": 0.06600983619844496,
        "in": 0.09901475429766744,
        "read_text": 0.06600983619844496,
        "encoding": 0.06600983619844496,
        "utf": 0.06600983619844496,
        "8": 0.06600983619844496,
        "splitlines": 0.03300491809922248,
        "stripped": 0.13201967239688991,
        "strip": 0.09901475429766744,
        "not": 0.03300491809922248,
        "or": 0.1650245904961124,
        "startswith": 0.03300491809922248,
        "r": 0.09901475429766744,
        "continue": 0.03300491809922248,
        "name": 0.19802950859533489,
        "split": 0.06600983619844496,
        "1": 0.06600983619844496,
        "0": 0.06600983619844496,
        "append": 0.03300491809922248,
        "try": 0.03300491809922248,
        "data": 0.13201967239688991,
        "loads": 0.03300491809922248,
        "except": 0.03300491809922248,
        "exception": 0.03300491809922248,
        "project": 0.1650245904961124,
        "get": 0.23103442669455734,
        "isinstance": 0.13201967239688991,
        "extend": 0.09901475429766744,
        "values": 0.09901475429766744,
        "poetry": 0.13201967239688991,
        "tool": 0.06600983619844496,
        "else": 0.03300491809922248,
        "poetry_deps": 0.06600983619844496,
        "keys": 0.03300491809922248,
        "dep": 0.09901475429766744,
        "lo": 0.03300491809922248
      },
      "text": "\ufeff\"\"\"Shared helper utilities for analyzer implementations.\"\"\" from __future__ import annotations import json import re import tomllib import xml.etree.ElementTree as ET from pathlib import Path from typing import Dict, Iterable, List, Optional, Set # Python dependency helpers def load_python_dependencies(root: Path) -> List[str]: \"\"\"Collect Python dependencies from requirements.txt and pyproject.toml.\"\"\" deps: Set[str] = set() requirements = root / \"requirements.txt\" if requirements.exists(): deps.update(_parse_requirements(requirements)) pyproject = root / \"pyproject.toml\" if pyproject.exists(): deps.update(_parse_pyproject(pyproject)) return sorted(deps) def _parse_requirements(path: Path) -> List[str]: packages: List[str] = [] for line in path.read_text(encoding=\"utf-8\").splitlines(): stripped = line.strip() if not stripped or stripped.startswith((\"#\", \"-r\")): continue name = re.split(r\"[<>=!~]\", stripped, 1)[0].strip() if name: packages.append(name) return packages def _parse_pyproject(path: Path) -> List[str]: packages: Set[str] = set() try: data = tomllib.loads(path.read_text(encoding=\"utf-8\")) except Exception: return [] dependencies = [] project = data.get(\"project\") if isinstance(project, dict): dependencies.extend(project.get(\"dependencies\", []) or []) optional = project.get(\"optional-dependencies\", {}) or {} for values in optional.values(): dependencies.extend(values or []) poetry = data.get(\"tool\", {}).get(\"poetry\", {}) if isinstance(data.get(\"tool\"), dict) else {} if isinstance(poetry, dict): poetry_deps = poetry.get(\"dependencies\", {}) or {} dependencies.extend(poetry_deps.keys()) for dep in dependencies: if isinstance(dep, str): name = re.split(r\"[<>=!~]\", dep, 1)[0].strip() if name and name.lo",
      "metadata": {
        "path": "docgen/analyzers/utils.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "448e495f2d57a7a04fda31cb2aa2d728a77cee06dcefd4c14510e77183d77eb8"
      }
    },
    {
      "id": "docgen/rag/indexer.py#0",
      "vector": {
        "index": 0.09869275424396534,
        "builder": 0.03289758474798845,
        "for": 0.296078262731896,
        "minimal": 0.03289758474798845,
        "retrieval": 0.03289758474798845,
        "augmented": 0.03289758474798845,
        "generation": 0.0657951694959769,
        "from": 0.296078262731896,
        "__future__": 0.03289758474798845,
        "import": 0.3289758474798845,
        "annotations": 0.03289758474798845,
        "dataclasses": 0.03289758474798845,
        "dataclass": 0.0657951694959769,
        "pathlib": 0.03289758474798845,
        "path": 0.1315903389919538,
        "typing": 0.03289758474798845,
        "dict": 0.09869275424396534,
        "iterable": 0.03289758474798845,
        "list": 0.19738550848793068,
        "sequence": 0.0657951694959769,
        "set": 0.09869275424396534,
        "hashlib": 0.03289758474798845,
        "models": 0.03289758474798845,
        "repomanifest": 0.0657951694959769,
        "repo_scanner": 0.03289758474798845,
        "filemeta": 0.03289758474798845,
        "constants": 0.03289758474798845,
        "section_tags": 0.0657951694959769,
        "tag_sections": 0.03289758474798845,
        "embedder": 0.1315903389919538,
        "localembedder": 0.09869275424396534,
        "store": 0.296078262731896,
        "embeddingstore": 0.0657951694959769,
        "class": 0.0657951694959769,
        "ragindex": 0.0657951694959769,
        "holds": 0.03289758474798845,
        "contexts": 0.1315903389919538,
        "readme": 0.0657951694959769,
        "sections": 0.1315903389919538,
        "and": 0.03289758474798845,
        "metadata": 0.03289758474798845,
        "str": 0.19738550848793068,
        "store_path": 0.09869275424396534,
        "ragindexer": 0.03289758474798845,
        "builds": 0.03289758474798845,
        "a": 0.03289758474798845,
        "lightweight": 0.03289758474798845,
        "embedding": 0.03289758474798845,
        "def": 0.0657951694959769,
        "__init__": 0.03289758474798845,
        "self": 0.23028309323591914,
        "none": 0.16448792373994225,
        "top_source_files": 0.09869275424396534,
        "int": 0.03289758474798845,
        "20": 0.03289758474798845,
        "or": 0.03289758474798845,
        "build": 0.03289758474798845,
        "manifest": 0.16448792373994225,
        "target_sections": 0.09869275424396534,
        "if": 0.09869275424396534,
        "else": 0.03289758474798845,
        "keys": 0.03289758474798845,
        "root": 0.19738550848793068,
        "docgen": 0.03289758474798845,
        "embeddings": 0.03289758474798845,
        "json": 0.03289758474798845,
        "load_existing": 0.03289758474798845,
        "true": 0.03289758474798845,
        "section": 0.16448792373994225,
        "in": 0.23028309323591914,
        "meta_lookup": 0.0657951694959769,
        "file": 0.09869275424396534,
        "files": 0.09869275424396534,
        "visited_paths": 0.16448792373994225,
        "_index_readme": 0.03289758474798845,
        "_index_docs": 0.03289758474798845,
        "_index_source_files": 0.03289758474798845,
        "existing": 0.09869275424396534,
        "paths": 0.03289758474798845,
        "not": 0.03289758474798845,
        "remove_path": 0.03289758474798845,
        "persist": 0.03289758474798845,
        "snippets": 0.0657951694959769,
        "entry": 0.0657951694959769,
        "text": 0.03289758474798845,
        "query": 0.03289758474798845,
        "top_k": 0.03289758474798845,
        "3": 0.03289758474798845,
        "snippet": 0.09869275424396534,
        "strip": 0.0657951694959769
      },
      "text": "\"\"\"Index builder for minimal retrieval augmented generation.\"\"\" from __future__ import annotations from dataclasses import dataclass from pathlib import Path from typing import Dict, Iterable, List, Sequence, Set import hashlib from ..models import RepoManifest from ..repo_scanner import FileMeta from .constants import SECTION_TAGS, TAG_SECTIONS from .embedder import LocalEmbedder from .store import EmbeddingStore @dataclass class RAGIndex: \"\"\"Holds contexts for README sections and index metadata.\"\"\" contexts: Dict[str, List[str]] store_path: Path class RAGIndexer: \"\"\"Builds a lightweight embedding index for README generation.\"\"\" def __init__(self, *, embedder: LocalEmbedder | None = None, top_source_files: int = 20) -> None: self.embedder = embedder or LocalEmbedder() self.top_source_files = top_source_files def build(self, manifest: RepoManifest, *, sections: Sequence[str] | None = None) -> RAGIndex: target_sections = list(sections) if sections else list(SECTION_TAGS.keys()) root = Path(manifest.root) store_path = root / \".docgen\" / \"embeddings.json\" store = EmbeddingStore(store_path, load_existing=True) contexts: Dict[str, List[str]] = {section: [] for section in target_sections} meta_lookup = {file.path: file for file in manifest.files} visited_paths: Set[str] = set() self._index_readme(root, store, meta_lookup, visited_paths) self._index_docs(manifest.files, root, store, visited_paths) self._index_source_files(manifest.files, root, store, visited_paths) for existing in list(store.paths()): if existing not in visited_paths: store.remove_path(existing) store.persist() for section in target_sections: snippets = [entry[\"text\"] for entry in store.query(section, top_k=3)] contexts[section] = [snippet.strip() for snippet in snippets if snippet.strip()]",
      "metadata": {
        "path": "docgen/rag/indexer.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "b00985d9079cbacb889d84ee411faacd34c92475c5e849861eac317a9d3a77af"
      }
    },
    {
      "id": "docgen/git/publisher.py#0",
      "vector": {
        "git": 0.23596995186213474,
        "publishing": 0.033709993123162106,
        "utilities": 0.033709993123162106,
        "from": 0.10112997936948631,
        "__future__": 0.033709993123162106,
        "import": 0.1685499656158105,
        "annotations": 0.033709993123162106,
        "os": 0.06741998624632421,
        "subprocess": 0.033709993123162106,
        "pathlib": 0.033709993123162106,
        "path": 0.20225995873897262,
        "typing": 0.033709993123162106,
        "callable": 0.06741998624632421,
        "iterable": 0.033709993123162106,
        "sequence": 0.13483997249264842,
        "class": 0.033709993123162106,
        "publisher": 0.033709993123162106,
        "handles": 0.033709993123162106,
        "branch": 0.06741998624632421,
        "management": 0.033709993123162106,
        "and": 0.10112997936948631,
        "pr": 0.06741998624632421,
        "creation": 0.033709993123162106,
        "for": 0.10112997936948631,
        "readme": 0.06741998624632421,
        "updates": 0.033709993123162106,
        "def": 0.10112997936948631,
        "__init__": 0.033709993123162106,
        "self": 0.30338993810845893,
        "runner": 0.06741998624632421,
        "str": 0.37080992435478316,
        "none": 0.23596995186213474,
        "_runner": 0.033709993123162106,
        "or": 0.033709993123162106,
        "_default_runner": 0.033709993123162106,
        "commit": 0.13483997249264842,
        "repo_path": 0.13483997249264842,
        "files": 0.1685499656158105,
        "message": 0.06741998624632421,
        "docs": 0.033709993123162106,
        "bootstrap": 0.033709993123162106,
        "via": 0.06741998624632421,
        "docgen": 0.10112997936948631,
        "init": 0.033709993123162106,
        "bool": 0.13483997249264842,
        "stage": 0.033709993123162106,
        "the": 0.10112997936948631,
        "provided": 0.033709993123162106,
        "create": 0.06741998624632421,
        "a": 0.10112997936948631,
        "if": 0.13483997249264842,
        "changes": 0.033709993123162106,
        "exist": 0.033709993123162106,
        "repo": 0.26967994498529685,
        "not": 0.10112997936948631,
        "exists": 0.06741998624632421,
        "return": 0.13483997249264842,
        "false": 0.13483997249264842,
        "relative_files": 0.06741998624632421,
        "_to_relative": 0.033709993123162106,
        "file": 0.06741998624632421,
        "in": 0.06741998624632421,
        "rel": 0.06741998624632421,
        "_run": 0.10112997936948631,
        "add": 0.033709993123162106,
        "cwd": 0.10112997936948631,
        "status": 0.10112997936948631,
        "porcelain": 0.033709993123162106,
        "capture_output": 0.033709993123162106,
        "true": 0.10112997936948631,
        "strip": 0.033709993123162106,
        "env": 0.30338993810845893,
        "environ": 0.033709993123162106,
        "copy": 0.033709993123162106,
        "setdefault": 0.13483997249264842,
        "git_author_name": 0.06741998624632421,
        "git_author_email": 0.06741998624632421,
        "example": 0.033709993123162106,
        "com": 0.033709993123162106,
        "git_committer_name": 0.033709993123162106,
        "git_committer_email": 0.033709993123162106,
        "m": 0.033709993123162106,
        "publish_pr": 0.033709993123162106,
        "branch_name": 0.033709993123162106,
        "base_branch": 0.033709993123162106,
        "title": 0.033709993123162106,
        "body": 0.033709993123162106,
        "push": 0.033709993123162106,
        "labels": 0.033709993123162106,
        "update_existing": 0.033709993123162106,
        "open": 0.033709993123162106,
        "github": 0.033709993123162106,
        "cli": 0.033709993123162106,
        "checkout_cmd": 0.033709993123162106
      },
      "text": "\ufeff\"\"\"Git publishing utilities.\"\"\" from __future__ import annotations import os import subprocess from pathlib import Path from typing import Callable, Iterable, Sequence class Publisher: \"\"\"Handles branch management and PR creation for README updates.\"\"\" def __init__(self, runner: Callable[..., str] | None = None) -> None: self._runner = runner or self._default_runner def commit( self, repo_path: str, files: Sequence[Path | str], *, message: str = \"docs: bootstrap README via docgen init\", ) -> bool: \"\"\"Stage the provided files and create a commit if changes exist.\"\"\" repo = Path(repo_path) if not (repo / \".git\").exists(): return False relative_files = [self._to_relative(repo, Path(file)) for file in files] for rel in relative_files: self._run([\"git\", \"add\", rel], cwd=repo) status = self._run([\"git\", \"status\", \"--porcelain\"], cwd=repo, capture_output=True) if not status.strip(): return False env = os.environ.copy() env.setdefault(\"GIT_AUTHOR_NAME\", \"docgen\") env.setdefault(\"GIT_AUTHOR_EMAIL\", \"docgen@example.com\") env.setdefault(\"GIT_COMMITTER_NAME\", env[\"GIT_AUTHOR_NAME\"]) env.setdefault(\"GIT_COMMITTER_EMAIL\", env[\"GIT_AUTHOR_EMAIL\"]) self._run([\"git\", \"commit\", \"-m\", message], cwd=repo, env=env) return True def publish_pr( self, repo_path: str, files: Sequence[Path | str], *, branch_name: str, base_branch: str | None = None, title: str, body: str, push: bool = True, labels: Sequence[str] | None = None, update_existing: bool = False, ) -> bool: \"\"\"Create a branch, commit the files, and open a PR via the GitHub CLI.\"\"\" repo = Path(repo_path) if not (repo / \".git\").exists(): return False checkout_cmd = [\"git\", \"",
      "metadata": {
        "path": "docgen/git/publisher.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "e61cb8d9fdbb15ea210e641165049e271c7e75f7c21436933d3f5db0b3e04e28"
      }
    },
    {
      "id": "docgen/analyzers/patterns.py#0",
      "vector": {
        "analyzer": 0.13168538439184413,
        "for": 0.13168538439184413,
        "repository": 0.04389512813061471,
        "infrastructure": 0.08779025626122942,
        "and": 0.08779025626122942,
        "layout": 0.08779025626122942,
        "patterns": 0.17558051252245885,
        "from": 0.21947564065307354,
        "__future__": 0.04389512813061471,
        "import": 0.21947564065307354,
        "annotations": 0.04389512813061471,
        "pathlib": 0.04389512813061471,
        "path": 0.13168538439184413,
        "typing": 0.04389512813061471,
        "iterable": 0.08779025626122942,
        "list": 0.13168538439184413,
        "sequence": 0.04389512813061471,
        "base": 0.04389512813061471,
        "models": 0.04389512813061471,
        "repomanifest": 0.13168538439184413,
        "signal": 0.21947564065307354,
        "class": 0.04389512813061471,
        "patternanalyzer": 0.04389512813061471,
        "finds": 0.04389512813061471,
        "within": 0.04389512813061471,
        "the": 0.04389512813061471,
        "repo": 0.04389512813061471,
        "def": 0.08779025626122942,
        "supports": 0.04389512813061471,
        "self": 0.08779025626122942,
        "manifest": 0.21947564065307354,
        "bool": 0.08779025626122942,
        "return": 0.04389512813061471,
        "files": 0.13168538439184413,
        "analyze": 0.04389512813061471,
        "root": 0.08779025626122942,
        "paths": 0.17558051252245885,
        "file": 0.08779025626122942,
        "in": 0.17558051252245885,
        "signals": 0.13168538439184413,
        "docker_files": 0.21947564065307354,
        "_collect": 0.08779025626122942,
        "dockerfile": 0.08779025626122942,
        "docker": 0.3511610250449177,
        "compose": 0.21947564065307354,
        "yml": 0.08779025626122942,
        "yaml": 0.08779025626122942,
        "if": 0.17558051252245885,
        "quickstart": 0.21947564065307354,
        "str": 0.04389512813061471,
        "append": 0.17558051252245885,
        "build": 0.04389512813061471,
        "t": 0.04389512813061471,
        "image": 0.04389512813061471,
        "any": 0.04389512813061471,
        "name": 0.17558051252245885,
        "up": 0.04389512813061471,
        "pattern": 0.08779025626122942,
        "containerization": 0.04389512813061471,
        "value": 0.08779025626122942,
        "source": 0.08779025626122942,
        "metadata": 0.08779025626122942,
        "sorted": 0.04389512813061471,
        "summary": 0.08779025626122942,
        "artifacts": 0.04389512813061471,
        "detected": 0.08779025626122942,
        "_has_prefix": 0.04389512813061471,
        "k8s": 0.04389512813061471,
        "helm": 0.04389512813061471,
        "charts": 0.04389512813061471,
        "kubernetes": 0.13168538439184413,
        "manifests": 0.04389512813061471,
        "under": 0.04389512813061471,
        "deployment": 0.04389512813061471,
        "directories": 0.04389512813061471,
        "ci_files": 0.04389512813061471,
        "g": 0.04389512813061471
      },
      "text": "\"\"\"Analyzer for repository infrastructure and layout patterns.\"\"\" from __future__ import annotations from pathlib import Path from typing import Iterable, List, Sequence from .base import Analyzer from ..models import RepoManifest, Signal class PatternAnalyzer(Analyzer): \"\"\"Finds infrastructure and layout patterns within the repo.\"\"\" def supports(self, manifest: RepoManifest) -> bool: return bool(manifest.files) def analyze(self, manifest: RepoManifest) -> Iterable[Signal]: root = Path(manifest.root) paths = [file.path for file in manifest.files] signals: List[Signal] = [] docker_files = _collect(paths, {\"Dockerfile\", \"docker-compose.yml\", \"docker-compose.yaml\"}) if docker_files: quickstart: List[str] = [] if \"Dockerfile\" in docker_files: quickstart.append(\"docker build -t <image> .\") if any(name in docker_files for name in {\"docker-compose.yml\", \"docker-compose.yaml\"}): quickstart.append(\"docker compose up\") signals.append( Signal( name=\"pattern.containerization\", value=\"docker\", source=\"patterns\", metadata={ \"files\": sorted(docker_files), \"summary\": \"Docker artifacts detected\", \"quickstart\": quickstart, }, ) ) if _has_prefix(paths, (\"k8s/\", \"helm/\", \"charts/\")): signals.append( Signal( name=\"pattern.kubernetes\", value=\"kubernetes\", source=\"patterns\", metadata={ \"summary\": \"Kubernetes manifests detected under deployment directories\", }, ) ) ci_files = _collect( paths, { \".g",
      "metadata": {
        "path": "docgen/analyzers/patterns.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "7d8bdcdcef1e04812e2b30211dbf1d14551c2b08b8c339c29e5f3fc2701bd840"
      }
    },
    {
      "id": "docgen/cli.py#0",
      "vector": {
        "cli": 0.04311306135592269,
        "entrypoints": 0.04311306135592269,
        "for": 0.12933918406776806,
        "docgen": 0.08622612271184538,
        "commands": 0.04311306135592269,
        "from": 0.17245224542369075,
        "__future__": 0.04311306135592269,
        "import": 0.25867836813553613,
        "annotations": 0.04311306135592269,
        "argparse": 0.21556530677961344,
        "sys": 0.04311306135592269,
        "pathlib": 0.04311306135592269,
        "path": 0.21556530677961344,
        "orchestrator": 0.08622612271184538,
        "logging": 0.04311306135592269,
        "configure_logging": 0.04311306135592269,
        "def": 0.08622612271184538,
        "_add_verbose_option": 0.17245224542369075,
        "parser": 0.21556530677961344,
        "argumentparser": 0.12933918406776806,
        "suppress_default": 0.17245224542369075,
        "bool": 0.04311306135592269,
        "false": 0.08622612271184538,
        "none": 0.04311306135592269,
        "kwargs": 0.17245224542369075,
        "dict": 0.04311306135592269,
        "str": 0.04311306135592269,
        "object": 0.04311306135592269,
        "action": 0.08622612271184538,
        "store_true": 0.08622612271184538,
        "help": 0.3017914294914588,
        "increase": 0.04311306135592269,
        "log": 0.04311306135592269,
        "verbosity": 0.04311306135592269,
        "troubleshooting": 0.04311306135592269,
        "if": 0.04311306135592269,
        "default": 0.21556530677961344,
        "suppress": 0.04311306135592269,
        "else": 0.04311306135592269,
        "add_argument": 0.21556530677961344,
        "v": 0.04311306135592269,
        "verbose": 0.04311306135592269,
        "_build_parser": 0.04311306135592269,
        "prog": 0.04311306135592269,
        "description": 0.04311306135592269,
        "generate": 0.04311306135592269,
        "and": 0.04311306135592269,
        "maintain": 0.04311306135592269,
        "readme": 0.17245224542369075,
        "files": 0.04311306135592269,
        "using": 0.04311306135592269,
        "repository": 0.21556530677961344,
        "analysis": 0.04311306135592269,
        "subparsers": 0.12933918406776806,
        "add_subparsers": 0.04311306135592269,
        "dest": 0.04311306135592269,
        "command": 0.04311306135592269,
        "required": 0.04311306135592269,
        "true": 0.12933918406776806,
        "init_parser": 0.12933918406776806,
        "add_parser": 0.08622612271184538,
        "init": 0.04311306135592269,
        "initialize": 0.04311306135592269,
        "a": 0.08622612271184538,
        "that": 0.04311306135592269,
        "lacks": 0.04311306135592269,
        "one": 0.04311306135592269,
        "nargs": 0.08622612271184538,
        "to": 0.21556530677961344,
        "the": 0.08622612271184538,
        "root": 0.08622612271184538,
        "defaults": 0.08622612271184538,
        "current": 0.08622612271184538,
        "directory": 0.08622612271184538,
        "update_parser": 0.21556530677961344,
        "update": 0.08622612271184538,
        "sections": 0.04311306135592269,
        "after": 0.04311306135592269,
        "changes": 0.08622612271184538,
        "diff": 0.04311306135592269,
        "base": 0.04311306135592269,
        "origin": 0.04311306135592269,
        "main": 0.04311306135592269,
        "commit": 0.04311306135592269,
        "or": 0.08622612271184538,
        "ref": 0.04311306135592269,
        "compare": 0.04311306135592269,
        "against": 0.04311306135592269,
        "when": 0.04311306135592269,
        "computing": 0.04311306135592269,
        "diffs": 0.04311306135592269,
        "dry": 0.04311306135592269,
        "run": 0.04311306135592269,
        "preview": 0.04311306135592269,
        "without": 0.04311306135592269,
        "writing": 0.04311306135592269,
        "publishing": 0.04311306135592269
      },
      "text": "\ufeff\"\"\"CLI entrypoints for docgen commands.\"\"\" from __future__ import annotations import argparse import sys from pathlib import Path from .orchestrator import Orchestrator from .logging import configure_logging def _add_verbose_option( parser: argparse.ArgumentParser, *, suppress_default: bool = False ) -> None: kwargs: dict[str, object] = { \"action\": \"store_true\", \"help\": \"Increase log verbosity for troubleshooting.\", } if suppress_default: kwargs[\"default\"] = argparse.SUPPRESS else: kwargs[\"default\"] = False parser.add_argument( \"-v\", \"--verbose\", **kwargs, ) def _build_parser() -> argparse.ArgumentParser: parser = argparse.ArgumentParser( prog=\"docgen\", description=\"Generate and maintain README files using repository analysis.\", ) _add_verbose_option(parser) subparsers = parser.add_subparsers(dest=\"command\", required=True) init_parser = subparsers.add_parser( \"init\", help=\"Initialize a README for a repository that lacks one.\", ) _add_verbose_option(init_parser, suppress_default=True) init_parser.add_argument( \"path\", nargs=\"?\", default=\".\", help=\"Path to the repository root (defaults to current directory).\", ) update_parser = subparsers.add_parser( \"update\", help=\"Update README sections after repository changes.\", ) _add_verbose_option(update_parser, suppress_default=True) update_parser.add_argument( \"path\", nargs=\"?\", default=\".\", help=\"Path to the repository root (defaults to current directory).\", ) update_parser.add_argument( \"--diff-base\", default=\"origin/main\", help=\"Commit or ref to compare against when computing diffs.\", ) update_parser.add_argument( \"--dry-run\", action=\"store_true\", help=\"Preview README changes without writing or publishing.\"",
      "metadata": {
        "path": "docgen/cli.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "4063f183e7a0cbc3c2f53cb317e6c67fa8d91d3e6b94ae5297ce56236b0959ea"
      }
    },
    {
      "id": "docgen/analyzers/build.py#0",
      "vector": {
        "build": 0.19477234678290495,
        "system": 0.03895446935658099,
        "analyzer": 0.11686340806974296,
        "implementation": 0.03895446935658099,
        "from": 0.23372681613948593,
        "__future__": 0.03895446935658099,
        "import": 0.2726812854960669,
        "annotations": 0.03895446935658099,
        "os": 0.03895446935658099,
        "pathlib": 0.03895446935658099,
        "path": 0.11686340806974296,
        "typing": 0.03895446935658099,
        "iterable": 0.07790893871316198,
        "list": 0.07790893871316198,
        "optional": 0.07790893871316198,
        "base": 0.03895446935658099,
        "models": 0.03895446935658099,
        "repomanifest": 0.11686340806974296,
        "signal": 0.19477234678290495,
        "utils": 0.03895446935658099,
        "detect_node_package_manager": 0.03895446935658099,
        "class": 0.03895446935658099,
        "buildanalyzer": 0.03895446935658099,
        "detects": 0.03895446935658099,
        "systems": 0.03895446935658099,
        "and": 0.03895446935658099,
        "associated": 0.03895446935658099,
        "developer": 0.03895446935658099,
        "workflows": 0.03895446935658099,
        "_py_build_files": 0.07790893871316198,
        "pyproject": 0.03895446935658099,
        "toml": 0.03895446935658099,
        "setup": 0.03895446935658099,
        "cfg": 0.03895446935658099,
        "requirements": 0.11686340806974296,
        "txt": 0.11686340806974296,
        "def": 0.11686340806974296,
        "supports": 0.03895446935658099,
        "self": 0.31163575485264794,
        "manifest": 0.19477234678290495,
        "bool": 0.07790893871316198,
        "return": 0.11686340806974296,
        "files": 0.07790893871316198,
        "analyze": 0.03895446935658099,
        "root": 0.11686340806974296,
        "manifest_paths": 0.23372681613948593,
        "file": 0.07790893871316198,
        "for": 0.03895446935658099,
        "in": 0.07790893871316198,
        "signals": 0.2726812854960669,
        "python_signal": 0.11686340806974296,
        "_python_signal": 0.07790893871316198,
        "if": 0.2726812854960669,
        "is": 0.11686340806974296,
        "not": 0.23372681613948593,
        "none": 0.15581787742632397,
        "append": 0.15581787742632397,
        "node_signal": 0.11686340806974296,
        "_node_signal": 0.03895446935658099,
        "java_signal": 0.11686340806974296,
        "_java_signal": 0.03895446935658099,
        "name": 0.03895446935658099,
        "generic": 0.07790893871316198,
        "value": 0.03895446935658099,
        "source": 0.07790893871316198,
        "metadata": 0.03895446935658099,
        "commands": 0.07790893871316198,
        "document": 0.03895446935658099,
        "steps": 0.03895446935658099,
        "here": 0.03895446935658099,
        "set": 0.03895446935658099,
        "str": 0.03895446935658099,
        "python_files": 0.07790893871316198,
        "intersection": 0.03895446935658099,
        "python": 0.07790893871316198,
        "m": 0.07790893871316198,
        "venv": 0.15581787742632397,
        "bin": 0.03895446935658099,
        "activate": 0.07790893871316198,
        "_is_windows": 0.03895446935658099,
        "else": 0.03895446935658099,
        "scripts": 0.03895446935658099,
        "pip": 0.03895446935658099,
        "install": 0.03895446935658099,
        "r": 0.03895446935658099,
        "man": 0.03895446935658099
      },
      "text": "\ufeff\"\"\"Build system analyzer implementation.\"\"\" from __future__ import annotations import os from pathlib import Path from typing import Iterable, List, Optional from .base import Analyzer from ..models import RepoManifest, Signal from .utils import detect_node_package_manager class BuildAnalyzer(Analyzer): \"\"\"Detects build systems and associated developer workflows.\"\"\" _PY_BUILD_FILES = { \"pyproject.toml\", \"setup.cfg\", \"requirements.txt\", } def supports(self, manifest: RepoManifest) -> bool: return bool(manifest.files) def analyze(self, manifest: RepoManifest) -> Iterable[Signal]: root = Path(manifest.root) manifest_paths = {file.path for file in manifest.files} signals: List[Signal] = [] python_signal = self._python_signal(manifest_paths) if python_signal is not None: signals.append(python_signal) node_signal = self._node_signal(manifest_paths) if node_signal is not None: signals.append(node_signal) java_signal = self._java_signal(root, manifest_paths) if java_signal is not None: signals.append(java_signal) if not signals: signals.append( Signal( name=\"build.generic\", value=\"generic\", source=\"build\", metadata={\"commands\": [\"# Document build steps here.\"]}, ) ) return signals def _python_signal(self, manifest_paths: set[str]) -> Optional[Signal]: python_files = self._PY_BUILD_FILES.intersection(manifest_paths) if not python_files: return None commands = [ \"python -m venv .venv\", \"source .venv/bin/activate\" if not self._is_windows() else \".\\\\.venv\\\\Scripts\\\\activate\", \"python -m pip install -r requirements.txt\" if \"requirements.txt\" in man",
      "metadata": {
        "path": "docgen/analyzers/build.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "d4339beab368b38f3cc7639defbc5e41b6d4ed2588ad566f1849a23a1645153c"
      }
    },
    {
      "id": "docgen/rag/store.py#0",
      "vector": {
        "embedding": 0.027297554521630706,
        "store": 0.027297554521630706,
        "for": 0.16378532712978422,
        "retrieval": 0.027297554521630706,
        "augmented": 0.027297554521630706,
        "generation": 0.027297554521630706,
        "from": 0.10919021808652282,
        "__future__": 0.027297554521630706,
        "import": 0.10919021808652282,
        "annotations": 0.027297554521630706,
        "json": 0.027297554521630706,
        "pathlib": 0.027297554521630706,
        "path": 0.38216576330282986,
        "typing": 0.027297554521630706,
        "dict": 0.16378532712978422,
        "iterable": 0.05459510904326141,
        "list": 0.08189266356489211,
        "sequence": 0.05459510904326141,
        "class": 0.027297554521630706,
        "embeddingstore": 0.027297554521630706,
        "persists": 0.027297554521630706,
        "and": 0.05459510904326141,
        "retrieves": 0.027297554521630706,
        "embeddings": 0.05459510904326141,
        "scoped": 0.027297554521630706,
        "by": 0.027297554521630706,
        "readme": 0.027297554521630706,
        "sections": 0.10919021808652282,
        "def": 0.19108288165141493,
        "__init__": 0.027297554521630706,
        "self": 0.4094633178244606,
        "none": 0.21838043617304564,
        "load_existing": 0.05459510904326141,
        "bool": 0.05459510904326141,
        "true": 0.027297554521630706,
        "_path": 0.027297554521630706,
        "_store": 0.16378532712978422,
        "str": 0.4094633178244606,
        "object": 0.08189266356489211,
        "if": 0.13648777260815353,
        "is": 0.027297554521630706,
        "not": 0.13648777260815353,
        "_load": 0.027297554521630706,
        "clear": 0.05459510904326141,
        "remove": 0.027297554521630706,
        "all": 0.027297554521630706,
        "stored": 0.027297554521630706,
        "memory": 0.027297554521630706,
        "add": 0.05459510904326141,
        "chunk_id": 0.05459510904326141,
        "vector": 0.10919021808652282,
        "float": 0.027297554521630706,
        "text": 0.10919021808652282,
        "metadata": 0.19108288165141493,
        "or": 0.05459510904326141,
        "strip": 0.027297554521630706,
        "return": 0.08189266356489211,
        "entry": 0.19108288165141493,
        "id": 0.027297554521630706,
        "section": 0.10919021808652282,
        "in": 0.13648777260815353,
        "setdefault": 0.027297554521630706,
        "append": 0.027297554521630706,
        "query": 0.027297554521630706,
        "top_k": 0.05459510904326141,
        "int": 0.027297554521630706,
        "5": 0.027297554521630706,
        "entries": 0.19108288165141493,
        "get": 0.13648777260815353,
        "remove_path": 0.027297554521630706,
        "normalized": 0.05459510904326141,
        "replace": 0.027297554521630706,
        "values": 0.05459510904326141,
        "paths": 0.027297554521630706,
        "seen": 0.08189266356489211,
        "set": 0.05459510904326141,
        "isinstance": 0.027297554521630706,
        "has_path_with_hash": 0.027297554521630706,
        "file_hash": 0.027297554521630706
      },
      "text": "\"\"\"Embedding store for retrieval augmented generation.\"\"\" from __future__ import annotations import json from pathlib import Path from typing import Dict, Iterable, List, Sequence class EmbeddingStore: \"\"\"Persists and retrieves embeddings scoped by README sections.\"\"\" def __init__(self, path: Path | None = None, *, load_existing: bool = True) -> None: self._path = path self._store: Dict[str, List[Dict[str, object]]] = {} if path is not None and load_existing: self._load(path) def clear(self) -> None: \"\"\"Remove all stored embeddings from memory.\"\"\" self._store.clear() def add( self, sections: Sequence[str], *, chunk_id: str, vector: Dict[str, float], text: str, metadata: Dict[str, object], ) -> None: if not sections or not vector or not text.strip(): return entry = { \"id\": chunk_id, \"vector\": vector, \"text\": text, \"metadata\": metadata, } for section in sections: self._store.setdefault(section, []).append(entry) def query(self, section: str, top_k: int = 5) -> List[Dict[str, object]]: entries = self._store.get(section, []) return entries[:top_k] def remove_path(self, path: str) -> None: normalized = path.replace(\"\\\\\", \"/\") for entries in self._store.values(): entries[:] = [entry for entry in entries if entry.get(\"metadata\", {}).get(\"path\") != normalized] def paths(self) -> Iterable[str]: seen: set[str] = set() for entries in self._store.values(): for entry in entries: metadata = entry.get(\"metadata\", {}) path = metadata.get(\"path\") if isinstance(path, str): seen.add(path) return seen def has_path_with_hash(self, path: str, file_hash: str | None) -> bool: if not",
      "metadata": {
        "path": "docgen/rag/store.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "fd5e63043e1782c1f6be549823a88ccad9f6d8177d87654dbde60d2034df5ecf"
      }
    },
    {
      "id": "docgen/failsafe.py#0",
      "vector": {
        "fail": 0.0692958928675237,
        "safe": 0.03464794643376185,
        "stubs": 0.03464794643376185,
        "for": 0.1385917857350474,
        "readme": 0.0692958928675237,
        "generation": 0.0692958928675237,
        "when": 0.0692958928675237,
        "pipelines": 0.03464794643376185,
        "from": 0.24253562503633297,
        "__future__": 0.03464794643376185,
        "import": 0.24253562503633297,
        "annotations": 0.03464794643376185,
        "pathlib": 0.03464794643376185,
        "path": 0.0692958928675237,
        "typing": 0.03464794643376185,
        "dict": 0.10394383930128556,
        "iterable": 0.0692958928675237,
        "sequence": 0.0692958928675237,
        "prompting": 0.0692958928675237,
        "builder": 0.03464794643376185,
        "section": 0.1385917857350474,
        "constants": 0.03464794643376185,
        "default_sections": 0.03464794643376185,
        "section_titles": 0.1385917857350474,
        "postproc": 0.0692958928675237,
        "markers": 0.03464794643376185,
        "markermanager": 0.0692958928675237,
        "sectioncontent": 0.10394383930128556,
        "toc": 0.03464794643376185,
        "tableofcontentsbuilder": 0.0692958928675237,
        "def": 0.0692958928675237,
        "build_readme_stub": 0.03464794643376185,
        "repo_path": 0.0692958928675237,
        "sections": 0.10394383930128556,
        "str": 0.2771835714700948,
        "none": 0.20788767860257112,
        "reason": 0.1385917857350474,
        "return": 0.10394383930128556,
        "a": 0.03464794643376185,
        "placeholder": 0.0692958928675237,
        "fails": 0.03464794643376185,
        "project_name": 0.17323973216880928,
        "name": 0.41577535720514225,
        "or": 0.03464794643376185,
        "repository": 0.03464794643376185,
        "ordered_sections": 0.0692958928675237,
        "_normalise_sections": 0.03464794643376185,
        "marker_manager": 0.10394383930128556,
        "cleaned_reason": 0.1385917857350474,
        "_format_reason": 0.0692958928675237,
        "lines": 0.2771835714700948,
        "f": 0.0692958928675237,
        "intro_body": 0.0692958928675237,
        "_section_stub_body": 0.0692958928675237,
        "intro": 0.1385917857350474,
        "intro_block": 0.0692958928675237,
        "wrap": 0.0692958928675237,
        "title": 0.2771835714700948,
        "get": 0.10394383930128556,
        "introduction": 0.03464794643376185,
        "body": 0.1385917857350474,
        "append": 0.20788767860257112,
        "in": 0.0692958928675237,
        "if": 0.03464794643376185,
        "continue": 0.03464794643376185,
        "replace": 0.0692958928675237,
        "_": 0.0692958928675237,
        "wrapped": 0.0692958928675237,
        "n": 0.0692958928675237,
        "join": 0.03464794643376185,
        "strip": 0.03464794643376185,
        "build_section_stubs": 0.03464794643376185,
        "section_names": 0.0692958928675237,
        "fallback": 0.03464794643376185,
        "objects": 0.03464794643376185,
        "targeted": 0.03464794643376185,
        "updates": 0.03464794643376185
      },
      "text": "\"\"\"Fail-safe stubs for README generation when pipelines fail.\"\"\" from __future__ import annotations from pathlib import Path from typing import Dict, Iterable, Sequence from .prompting.builder import Section from .prompting.constants import DEFAULT_SECTIONS, SECTION_TITLES from .postproc.markers import MarkerManager, SectionContent from .postproc.toc import TableOfContentsBuilder def build_readme_stub( repo_path: Path, sections: Sequence[str] | None = None, *, reason: str | None = None, ) -> str: \"\"\"Return a placeholder README when generation fails.\"\"\" project_name = repo_path.name or \"Repository\" ordered_sections = _normalise_sections(sections) marker_manager = MarkerManager() cleaned_reason = _format_reason(reason) lines = [f\"# {project_name}\", \"\", TableOfContentsBuilder.PLACEHOLDER, \"\"] intro_body = _section_stub_body(\"intro\", project_name, cleaned_reason) intro_block = marker_manager.wrap( SectionContent(name=\"intro\", title=SECTION_TITLES.get(\"intro\", \"Introduction\"), body=intro_body) ) lines.append(intro_block) lines.append(\"\") for name in ordered_sections: if name == \"intro\": continue title = SECTION_TITLES.get(name, name.replace(\"_\", \" \").title()) body = _section_stub_body(name, project_name, cleaned_reason) wrapped = marker_manager.wrap(SectionContent(name=name, title=title, body=body)) lines.append(f\"## {title}\") lines.append(\"\") lines.append(wrapped) lines.append(\"\") return \"\\n\".join(lines).strip() + \"\\n\" def build_section_stubs( section_names: Iterable[str], *, project_name: str, reason: str | None = None, ) -> Dict[str, Section]: \"\"\"Return fallback section objects for targeted updates.\"\"\" cleaned_reason = _format_reason(reason) sections: Dict[str, Section] = {} for name in section_names: title = SECTION_TITLES.get(name, name.replace(\"_\", \" \").title())",
      "metadata": {
        "path": "docgen/failsafe.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "c4f71796d2ccdefeef4604a2ec43249c389a842ef05bcb584b6647083b26c281"
      }
    },
    {
      "id": "docgen/analyzers/language.py#0",
      "vector": {
        "language": 0.5536601028941717,
        "specific": 0.03691067352627811,
        "analyzer": 0.11073202057883434,
        "implementation": 0.03691067352627811,
        "from": 0.2583747146839468,
        "__future__": 0.03691067352627811,
        "import": 0.2583747146839468,
        "annotations": 0.03691067352627811,
        "collections": 0.03691067352627811,
        "counter": 0.07382134705255622,
        "pathlib": 0.03691067352627811,
        "path": 0.07382134705255622,
        "typing": 0.03691067352627811,
        "dict": 0.11073202057883434,
        "iterable": 0.07382134705255622,
        "list": 0.11073202057883434,
        "base": 0.03691067352627811,
        "utils": 0.03691067352627811,
        "detect_java_frameworks": 0.03691067352627811,
        "detect_node_frameworks": 0.03691067352627811,
        "detect_python_frameworks": 0.03691067352627811,
        "load_java_dependencies": 0.03691067352627811,
        "load_node_dependencies": 0.03691067352627811,
        "load_python_dependencies": 0.03691067352627811,
        "models": 0.03691067352627811,
        "repomanifest": 0.11073202057883434,
        "signal": 0.22146404115766868,
        "class": 0.03691067352627811,
        "languageanalyzer": 0.03691067352627811,
        "detects": 0.03691067352627811,
        "frameworks": 0.22146404115766868,
        "and": 0.03691067352627811,
        "idioms": 0.03691067352627811,
        "for": 0.14764269410511244,
        "supported": 0.03691067352627811,
        "languages": 0.18455336763139055,
        "def": 0.07382134705255622,
        "supports": 0.03691067352627811,
        "self": 0.11073202057883434,
        "manifest": 0.18455336763139055,
        "bool": 0.07382134705255622,
        "return": 0.07382134705255622,
        "files": 0.07382134705255622,
        "analyze": 0.03691067352627811,
        "str": 0.03691067352627811,
        "file": 0.11073202057883434,
        "in": 0.11073202057883434,
        "if": 0.11073202057883434,
        "is": 0.03691067352627811,
        "not": 0.07382134705255622,
        "none": 0.03691067352627811,
        "counts": 0.22146404115766868,
        "ordered": 0.14764269410511244,
        "_": 0.07382134705255622,
        "most_common": 0.03691067352627811,
        "primary": 0.11073202057883434,
        "0": 0.03691067352627811,
        "root": 0.11073202057883434,
        "_detect_frameworks": 0.03691067352627811,
        "signals": 0.07382134705255622,
        "name": 0.11073202057883434,
        "value": 0.11073202057883434,
        "source": 0.11073202057883434,
        "metadata": 0.11073202057883434,
        "all": 0.03691067352627811,
        "join": 0.07382134705255622,
        "items": 0.14764269410511244,
        "append": 0.03691067352627811,
        "f": 0.03691067352627811,
        "lower": 0.03691067352627811,
        "replace": 0.03691067352627811
      },
      "text": "\ufeff\"\"\"Language-specific analyzer implementation.\"\"\" from __future__ import annotations from collections import Counter from pathlib import Path from typing import Dict, Iterable, List from .base import Analyzer from .utils import ( detect_java_frameworks, detect_node_frameworks, detect_python_frameworks, load_java_dependencies, load_node_dependencies, load_python_dependencies, ) from ..models import RepoManifest, Signal class LanguageAnalyzer(Analyzer): \"\"\"Detects frameworks and idioms for supported languages.\"\"\" def supports(self, manifest: RepoManifest) -> bool: return bool(manifest.files) def analyze(self, manifest: RepoManifest) -> Iterable[Signal]: languages: List[str] = [ file.language for file in manifest.files if file.language is not None ] if not languages: return [] counts = Counter(languages) ordered = [language for language, _ in counts.most_common()] primary = ordered[0] root = Path(manifest.root) frameworks = self._detect_frameworks(root) signals: List[Signal] = [ Signal( name=\"language.primary\", value=primary, source=\"language\", metadata={\"counts\": dict(counts)}, ), Signal( name=\"language.all\", value=\", \".join(ordered), source=\"language\", metadata={\"languages\": ordered, \"counts\": dict(counts)}, ), ] if frameworks: for language, items in frameworks.items(): signals.append( Signal( name=f\"language.frameworks.{language.lower().replace(' ', '_')}\", value=\", \".join(items), source=\"language\", metadata={\"language\": language, \"frameworks\": items}, )",
      "metadata": {
        "path": "docgen/analyzers/language.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "007635184f693cb4092ef60f38d21bff6e9a0035eee4131b26dae67c21f743e9"
      }
    },
    {
      "id": "docgen/analyzers/__init__.py#0",
      "vector": {
        "analyzer": 0.3287979746107146,
        "plugin": 0.032879797461071454,
        "implementations": 0.032879797461071454,
        "and": 0.06575959492214291,
        "discovery": 0.032879797461071454,
        "utilities": 0.032879797461071454,
        "from": 0.3287979746107146,
        "__future__": 0.032879797461071454,
        "import": 0.3287979746107146,
        "annotations": 0.032879797461071454,
        "importlib": 0.032879797461071454,
        "metadata": 0.032879797461071454,
        "typing": 0.032879797461071454,
        "callable": 0.09863939238321437,
        "iterable": 0.032879797461071454,
        "list": 0.09863939238321437,
        "sequence": 0.06575959492214291,
        "set": 0.13151918984428582,
        "type": 0.032879797461071454,
        "base": 0.032879797461071454,
        "build": 0.06575959492214291,
        "buildanalyzer": 0.06575959492214291,
        "dependencies": 0.06575959492214291,
        "dependencyanalyzer": 0.06575959492214291,
        "entrypoints": 0.06575959492214291,
        "entrypointanalyzer": 0.06575959492214291,
        "language": 0.06575959492214291,
        "languageanalyzer": 0.06575959492214291,
        "patterns": 0.06575959492214291,
        "patternanalyzer": 0.06575959492214291,
        "structure": 0.06575959492214291,
        "structureanalyzer": 0.06575959492214291,
        "_entry_point_group": 0.032879797461071454,
        "docgen": 0.032879797461071454,
        "analyzers": 0.13151918984428582,
        "_builtin_factories": 0.06575959492214291,
        "dict": 0.032879797461071454,
        "str": 0.1643989873053573,
        "def": 0.06575959492214291,
        "discover_analyzers": 0.032879797461071454,
        "enabled": 0.13151918984428582,
        "none": 0.26303837968857163,
        "return": 0.13151918984428582,
        "instantiated": 0.032879797461071454,
        "honoring": 0.032879797461071454,
        "optional": 0.032879797461071454,
        "names": 0.032879797461071454,
        "enabled_set": 0.23015858222750019,
        "if": 0.1643989873053573,
        "is": 0.09863939238321437,
        "not": 0.19727878476642874,
        "name": 0.29591817714964314,
        "lower": 0.06575959492214291,
        "for": 0.13151918984428582,
        "in": 0.1643989873053573,
        "seen": 0.09863939238321437,
        "_add": 0.06575959492214291,
        "factory": 0.1643989873053573,
        "nonlocal": 0.032879797461071454,
        "key": 0.1643989873053573,
        "instance": 0.13151918984428582,
        "isinstance": 0.032879797461071454,
        "raise": 0.06575959492214291,
        "typeerror": 0.032879797461071454,
        "f": 0.06575959492214291,
        "did": 0.032879797461071454,
        "an": 0.032879797461071454,
        "append": 0.032879797461071454,
        "add": 0.032879797461071454,
        "discard": 0.032879797461071454,
        "items": 0.032879797461071454,
        "entry": 0.09863939238321437,
        "_iter_entry_points": 0.032879797461071454,
        "try": 0.032879797461071454,
        "loaded": 0.032879797461071454,
        "load": 0.06575959492214291,
        "except": 0.032879797461071454,
        "exception": 0.032879797461071454,
        "as": 0.032879797461071454,
        "exc": 0.032879797461071454,
        "pragma": 0.032879797461071454,
        "no": 0.032879797461071454,
        "cover": 0.032879797461071454,
        "defensive": 0.032879797461071454,
        "guard": 0.032879797461071454,
        "runtimeerror": 0.032879797461071454,
        "failed": 0.032879797461071454,
        "to": 0.032879797461071454,
        "ent": 0.032879797461071454
      },
      "text": "\ufeff\"\"\"Analyzer plugin implementations and discovery utilities.\"\"\" from __future__ import annotations from importlib import metadata from typing import Callable, Iterable, List, Sequence, Set, Type from .base import Analyzer from .build import BuildAnalyzer from .dependencies import DependencyAnalyzer from .entrypoints import EntryPointAnalyzer from .language import LanguageAnalyzer from .patterns import PatternAnalyzer from .structure import StructureAnalyzer _ENTRY_POINT_GROUP = \"docgen.analyzers\" _BUILTIN_FACTORIES: dict[str, Callable[[], Analyzer]] = { \"language\": LanguageAnalyzer, \"build\": BuildAnalyzer, \"dependencies\": DependencyAnalyzer, \"entrypoints\": EntryPointAnalyzer, \"patterns\": PatternAnalyzer, \"structure\": StructureAnalyzer, } def discover_analyzers(enabled: Sequence[str] | None = None) -> List[Analyzer]: \"\"\"Return instantiated analyzers, honoring optional enabled names.\"\"\" enabled_set: Set[str] | None = None if enabled is not None: enabled_set = {name.lower() for name in enabled} analyzers: List[Analyzer] = [] seen: Set[str] = set() def _add(name: str, factory: Callable[[], Analyzer]) -> None: nonlocal enabled_set key = name.lower() if enabled_set is not None and key not in enabled_set: return if key in seen: return instance = factory() if not isinstance(instance, Analyzer): raise TypeError(f\"Analyzer factory for '{name}' did not return an Analyzer instance\") analyzers.append(instance) seen.add(key) if enabled_set is not None: enabled_set.discard(key) for name, factory in _BUILTIN_FACTORIES.items(): _add(name, factory) for entry in _iter_entry_points(): name = entry.name try: loaded = entry.load() except Exception as exc: # pragma: no cover - defensive guard raise RuntimeError(f\"Failed to load analyzer ent",
      "metadata": {
        "path": "docgen/analyzers/__init__.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "a8201a8db824d294bf5fb2a6528bfe88f2ad7a193d9b14121589c38cc0170ad2"
      }
    },
    {
      "id": "docgen/analyzers/dependencies.py#0",
      "vector": {
        "dependency": 0.04485613040162566,
        "analyzer": 0.13456839120487699,
        "implementation": 0.04485613040162566,
        "from": 0.3139929128113796,
        "__future__": 0.04485613040162566,
        "import": 0.26913678240975397,
        "annotations": 0.04485613040162566,
        "pathlib": 0.04485613040162566,
        "path": 0.13456839120487699,
        "typing": 0.04485613040162566,
        "iterable": 0.08971226080325131,
        "list": 0.08971226080325131,
        "base": 0.04485613040162566,
        "utils": 0.04485613040162566,
        "load_java_dependencies": 0.08971226080325131,
        "load_node_dependencies": 0.08971226080325131,
        "load_python_dependencies": 0.08971226080325131,
        "models": 0.04485613040162566,
        "repomanifest": 0.13456839120487699,
        "signal": 0.2242806520081283,
        "class": 0.04485613040162566,
        "dependencyanalyzer": 0.04485613040162566,
        "extracts": 0.04485613040162566,
        "notable": 0.04485613040162566,
        "dependencies": 0.26913678240975397,
        "manifest": 0.2242806520081283,
        "files": 0.08971226080325131,
        "python_files": 0.08971226080325131,
        "requirements": 0.04485613040162566,
        "txt": 0.04485613040162566,
        "pyproject": 0.04485613040162566,
        "toml": 0.04485613040162566,
        "node_files": 0.08971226080325131,
        "package": 0.04485613040162566,
        "json": 0.04485613040162566,
        "java_files": 0.08971226080325131,
        "pom": 0.04485613040162566,
        "xml": 0.04485613040162566,
        "build": 0.08971226080325131,
        "gradle": 0.08971226080325131,
        "kts": 0.04485613040162566,
        "def": 0.08971226080325131,
        "supports": 0.04485613040162566,
        "self": 0.2242806520081283,
        "bool": 0.08971226080325131,
        "manifest_paths": 0.17942452160650263,
        "file": 0.08971226080325131,
        "for": 0.04485613040162566,
        "in": 0.04485613040162566,
        "return": 0.04485613040162566,
        "intersection": 0.13456839120487699,
        "or": 0.13456839120487699,
        "analyze": 0.04485613040162566,
        "root": 0.2242806520081283,
        "signals": 0.13456839120487699,
        "python_packages": 0.17942452160650263,
        "if": 0.17942452160650263,
        "append": 0.08971226080325131,
        "name": 0.08971226080325131,
        "python": 0.04485613040162566,
        "value": 0.08971226080325131,
        "join": 0.08971226080325131,
        "5": 0.13456839120487699,
        "source": 0.08971226080325131,
        "metadata": 0.08971226080325131,
        "packages": 0.04485613040162566,
        "node_deps": 0.17942452160650263,
        "runtime": 0.17942452160650263,
        "get": 0.08971226080325131,
        "dev": 0.13456839120487699,
        "devdependencies": 0.04485613040162566,
        "summary": 0.08971226080325131,
        "else": 0.04485613040162566,
        "node": 0.04485613040162566,
        "java_deps": 0.08971226080325131
      },
      "text": "\ufeff\"\"\"Dependency analyzer implementation.\"\"\" from __future__ import annotations from pathlib import Path from typing import Iterable, List from .base import Analyzer from .utils import ( load_java_dependencies, load_node_dependencies, load_python_dependencies, ) from ..models import RepoManifest, Signal class DependencyAnalyzer(Analyzer): \"\"\"Extracts notable dependencies from manifest files.\"\"\" PYTHON_FILES = {\"requirements.txt\", \"pyproject.toml\"} NODE_FILES = {\"package.json\"} JAVA_FILES = {\"pom.xml\", \"build.gradle\", \"build.gradle.kts\"} def supports(self, manifest: RepoManifest) -> bool: manifest_paths = {file.path for file in manifest.files} return bool( self.PYTHON_FILES.intersection(manifest_paths) or self.NODE_FILES.intersection(manifest_paths) or self.JAVA_FILES.intersection(manifest_paths) ) def analyze(self, manifest: RepoManifest) -> Iterable[Signal]: root = Path(manifest.root) signals: List[Signal] = [] python_packages = load_python_dependencies(root) if python_packages: signals.append( Signal( name=\"dependencies.python\", value=\", \".join(python_packages[:5]), source=\"dependencies\", metadata={\"packages\": python_packages}, ) ) node_deps = load_node_dependencies(root) runtime = node_deps.get(\"dependencies\", []) dev = node_deps.get(\"devDependencies\", []) if runtime or dev: summary = runtime[:5] if runtime else dev[:5] signals.append( Signal( name=\"dependencies.node\", value=\", \".join(summary), source=\"dependencies\", metadata=node_deps, ) ) java_deps = load_java_dependencies(root) if java_deps:",
      "metadata": {
        "path": "docgen/analyzers/dependencies.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "84b96084924390ebb035e82a517df72ea7318f5b2889271208081cc22c4b6595"
      }
    },
    {
      "id": "docgen/postproc/scorecard.py#0",
      "vector": {
        "readme": 0.07367094686837573,
        "scorecard": 0.07367094686837573,
        "computation": 0.03683547343418787,
        "from": 0.18417736717093933,
        "__future__": 0.03683547343418787,
        "import": 0.2210128406051272,
        "annotations": 0.03683547343418787,
        "json": 0.1105064203025636,
        "dataclasses": 0.03683547343418787,
        "dataclass": 0.07367094686837573,
        "pathlib": 0.03683547343418787,
        "path": 0.07367094686837573,
        "typing": 0.03683547343418787,
        "dict": 0.1105064203025636,
        "list": 0.14734189373675147,
        "prompting": 0.03683547343418787,
        "constants": 0.03683547343418787,
        "default_sections": 0.1105064203025636,
        "class": 0.03683547343418787,
        "readmescorecard": 0.03683547343418787,
        "evaluates": 0.03683547343418787,
        "content": 0.03683547343418787,
        "against": 0.03683547343418787,
        "basic": 0.03683547343418787,
        "quality": 0.03683547343418787,
        "gates": 0.03683547343418787,
        "def": 0.14734189373675147,
        "evaluate": 0.03683547343418787,
        "self": 0.29468378747350293,
        "markdown": 0.29468378747350293,
        "str": 0.29468378747350293,
        "link_issues": 0.2578483140393151,
        "none": 0.1105064203025636,
        "object": 0.07367094686837573,
        "or": 0.03683547343418787,
        "coverage": 0.1105064203025636,
        "_section_coverage": 0.07367094686837573,
        "quickstart_ok": 0.1105064203025636,
        "_quickstart_has_commands": 0.03683547343418787,
        "badges_present": 0.14734189373675147,
        "docgen": 0.1105064203025636,
        "begin": 0.07367094686837573,
        "badges": 0.03683547343418787,
        "in": 0.1105064203025636,
        "score": 0.36835473434187865,
        "100": 0.07367094686837573,
        "minus": 0.03683547343418787,
        "penalties": 0.03683547343418787,
        "int": 0.03683547343418787,
        "1": 0.07367094686837573,
        "40": 0.03683547343418787,
        "if": 0.18417736717093933,
        "not": 0.1105064203025636,
        "20": 0.07367094686837573,
        "min": 0.03683547343418787,
        "len": 0.1105064203025636,
        "5": 0.07367094686837573,
        "max": 0.03683547343418787,
        "0": 0.1105064203025636,
        "return": 0.1105064203025636,
        "section_coverage": 0.03683547343418787,
        "missing_sections": 0.03683547343418787,
        "_missing_sections": 0.1105064203025636,
        "quickstart_has_commands": 0.03683547343418787,
        "save": 0.03683547343418787,
        "repo_path": 0.07367094686837573,
        "data": 0.07367094686837573,
        "output": 0.1105064203025636,
        "parent": 0.03683547343418787,
        "mkdir": 0.03683547343418787,
        "parents": 0.03683547343418787,
        "true": 0.1105064203025636,
        "exist_ok": 0.03683547343418787,
        "write_text": 0.03683547343418787,
        "dumps": 0.03683547343418787,
        "indent": 0.03683547343418787,
        "2": 0.03683547343418787,
        "sort_keys": 0.03683547343418787,
        "encoding": 0.03683547343418787,
        "utf": 0.03683547343418787,
        "8": 0.03683547343418787,
        "float": 0.03683547343418787,
        "total": 0.14734189373675147,
        "present": 0.07367094686837573,
        "missing": 0.03683547343418787,
        "for": 0.03683547343418787,
        "section": 0.07367094686837573,
        "token": 0.07367094686837573,
        "f": 0.03683547343418787,
        "mar": 0.03683547343418787
      },
      "text": "\"\"\"README scorecard computation.\"\"\" from __future__ import annotations import json from dataclasses import dataclass from pathlib import Path from typing import Dict, List from ..prompting.constants import DEFAULT_SECTIONS @dataclass class ReadmeScorecard: \"\"\"Evaluates README content against basic quality gates.\"\"\" def evaluate(self, markdown: str, *, link_issues: List[str] | None = None) -> Dict[str, object]: link_issues = link_issues or [] coverage = self._section_coverage(markdown) quickstart_ok = self._quickstart_has_commands(markdown) badges_present = \"<!-- docgen:begin:badges -->\" in markdown # score 100 minus penalties score = 100 score -= int((1 - coverage) * 40) if not quickstart_ok: score -= 20 if link_issues: score -= min(len(link_issues) * 5, 20) if not badges_present: score -= 5 score = max(score, 0) return { \"score\": score, \"section_coverage\": coverage, \"missing_sections\": self._missing_sections(markdown), \"quickstart_has_commands\": quickstart_ok, \"badges_present\": badges_present, \"link_issues\": link_issues, } def save(self, repo_path: Path, data: Dict[str, object]) -> None: output = repo_path / \".docgen\" / \"scorecard.json\" output.parent.mkdir(parents=True, exist_ok=True) output.write_text(json.dumps(data, indent=2, sort_keys=True), encoding=\"utf-8\") def _section_coverage(self, markdown: str) -> float: total = len(DEFAULT_SECTIONS) present = total - len(self._missing_sections(markdown)) if total == 0: return 1.0 return present / total def _missing_sections(self, markdown: str) -> List[str]: missing: List[str] = [] for section in DEFAULT_SECTIONS: token = f\"<!-- docgen:begin:{section} -->\" if token not in mar",
      "metadata": {
        "path": "docgen/postproc/scorecard.py",
        "tags": [
          "source",
          "python"
        ],
        "hash": "c7f7ca12efa0c1b9a308948c3c0fee582b3fdcc97fbb63ab6ef1f73c4c564483"
      }
    }
  ],
  "configuration": [
    {
      "id": "AGENTS.md#0",
      "vector": {
        "repository": 0.06757373783994859,
        "guidelines": 0.1013606067599229,
        "project": 0.033786868919974296,
        "structure": 0.033786868919974296,
        "module": 0.06757373783994859,
        "organization": 0.033786868919974296,
        "spec": 0.06757373783994859,
        "md": 0.033786868919974296,
        "captures": 0.033786868919974296,
        "the": 0.27029495135979437,
        "end": 0.06757373783994859,
        "to": 0.1013606067599229,
        "architecture": 0.033786868919974296,
        "component": 0.06757373783994859,
        "contracts": 0.033786868919974296,
        "and": 0.43922929595966587,
        "must": 0.033786868919974296,
        "be": 0.033786868919974296,
        "updated": 0.033786868919974296,
        "whenever": 0.033786868919974296,
        "responsibilities": 0.033786868919974296,
        "shift": 0.033786868919974296,
        "place": 0.033786868919974296,
        "python": 0.2027212135198458,
        "source": 0.033786868919974296,
        "in": 0.16893434459987147,
        "a": 0.23650808243982008,
        "docgen": 0.16893434459987147,
        "package": 0.033786868919974296,
        "create": 0.033786868919974296,
        "it": 0.033786868919974296,
        "when": 0.06757373783994859,
        "implementation": 0.033786868919974296,
        "starts": 0.033786868919974296,
        "with": 0.16893434459987147,
        "clear": 0.033786868919974296,
        "submodules": 0.033786868919974296,
        "for": 0.1013606067599229,
        "orchestrator": 0.1013606067599229,
        "analyzers": 0.033786868919974296,
        "runners": 0.033786868919974296,
        "stores": 0.033786868919974296,
        "avoid": 0.06757373783994859,
        "leaving": 0.033786868919974296,
        "logic": 0.033786868919974296,
        "repo": 0.06757373783994859,
        "root": 0.033786868919974296,
        "mirror": 0.033786868919974296,
        "runtime": 0.033786868919974296,
        "modules": 0.06757373783994859,
        "under": 0.1013606067599229,
        "tests": 0.2027212135198458,
        "using": 0.033786868919974296,
        "test_": 0.033786868919974296,
        "py": 0.1013606067599229,
        "co": 0.033786868919974296,
        "locate": 0.033786868919974296,
        "fixtures": 0.06757373783994859,
        "_fixtures": 0.033786868919974296,
        "so": 0.13514747567989718,
        "imports": 0.06757373783994859,
        "stay": 0.06757373783994859,
        "clean": 0.033786868919974296,
        "reusable": 0.033786868919974296,
        "keep": 0.13514747567989718,
        "throwaway": 0.033786868919974296,
        "experiments": 0.033786868919974296,
        "inside": 0.033786868919974296,
        "an": 0.06757373783994859,
        "ignored": 0.033786868919974296,
        "sandbox": 0.033786868919974296,
        "directory": 0.033786868919974296,
        "scans": 0.033786868919974296,
        "remain": 0.033786868919974296,
        "focused": 0.033786868919974296,
        "on": 0.06757373783994859,
        "production": 0.033786868919974296,
        "code": 0.033786868919974296,
        "paths": 0.033786868919974296,
        "build": 0.033786868919974296,
        "test": 0.06757373783994859,
        "development": 0.033786868919974296,
        "commands": 0.033786868919974296,
        "m": 0.16893434459987147,
        "venv": 0.1013606067599229,
        "followed": 0.033786868919974296,
        "by": 0.033786868919974296,
        "scripts": 0.06757373783994859,
        "activate": 0.033786868919974296,
        "aligns": 0.033786868919974296,
        "local": 0.033786868919974296,
        "shells": 0.033786868919974296,
        "pycharm": 0.033786868919974296,
        "interpreter": 0.033786868919974296,
        "settings": 0.033786868919974296,
        "pip": 0.033786868919974296,
        "install": 0.033786868919974296,
        "e": 0.033786868919974296,
        "dev": 0.033786868919974296,
        "after": 0.06757373783994859,
        "pyproject": 0.033786868919974296,
        "toml": 0.033786868919974296,
        "is": 0.1013606067599229,
        "committed": 0.033786868919974296,
        "exposes": 0.033786868919974296,
        "cli": 0.033786868919974296,
        "plugins": 0.033786868919974296,
        "editable": 0.033786868919974296,
        "form": 0.033786868919974296,
        "without": 0.033786868919974296,
        "repeated": 0.033786868919974296,
        "reinstalls": 0.033786868919974296,
        "pytest": 0.06757373783994859,
        "runs": 0.033786868919974296,
        "full": 0.033786868919974296,
        "suite": 0.033786868919974296,
        "append": 0.033786868919974296,
        "k": 0.033786868919974296,
        "pattern": 0.033786868919974296,
        "iterate": 0.033786868919974296,
        "single": 0.06757373783994859,
        "analyzer": 0.06757373783994859,
        "or": 0.06757373783994859,
        "pipeline": 0.1013606067599229,
        "stage": 0.033786868919974296,
        "mypy": 0.033786868919974296,
        "ruff": 0.033786868919974296,
        "check": 0.033786868919974296,
        "catch": 0.033786868919974296,
        "type": 0.033786868919974296,
        "drift": 0.033786868919974296,
        "lint": 0.033786868919974296,
        "violations": 0.033786868919974296,
        "before": 0.06757373783994859,
        "readme": 0.06757373783994859,
        "generation": 0.06757373783994859,
        "attempted": 0.033786868919974296,
        "coding": 0.033786868919974296,
        "style": 0.033786868919974296,
        "naming": 0.033786868919974296,
        "conventions": 0.033786868919974296,
        "follow": 0.06757373783994859,
        "pep": 0.033786868919974296,
        "8": 0.033786868919974296,
        "4": 0.033786868919974296,
        "space": 0.033786868919974296,
        "indents": 0.033786868919974296,
        "explicit": 0.033786868919974296,
        "example": 0.033786868919974296,
        "from": 0.033786868919974296,
        "import": 0.033786868919974296,
        "static": 0.033786868919974296,
        "tooling": 0.033786868919974296,
        "can": 0.033786868919974296,
        "trace": 0.033786868919974296,
        "dependencies": 0.033786868919974296,
        "name": 0.033786868919974296,
        "their": 0.033786868919974296,
        "roles": 0.033786868919974296,
        "prompt_builder": 0.033786868919974296,
        "functions": 0.033786868919974296,
        "snake_case": 0.033786868919974296,
        "descriptive": 0.06757373783994859,
        "nouns": 0.033786868919974296,
        "first": 0.033786868919974296,
        "build_prompt_section": 0.033786868919974296,
        "run": 0.033786868919974296,
        "black": 0.033786868919974296,
        "commits": 0.06757373783994859,
        "manual": 0.033786868919974296,
        "reformatting": 0.033786868919974296,
        "unless": 0.033786868919974296,
        "formatter": 0.033786868919974296,
        "cannot": 0.033786868919974296,
        "resolve": 0.033786868919974296,
        "construct": 0.033786868919974296,
        "testing": 0.06757373783994859,
        "default": 0.033786868919974296,
        "harness": 0.033786868919974296,
        "every": 0.033786868919974296,
        "needs": 0.033786868919974296,
        "unit": 0.033786868919974296,
        "coverage": 0.033786868919974296,
        "plus": 0.033786868919974296,
        "integration": 0.06757373783994859,
        "case": 0.033786868919974296,
        "that": 0.06757373783994859,
        "walks": 0.033786868919974296,
        "snapshot": 0.033786868919974296,
        "through": 0.033786868919974296,
        "use": 0.033786868919974296,
        "names": 0.033786868919974296,
        "such": 0.033786868919974296,
        "as": 0.033786868919974296,
        "test_prompt_builder_handles_missing_signals": 0.033786868919974296,
        "arrange": 0.033786868919974296,
        "act": 0.033786868919974296,
        "assert": 0.033786868919974296,
        "comments": 0.033786868919974296,
        "minimal": 0.033786868919974296,
        "but": 0.033786868919974296,
        "intentional": 0.033786868919974296,
        "store": 0.033786868919974296,
        "regression": 0.033786868919974296,
        "generated": 0.033786868919974296,
        "slices": 0.033786868919974296,
        "data": 0.033786868919974296,
        "update": 0.033786868919974296,
        "them": 0.033786868919974296,
        "helper": 0.033786868919974296,
        "diffs": 0.033786868919974296,
        "reviewable": 0.033786868919974296,
        "commit": 0.033786868919974296,
        "pull": 0.033786868919974296,
        "request": 0.033786868919974296,
        "conventional": 0.033786868919974296,
        "feat": 0.033786868919974296,
        "fix": 0.033786868919974296,
        "docs": 0.033786868919974296,
        "subject": 0.033786868919974296,
        "lines": 0.033786868919974296,
        "72": 0.033786868919974296,
        "characters": 0.033786868919974296,
        "explain": 0.033786868919974296,
        "broader": 0.033786868919974296,
        "scope": 0.033786868919974296,
        "body": 0.033786868919974296,
        "multiple": 0.033786868919974296,
        "subsystems": 0.033786868919974296,
        "change": 0.033786868919974296,
        "bundle": 0.033786868919974296,
        "related": 0.033786868919974296,
        "work": 0.033786868919974296,
        "into": 0.033786868919974296,
        "pr": 0.033786868919974296,
        "includes": 0.033786868919974296,
        "summary": 0.033786868919974296,
        "notes": 0.033786868919974296,
        "links": 0.033786868919974296
      },
      "text": "# Repository Guidelines ## Project Structure & Module Organization - `spec/spec.md` captures the end-to-end architecture, component contracts, and must be updated whenever responsibilities shift. - Place Python source in a `docgen/` package (create it when implementation starts) with clear submodules for orchestrator, analyzers, runners, and stores; avoid leaving logic in the repo root. - Mirror runtime modules under `tests/` using `test_<module>.py`; co-locate fixtures in `tests/_fixtures/` so imports stay clean and reusable. - Keep throwaway experiments inside an ignored `sandbox/` directory so repository scans remain focused on production code paths. ## Build, Test, and Development Commands - `python -m venv .venv` followed by `.\\\\.venv\\\\Scripts\\\\activate` aligns local shells with the PyCharm interpreter settings. - `python -m pip install -e .[dev]` (after a `pyproject.toml` is committed) exposes the CLI and plugins in editable form without repeated reinstalls. - `python -m pytest` runs the full suite; append `-k <pattern>` to iterate on a single analyzer or pipeline stage. - `python -m mypy docgen` and `python -m ruff check docgen tests` catch type drift and lint violations before README generation is attempted. ## Coding Style & Naming Conventions - Follow PEP 8 with 4-space indents and explicit imports (for example, `from docgen.orchestrator import Pipeline`) so static tooling can trace dependencies. - Name modules after their roles (`orchestrator.py`, `prompt_builder.py`) and keep functions snake_case with descriptive nouns first (`build_prompt_section`). - Run `black docgen tests` before commits; avoid manual reformatting unless the formatter cannot resolve a construct. ## Testing Guidelines - Pytest is the default harness; every analyzer or pipeline component needs unit coverage plus an integration case under `tests/integration/` that walks a repo snapshot through generation. - Use descriptive test names such as `test_prompt_builder_handles_missing_signals` and keep Arrange-Act-Assert comments minimal but intentional. - Store regression fixtures for generated README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "AGENTS.md#1",
      "vector": {
        "readme": 0.1270001270001905,
        "slices": 0.06350006350009525,
        "under": 0.06350006350009525,
        "tests": 0.06350006350009525,
        "data": 0.06350006350009525,
        "and": 0.4445004445006667,
        "update": 0.06350006350009525,
        "them": 0.06350006350009525,
        "with": 0.06350006350009525,
        "helper": 0.06350006350009525,
        "scripts": 0.06350006350009525,
        "so": 0.06350006350009525,
        "diffs": 0.06350006350009525,
        "stay": 0.06350006350009525,
        "reviewable": 0.06350006350009525,
        "commit": 0.1270001270001905,
        "pull": 0.06350006350009525,
        "request": 0.06350006350009525,
        "guidelines": 0.06350006350009525,
        "follow": 0.06350006350009525,
        "conventional": 0.06350006350009525,
        "commits": 0.06350006350009525,
        "feat": 0.06350006350009525,
        "fix": 0.06350006350009525,
        "docs": 0.1270001270001905,
        "keep": 0.1270001270001905,
        "subject": 0.06350006350009525,
        "lines": 0.06350006350009525,
        "72": 0.06350006350009525,
        "characters": 0.06350006350009525,
        "explain": 0.06350006350009525,
        "broader": 0.06350006350009525,
        "scope": 0.06350006350009525,
        "in": 0.254000254000381,
        "the": 0.31750031750047625,
        "body": 0.06350006350009525,
        "when": 0.1270001270001905,
        "multiple": 0.06350006350009525,
        "subsystems": 0.06350006350009525,
        "change": 0.06350006350009525,
        "bundle": 0.06350006350009525,
        "related": 0.06350006350009525,
        "work": 0.1270001270001905,
        "into": 0.06350006350009525,
        "a": 0.254000254000381,
        "single": 0.06350006350009525,
        "pr": 0.1270001270001905,
        "that": 0.06350006350009525,
        "includes": 0.06350006350009525,
        "summary": 0.06350006350009525,
        "testing": 0.06350006350009525,
        "notes": 0.1270001270001905,
        "links": 0.06350006350009525,
        "to": 0.06350006350009525,
        "relevant": 0.06350006350009525,
        "issues": 0.06350006350009525,
        "or": 0.06350006350009525,
        "spec": 0.06350006350009525,
        "sections": 0.06350006350009525,
        "attach": 0.06350006350009525,
        "before": 0.1270001270001905,
        "after": 0.06350006350009525,
        "excerpts": 0.06350006350009525,
        "altering": 0.06350006350009525,
        "generation": 0.06350006350009525,
        "output": 0.06350006350009525,
        "run": 0.06350006350009525,
        "lint": 0.06350006350009525,
        "type": 0.06350006350009525,
        "check": 0.06350006350009525,
        "test": 0.06350006350009525,
        "commands": 0.06350006350009525,
        "opening": 0.06350006350009525,
        "paste": 0.06350006350009525,
        "condensed": 0.06350006350009525,
        "results": 0.06350006350009525,
        "description": 0.06350006350009525,
        "for": 0.06350006350009525,
        "quick": 0.06350006350009525,
        "verification": 0.06350006350009525,
        "environment": 0.1270001270001905,
        "tooling": 0.06350006350009525,
        "reuse": 0.06350006350009525,
        "local": 0.1270001270001905,
        "venv": 0.06350006350009525,
        "seeded": 0.06350006350009525,
        "by": 0.1270001270001905,
        "pycharm": 0.06350006350009525,
        "do": 0.06350006350009525,
        "not": 0.06350006350009525,
        "artifacts": 0.06350006350009525,
        "store": 0.06350006350009525,
        "secrets": 0.06350006350009525,
        "env": 0.06350006350009525,
        "consumed": 0.06350006350009525,
        "llm": 0.06350006350009525,
        "runner": 0.06350006350009525,
        "large": 0.06350006350009525,
        "model": 0.06350006350009525,
        "weights": 0.06350006350009525,
        "outside": 0.06350006350009525,
        "repository": 0.06350006350009525,
        "document": 0.06350006350009525,
        "their": 0.06350006350009525,
        "locations": 0.06350006350009525,
        "models": 0.06350006350009525,
        "md": 0.06350006350009525,
        "once": 0.06350006350009525,
        "integration": 0.06350006350009525,
        "begins": 0.06350006350009525
      },
      "text": "README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to relevant issues or spec sections; attach before/after README excerpts when altering generation output. - Run lint, type-check, and test commands before opening a PR and paste condensed results in the description for quick verification. ## Environment & Tooling Notes - Reuse the local `.venv` seeded by PyCharm; do not commit environment artifacts and store secrets in a `.env` consumed by the local LLM runner. - Keep large model weights outside the repository and document their locations in `docs/models.md` once integration work begins.",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "docs/ci/docgen-update.yml#0",
      "vector": {
        "name": 0.2773500981126145,
        "docgen": 0.1849000654084097,
        "update": 0.2311250817605121,
        "on": 0.09245003270420485,
        "push": 0.046225016352102424,
        "branches": 0.09245003270420485,
        "main": 0.13867504905630726,
        "pull_request": 0.13867504905630726,
        "jobs": 0.046225016352102424,
        "readme": 0.1849000654084097,
        "runs": 0.046225016352102424,
        "self": 0.046225016352102424,
        "hosted": 0.046225016352102424,
        "steps": 0.09245003270420485,
        "uses": 0.13867504905630726,
        "actions": 0.2311250817605121,
        "checkout": 0.046225016352102424,
        "v4": 0.09245003270420485,
        "with": 0.13867504905630726,
        "fetch": 0.046225016352102424,
        "depth": 0.046225016352102424,
        "0": 0.046225016352102424,
        "setup": 0.046225016352102424,
        "python": 0.2311250817605121,
        "v5": 0.046225016352102424,
        "version": 0.046225016352102424,
        "3": 0.046225016352102424,
        "11": 0.046225016352102424,
        "cache": 0.09245003270420485,
        "path": 0.046225016352102424,
        "pip": 0.2773500981126145,
        "key": 0.046225016352102424,
        "runner": 0.09245003270420485,
        "os": 0.09245003270420485,
        "hashfiles": 0.046225016352102424,
        "pyproject": 0.046225016352102424,
        "toml": 0.046225016352102424,
        "restore": 0.046225016352102424,
        "keys": 0.046225016352102424,
        "install": 0.13867504905630726,
        "dependencies": 0.046225016352102424,
        "run": 0.2311250817605121,
        "m": 0.13867504905630726,
        "upgrade": 0.046225016352102424,
        "e": 0.046225016352102424,
        "dev": 0.046225016352102424,
        "determine": 0.046225016352102424,
        "diff": 0.1849000654084097,
        "base": 0.2773500981126145,
        "id": 0.046225016352102424,
        "if": 0.09245003270420485,
        "github": 0.2311250817605121,
        "event_name": 0.046225016352102424,
        "then": 0.09245003270420485,
        "echo": 0.09245003270420485,
        "event": 0.046225016352102424,
        "sha": 0.046225016352102424,
        "github_output": 0.09245003270420485,
        "else": 0.046225016352102424,
        "origin": 0.046225016352102424,
        "fi": 0.09245003270420485,
        "env": 0.046225016352102424,
        "docgen_llm_base_url": 0.046225016352102424,
        "http": 0.046225016352102424,
        "localhost": 0.046225016352102424,
        "12434": 0.046225016352102424,
        "engines": 0.046225016352102424,
        "v1": 0.046225016352102424,
        "cli": 0.046225016352102424,
        "outputs": 0.046225016352102424,
        "commit": 0.09245003270420485,
        "md": 0.09245003270420485,
        "optional": 0.046225016352102424,
        "git": 0.1849000654084097,
        "status": 0.046225016352102424,
        "short": 0.046225016352102424,
        "grep": 0.046225016352102424,
        "q": 0.046225016352102424,
        "config": 0.09245003270420485,
        "user": 0.09245003270420485,
        "email": 0.046225016352102424,
        "users": 0.046225016352102424,
        "noreply": 0.046225016352102424,
        "com": 0.046225016352102424,
        "am": 0.046225016352102424,
        "docs": 0.046225016352102424,
        "via": 0.046225016352102424
      },
      "text": "name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted steps: - uses: actions/checkout@v4 with: fetch-depth: 0 - uses: actions/setup-python@v5 with: python-version: '3.11' - uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install dependencies run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README.md (optional) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi",
      "metadata": {
        "path": "docs/ci/docgen-update.yml",
        "tags": [
          "docs"
        ],
        "hash": "48bec2bc404707486fcb1661def194395cc581bf55cb2f610704d495663e6a14"
      }
    },
    {
      "id": "docs/ci/github-actions.md#0",
      "vector": {
        "github": 0.2528558164964056,
        "actions": 0.2212488394343549,
        "integration": 0.0316069770620507,
        "the": 0.18964186237230418,
        "workflow": 0.0632139541241014,
        "below": 0.0316069770620507,
        "runs": 0.0632139541241014,
        "docgen": 0.2212488394343549,
        "update": 0.18964186237230418,
        "on": 0.1264279082482028,
        "pushes": 0.0316069770620507,
        "and": 0.0316069770620507,
        "pull": 0.0316069770620507,
        "requests": 0.0316069770620507,
        "it": 0.0316069770620507,
        "assumes": 0.0316069770620507,
        "a": 0.0632139541241014,
        "self": 0.0632139541241014,
        "hosted": 0.1264279082482028,
        "runner": 0.15803488531025348,
        "or": 0.09482093118615209,
        "with": 0.18964186237230418,
        "network": 0.0632139541241014,
        "access": 0.0632139541241014,
        "to": 0.1264279082482028,
        "your": 0.0632139541241014,
        "local": 0.09482093118615209,
        "model": 0.0316069770620507,
        "runtime": 0.0316069770620507,
        "job": 0.0316069770620507,
        "skips": 0.0316069770620507,
        "early": 0.0316069770620507,
        "when": 0.0316069770620507,
        "no": 0.0316069770620507,
        "files": 0.0316069770620507,
        "match": 0.0316069770620507,
        "yml": 0.0316069770620507,
        "s": 0.0316069770620507,
        "ci": 0.0316069770620507,
        "watched_globs": 0.0316069770620507,
        "entries": 0.0316069770620507,
        "so": 0.0316069770620507,
        "that": 0.0316069770620507,
        "purely": 0.0316069770620507,
        "documentation": 0.0316069770620507,
        "only": 0.0316069770620507,
        "changes": 0.0316069770620507,
        "do": 0.0316069770620507,
        "not": 0.0316069770620507,
        "trigger": 0.0316069770620507,
        "generator": 0.0316069770620507,
        "yaml": 0.0316069770620507,
        "name": 0.3476767476825577,
        "push": 0.0316069770620507,
        "branches": 0.0632139541241014,
        "main": 0.09482093118615209,
        "pull_request": 0.09482093118615209,
        "jobs": 0.0316069770620507,
        "readme": 0.2212488394343549,
        "requires": 0.0316069770620507,
        "llm": 0.0316069770620507,
        "steps": 0.0632139541241014,
        "checkout": 0.0632139541241014,
        "repository": 0.0316069770620507,
        "uses": 0.1264279082482028,
        "v4": 0.09482093118615209,
        "fetch": 0.0316069770620507,
        "depth": 0.0316069770620507,
        "0": 0.0316069770620507,
        "set": 0.0316069770620507,
        "up": 0.0316069770620507,
        "python": 0.18964186237230418,
        "setup": 0.0316069770620507,
        "v5": 0.0316069770620507,
        "version": 0.0316069770620507,
        "3": 0.0316069770620507,
        "11": 0.0316069770620507,
        "cache": 0.09482093118615209,
        "pip": 0.2212488394343549,
        "dependencies": 0.0316069770620507,
        "path": 0.0632139541241014,
        "key": 0.0316069770620507,
        "os": 0.0632139541241014,
        "hashfiles": 0.0316069770620507,
        "pyproject": 0.0316069770620507,
        "toml": 0.0316069770620507,
        "restore": 0.0316069770620507,
        "keys": 0.0316069770620507,
        "install": 0.09482093118615209,
        "in": 0.0316069770620507,
        "editable": 0.0316069770620507,
        "mode": 0.0316069770620507,
        "run": 0.15803488531025348,
        "m": 0.09482093118615209,
        "upgrade": 0.0316069770620507,
        "e": 0.0316069770620507,
        "dev": 0.0316069770620507,
        "determine": 0.0316069770620507,
        "diff": 0.1264279082482028,
        "base": 0.18964186237230418,
        "id": 0.0316069770620507,
        "if": 0.1264279082482028,
        "event_name": 0.0316069770620507,
        "then": 0.0632139541241014,
        "echo": 0.0632139541241014,
        "event": 0.0316069770620507,
        "sha": 0.0316069770620507,
        "github_output": 0.0632139541241014,
        "else": 0.0316069770620507,
        "origin": 0.0316069770620507,
        "fi": 0.0632139541241014,
        "env": 0.0316069770620507,
        "docgen_llm_base_url": 0.0632139541241014,
        "http": 0.0316069770620507,
        "localhost": 0.0316069770620507,
        "12434": 0.0316069770620507,
        "engines": 0.0316069770620507,
        "v1": 0.0316069770620507,
        "cli": 0.0632139541241014,
        "outputs": 0.0316069770620507,
        "commit": 0.0632139541241014,
        "updates": 0.0316069770620507,
        "any": 0.0316069770620507,
        "git": 0.1264279082482028,
        "status": 0.0316069770620507,
        "short": 0.0316069770620507,
        "grep": 0.0316069770620507,
        "q": 0.0316069770620507,
        "md": 0.0632139541241014,
        "config": 0.0632139541241014,
        "user": 0.0632139541241014,
        "email": 0.0316069770620507,
        "users": 0.0316069770620507,
        "noreply": 0.0316069770620507,
        "com": 0.0316069770620507,
        "am": 0.0316069770620507,
        "docs": 0.0316069770620507,
        "via": 0.0316069770620507,
        "upload": 0.0632139541241014,
        "artifact": 0.0632139541241014,
        "success": 0.0316069770620507,
        "generated": 0.0316069770620507,
        "note": 0.0316069770620507,
        "relies": 0.0316069770620507,
        "pointing": 0.0316069770620507,
        "private": 0.0632139541241014,
        "inference": 0.0316069770620507,
        "endpoint": 0.0316069770620507,
        "for": 0.0316069770620507,
        "runners": 0.0316069770620507,
        "you": 0.0316069770620507,
        "will": 0.0316069770620507,
        "need": 0.0316069770620507,
        "expose": 0.0316069770620507,
        "within": 0.0316069770620507,
        "switch": 0.0316069770620507,
        "ollama": 0.0316069770620507,
        "appropriate": 0.0316069770620507,
        "caching": 0.0316069770620507
      },
      "text": "# GitHub Actions Integration The workflow below runs `docgen update` on pushes and pull requests. It assumes a self-hosted runner (or GitHub-hosted runner with network access to your local model runtime). The job skips early when no files match `.docgen.yml`'s `ci.watched_globs` entries so that purely documentation-only changes do not trigger the generator. ```yaml name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted # requires local LLM access steps: - name: Checkout repository uses: actions/checkout@v4 with: fetch-depth: 0 - name: Set up Python uses: actions/setup-python@v5 with: python-version: '3.11' - name: Cache pip dependencies uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install docgen in editable mode run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: | python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README updates (if any) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi - name: Upload README artifact if: success() uses: actions/upload-artifact@v4 with: name: generated-readme path: README.md ``` > **Note:** the workflow relies on `DOCGEN_LLM_BASE_URL` pointing to a local or > private inference endpoint. For GitHub-hosted runners you will need to expose > the runner within your private network or switch to the `ollama` CLI with > appropriate caching. ```",
      "metadata": {
        "path": "docs/ci/github-actions.md",
        "tags": [
          "docs"
        ],
        "hash": "178c6f25ecf7325348a9158158c6e6f36c29d520a922a6f0c2c739f4efe1b0d8"
      }
    },
    {
      "id": "spec/feature_checklist.md#0",
      "vector": {
        "intelligent": 0.028513297425610054,
        "readme": 0.08553989227683016,
        "generator": 0.028513297425610054,
        "feature": 0.028513297425610054,
        "checklist": 0.028513297425610054,
        "status": 0.028513297425610054,
        "legend": 0.028513297425610054,
        "not": 0.028513297425610054,
        "started": 0.028513297425610054,
        "in": 0.028513297425610054,
        "progress": 0.028513297425610054,
        "done": 0.028513297425610054,
        "scope": 0.028513297425610054,
        "tags": 0.028513297425610054,
        "mvp": 0.4847260562353709,
        "required": 0.028513297425610054,
        "for": 0.11405318970244022,
        "proof": 0.028513297425610054,
        "of": 0.08553989227683016,
        "concept": 0.028513297425610054,
        "next": 0.2851329742561005,
        "nice": 0.028513297425610054,
        "to": 0.08553989227683016,
        "have": 0.028513297425610054,
        "soon": 0.028513297425610054,
        "stretch": 0.11405318970244022,
        "later": 0.028513297425610054,
        "1": 0.05702659485122011,
        "core": 0.028513297425610054,
        "workflows": 0.028513297425610054,
        "x": 0.570265948512201,
        "docgen": 0.11405318970244022,
        "init": 0.028513297425610054,
        "initialize": 0.028513297425610054,
        "repos": 0.028513297425610054,
        "without": 0.05702659485122011,
        "docs": 0.11405318970244022,
        "update": 0.028513297425610054,
        "detect": 0.028513297425610054,
        "changes": 0.028513297425610054,
        "on": 0.028513297425610054,
        "commit": 0.028513297425610054,
        "pr": 0.028513297425610054,
        "and": 0.028513297425610054,
        "patch": 0.028513297425610054,
        "affected": 0.028513297425610054,
        "sections": 0.05702659485122011,
        "regenerate": 0.028513297425610054,
        "manual": 0.028513297425610054,
        "full": 0.028513297425610054,
        "partial": 0.028513297425610054,
        "regeneration": 0.028513297425610054,
        "dry": 0.05702659485122011,
        "run": 0.05702659485122011,
        "mode": 0.05702659485122011,
        "preview": 0.028513297425610054,
        "diffs": 0.028513297425610054,
        "writing": 0.028513297425610054,
        "service": 0.028513297425610054,
        "fastapi": 0.05702659485122011,
        "endpoints": 0.028513297425610054,
        "ci": 0.05702659485122011,
        "bots": 0.028513297425610054,
        "2": 0.028513297425610054,
        "repository": 0.028513297425610054,
        "scanning": 0.028513297425610054,
        "indexing": 0.028513297425610054,
        "walk": 0.028513297425610054,
        "filesystem": 0.028513297425610054,
        "with": 0.028513297425610054,
        "ignore": 0.028513297425610054,
        "rules": 0.028513297425610054,
        "gitignore": 0.028513297425610054,
        "yml": 0.028513297425610054,
        "build": 0.08553989227683016,
        "normalized": 0.028513297425610054,
        "manifest": 0.05702659485122011,
        "files": 0.05702659485122011,
        "roles": 0.028513297425610054,
        "src": 0.028513297425610054,
        "test": 0.05702659485122011,
        "config": 0.08553989227683016,
        "infra": 0.028513297425610054,
        "hash": 0.028513297425610054,
        "cache": 0.028513297425610054,
        "file": 0.028513297425610054,
        "metadata": 0.028513297425610054,
        "speed": 0.028513297425610054,
        "subsequent": 0.028513297425610054,
        "runs": 0.028513297425610054,
        "entrypoint": 0.05702659485122011,
        "detection": 0.05702659485122011,
        "e": 0.028513297425610054,
        "g": 0.028513297425610054,
        "main": 0.028513297425610054,
        "springbootapplication": 0.028513297425610054,
        "app": 0.028513297425610054,
        "monorepo": 0.05702659485122011,
        "module": 0.028513297425610054,
        "3": 0.028513297425610054,
        "analyzers": 0.14256648712805026,
        "plugin": 0.028513297425610054,
        "based": 0.028513297425610054,
        "language": 0.028513297425610054,
        "python": 0.028513297425610054,
        "java": 0.028513297425610054,
        "node": 0.028513297425610054,
        "js": 0.05702659485122011,
        "tier": 0.028513297425610054,
        "poetry": 0.028513297425610054,
        "setuptools": 0.028513297425610054,
        "maven": 0.028513297425610054,
        "gradle": 0.028513297425610054,
        "npm": 0.028513297425610054,
        "pnpm": 0.028513297425610054,
        "yarn": 0.028513297425610054,
        "dependency": 0.028513297425610054,
        "from": 0.028513297425610054,
        "pattern": 0.028513297425610054,
        "docker": 0.028513297425610054,
        "k8s": 0.028513297425610054,
        "layout": 0.028513297425610054,
        "tree": 0.028513297425610054,
        "sitter": 0.028513297425610054,
        "powered": 0.028513297425610054,
        "symbol": 0.028513297425610054,
        "extraction": 0.028513297425610054,
        "flagged": 0.028513297425610054,
        "4": 0.028513297425610054,
        "knowledge": 0.05702659485122011,
        "store": 0.028513297425610054,
        "rag": 0.028513297425610054,
        "local": 0.05702659485122011,
        "embedding": 0.028513297425610054,
        "model": 0.05702659485122011,
        "chunking": 0.028513297425610054,
        "strategy": 0.028513297425610054,
        "index": 0.028513297425610054,
        "top": 0.05702659485122011,
        "n": 0.028513297425610054,
        "source": 0.028513297425610054,
        "headers": 0.028513297425610054,
        "comments": 0.028513297425610054,
        "section": 0.14256648712805026,
        "scoped": 0.028513297425610054,
        "retrieval": 0.028513297425610054,
        "k": 0.028513297425610054,
        "per": 0.05702659485122011,
        "lightweight": 0.028513297425610054,
        "graph": 0.028513297425610054,
        "modules": 0.028513297425610054,
        "services": 0.028513297425610054,
        "signals": 0.028513297425610054,
        "5": 0.028513297425610054,
        "prompting": 0.028513297425610054,
        "templates": 0.08553989227683016,
        "jinja2": 0.028513297425610054,
        "intro": 0.028513297425610054,
        "features": 0.028513297425610054,
        "architecture": 0.05702659485122011,
        "quickstart": 0.028513297425610054,
        "deployment": 0.028513297425610054,
        "troubleshooting": 0.028513297425610054,
        "faq": 0.028513297425610054,
        "license": 0.028513297425610054,
        "guardrailed": 0.028513297425610054,
        "system": 0.028513297425610054,
        "prompt": 0.028513297425610054,
        "no": 0.028513297425610054,
        "speculation": 0.028513297425610054,
        "cite": 0.028513297425610054,
        "repo": 0.028513297425610054,
        "facts": 0.028513297425610054,
        "only": 0.028513297425610054,
        "token": 0.028513297425610054,
        "budgeting": 0.028513297425610054,
        "streaming": 0.028513297425610054,
        "by": 0.028513297425610054,
        "generation": 0.028513297425610054,
        "template": 0.028513297425610054,
        "override": 0.028513297425610054,
        "mechanism": 0.028513297425610054,
        "j2": 0.028513297425610054,
        "style": 0.028513297425610054,
        "presets": 0.028513297425610054,
        "concise": 0.028513297425610054,
        "vs": 0.028513297425610054,
        "comprehensive": 0.028513297425610054,
        "mermaid": 0.028513297425610054,
        "diagrams": 0.028513297425610054,
        "flow": 0.028513297425610054,
        "where": 0.028513297425610054,
        "appropriate": 0.028513297425610054,
        "6": 0.028513297425610054,
        "llm": 0.028513297425610054,
        "runner": 0.05702659485122011,
        "http": 0.028513297425610054,
        "adapter": 0.05702659485122011,
        "host": 0.028513297425610054,
        "container": 0.028513297425610054,
        "defaults": 0.028513297425610054,
        "env": 0.028513297425610054,
        "api": 0.028513297425610054,
        "key": 0.028513297425610054,
        "overrides": 0.028513297425610054,
        "llama": 0.028513297425610054,
        "cpp": 0.028513297425610054,
        "structured": 0.028513297425610054,
        "outputs": 0.028513297425610054,
        "tool": 0.028513297425610054,
        "use": 0.028513297425610054,
        "compatibility": 0.028513297425610054,
        "7": 0.028513297425610054,
        "post": 0.028513297425610054,
        "processing": 0.028513297425610054,
        "markdown": 0.028513297425610054,
        "lint": 0.028513297425610054,
        "heading": 0.028513297425610054,
        "hierarchy": 0.028513297425610054
      },
      "text": "# Intelligent README Generator \u2014 Feature Checklist > Status legend: \u2610 Not started \u00b7 \u25d0 In progress \u00b7 \u2714 Done > Scope tags: **[MVP]** required for proof\u2011of\u2011concept, **[NEXT]** nice\u2011to\u2011have soon, **[STRETCH]** later ## 1) Core Workflows - [x] **docgen init** \u2014 Initialize README for repos without docs **[MVP]** - [x] **docgen update** \u2014 Detect changes on commit/PR and patch affected sections **[MVP]** - [ ] **docgen regenerate** \u2014 Manual full/partial regeneration **[MVP]** - [x] Dry\u2011run mode (`--dry-run`) to preview diffs without writing **[NEXT]** - [ ] Service mode (FastAPI) endpoints for CI/bots **[STRETCH]** ## 2) Repository Scanning & Indexing - [x] Walk filesystem with ignore rules (`.gitignore`, `.docgen.yml`) **[MVP]** - [x] Build normalized manifest of files, roles (src/test/docs/config/infra) **[MVP]** - [x] Hash & cache file metadata to speed subsequent runs **[MVP]** - [x] Entrypoint detection (e.g., `main()`, `@SpringBootApplication`, FastAPI app) **[NEXT]** - [x] Monorepo module detection **[NEXT]** ## 3) Analyzers (Plugin\u2011based) - [x] Language analyzers: Python, Java, Node.js (Tier\u20111) **[MVP]** - [x] Build analyzers: Poetry/Setuptools, Maven/Gradle, npm/pnpm/yarn **[MVP]** - [x] Dependency analyzers from manifest files **[MVP]** - [x] Pattern analyzers: Docker/K8s, CI config, monorepo layout **[NEXT]** - [ ] Tree\u2011sitter powered symbol/entrypoint extraction (flagged) **[STRETCH]** ## 4) Knowledge Store (RAG) - [ ] Local embedding model + chunking strategy **[MVP]** - [ ] Index `README`, `/docs`, top N source headers & comments **[MVP]** - [ ] Section\u2011scoped retrieval (top\u2011k per section) **[MVP]** - [ ] Lightweight knowledge graph of modules/services/signals **[NEXT]** ## 5) Prompting & Templates - [x] Jinja2 templates per section (intro, features, architecture, quickstart, config, build/test, deployment, troubleshooting, FAQ, license) **[MVP]** - [x] Guardrailed system prompt (\u201cno speculation; cite repo facts only\u201d) **[MVP]** - [x] Token budgeting & streaming section-by-section generation **[MVP]** - [x] Template override mechanism (`docs/templates/*.j2`) **[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy,",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#1",
      "vector": {
        "next": 0.3907019005301633,
        "x": 0.5860528507952449,
        "style": 0.05581455721859476,
        "presets": 0.02790727860929738,
        "concise": 0.02790727860929738,
        "vs": 0.02790727860929738,
        "comprehensive": 0.02790727860929738,
        "mermaid": 0.02790727860929738,
        "js": 0.05581455721859476,
        "diagrams": 0.02790727860929738,
        "for": 0.11162911443718952,
        "architecture": 0.02790727860929738,
        "flow": 0.02790727860929738,
        "sections": 0.05581455721859476,
        "where": 0.02790727860929738,
        "appropriate": 0.02790727860929738,
        "6": 0.02790727860929738,
        "local": 0.05581455721859476,
        "llm": 0.05581455721859476,
        "runner": 0.05581455721859476,
        "model": 0.02790727860929738,
        "http": 0.02790727860929738,
        "adapter": 0.05581455721859476,
        "host": 0.02790727860929738,
        "container": 0.02790727860929738,
        "defaults": 0.05581455721859476,
        "env": 0.02790727860929738,
        "api": 0.02790727860929738,
        "key": 0.02790727860929738,
        "overrides": 0.02790727860929738,
        "mvp": 0.47442373635805546,
        "llama": 0.02790727860929738,
        "cpp": 0.02790727860929738,
        "structured": 0.02790727860929738,
        "outputs": 0.05581455721859476,
        "tool": 0.02790727860929738,
        "use": 0.02790727860929738,
        "compatibility": 0.02790727860929738,
        "stretch": 0.05581455721859476,
        "7": 0.02790727860929738,
        "post": 0.02790727860929738,
        "processing": 0.02790727860929738,
        "markdown": 0.02790727860929738,
        "lint": 0.05581455721859476,
        "heading": 0.02790727860929738,
        "hierarchy": 0.02790727860929738,
        "code": 0.05581455721859476,
        "fences": 0.02790727860929738,
        "line": 0.02790727860929738,
        "length": 0.02790727860929738,
        "auto": 0.05581455721859476,
        "toc": 0.02790727860929738,
        "level": 0.02790727860929738,
        "3": 0.02790727860929738,
        "badges": 0.02790727860929738,
        "build": 0.05581455721859476,
        "coverage": 0.05581455721859476,
        "license": 0.02790727860929738,
        "with": 0.05581455721859476,
        "safe": 0.05581455721859476,
        "link": 0.05581455721859476,
        "validator": 0.02790727860929738,
        "relative": 0.02790727860929738,
        "absolute": 0.02790727860929738,
        "managed": 0.02790727860929738,
        "markers": 0.02790727860929738,
        "idempotent": 0.02790727860929738,
        "patching": 0.02790727860929738,
        "docgen": 0.08372183582789214,
        "begin": 0.02790727860929738,
        "end": 0.02790727860929738,
        "8": 0.02790727860929738,
        "git": 0.02790727860929738,
        "integration": 0.05581455721859476,
        "diff": 0.05581455721859476,
        "detection": 0.02790727860929738,
        "map": 0.02790727860929738,
        "changed": 0.05581455721859476,
        "files": 0.05581455721859476,
        "impacted": 0.02790727860929738,
        "branch": 0.02790727860929738,
        "pr": 0.05581455721859476,
        "creation": 0.02790727860929738,
        "summary": 0.02790727860929738,
        "of": 0.02790727860929738,
        "readme": 0.11162911443718952,
        "deltas": 0.02790727860929738,
        "commit": 0.02790727860929738,
        "mode": 0.02790727860929738,
        "init": 0.02790727860929738,
        "or": 0.02790727860929738,
        "small": 0.02790727860929738,
        "changes": 0.05581455721859476,
        "configurable": 0.02790727860929738,
        "prevent": 0.02790727860929738,
        "loops": 0.02790727860929738,
        "on": 0.05581455721859476,
        "only": 0.08372183582789214,
        "9": 0.02790727860929738,
        "configuration": 0.02790727860929738,
        "parse": 0.02790727860929738,
        "yml": 0.02790727860929738,
        "analyzers": 0.02790727860929738,
        "publish": 0.02790727860929738,
        "path": 0.02790727860929738,
        "exclusions": 0.02790727860929738,
        "watched_globs": 0.02790727860929738,
        "ci": 0.08372183582789214,
        "triggers": 0.02790727860929738,
        "per": 0.05581455721859476,
        "section": 0.02790727860929738,
        "off": 0.02790727860929738,
        "toggles": 0.02790727860929738,
        "and": 0.08372183582789214,
        "titles": 0.02790727860929738,
        "10": 0.02790727860929738,
        "github": 0.02790727860929738,
        "actions": 0.02790727860929738,
        "example": 0.02790727860929738,
        "workflow": 0.02790727860929738,
        "gitlab": 0.02790727860929738,
        "bitbucket": 0.02790727860929738,
        "pipelines": 0.02790727860929738,
        "samples": 0.02790727860929738,
        "labeling": 0.02790727860929738,
        "docs": 0.02790727860929738,
        "update": 0.02790727860929738,
        "behavior": 0.02790727860929738,
        "11": 0.02790727860929738,
        "security": 0.02790727860929738,
        "privacy": 0.02790727860929738,
        "models": 0.02790727860929738,
        "never": 0.02790727860929738,
        "exfiltrate": 0.02790727860929738,
        "respect": 0.02790727860929738,
        "gitignore": 0.02790727860929738,
        "exclude": 0.02790727860929738,
        "large": 0.02790727860929738,
        "binaries": 0.02790727860929738,
        "secrets": 0.02790727860929738,
        "optional": 0.02790727860929738,
        "simple": 0.02790727860929738,
        "secret": 0.02790727860929738,
        "scanner": 0.02790727860929738,
        "gate": 0.02790727860929738,
        "12": 0.02790727860929738,
        "multi": 0.02790727860929738,
        "language": 0.02790727860929738,
        "project": 0.02790727860929738,
        "types": 0.02790727860929738,
        "tier": 0.05581455721859476,
        "1": 0.02790727860929738,
        "python": 0.02790727860929738,
        "poetry": 0.02790727860929738,
        "setuptools": 0.02790727860929738,
        "java": 0.02790727860929738,
        "maven": 0.02790727860929738,
        "gradle": 0.02790727860929738,
        "spring": 0.02790727860929738,
        "boot": 0.02790727860929738,
        "node": 0.02790727860929738,
        "npm": 0.02790727860929738,
        "pnpm": 0.02790727860929738,
        "express": 0.02790727860929738,
        "2": 0.02790727860929738,
        "go": 0.02790727860929738,
        "rust": 0.02790727860929738,
        "ruby": 0.02790727860929738,
        "php": 0.02790727860929738,
        "framework": 0.02790727860929738,
        "aware": 0.02790727860929738,
        "quickstart": 0.02790727860929738,
        "commands": 0.02790727860929738,
        "system": 0.02790727860929738,
        "13": 0.02790727860929738,
        "quality": 0.02790727860929738,
        "gates": 0.02790727860929738,
        "evaluation": 0.02790727860929738,
        "command": 0.02790727860929738,
        "validation": 0.02790727860929738,
        "existence": 0.02790727860929738,
        "checks": 0.05581455721859476,
        "no": 0.02790727860929738,
        "hallucination": 0.02790727860929738,
        "reject": 0.02790727860929738,
        "facts": 0.02790727860929738,
        "not": 0.02790727860929738,
        "in": 0.02790727860929738,
        "signals": 0.02790727860929738,
        "rag": 0.05581455721859476,
        "scorecard": 0.02790727860929738,
        "buildability": 0.02790727860929738,
        "validity": 0.02790727860929738,
        "alignment": 0.02790727860929738,
        "14": 0.02790727860929738,
        "performance": 0.02790727860929738,
        "caching": 0.02790727860929738,
        "persist": 0.02790727860929738,
        "analyzer": 0.02790727860929738,
        "embeddings": 0.02790727860929738,
        "under": 0.02790727860929738,
        "incremental": 0.02790727860929738,
        "refresh": 0.02790727860929738,
        "15": 0.02790727860929738,
        "error": 0.02790727860929738,
        "handling": 0.02790727860929738,
        "ux": 0.02790727860929738,
        "fail": 0.02790727860929738,
        "stub": 0.02790727860929738,
        "generation": 0.02790727860929738,
        "when": 0.02790727860929738,
        "evidence": 0.02790727860929738
      },
      "text": "**[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy, code fences, line length **[MVP]** - [x] Auto ToC (\u2264 level 3) **[MVP]** - [x] Badges (build, coverage, license) with safe defaults **[NEXT]** - [x] Link validator (relative/absolute) **[NEXT]** - [x] Managed markers for idempotent patching (`<!-- docgen:begin:end -->`) **[MVP]** ## 8) Git Integration - [x] Diff detection (map changed files \u2192 impacted sections) **[MVP]** - [x] Branch + PR creation with summary of README deltas **[MVP]** - [x] Commit mode for init or small changes (configurable) **[NEXT]** - [ ] Prevent loops on README\u2011only changes **[MVP]** ## 9) Configuration - [x] Parse `.docgen.yml` (LLM, readme style, analyzers, publish) **[MVP]** - [x] Path exclusions & `watched_globs` for CI triggers **[MVP]** - [ ] Per-section on/off toggles and titles **[NEXT]** ## 10) CI Integration - [x] GitHub Actions example workflow **[MVP]** - [ ] GitLab CI and Bitbucket Pipelines samples **[NEXT]** - [x] Labeling (`docs:auto`) and PR update behavior **[NEXT]** ## 11) Security & Privacy - [x] Local-only models; never exfiltrate code **[MVP]** - [ ] Respect `.gitignore`; exclude large binaries/secrets **[MVP]** - [ ] Optional simple secret scanner gate **[NEXT]** ## 12) Multi\u2011Language & Project Types - [ ] Tier\u20111: Python (Poetry/Setuptools), Java (Maven/Gradle/Spring Boot), Node.js (npm/pnpm/Express/Next) **[MVP]** - [ ] Tier\u20112: Go, Rust, Ruby, PHP **[STRETCH]** - [x] Framework\u2011aware quickstart commands per build system **[MVP]** ## 13) Quality Gates & Evaluation - [ ] Command validation (existence checks) **[MVP]** - [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#2",
      "vector": {
        "no": 0.07018624063435965,
        "hallucination": 0.07018624063435965,
        "checks": 0.07018624063435965,
        "reject": 0.07018624063435965,
        "facts": 0.07018624063435965,
        "not": 0.07018624063435965,
        "in": 0.07018624063435965,
        "signals": 0.07018624063435965,
        "rag": 0.1403724812687193,
        "mvp": 0.42111744380615784,
        "x": 0.49130368444051753,
        "readme": 0.1403724812687193,
        "scorecard": 0.07018624063435965,
        "coverage": 0.07018624063435965,
        "buildability": 0.07018624063435965,
        "link": 0.07018624063435965,
        "validity": 0.07018624063435965,
        "diff": 0.07018624063435965,
        "alignment": 0.07018624063435965,
        "lint": 0.1403724812687193,
        "next": 0.21055872190307892,
        "14": 0.07018624063435965,
        "performance": 0.07018624063435965,
        "caching": 0.07018624063435965,
        "persist": 0.07018624063435965,
        "analyzer": 0.1403724812687193,
        "outputs": 0.07018624063435965,
        "embeddings": 0.07018624063435965,
        "under": 0.07018624063435965,
        "docgen": 0.07018624063435965,
        "incremental": 0.07018624063435965,
        "refresh": 0.07018624063435965,
        "changed": 0.07018624063435965,
        "files": 0.07018624063435965,
        "only": 0.07018624063435965,
        "15": 0.07018624063435965,
        "error": 0.07018624063435965,
        "handling": 0.07018624063435965,
        "ux": 0.07018624063435965,
        "fail": 0.07018624063435965,
        "safe": 0.07018624063435965,
        "stub": 0.07018624063435965,
        "generation": 0.07018624063435965,
        "when": 0.07018624063435965,
        "evidence": 0.07018624063435965,
        "is": 0.07018624063435965,
        "insufficient": 0.07018624063435965,
        "clear": 0.07018624063435965,
        "run": 0.07018624063435965,
        "logs": 0.07018624063435965,
        "pr": 0.07018624063435965,
        "body": 0.07018624063435965,
        "with": 0.07018624063435965,
        "rationale": 0.07018624063435965,
        "sections": 0.07018624063435965,
        "updated": 0.07018624063435965,
        "because": 0.07018624063435965,
        "helpful": 0.07018624063435965,
        "cli": 0.07018624063435965,
        "errors": 0.07018624063435965,
        "and": 0.1403724812687193,
        "verbose": 0.07018624063435965,
        "flag": 0.07018624063435965,
        "works": 0.07018624063435965,
        "pre": 0.07018624063435965,
        "post": 0.07018624063435965,
        "subcommand": 0.07018624063435965,
        "16": 0.07018624063435965,
        "extensibility": 0.07018624063435965,
        "abc": 0.07018624063435965,
        "plugin": 0.07018624063435965,
        "discovery": 0.07018624063435965,
        "template": 0.07018624063435965,
        "packs": 0.07018624063435965,
        "org": 0.07018624063435965,
        "style": 0.1403724812687193,
        "definition": 0.07018624063435965,
        "of": 0.07018624063435965,
        "done": 0.07018624063435965,
        "per": 0.07018624063435965,
        "section": 0.07018624063435965,
        "passing": 0.07018624063435965,
        "unit": 0.07018624063435965,
        "integration": 0.07018624063435965,
        "tests": 0.07018624063435965,
        "for": 0.07018624063435965,
        "core": 0.07018624063435965,
        "logic": 0.07018624063435965,
        "golden": 0.07018624063435965,
        "regression": 0.07018624063435965,
        "test": 0.07018624063435965,
        "s": 0.07018624063435965,
        "meets": 0.07018624063435965,
        "requirements": 0.07018624063435965
      },
      "text": "- [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence is insufficient **[MVP]** - [ ] Clear run logs + PR body with rationale (\u201csections updated because\u2026\u201d) **[MVP]** - [x] Helpful CLI errors and `--verbose` flag (works pre/post subcommand) **[MVP]** ## 16) Extensibility - [x] Analyzer ABC and plugin discovery **[MVP]** - [x] Template packs (org\u2011style) **[NEXT]** --- ### Definition of Done (per section) - [ ] Passing unit & integration tests for core logic - [ ] Golden README regression test(s) - [ ] Meets lint/style requirements",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_order.md#0",
      "vector": {
        "docgen": 0.23979625973207228,
        "development": 0.029974532466509034,
        "roadmap": 0.029974532466509034,
        "phase": 0.20982172726556325,
        "0": 0.029974532466509034,
        "bootstrap": 0.029974532466509034,
        "the": 0.029974532466509034,
        "skeleton": 0.05994906493301807,
        "1": 0.3596943895981084,
        "project": 0.029974532466509034,
        "cli": 0.05994906493301807,
        "config": 0.11989812986603614,
        "loader": 0.029974532466509034,
        "yml": 0.029974532466509034,
        "models": 0.029974532466509034,
        "covers": 0.47959251946414455,
        "commands": 0.029974532466509034,
        "scaffolding": 0.029974532466509034,
        "9": 0.05994906493301807,
        "parse": 0.029974532466509034,
        "16": 0.05994906493301807,
        "analyzer": 0.05994906493301807,
        "abc": 0.05994906493301807,
        "2": 0.23979625973207228,
        "plugin": 0.05994906493301807,
        "discovery": 0.05994906493301807,
        "init": 0.11989812986603614,
        "happy": 0.029974532466509034,
        "path": 0.05994906493301807,
        "single": 0.029974532466509034,
        "repo": 0.11989812986603614,
        "local": 0.11989812986603614,
        "scanner": 0.029974532466509034,
        "manifest": 0.05994906493301807,
        "roles": 0.029974532466509034,
        "hashing": 0.029974532466509034,
        "ignores": 0.05994906493301807,
        "walk": 0.029974532466509034,
        "fs": 0.029974532466509034,
        "cache": 0.029974532466509034,
        "tier": 0.029974532466509034,
        "analyzers": 0.0899235973995271,
        "python": 0.029974532466509034,
        "java": 0.029974532466509034,
        "node": 0.029974532466509034,
        "build": 0.05994906493301807,
        "dependency": 0.029974532466509034,
        "3": 0.0899235973995271,
        "language": 0.05994906493301807,
        "deps": 0.029974532466509034,
        "templates": 0.05994906493301807,
        "prompt": 0.05994906493301807,
        "builder": 0.029974532466509034,
        "section": 0.14987266233254518,
        "by": 0.029974532466509034,
        "guardrailed": 0.029974532466509034,
        "system": 0.029974532466509034,
        "5": 0.11989812986603614,
        "jinja2": 0.029974532466509034,
        "guardrails": 0.029974532466509034,
        "token": 0.029974532466509034,
        "budget": 0.029974532466509034,
        "4": 0.0899235973995271,
        "llm": 0.029974532466509034,
        "runner": 0.029974532466509034,
        "ollama": 0.05994906493301807,
        "adapter": 0.029974532466509034,
        "6": 0.0899235973995271,
        "post": 0.029974532466509034,
        "processor": 0.029974532466509034,
        "managed": 0.029974532466509034,
        "markers": 0.0899235973995271,
        "toc": 0.05994906493301807,
        "markdown": 0.029974532466509034,
        "lint": 0.05994906493301807,
        "7": 0.029974532466509034,
        "git": 0.05994906493301807,
        "publisher": 0.05994906493301807,
        "commit": 0.05994906493301807,
        "mode": 0.05994906493301807,
        "for": 0.05994906493301807,
        "only": 0.0899235973995271,
        "8": 0.0899235973995271,
        "end": 0.05994906493301807,
        "to": 0.029974532466509034,
        "milestone": 0.0899235973995271,
        "generates": 0.029974532466509034,
        "a": 0.0899235973995271,
        "clean": 0.029974532466509034,
        "readme": 0.05994906493301807,
        "with": 0.0899235973995271,
        "no": 0.0899235973995271,
        "docs": 0.05994906493301807,
        "update": 0.11989812986603614,
        "on": 0.029974532466509034,
        "change": 0.05994906493301807,
        "pr": 0.14987266233254518,
        "workflow": 0.029974532466509034,
        "diff": 0.05994906493301807,
        "detection": 0.05994906493301807,
        "mapping": 0.05994906493301807,
        "patching": 0.029974532466509034,
        "inside": 0.029974532466509034,
        "prevent": 0.029974532466509034,
        "loops": 0.029974532466509034,
        "branch": 0.05994906493301807,
        "delta": 0.029974532466509034,
        "summary": 0.029974532466509034,
        "10": 0.05994906493301807,
        "labeling": 0.029974532466509034,
        "later": 0.029974532466509034,
        "opens": 0.029974532466509034,
        "updating": 0.029974532466509034,
        "impacted": 0.029974532466509034,
        "sections": 0.029974532466509034,
        "minimal": 0.029974532466509034,
        "rag": 0.05994906493301807,
        "accuracy": 0.029974532466509034,
        "lite": 0.029974532466509034,
        "embed": 0.029974532466509034,
        "top": 0.029974532466509034,
        "n": 0.029974532466509034,
        "source": 0.029974532466509034,
        "headers": 0.029974532466509034,
        "scoped": 0.029974532466509034,
        "retrieval": 0.05994906493301807,
        "embedding": 0.029974532466509034,
        "index": 0.029974532466509034,
        "sources": 0.029974532466509034,
        "per": 0.029974532466509034,
        "hallucination": 0.05994906493301807,
        "command": 0.05994906493301807,
        "existence": 0.029974532466509034,
        "checks": 0.029974532466509034,
        "13": 0.029974532466509034,
        "validation": 0.029974532466509034,
        "outputs": 0.029974532466509034,
        "grounded": 0.029974532466509034,
        "in": 0.029974532466509034,
        "facts": 0.029974532466509034,
        "targeted": 0.029974532466509034,
        "context": 0.029974532466509034,
        "hardening": 0.029974532466509034,
        "dx": 0.029974532466509034,
        "error": 0.029974532466509034,
        "handling": 0.029974532466509034,
        "clear": 0.029974532466509034,
        "logs": 0.05994906493301807,
        "verbose": 0.029974532466509034,
        "fail": 0.05994906493301807,
        "safe": 0.05994906493301807,
        "stubs": 0.029974532466509034,
        "15": 0.029974532466509034,
        "ux": 0.029974532466509034,
        "security": 0.029974532466509034,
        "gitignore": 0.029974532466509034,
        "respect": 0.029974532466509034,
        "excludes": 0.05994906493301807,
        "enforcement": 0.029974532466509034,
        "11": 0.029974532466509034,
        "privacy": 0.029974532466509034,
        "ci": 0.029974532466509034,
        "integration": 0.029974532466509034,
        "polish": 0.029974532466509034,
        "github": 0.029974532466509034,
        "actions": 0.05994906493301807,
        "sample": 0.029974532466509034,
        "push": 0.029974532466509034,
        "trigger": 0.029974532466509034,
        "calling": 0.029974532466509034,
        "gh": 0.029974532466509034,
        "refinements": 0.029974532466509034,
        "watched": 0.029974532466509034,
        "globs": 0.029974532466509034,
        "style": 0.05994906493301807,
        "preset": 0.029974532466509034,
        "concise": 0.029974532466509034,
        "comprehensive": 0.029974532466509034,
        "watched_globs": 0.029974532466509034,
        "presets": 0.029974532466509034,
        "multi": 0.029974532466509034,
        "breadth": 0.029974532466509034,
        "framework": 0.029974532466509034,
        "smarts": 0.029974532466509034,
        "entrypoint": 0.029974532466509034,
        "main": 0.029974532466509034,
        "spring": 0.029974532466509034,
        "boot": 0.029974532466509034,
        "fastapi": 0.029974532466509034
      },
      "text": "# DocGen Development Roadmap ## Phase 0 \u2014 Bootstrap the skeleton 1. **Project skeleton + CLI (`docgen`) + config loader (`.docgen.yml`) + models** * Covers: 1 (commands scaffolding), 9 (parse config), 16 (Analyzer ABC) 2. **Analyzer plugin ABC & discovery** * Covers: 16 (plugin discovery) ## Phase 1 \u2014 \"Init\" happy-path (single repo, local) 1. **Repo scanner & manifest (roles, hashing, ignores)** * Covers: 2 (walk FS, manifest, cache, ignores) 2. **Tier-1 analyzers (Python, Java, Node) + build analyzers + dependency analyzers** * Covers: 3 (language/build/deps) 3. **Templates + prompt builder (section-by-section) + guardrailed system prompt** * Covers: 5 (Jinja2 templates, guardrails, token budget) 4. **Local LLM runner (Ollama adapter)** * Covers: 6 (Ollama) 5. **Post-processor: managed markers, ToC, markdown lint** * Covers: 7 (markers, ToC, lint) 6. **Git publisher: commit mode (for init only)** * Covers: 8 (commit mode), 1 (`docgen init` end-to-end) \u2705 **Milestone**: `docgen init` generates a clean README for a repo with no docs. ## Phase 2 \u2014 Update-on-change (PR workflow) 1. **Diff detection + change\u2192section mapping + patching inside markers** * Covers: 8 (diff mapping, prevent loops), 1 (`docgen update`) 2. **Git publisher: branch + PR with delta summary** * Covers: 8 (branch/PR), 10 (labeling later) \u2705 **Milestone**: `docgen update` opens a PR updating only impacted sections. ## Phase 3 \u2014 Minimal RAG & accuracy 1. **RAG Lite: embed README/docs/top N source headers; section-scoped retrieval** * Covers: 4 (local embedding, index sources, per-section retrieval) 2. **No-hallucination & command existence checks** * Covers: 13 (command validation, no-hallucination) \u2705 **Milestone**: outputs grounded in repo facts with targeted context. ## Phase 4 \u2014 Hardening & DX 1. **Error handling, clear logs, `--verbose`, fail-safe stubs** * Covers: 15 (fail-safe, logs, CLI UX) 2. **Security: .gitignore respect, path excludes, local-only enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI)",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/feature_order.md#1",
      "vector": {
        "enforcement": 0.04252432555625623,
        "covers": 0.4252432555625623,
        "11": 0.04252432555625623,
        "privacy": 0.04252432555625623,
        "excludes": 0.04252432555625623,
        "phase": 0.17009730222502492,
        "5": 0.12757297666876868,
        "ci": 0.12757297666876868,
        "integration": 0.04252432555625623,
        "config": 0.12757297666876868,
        "polish": 0.08504865111251246,
        "1": 0.25514595333753737,
        "github": 0.04252432555625623,
        "actions": 0.08504865111251246,
        "sample": 0.04252432555625623,
        "push": 0.04252432555625623,
        "pr": 0.17009730222502492,
        "trigger": 0.04252432555625623,
        "calling": 0.04252432555625623,
        "docgen": 0.12757297666876868,
        "update": 0.04252432555625623,
        "10": 0.08504865111251246,
        "gh": 0.04252432555625623,
        "2": 0.21262162778128116,
        "refinements": 0.04252432555625623,
        "watched": 0.04252432555625623,
        "globs": 0.04252432555625623,
        "style": 0.08504865111251246,
        "preset": 0.04252432555625623,
        "concise": 0.04252432555625623,
        "comprehensive": 0.04252432555625623,
        "9": 0.04252432555625623,
        "watched_globs": 0.04252432555625623,
        "presets": 0.04252432555625623,
        "6": 0.08504865111251246,
        "multi": 0.04252432555625623,
        "language": 0.08504865111251246,
        "breadth": 0.08504865111251246,
        "framework": 0.17009730222502492,
        "smarts": 0.04252432555625623,
        "entrypoint": 0.04252432555625623,
        "detection": 0.04252432555625623,
        "main": 0.04252432555625623,
        "spring": 0.04252432555625623,
        "boot": 0.04252432555625623,
        "fastapi": 0.08504865111251246,
        "aware": 0.08504865111251246,
        "quick": 0.04252432555625623,
        "start": 0.04252432555625623,
        "entrypoints": 0.04252432555625623,
        "12": 0.04252432555625623,
        "commands": 0.04252432555625623,
        "pattern": 0.08504865111251246,
        "analyzers": 0.08504865111251246,
        "docker": 0.04252432555625623,
        "k8s": 0.04252432555625623,
        "monorepo": 0.04252432555625623,
        "layout": 0.04252432555625623,
        "3": 0.12757297666876868,
        "7": 0.12757297666876868,
        "quality": 0.08504865111251246,
        "gates": 0.08504865111251246,
        "performance": 0.08504865111251246,
        "readme": 0.08504865111251246,
        "scorecard": 0.08504865111251246,
        "link": 0.08504865111251246,
        "validator": 0.08504865111251246,
        "badges": 0.08504865111251246,
        "13": 0.04252432555625623,
        "artifact": 0.04252432555625623,
        "embedding": 0.04252432555625623,
        "caching": 0.08504865111251246,
        "in": 0.04252432555625623,
        "incremental": 0.08504865111251246,
        "rag": 0.12757297666876868,
        "refresh": 0.08504865111251246,
        "14": 0.04252432555625623,
        "persist": 0.04252432555625623,
        "outputs": 0.04252432555625623,
        "8": 0.04252432555625623,
        "nice": 0.04252432555625623,
        "to": 0.12757297666876868,
        "have": 0.04252432555625623,
        "stretch": 0.04252432555625623,
        "dry": 0.08504865111251246,
        "run": 0.08504865111251246,
        "mode": 0.12757297666876868,
        "labeling": 0.08504865111251246,
        "updates": 0.08504865111251246,
        "commit": 0.08504865111251246,
        "policy": 0.04252432555625623,
        "tuning": 0.04252432555625623,
        "template": 0.12757297666876868,
        "overrides": 0.04252432555625623,
        "docs": 0.04252432555625623,
        "templates": 0.04252432555625623,
        "j2": 0.04252432555625623,
        "org": 0.04252432555625623,
        "packs": 0.08504865111251246,
        "override": 0.04252432555625623,
        "16": 0.04252432555625623,
        "service": 0.08504865111251246,
        "llama": 0.08504865111251246,
        "cpp": 0.08504865111251246,
        "adapter": 0.04252432555625623,
        "tree": 0.08504865111251246,
        "sitter": 0.08504865111251246,
        "extraction": 0.04252432555625623,
        "why": 0.04252432555625623,
        "this": 0.04252432555625623,
        "order": 0.04252432555625623,
        "fastest": 0.04252432555625623,
        "path": 0.04252432555625623,
        "value": 0.04252432555625623,
        "get": 0.04252432555625623,
        "init": 0.04252432555625623,
        "producing": 0.04252432555625623,
        "a": 0.04252432555625623,
        "solid": 0.04252432555625623,
        "before": 0.04252432555625623,
        "adding": 0.04252432555625623,
        "diffing": 0.04252432555625623,
        "contain": 0.04252432555625623,
        "risk": 0.04252432555625623,
        "early": 0.04252432555625623,
        "section": 0.04252432555625623,
        "markers": 0.04252432555625623,
        "lint": 0.04252432555625623,
        "and": 0.12757297666876868,
        "publishing": 0.04252432555625623,
        "ensure": 0.04252432555625623,
        "safe": 0.04252432555625623,
        "idempotent": 0.04252432555625623,
        "edits": 0.04252432555625623,
        "accuracy": 0.04252432555625623,
        "next": 0.04252432555625623,
        "add": 0.04252432555625623,
        "validation": 0.04252432555625623,
        "avoid": 0.04252432555625623,
        "hallucinations": 0.04252432555625623,
        "once": 0.04252432555625623,
        "the": 0.08504865111251246,
        "pipeline": 0.04252432555625623,
        "works": 0.04252432555625623,
        "scale": 0.04252432555625623,
        "later": 0.04252432555625623,
        "only": 0.04252432555625623,
        "after": 0.04252432555625623,
        "core": 0.04252432555625623,
        "loop": 0.04252432555625623,
        "is": 0.04252432555625623,
        "robust": 0.04252432555625623,
        "do": 0.04252432555625623,
        "we": 0.04252432555625623,
        "widen": 0.04252432555625623,
        "coverage": 0.04252432555625623,
        "last": 0.04252432555625623,
        "refine": 0.04252432555625623,
        "dev": 0.04252432555625623,
        "experience": 0.04252432555625623
      },
      "text": "enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI) + framework-aware Quick Start** * Covers: 2 (entrypoints), 12 (framework-aware commands) 2. **Pattern analyzers (Docker/K8s, CI config, monorepo layout)** * Covers: 3 (pattern analyzers) ## Phase 7 \u2014 Quality gates & performance 1. **README scorecard + link validator + badges** * Covers: 13 (scorecard), 7 (link validator), 7 (badges) 2. **Artifact & embedding caching in `.docgen/` + incremental RAG refresh** * Covers: 14 (persist outputs, incremental refresh) ## Phase 8 \u2014 \"Nice to have\" & stretch 1. **Dry-run mode, PR labeling/updates, commit/PR policy tuning** * Covers: 1 (dry-run), 10 (labeling/PR updates) 2. **Template overrides (`docs/templates/*.j2`) & org template packs** * Covers: 5 (override), 16 (template packs) 3. **Service mode (FastAPI), llama.cpp adapter, tree-sitter extraction** * Covers: 1 (service mode), 6 (llama.cpp), 3 (tree-sitter) ## Why this order * **Fastest path to value**: get `docgen init` producing a solid README before adding diffing/RAG. * **Contain risk early**: section markers, lint, and commit publishing ensure safe/idempotent edits. * **Accuracy next**: add RAG + validation to avoid hallucinations once the pipeline works. * **Scale breadth later**: only after the core loop is robust do we widen language/framework coverage. * **Polish last**: CI, caching, and quality gates refine dev experience and performance.",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/spec.md#0",
      "vector": {
        "intelligent": 0.04393747751637468,
        "readme": 0.17574991006549873,
        "generator": 0.04393747751637468,
        "architecture": 0.08787495503274936,
        "spec": 0.04393747751637468,
        "python": 0.08787495503274936,
        "local": 0.13181243254912403,
        "llm": 0.13181243254912403,
        "1": 0.08787495503274936,
        "purpose": 0.04393747751637468,
        "scope": 0.04393747751637468,
        "build": 0.17574991006549873,
        "a": 0.26362486509824806,
        "based": 0.04393747751637468,
        "system": 0.04393747751637468,
        "that": 0.04393747751637468,
        "analyzes": 0.04393747751637468,
        "git": 0.26362486509824806,
        "repository": 0.04393747751637468,
        "structure": 0.04393747751637468,
        "code": 0.04393747751637468,
        "dependencies": 0.04393747751637468,
        "then": 0.04393747751637468,
        "generates": 0.04393747751637468,
        "and": 0.2196873875818734,
        "maintains": 0.04393747751637468,
        "high": 0.08787495503274936,
        "quality": 0.04393747751637468,
        "md": 0.04393747751637468,
        "using": 0.04393747751637468,
        "it": 0.04393747751637468,
        "initializes": 0.04393747751637468,
        "repos": 0.04393747751637468,
        "with": 0.08787495503274936,
        "no": 0.04393747751637468,
        "docs": 0.17574991006549873,
        "keeps": 0.04393747751637468,
        "up": 0.04393747751637468,
        "to": 0.2196873875818734,
        "date": 0.04393747751637468,
        "on": 0.04393747751637468,
        "commits": 0.04393747751637468,
        "prs": 0.04393747751637468,
        "supports": 0.08787495503274936,
        "multiple": 0.04393747751637468,
        "languages": 0.04393747751637468,
        "project": 0.04393747751637468,
        "types": 0.04393747751637468,
        "via": 0.04393747751637468,
        "analyzers": 0.08787495503274936,
        "non": 0.04393747751637468,
        "goals": 0.04393747751637468,
        "for": 0.08787495503274936,
        "the": 0.04393747751637468,
        "poc": 0.04393747751637468,
        "multi": 0.04393747751637468,
        "repo": 0.2196873875818734,
        "orchestration": 0.04393747751637468,
        "full": 0.08787495503274936,
        "website": 0.04393747751637468,
        "api": 0.04393747751637468,
        "reference": 0.04393747751637468,
        "extraction": 0.04393747751637468,
        "beyond": 0.04393747751637468,
        "summaries": 0.04393747751637468,
        "cloud": 0.04393747751637468,
        "llms": 0.04393747751637468,
        "2": 0.08787495503274936,
        "level": 0.04393747751637468,
        "at": 0.04393747751637468,
        "glance": 0.04393747751637468,
        "events": 0.04393747751637468,
        "event": 0.04393747751637468,
        "sources": 0.04393747751637468,
        "cli": 0.04393747751637468,
        "commands": 0.04393747751637468,
        "hooks": 0.04393747751637468,
        "webhooks": 0.04393747751637468,
        "ci": 0.08787495503274936,
        "commit": 0.08787495503274936,
        "pr": 0.08787495503274936,
        "orchestr": 0.04393747751637468,
        "async": 0.04393747751637468,
        "task": 0.04393747751637468,
        "graph": 0.08787495503274936,
        "scanner": 0.08787495503274936,
        "doc": 0.04393747751637468,
        "store": 0.04393747751637468,
        "indexer": 0.08787495503274936,
        "language": 0.08787495503274936,
        "artifacts": 0.08787495503274936,
        "fs": 0.04393747751637468,
        "deps": 0.04393747751637468,
        "cache": 0.04393747751637468,
        "versions": 0.04393747751637468,
        "knowledge": 0.04393747751637468,
        "embeddings": 0.04393747751637468,
        "prompt": 0.04393747751637468,
        "builder": 0.04393747751637468,
        "templates": 0.04393747751637468,
        "rag": 0.04393747751637468,
        "runner": 0.04393747751637468,
        "llama": 0.04393747751637468,
        "cpp": 0.04393747751637468,
        "ollama": 0.04393747751637468,
        "post": 0.04393747751637468,
        "processor": 0.04393747751637468,
        "lint": 0.04393747751637468,
        "toc": 0.04393747751637468,
        "badges": 0.04393747751637468,
        "links": 0.04393747751637468,
        "publisher": 0.04393747751637468,
        "branch": 0.04393747751637468,
        "3": 0.13181243254912403,
        "components": 0.04393747751637468,
        "responsibilities": 0.04393747751637468,
        "orchestrator": 0.04393747751637468,
        "coordinates": 0.04393747751637468,
        "end": 0.08787495503274936,
        "pipelines": 0.04393747751637468,
        "init": 0.04393747751637468,
        "update": 0.08787495503274936,
        "regenerate": 0.08787495503274936,
        "computes": 0.04393747751637468,
        "change": 0.04393747751637468,
        "impact": 0.04393747751637468,
        "from": 0.04393747751637468,
        "diff": 0.04393747751637468,
        "decides": 0.04393747751637468,
        "whether": 0.04393747751637468,
        "or": 0.04393747751637468,
        "patch": 0.04393747751637468,
        "sections": 0.04393747751637468,
        "schedules": 0.04393747751637468,
        "tasks": 0.04393747751637468,
        "caches": 0.04393747751637468,
        "intermediate": 0.04393747751637468,
        "results": 0.04393747751637468,
        "emits": 0.04393747751637468,
        "structured": 0.04393747751637468,
        "logs": 0.04393747751637468,
        "info": 0.04393747751637468,
        "by": 0.04393747751637468,
        "default": 0.04393747751637468,
        "debug": 0.04393747751637468,
        "verbose": 0.04393747751637468,
        "respects": 0.04393747751637468,
        "docgen": 0.13181243254912403,
        "yml": 0.04393747751637468,
        "watched_globs": 0.04393747751637468,
        "skip": 0.04393747751637468,
        "unrelated": 0.04393747751637468,
        "diffs": 0.04393747751637468,
        "substitutes": 0.04393747751637468,
        "fail": 0.04393747751637468,
        "safe": 0.04393747751637468,
        "stubs": 0.04393747751637468,
        "when": 0.04393747751637468,
        "generation": 0.04393747751637468,
        "fails": 0.04393747751637468,
        "dry": 0.08787495503274936,
        "run": 0.13181243254912403,
        "previews": 0.04393747751637468,
        "records": 0.04393747751637468,
        "scorecards": 0.04393747751637468,
        "each": 0.04393747751637468,
        "under": 0.04393747751637468,
        "walks": 0.04393747751637468,
        "builds": 0.04393747751637468,
        "normalized": 0.04393747751637468,
        "manifest": 0.04393747751637468,
        "files": 0.08787495503274936,
        "sizes": 0.04393747751637468,
        "tags": 0.04393747751637468,
        "path": 0.04393747751637468,
        "roles": 0.04393747751637468,
        "src": 0.04393747751637468,
        "test": 0.08787495503274936,
        "examples": 0.04393747751637468,
        "dependency": 0.04393747751637468,
        "manifests": 0.04393747751637468,
        "e": 0.04393747751637468,
        "g": 0.04393747751637468,
        "pom": 0.04393747751637468,
        "xml": 0.04393747751637468,
        "gradle": 0.04393747751637468,
        "package": 0.04393747751637468,
        "json": 0.13181243254912403,
        "requirements": 0.04393747751637468,
        "txt": 0.04393747751637468,
        "pyproject": 0.04393747751637468,
        "toml": 0.08787495503274936,
        "go": 0.04393747751637468,
        "mod": 0.04393747751637468,
        "cargo": 0.04393747751637468,
        "gemfile": 0.04393747751637468,
        "composer": 0.04393747751637468,
        "entrypoints": 0.04393747751637468,
        "clis": 0.04393747751637468,
        "services": 0.04393747751637468,
        "coverage": 0.04393747751637468,
        "if": 0.04393747751637468,
        "available": 0.04393747751637468,
        "stores": 0.04393747751637468,
        "per": 0.04393747751637468,
        "index": 0.04393747751637468,
        "speed": 0.04393747751637468,
        "future": 0.04393747751637468
      },
      "text": "# Intelligent README Generator \u2014 Architecture & Spec (Python, Local LLM) ## 1) Purpose & Scope Build a Python-based system that **analyzes a Git repository** (structure, code, dependencies), then **generates and maintains a high-quality README.md** using a **local LLM**. It initializes repos with no docs and **keeps docs up to date** on commits/PRs. Supports **multiple languages/project types** via analyzers. Non-goals (for the POC): multi-repo orchestration, full website docs, API reference extraction (beyond README summaries), cloud LLMs. --- ## 2) High-Level Architecture (at a glance) ``` \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 Git Events \u2502 Event Sources \u2502 CLI commands, Git hooks, Webhooks/CI (commit/PR) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Orchestr \u2502 (Async task graph) \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Repo Scanner\u2502 \u2502 Analyzers \u2502 \u2502 Doc Store \u2502 \u2502 + Indexer \u2502 \u2502 (Language, \u2502 \u2502 (Artifacts, \u2502 \u2502 (Git, FS) \u2502 \u2502 Build, Deps) \u2502 \u2502 Cache, \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 Versions) \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 Knowledge Graph \u2502 \u2502 \u2502 \u2502 & Embeddings \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Prompt Builder \u2502 (Templates + RAG) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Local LLM Runner \u2502 (llama.cpp/Ollama) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 Post-Processor \u2502 (lint, ToC, badges, links) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Git Publisher \u2502 (branch/PR/commit) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 ``` --- ## 3) Components & Responsibilities ### 3.1 Orchestrator * Coordinates end-to-end pipelines (init, update, regenerate). * Computes *change impact* from Git diff; decides whether to regenerate full README or patch sections. * Schedules tasks and caches intermediate results. * Emits structured logs (info by default, debug with `--verbose`), respects `.docgen.yml` `ci.watched_globs` to skip unrelated diffs, and substitutes fail-safe stubs when generation fails. * Supports dry-run previews (`docgen update --dry-run`) and records scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#1",
      "vector": {
        "scorecards": 0.03721614637823934,
        "for": 0.18608073189119673,
        "each": 0.07443229275647868,
        "run": 0.07443229275647868,
        "under": 0.07443229275647868,
        "docgen": 0.11164843913471803,
        "3": 0.22329687826943606,
        "2": 0.03721614637823934,
        "repo": 0.18608073189119673,
        "scanner": 0.03721614637823934,
        "indexer": 0.03721614637823934,
        "walks": 0.03721614637823934,
        "builds": 0.03721614637823934,
        "normalized": 0.03721614637823934,
        "manifest": 0.03721614637823934,
        "files": 0.11164843913471803,
        "sizes": 0.03721614637823934,
        "language": 0.07443229275647868,
        "tags": 0.03721614637823934,
        "path": 0.03721614637823934,
        "roles": 0.03721614637823934,
        "src": 0.03721614637823934,
        "test": 0.11164843913471803,
        "docs": 0.11164843913471803,
        "examples": 0.03721614637823934,
        "build": 0.14886458551295736,
        "dependency": 0.07443229275647868,
        "manifests": 0.03721614637823934,
        "e": 0.11164843913471803,
        "g": 0.11164843913471803,
        "pom": 0.03721614637823934,
        "xml": 0.03721614637823934,
        "gradle": 0.07443229275647868,
        "package": 0.03721614637823934,
        "json": 0.11164843913471803,
        "requirements": 0.03721614637823934,
        "txt": 0.03721614637823934,
        "pyproject": 0.03721614637823934,
        "toml": 0.07443229275647868,
        "go": 0.11164843913471803,
        "mod": 0.03721614637823934,
        "cargo": 0.07443229275647868,
        "gemfile": 0.03721614637823934,
        "composer": 0.03721614637823934,
        "entrypoints": 0.11164843913471803,
        "clis": 0.03721614637823934,
        "services": 0.11164843913471803,
        "coverage": 0.03721614637823934,
        "artifacts": 0.03721614637823934,
        "if": 0.03721614637823934,
        "available": 0.03721614637823934,
        "stores": 0.03721614637823934,
        "a": 0.03721614637823934,
        "per": 0.07443229275647868,
        "index": 0.03721614637823934,
        "to": 0.11164843913471803,
        "speed": 0.03721614637823934,
        "future": 0.03721614637823934,
        "runs": 0.03721614637823934,
        "analyzers": 0.22329687826943606,
        "plugin": 0.03721614637823934,
        "based": 0.03721614637823934,
        "detect": 0.03721614637823934,
        "idioms": 0.03721614637823934,
        "frameworks": 0.03721614637823934,
        "spring": 0.07443229275647868,
        "boot": 0.07443229275647868,
        "fastapi": 0.07443229275647868,
        "node": 0.07443229275647868,
        "express": 0.03721614637823934,
        "react": 0.03721614637823934,
        "next": 0.03721614637823934,
        "js": 0.03721614637823934,
        "http": 0.14886458551295736,
        "rust": 0.03721614637823934,
        "bin": 0.03721614637823934,
        "lib": 0.03721614637823934,
        "maven": 0.03721614637823934,
        "setuptools": 0.03721614637823934,
        "poetry": 0.03721614637823934,
        "npm": 0.03721614637823934,
        "pnpm": 0.03721614637823934,
        "yarn": 0.03721614637823934,
        "extract": 0.03721614637823934,
        "top": 0.07443229275647868,
        "level": 0.03721614637823934,
        "libs": 0.03721614637823934,
        "notable": 0.03721614637823934,
        "transitive": 0.03721614637823934,
        "categories": 0.03721614637823934,
        "entrypoint": 0.03721614637823934,
        "infer": 0.03721614637823934,
        "commands": 0.03721614637823934,
        "django": 0.03721614637823934,
        "scripts": 0.07443229275647868,
        "pattern": 0.03721614637823934,
        "monorepo": 0.03721614637823934,
        "layout": 0.03721614637823934,
        "ci": 0.03721614637823934,
        "cd": 0.03721614637823934,
        "containerization": 0.03721614637823934,
        "k8s": 0.03721614637823934,
        "heuristics": 0.03721614637823934,
        "structure": 0.03721614637823934,
        "analyzer": 0.07443229275647868,
        "module": 0.03721614637823934,
        "topology": 0.03721614637823934,
        "detected": 0.11164843913471803,
        "entities": 0.07443229275647868,
        "dtos": 0.03721614637823934,
        "api": 0.11164843913471803,
        "endpoint": 0.07443229275647868,
        "sequences": 0.03721614637823934,
        "service": 0.03721614637823934,
        "interactions": 0.03721614637823934,
        "returns": 0.03721614637823934,
        "signals": 0.07443229275647868,
        "key": 0.07443229275647868,
        "facts": 0.03721614637823934,
        "the": 0.11164843913471803,
        "knowledge": 0.07443229275647868,
        "graph": 0.11164843913471803,
        "4": 0.03721614637823934,
        "embeddings": 0.07443229275647868,
        "rag": 0.03721614637823934,
        "of": 0.07443229275647868,
        "modules": 0.03721614637823934,
        "packages": 0.03721614637823934,
        "configs": 0.03721614637823934,
        "tests": 0.03721614637823934,
        "lightweight": 0.03721614637823934,
        "embedding": 0.03721614637823934,
        "store": 0.03721614637823934,
        "faiss": 0.03721614637823934,
        "in": 0.03721614637823934,
        "memory": 0.03721614637823934,
        "chunks": 0.03721614637823934,
        "code": 0.03721614637823934,
        "comments": 0.03721614637823934,
        "readme": 0.07443229275647868,
        "fragments": 0.03721614637823934,
        "changelog": 0.03721614637823934,
        "issues": 0.03721614637823934,
        "optional": 0.03721614637823934,
        "commit": 0.03721614637823934,
        "messages": 0.07443229275647868,
        "provides": 0.03721614637823934,
        "context": 0.07443229275647868,
        "retrieval": 0.03721614637823934,
        "prompt": 0.07443229275647868,
        "building": 0.03721614637823934,
        "k": 0.03721614637823934,
        "by": 0.03721614637823934,
        "section": 0.11164843913471803,
        "and": 0.2605130246476754,
        "persists": 0.03721614637823934,
        "refreshing": 0.03721614637823934,
        "only": 0.03721614637823934,
        "whose": 0.03721614637823934,
        "hashes": 0.03721614637823934,
        "changed": 0.03721614637823934,
        "5": 0.03721614637823934,
        "builder": 0.03721614637823934,
        "aware": 0.03721614637823934,
        "jinja2": 0.03721614637823934,
        "templates": 0.03721614637823934,
        "with": 0.11164843913471803,
        "guardrails": 0.03721614637823934,
        "project": 0.03721614637823934,
        "intro": 0.03721614637823934,
        "features": 0.03721614637823934,
        "architecture": 0.03721614637823934,
        "overview": 0.03721614637823934,
        "quick": 0.07443229275647868,
        "start": 0.07443229275647868,
        "configuration": 0.03721614637823934,
        "deployment": 0.03721614637823934,
        "troubleshooting": 0.03721614637823934,
        "faq": 0.03721614637823934,
        "roadmap": 0.03721614637823934,
        "contribution": 0.03721614637823934,
        "license": 0.03721614637823934,
        "badges": 0.03721614637823934,
        "dynamically": 0.03721614637823934,
        "injects": 0.07443229275647868,
        "retrieved": 0.03721614637823934,
        "produces": 0.03721614637823934,
        "llm": 0.07443229275647868,
        "ready": 0.03721614637823934,
        "structured": 0.07443229275647868,
        "prompts": 0.03721614637823934,
        "system": 0.03721614637823934,
        "user": 0.03721614637823934,
        "token": 0.03721614637823934,
        "budgets": 0.03721614637823934,
        "honours": 0.03721614637823934,
        "style": 0.07443229275647868,
        "presets": 0.03721614637823934,
        "concise": 0.03721614637823934,
        "trims": 0.03721614637823934,
        "list": 0.03721614637823934,
        "heavy": 0.03721614637823934,
        "sections": 0.03721614637823934,
        "comprehensive": 0.03721614637823934,
        "keeps": 0.03721614637823934,
        "full": 0.03721614637823934,
        "detail": 0.03721614637823934,
        "infrastructure": 0.03721614637823934,
        "patterns": 0.03721614637823934,
        "into": 0.03721614637823934,
        "guidance": 0.03721614637823934,
        "uvicorn": 0.03721614637823934,
        "docker": 0.11164843913471803,
        "compose": 0.03721614637823934,
        "up": 0.03721614637823934,
        "generates": 0.03721614637823934,
        "mermaid": 0.03721614637823934,
        "sequence": 0.03721614637823934,
        "diagrams": 0.03721614637823934,
        "highlighting": 0.03721614637823934,
        "request": 0.03721614637823934,
        "flow": 0.03721614637823934,
        "across": 0.03721614637823934,
        "when": 0.03721614637823934,
        "endpoints": 0.03721614637823934,
        "are": 0.03721614637823934,
        "6": 0.03721614637823934,
        "local": 0.03721614637823934,
        "runner": 0.11164843913471803,
        "pluggable": 0.03721614637823934,
        "runtime": 0.03721614637823934,
        "that": 0.03721614637823934,
        "prefers": 0.03721614637823934,
        "model": 0.07443229275647868,
        "host": 0.03721614637823934,
        "localhost": 0.03721614637823934,
        "12434": 0.03721614637823934,
        "engines": 0.07443229275647868,
        "v1": 0.07443229275647868,
        "container": 0.03721614637823934,
        "internal": 0.03721614637823934,
        "environment": 0.03721614637823934,
        "overrides": 0.03721614637823934,
        "an": 0.03721614637823934,
        "ollama": 0.03721614637823934,
        "cli": 0.03721614637823934,
        "fallback": 0.03721614637823934,
        "defaults": 0.03721614637823934,
        "ai": 0.03721614637823934,
        "smollm2": 0.03721614637823934,
        "360m": 0.03721614637823934,
        "q4_k_m": 0.03721614637823934,
        "but": 0.03721614637823934,
        "respects": 0.03721614637823934,
        "yml": 0.03721614637823934,
        "openai": 0.03721614637823934,
        "compatible": 0.03721614637823934,
        "env": 0.03721614637823934,
        "vars": 0.03721614637823934,
        "alternate": 0.03721614637823934,
        "weights": 0.03721614637823934,
        "keys": 0.03721614637823934,
        "supports": 0.03721614637823934,
        "function": 0.03721614637823934,
        "calling": 0.03721614637823934,
        "outputs": 0.03721614637823934
      },
      "text": "scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future runs. ### 3.3 Analyzers (Plugin-based) * **Language analyzers** (detect idioms, entrypoints, frameworks: Spring Boot, FastAPI, Node/Express, React, Next.js, Go HTTP, Rust bin/lib). * **Build analyzers** (Maven/Gradle, setuptools/Poetry, npm/pnpm/yarn, Go, Cargo). * **Dependency analyzers** (extract top-level libs & notable transitive categories). * **Entrypoint analyzers** (infer run commands for FastAPI, Django, Spring Boot, Node scripts). * **Pattern analyzers** (monorepo layout, CI/CD, containerization/K8s heuristics). * **Structure analyzer** (module topology, detected entities/DTOs, API endpoint sequences, service interactions). * Each analyzer returns **Signals** (key facts) to the knowledge graph. ### 3.4 Knowledge Graph & Embeddings (RAG) * Graph of Repo entities: modules, packages, services, scripts, configs, tests, docs. * Lightweight embedding store (e.g., `faiss`/in-memory) of **chunks**: code comments, README fragments, `docs/`, `CHANGELOG`, issues (optional), commit messages. * Provides **context retrieval** for prompt building (top-k by section) and persists embeddings under `.docgen/`, refreshing only the files whose hashes changed. ### 3.5 Prompt Builder * **Section-aware** Jinja2 templates with **guardrails**: * Project intro, key features, architecture overview, quick start, configuration, build/test, deployment, troubleshooting, FAQ, roadmap, contribution, license, badges. * Dynamically injects repo signals and retrieved context per section. * Produces **LLM-ready structured prompts** (system + user messages) with token budgets and honours `readme.style` presets (`concise` trims list-heavy sections, `comprehensive` keeps full detail). * Injects detected entrypoints and infrastructure patterns into Quick Start guidance (e.g., `uvicorn ...`, `docker compose up`). * Generates Mermaid sequence diagrams highlighting request flow across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#2",
      "vector": {
        "across": 0.028060676663315687,
        "services": 0.028060676663315687,
        "when": 0.08418202998994706,
        "api": 0.056121353326631374,
        "endpoints": 0.028060676663315687,
        "are": 0.056121353326631374,
        "detected": 0.056121353326631374,
        "3": 0.11224270665326275,
        "6": 0.028060676663315687,
        "local": 0.056121353326631374,
        "llm": 0.028060676663315687,
        "runner": 0.08418202998994706,
        "pluggable": 0.028060676663315687,
        "runtime": 0.028060676663315687,
        "that": 0.028060676663315687,
        "prefers": 0.028060676663315687,
        "the": 0.028060676663315687,
        "docker": 0.056121353326631374,
        "model": 0.08418202998994706,
        "http": 0.08418202998994706,
        "endpoint": 0.028060676663315687,
        "host": 0.028060676663315687,
        "localhost": 0.028060676663315687,
        "12434": 0.028060676663315687,
        "engines": 0.056121353326631374,
        "v1": 0.056121353326631374,
        "container": 0.028060676663315687,
        "internal": 0.08418202998994706,
        "with": 0.08418202998994706,
        "environment": 0.028060676663315687,
        "overrides": 0.028060676663315687,
        "and": 0.36478879662310393,
        "an": 0.028060676663315687,
        "ollama": 0.028060676663315687,
        "cli": 0.056121353326631374,
        "fallback": 0.028060676663315687,
        "defaults": 0.056121353326631374,
        "to": 0.08418202998994706,
        "ai": 0.028060676663315687,
        "smollm2": 0.028060676663315687,
        "360m": 0.028060676663315687,
        "q4_k_m": 0.028060676663315687,
        "but": 0.028060676663315687,
        "respects": 0.028060676663315687,
        "docgen": 0.11224270665326275,
        "yml": 0.028060676663315687,
        "openai": 0.028060676663315687,
        "compatible": 0.028060676663315687,
        "env": 0.028060676663315687,
        "vars": 0.028060676663315687,
        "for": 0.08418202998994706,
        "alternate": 0.028060676663315687,
        "weights": 0.028060676663315687,
        "keys": 0.028060676663315687,
        "supports": 0.056121353326631374,
        "function": 0.028060676663315687,
        "calling": 0.028060676663315687,
        "style": 0.056121353326631374,
        "structured": 0.028060676663315687,
        "outputs": 0.056121353326631374,
        "available": 0.028060676663315687,
        "streaming": 0.028060676663315687,
        "decode": 0.028060676663315687,
        "stop": 0.028060676663315687,
        "tokens": 0.028060676663315687,
        "section": 0.056121353326631374,
        "by": 0.056121353326631374,
        "generation": 0.028060676663315687,
        "stay": 0.056121353326631374,
        "within": 0.028060676663315687,
        "context": 0.028060676663315687,
        "limits": 0.028060676663315687,
        "validates": 0.056121353326631374,
        "configuration": 0.028060676663315687,
        "ensure": 0.028060676663315687,
        "runners": 0.028060676663315687,
        "loopback": 0.028060676663315687,
        "hosts": 0.028060676663315687,
        "only": 0.056121353326631374,
        "7": 0.028060676663315687,
        "post": 0.056121353326631374,
        "processor": 0.028060676663315687,
        "lints": 0.028060676663315687,
        "markdown": 0.028060676663315687,
        "builds": 0.028060676663315687,
        "toc": 0.028060676663315687,
        "adds": 0.056121353326631374,
        "shields": 0.028060676663315687,
        "badges": 0.056121353326631374,
        "normalizes": 0.028060676663315687,
        "heading": 0.028060676663315687,
        "hierarchy": 0.028060676663315687,
        "enforces": 0.028060676663315687,
        "guide": 0.028060676663315687,
        "readme": 0.08418202998994706,
        "contract": 0.028060676663315687,
        "required": 0.056121353326631374,
        "sections": 0.11224270665326275,
        "links": 0.028060676663315687,
        "relative": 0.028060676663315687,
        "absolute": 0.028060676663315687,
        "code": 0.028060676663315687,
        "block": 0.028060676663315687,
        "languages": 0.028060676663315687,
        "line": 0.028060676663315687,
        "length": 0.028060676663315687,
        "computes": 0.028060676663315687,
        "diff": 0.028060676663315687,
        "aware": 0.028060676663315687,
        "updates": 0.056121353326631374,
        "modifies": 0.028060676663315687,
        "impacted": 0.028060676663315687,
        "changes": 0.056121353326631374,
        "persists": 0.028060676663315687,
        "a": 0.08418202998994706,
        "scorecard": 0.056121353326631374,
        "json": 0.056121353326631374,
        "capturing": 0.028060676663315687,
        "coverage": 0.056121353326631374,
        "quick": 0.028060676663315687,
        "start": 0.028060676663315687,
        "health": 0.028060676663315687,
        "link": 0.056121353326631374,
        "results": 0.028060676663315687,
        "build": 0.056121353326631374,
        "license": 0.028060676663315687,
        "safe": 0.028060676663315687,
        "reports": 0.028060676663315687,
        "warnings": 0.028060676663315687,
        "during": 0.028060676663315687,
        "processing": 0.028060676663315687,
        "8": 0.028060676663315687,
        "doc": 0.028060676663315687,
        "store": 0.028060676663315687,
        "artifacts": 0.028060676663315687,
        "versions": 0.028060676663315687,
        "keeps": 0.028060676663315687,
        "generated": 0.028060676663315687,
        "drafts": 0.028060676663315687,
        "logs": 0.028060676663315687,
        "prompts": 0.028060676663315687,
        "inputs": 0.028060676663315687,
        "diffs": 0.028060676663315687,
        "under": 0.028060676663315687,
        "per": 0.028060676663315687,
        "repo": 0.028060676663315687,
        "rollback": 0.028060676663315687,
        "regression": 0.028060676663315687,
        "testing": 0.028060676663315687,
        "via": 0.028060676663315687,
        "golden": 0.028060676663315687,
        "readmes": 0.028060676663315687,
        "stores": 0.028060676663315687,
        "embedding": 0.028060676663315687,
        "cache": 0.028060676663315687,
        "embeddings": 0.028060676663315687,
        "scorecards": 0.028060676663315687,
        "so": 0.028060676663315687,
        "subsequent": 0.028060676663315687,
        "runs": 0.028060676663315687,
        "incremental": 0.028060676663315687,
        "9": 0.028060676663315687,
        "git": 0.028060676663315687,
        "publisher": 0.028060676663315687,
        "creates": 0.028060676663315687,
        "branch": 0.028060676663315687,
        "e": 0.056121353326631374,
        "g": 0.056121353326631374,
        "update": 0.028060676663315687,
        "yyyymmdd": 0.028060676663315687,
        "pr": 0.056121353326631374,
        "body": 0.028060676663315687,
        "explains": 0.028060676663315687,
        "what": 0.028060676663315687,
        "were": 0.028060676663315687,
        "updated": 0.028060676663315687,
        "can": 0.028060676663315687,
        "commit": 0.028060676663315687,
        "directly": 0.028060676663315687,
        "configurable": 0.028060676663315687,
        "on": 0.028060676663315687,
        "init": 0.028060676663315687,
        "empty": 0.028060676663315687,
        "repos": 0.028060676663315687,
        "applies": 0.028060676663315687,
        "labels": 0.028060676663315687,
        "docs": 0.056121353326631374,
        "auto": 0.028060676663315687,
        "existing": 0.028060676663315687,
        "prs": 0.028060676663315687,
        "configured": 0.028060676663315687,
        "4": 0.028060676663315687,
        "data": 0.028060676663315687,
        "python": 0.056121353326631374,
        "pydantic": 0.028060676663315687,
        "dataclasses": 0.056121353326631374,
        "from": 0.056121353326631374,
        "import": 0.056121353326631374,
        "dataclass": 0.2244854133065255,
        "typing": 0.028060676663315687,
        "list": 0.11224270665326275,
        "dict": 0.14030338331657843,
        "optional": 0.056121353326631374,
        "class": 0.1964247366432098,
        "filemeta": 0.056121353326631374,
        "path": 0.028060676663315687,
        "str": 0.5892742099296294,
        "size": 0.028060676663315687,
        "int": 0.028060676663315687,
        "language": 0.028060676663315687,
        "role": 0.028060676663315687,
        "src": 0.028060676663315687,
        "test": 0.056121353326631374,
        "config": 0.028060676663315687,
        "script": 0.028060676663315687,
        "infra": 0.028060676663315687,
        "other": 0.028060676663315687,
        "hash": 0.028060676663315687,
        "repomanifest": 0.056121353326631374,
        "root": 0.028060676663315687,
        "files": 0.028060676663315687,
        "detectors": 0.028060676663315687,
        "build_system": 0.028060676663315687,
        "maven": 0.028060676663315687,
        "framework": 0.056121353326631374,
        "spring": 0.028060676663315687,
        "boot": 0.028060676663315687,
        "dependency_files": 0.028060676663315687,
        "pom": 0.028060676663315687,
        "xml": 0.028060676663315687,
        "requirements": 0.028060676663315687,
        "txt": 0.028060676663315687,
        "signal": 0.056121353326631374,
        "kind": 0.028060676663315687,
        "service": 0.028060676663315687,
        "db": 0.028060676663315687,
        "queue": 0.028060676663315687,
        "dep": 0.028060676663315687,
        "entrypoint": 0.028060676663315687,
        "name": 0.028060676663315687,
        "detail": 0.028060676663315687,
        "analysisresult": 0.028060676663315687,
        "manifest": 0.028060676663315687,
        "signals": 0.028060676663315687,
        "embedding_index_path": 0.028060676663315687,
        "sectionspec": 0.028060676663315687,
        "key": 0.028060676663315687,
        "intro": 0.028060676663315687,
        "features": 0.028060676663315687,
        "arch": 0.028060676663315687,
        "quickstart": 0.028060676663315687,
        "bool": 0.028060676663315687,
        "sources": 0.028060676663315687,
        "preferred": 0.028060676663315687,
        "retrieval": 0.028060676663315687,
        "tags": 0.028060676663315687,
        "template_name": 0.028060676663315687,
        "readmedraft": 0.028060676663315687,
        "full_markdown": 0.028060676663315687,
        "updateplan": 0.028060676663315687,
        "strategy": 0.028060676663315687
      },
      "text": "across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs when available. * Streaming decode with stop tokens; **section-by-section** generation to stay within context limits. * Validates configuration to ensure runners stay local (loopback/`*.internal` hosts only). ### 3.7 Post-Processor * Lints Markdown, builds ToC, adds shields/badges, normalizes heading hierarchy. * Enforces internal style guide and **README contract** (required sections). * Validates links (relative/absolute), code block languages, and line length. * Computes **diff-aware updates**: only modifies sections impacted by changes. * Persists a README scorecard (`.docgen/scorecard.json`) capturing coverage, quick start health, and link results. * Adds build/coverage/license badges with safe defaults and reports link warnings during post-processing. ### 3.8 Doc Store (Artifacts & Versions) * Keeps generated drafts, logs, prompts, inputs/outputs, and diffs under `.docgen/` per repo. * Supports rollback and regression testing via \u201cgolden\u201d READMEs. * Stores embedding cache (`embeddings.json`) and scorecards so subsequent runs are incremental. ### 3.9 Git Publisher * Creates a branch (e.g., `docgen/readme-update-YYYYMMDD`) and a PR. * PR body explains detected changes and what sections were updated. * Can commit directly (configurable) on init for empty repos. * Applies labels (e.g., `docs:auto`) and updates existing PRs when configured. --- ## 4) Data Model (Python `pydantic`/`dataclasses`) ```python from dataclasses import dataclass from typing import List, Dict, Optional @dataclass class FileMeta: path: str size: int language: Optional[str] role: str # src|test|docs|config|build|script|infra|other hash: str @dataclass class RepoManifest: root: str files: List[FileMeta] detectors: Dict[str, str] # {\"build_system\": \"maven\", \"framework\":\"spring-boot\", ...} dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str #",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#3",
      "vector": {
        "dependency_files": 0.03280893574623933,
        "dict": 0.13123574298495733,
        "str": 0.5577519076860686,
        "pom": 0.098426807238718,
        "xml": 0.098426807238718,
        "requirements": 0.06561787149247866,
        "txt": 0.06561787149247866,
        "dataclass": 0.16404467873119666,
        "class": 0.16404467873119666,
        "signal": 0.06561787149247866,
        "kind": 0.03280893574623933,
        "framework": 0.03280893574623933,
        "service": 0.03280893574623933,
        "cli": 0.03280893574623933,
        "db": 0.03280893574623933,
        "queue": 0.03280893574623933,
        "dep": 0.03280893574623933,
        "entrypoint": 0.03280893574623933,
        "test": 0.06561787149247866,
        "name": 0.03280893574623933,
        "detail": 0.03280893574623933,
        "analysisresult": 0.03280893574623933,
        "manifest": 0.06561787149247866,
        "repomanifest": 0.03280893574623933,
        "signals": 0.06561787149247866,
        "list": 0.098426807238718,
        "embedding_index_path": 0.03280893574623933,
        "sectionspec": 0.03280893574623933,
        "key": 0.03280893574623933,
        "intro": 0.06561787149247866,
        "features": 0.098426807238718,
        "arch": 0.03280893574623933,
        "quickstart": 0.06561787149247866,
        "required": 0.03280893574623933,
        "bool": 0.03280893574623933,
        "sources": 0.03280893574623933,
        "preferred": 0.03280893574623933,
        "retrieval": 0.06561787149247866,
        "tags": 0.03280893574623933,
        "template_name": 0.03280893574623933,
        "readmedraft": 0.03280893574623933,
        "sections": 0.13123574298495733,
        "full_markdown": 0.03280893574623933,
        "updateplan": 0.06561787149247866,
        "strategy": 0.03280893574623933,
        "full": 0.03280893574623933,
        "patch": 0.06561787149247866,
        "changed_sections": 0.03280893574623933,
        "reasons": 0.03280893574623933,
        "section": 0.06561787149247866,
        "why": 0.03280893574623933,
        "5": 0.098426807238718,
        "configuration": 0.06561787149247866,
        "docgen": 0.196853614477436,
        "yml": 0.06561787149247866,
        "at": 0.03280893574623933,
        "repo": 0.06561787149247866,
        "root": 0.06561787149247866,
        "yaml": 0.03280893574623933,
        "llm": 0.03280893574623933,
        "runner": 0.03280893574623933,
        "ollama": 0.03280893574623933,
        "or": 0.06561787149247866,
        "llama": 0.03280893574623933,
        "cpp": 0.03280893574623933,
        "model": 0.03280893574623933,
        "llama3": 0.03280893574623933,
        "8b": 0.03280893574623933,
        "instruct": 0.03280893574623933,
        "example": 0.03280893574623933,
        "local": 0.03280893574623933,
        "only": 0.098426807238718,
        "max_tokens": 0.03280893574623933,
        "2048": 0.03280893574623933,
        "temperature": 0.03280893574623933,
        "0": 0.03280893574623933,
        "2": 0.13123574298495733,
        "readme": 0.196853614477436,
        "style": 0.03280893574623933,
        "concise": 0.03280893574623933,
        "comprehensive": 0.03280893574623933,
        "template_pack": 0.06561787149247866,
        "enterprise": 0.03280893574623933,
        "optional": 0.03280893574623933,
        "bundle": 0.03280893574623933,
        "shipped": 0.03280893574623933,
        "with": 0.06561787149247866,
        "required_sections": 0.03280893574623933,
        "architecture": 0.06561787149247866,
        "build_and_test": 0.03280893574623933,
        "deployment": 0.06561787149247866,
        "troubleshooting": 0.03280893574623933,
        "faq": 0.03280893574623933,
        "license": 0.03280893574623933,
        "publish": 0.06561787149247866,
        "mode": 0.03280893574623933,
        "pr": 0.13123574298495733,
        "commit": 0.098426807238718,
        "dry": 0.03280893574623933,
        "run": 0.03280893574623933,
        "branch_prefix": 0.03280893574623933,
        "labels": 0.03280893574623933,
        "docs": 0.06561787149247866,
        "auto": 0.03280893574623933,
        "update_existing": 0.03280893574623933,
        "true": 0.03280893574623933,
        "refresh": 0.03280893574623933,
        "an": 0.03280893574623933,
        "existing": 0.03280893574623933,
        "instead": 0.03280893574623933,
        "of": 0.03280893574623933,
        "opening": 0.03280893574623933,
        "a": 0.06561787149247866,
        "new": 0.03280893574623933,
        "one": 0.03280893574623933,
        "analyzers": 0.03280893574623933,
        "enabled": 0.03280893574623933,
        "language": 0.03280893574623933,
        "build": 0.196853614477436,
        "dependencies": 0.03280893574623933,
        "patterns": 0.03280893574623933,
        "exclude_paths": 0.03280893574623933,
        "git": 0.06561787149247866,
        "node_modules": 0.03280893574623933,
        "dist": 0.03280893574623933,
        "ci": 0.098426807238718,
        "update": 0.06561787149247866,
        "if": 0.098426807238718,
        "these": 0.03280893574623933,
        "paths": 0.03280893574623933,
        "change": 0.03280893574623933,
        "watched_globs": 0.06561787149247866,
        "src": 0.06561787149247866,
        "app": 0.03280893574623933,
        "cmd": 0.03280893574623933,
        "gradle": 0.06561787149247866,
        "package": 0.03280893574623933,
        "json": 0.03280893574623933,
        "pyproject": 0.03280893574623933,
        "toml": 0.03280893574623933,
        "dockerfile": 0.06561787149247866,
        "no": 0.06561787149247866,
        "templates_dir": 0.03280893574623933,
        "is": 0.03280893574623933,
        "provided": 0.03280893574623933,
        "automatically": 0.03280893574623933,
        "picks": 0.03280893574623933,
        "up": 0.03280893574623933,
        "templates": 0.06561787149247866,
        "bundles": 0.03280893574623933,
        "in": 0.06561787149247866,
        "the": 0.03280893574623933,
        "repository": 0.03280893574623933,
        "and": 0.03280893574623933,
        "supports": 0.03280893574623933,
        "built": 0.03280893574623933,
        "template": 0.03280893574623933,
        "packs": 0.03280893574623933,
        "via": 0.06561787149247866,
        "6": 0.098426807238718,
        "workflows": 0.03280893574623933,
        "1": 0.098426807238718,
        "initialization": 0.03280893574623933,
        "without": 0.03280893574623933,
        "scan": 0.03280893574623933,
        "analyze": 0.03280893574623933,
        "embeddings": 0.03280893574623933,
        "prompt": 0.03280893574623933,
        "default": 0.03280893574623933,
        "include": 0.03280893574623933,
        "getting": 0.03280893574623933,
        "started": 0.03280893574623933,
        "suggestions": 0.03280893574623933,
        "3": 0.06561787149247866,
        "generate": 0.06561787149247866,
        "sequentially": 0.03280893574623933,
        "streaming": 0.03280893574623933,
        "4": 0.06561787149247866,
        "post": 0.03280893574623933,
        "process": 0.03280893574623933,
        "toc": 0.03280893574623933,
        "badges": 0.03280893574623933,
        "status": 0.03280893574623933,
        "placeholder": 0.03280893574623933,
        "lint": 0.03280893574623933,
        "direct": 0.03280893574623933,
        "md": 0.03280893574623933,
        "artifacts": 0.03280893574623933,
        "on": 0.03280893574623933,
        "detect": 0.03280893574623933,
        "changes": 0.03280893574623933,
        "diff": 0.03280893574623933,
        "map": 0.03280893574623933,
        "files": 0.03280893574623933,
        "to": 0.098426807238718,
        "using": 0.03280893574623933,
        "rules": 0.03280893574623933,
        "matrix": 0.03280893574623933,
        "quick": 0.03280893574623933,
        "start": 0.03280893574623933,
        "k8s": 0.03280893574623933,
        "entrypoints": 0.03280893574623933,
        "decide": 0.03280893574623933,
        "impacted": 0.03280893574623933,
        "regenerate": 0.03280893574623933,
        "those": 0.03280893574623933,
        "skip": 0.03280893574623933,
        "changed": 0.03280893574623933,
        "file": 0.03280893574623933,
        "matches": 0.03280893574623933,
        "allows": 0.03280893574623933,
        "avoid": 0.03280893574623933,
        "unnecessary": 0.03280893574623933,
        "runs": 0.03280893574623933,
        "rag": 0.03280893574623933,
        "fetch": 0.03280893574623933,
        "top": 0.03280893574623933,
        "k": 0.03280893574623933,
        "chunks": 0.03280893574623933,
        "relevant": 0.03280893574623933,
        "each": 0.03280893574623933
      },
      "text": "dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str # \"full\"|\"patch\" changed_sections: List[str] reasons: Dict[str, str] # section->why ``` --- ## 5) Configuration (`.docgen.yml` at repo root) ```yaml llm: runner: \"ollama\" # or \"llama.cpp\" model: \"llama3:8b-instruct\" # example; local only max_tokens: 2048 temperature: 0.2 readme: style: \"concise\" # or \"comprehensive\" template_pack: \"enterprise\" # optional bundle shipped with docgen required_sections: - intro - features - architecture - quickstart - configuration - build_and_test - deployment - troubleshooting - faq - license publish: mode: \"pr\" # \"commit\" | \"pr\" | \"dry-run\" branch_prefix: \"docgen/\" labels: - \"docs:auto\" update_existing: true # refresh an existing PR instead of opening a new one analyzers: enabled: - language - build - dependencies - patterns exclude_paths: - \".git/\" - \"node_modules/\" - \"dist/\" ci: # Only update README if these paths change watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"pyproject.toml\" - \"Dockerfile\" ``` > If no `readme.templates_dir` is provided, docgen automatically picks up `docs/templates/` bundles in the repository root and supports built-in template packs via `readme.template_pack`. --- ## 6) Workflows ### 6.1 Initialization (Repo without README) 1. **Scan & Analyze** \u2192 Manifest + Signals + Embeddings. 2. **Prompt Build** with default templates, include \u201cgetting started\u201d suggestions. 3. **Generate Sections** sequentially (streaming). 4. **Post-process** \u2192 ToC, badges (build status placeholder), lint. 5. **Publish**: direct commit `README.md` + `.docgen/` artifacts. ### 6.2 Update on Commit/PR 1. **Detect changes** via Git diff; map files to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate**",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#4",
      "vector": {
        "to": 0.146943671674129,
        "sections": 0.11020775375559676,
        "using": 0.03673591791853225,
        "a": 0.11020775375559676,
        "rules": 0.03673591791853225,
        "matrix": 0.03673591791853225,
        "pom": 0.03673591791853225,
        "xml": 0.03673591791853225,
        "build": 0.18367958959266126,
        "gradle": 0.0734718358370645,
        "test": 0.0734718358370645,
        "quick": 0.0734718358370645,
        "start": 0.0734718358370645,
        "dockerfile": 0.03673591791853225,
        "k8s": 0.0734718358370645,
        "deployment": 0.0734718358370645,
        "src": 0.03673591791853225,
        "entrypoints": 0.0734718358370645,
        "architecture": 0.0734718358370645,
        "features": 0.0734718358370645,
        "2": 0.0734718358370645,
        "decide": 0.03673591791853225,
        "updateplan": 0.03673591791853225,
        "patch": 0.03673591791853225,
        "impacted": 0.03673591791853225,
        "regenerate": 0.11020775375559676,
        "only": 0.0734718358370645,
        "those": 0.03673591791853225,
        "3": 0.0734718358370645,
        "skip": 0.03673591791853225,
        "if": 0.146943671674129,
        "no": 0.0734718358370645,
        "changed": 0.03673591791853225,
        "file": 0.0734718358370645,
        "matches": 0.03673591791853225,
        "docgen": 0.146943671674129,
        "yml": 0.03673591791853225,
        "ci": 0.0734718358370645,
        "watched_globs": 0.03673591791853225,
        "allows": 0.03673591791853225,
        "avoid": 0.03673591791853225,
        "unnecessary": 0.03673591791853225,
        "runs": 0.03673591791853225,
        "4": 0.03673591791853225,
        "rag": 0.11020775375559676,
        "retrieval": 0.03673591791853225,
        "fetch": 0.03673591791853225,
        "top": 0.0734718358370645,
        "k": 0.0734718358370645,
        "chunks": 0.0734718358370645,
        "relevant": 0.03673591791853225,
        "each": 0.0734718358370645,
        "section": 0.18367958959266126,
        "5": 0.0734718358370645,
        "generate": 0.03673591791853225,
        "post": 0.0734718358370645,
        "process": 0.03673591791853225,
        "open": 0.03673591791853225,
        "pr": 0.03673591791853225,
        "with": 0.03673591791853225,
        "summary": 0.03673591791853225,
        "of": 0.03673591791853225,
        "deltas": 0.03673591791853225,
        "6": 0.0734718358370645,
        "dry": 0.0734718358370645,
        "run": 0.0734718358370645,
        "support": 0.0734718358370645,
        "update": 0.03673591791853225,
        "computes": 0.03673591791853225,
        "diffs": 0.03673591791853225,
        "and": 0.0734718358370645,
        "scorecards": 0.03673591791853225,
        "without": 0.03673591791853225,
        "writing": 0.03673591791853225,
        "or": 0.11020775375559676,
        "publishing": 0.03673591791853225,
        "manual": 0.03673591791853225,
        "full": 0.03673591791853225,
        "intro": 0.0734718358370645,
        "arch": 0.03673591791853225,
        "7": 0.03673591791853225,
        "contract": 0.03673591791853225,
        "readme": 0.0734718358370645,
        "what": 0.03673591791853225,
        "why": 0.03673591791853225,
        "who": 0.03673591791853225,
        "it": 0.03673591791853225,
        "s": 0.03673591791853225,
        "for": 0.0734718358370645,
        "key": 0.03673591791853225,
        "bullets": 0.03673591791853225,
        "grounded": 0.03673591791853225,
        "in": 0.03673591791853225,
        "real": 0.03673591791853225,
        "repo": 0.0734718358370645,
        "signals": 0.0734718358370645,
        "overview": 0.03673591791853225,
        "diagram": 0.03673591791853225,
        "ascii": 0.03673591791853225,
        "components": 0.03673591791853225,
        "minimal": 0.03673591791853225,
        "commands": 0.146943671674129,
        "per": 0.0734718358370645,
        "system": 0.0734718358370645,
        "configuration": 0.0734718358370645,
        "env": 0.03673591791853225,
        "vars": 0.03673591791853225,
        "files": 0.03673591791853225,
        "examples": 0.03673591791853225,
        "coverage": 0.03673591791853225,
        "hint": 0.03673591791853225,
        "container": 0.03673591791853225,
        "instructions": 0.03673591791853225,
        "detected": 0.11020775375559676,
        "troubleshooting": 0.03673591791853225,
        "common": 0.03673591791853225,
        "failures": 0.03673591791853225,
        "faq": 0.03673591791853225,
        "10": 0.0734718358370645,
        "concise": 0.03673591791853225,
        "q": 0.03673591791853225,
        "contributing": 0.0734718358370645,
        "md": 0.03673591791853225,
        "absent": 0.03673591791853225,
        "license": 0.03673591791853225,
        "templated": 0.03673591791853225,
        "must": 0.03673591791853225,
        "be": 0.0734718358370645,
        "independently": 0.03673591791853225,
        "regenerable": 0.03673591791853225,
        "self": 0.03673591791853225,
        "contained": 0.03673591791853225,
        "8": 0.03673591791853225,
        "prompting": 0.03673591791853225,
        "strategy": 0.03673591791853225,
        "local": 0.0734718358370645,
        "llm": 0.03673591791853225,
        "message": 0.0734718358370645,
        "fixed": 0.03673591791853225,
        "guardrails": 0.03673591791853225,
        "you": 0.03673591791853225,
        "are": 0.03673591791853225,
        "senior": 0.03673591791853225,
        "dev": 0.03673591791853225,
        "doc": 0.03673591791853225,
        "writer": 0.03673591791853225,
        "precise": 0.03673591791853225,
        "cite": 0.03673591791853225,
        "facts": 0.03673591791853225,
        "speculation": 0.03673591791853225,
        "never": 0.03673591791853225,
        "invent": 0.03673591791853225,
        "prefer": 0.03673591791853225,
        "by": 0.03673591791853225,
        "analyzers": 0.0734718358370645,
        "user": 0.03673591791853225,
        "objective": 0.03673591791853225,
        "constraints": 0.03673591791853225,
        "tone": 0.03673591791853225,
        "length": 0.03673591791853225,
        "inject": 0.03673591791853225,
        "provide": 0.03673591791853225,
        "style": 0.03673591791853225,
        "tokens": 0.03673591791853225,
        "headings": 0.03673591791853225,
        "code": 0.0734718358370645,
        "blocks": 0.03673591791853225,
        "tables": 0.03673591791853225,
        "filters": 0.03673591791853225,
        "refuse": 0.03673591791853225,
        "insufficient": 0.03673591791853225,
        "evidence": 0.03673591791853225,
        "fall": 0.03673591791853225,
        "back": 0.03673591791853225,
        "template": 0.03673591791853225,
        "stubs": 0.0734718358370645,
        "9": 0.03673591791853225,
        "language": 0.0734718358370645,
        "project": 0.03673591791853225,
        "poc": 0.0734718358370645,
        "targets": 0.03673591791853225,
        "tier": 0.0734718358370645,
        "1": 0.03673591791853225,
        "python": 0.03673591791853225,
        "poetry": 0.03673591791853225,
        "setuptools": 0.03673591791853225,
        "java": 0.03673591791853225,
        "maven": 0.03673591791853225,
        "spring": 0.0734718358370645,
        "boot": 0.03673591791853225,
        "node": 0.03673591791853225,
        "js": 0.03673591791853225,
        "npm": 0.03673591791853225,
        "pnpm": 0.03673591791853225,
        "express": 0.03673591791853225,
        "next": 0.03673591791853225,
        "soon": 0.03673591791853225,
        "go": 0.03673591791853225,
        "modules": 0.03673591791853225,
        "rust": 0.03673591791853225,
        "cargo": 0.03673591791853225,
        "ruby": 0.03673591791853225,
        "bundler": 0.03673591791853225,
        "php": 0.03673591791853225,
        "composer": 0.03673591791853225,
        "detection": 0.03673591791853225,
        "via": 0.03673591791853225,
        "heuristics": 0.03673591791853225,
        "optional": 0.03673591791853225,
        "tree": 0.03673591791853225,
        "sitter": 0.03673591791853225,
        "function": 0.03673591791853225,
        "class": 0.03673591791853225,
        "extraction": 0.03673591791853225,
        "pluggable": 0.03673591791853225,
        "entry": 0.03673591791853225,
        "points": 0.03673591791853225,
        "main": 0.03673591791853225,
        "springbootapplication": 0.03673591791853225,
        "fastapi": 0.03673591791853225,
        "app": 0.03673591791853225,
        "bin": 0.03673591791853225,
        "cmd": 0.03673591791853225,
        "interfaces": 0.03673591791853225,
        "skeleton": 0.03673591791853225,
        "__init__": 0.03673591791853225,
        "py": 0.5143028508594515,
        "cli": 0.0734718358370645,
        "click": 0.03673591791853225,
        "typer": 0.03673591791853225,
        "failsafe": 0.03673591791853225,
        "fail": 0.03673591791853225,
        "safe": 0.03673591791853225,
        "logging": 0.0734718358370645,
        "helpers": 0.03673591791853225,
        "orchestrator": 0.03673591791853225,
        "repo_scanner": 0.03673591791853225,
        "base": 0.03673591791853225,
        "analyzer": 0.03673591791853225,
        "abc": 0.03673591791853225,
        "dependencies": 0.03673591791853225,
        "patterns": 0.03673591791853225,
        "embedder": 0.03673591791853225,
        "embedding": 0.03673591791853225,
        "model": 0.03673591791853225,
        "store": 0.03673591791853225
      },
      "text": "to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate** \u2192 **Post-process** \u2192 **Open PR** with summary of deltas. 6. Dry-run support: `docgen update --dry-run` computes diffs and scorecards without writing or publishing. ### 6.3 Regenerate (Manual) * `docgen regenerate --full` or `--sections intro,arch`. --- ## 7) Section Contract (README) * **Intro**: what, why, who it\u2019s for * **Key Features**: bullets grounded in real repo signals * **Architecture**: overview diagram (ASCII) + components * **Quick Start**: minimal commands (per build system) * **Configuration**: env vars, files, examples * **Build & Test**: commands, coverage hint * **Deployment**: container/K8s instructions if detected * **Troubleshooting**: common failures * **FAQ**: 5\u201310 concise Q\\&A * **Contributing** (if `CONTRIBUTING.md` absent) * **License** (detected or templated) > Each section must be independently regenerable and self-contained. --- ## 8) Prompting Strategy (Local LLM) * **System message (fixed guardrails)**: * \u201cYou are a senior dev doc writer. Be precise. Cite repo facts only. No speculation.\u201d * \u201cNever invent commands. Prefer commands detected by analyzers.\u201d * **User message per section**: * Section objective + constraints (tone, length). * Inject **Signals** + **Top-k chunks** (RAG). * Provide **style tokens** (headings, code blocks, tables). * **Post-filters**: refuse if insufficient evidence; fall back to template stubs. --- ## 9) Language & Project Support (POC targets) * **Tier-1 (POC)**: Python (Poetry/Setuptools), Java (Maven/Gradle, Spring Boot), Node.js (npm/pnpm, Express/Next). * **Tier-2 (soon)**: Go (modules), Rust (Cargo), Ruby (Bundler), PHP (Composer). * Detection via: * File heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#5",
      "vector": {
        "heuristics": 0.028665182485640765,
        "optional": 0.0859955474569223,
        "tree": 0.028665182485640765,
        "sitter": 0.028665182485640765,
        "for": 0.11466072994256306,
        "function": 0.028665182485640765,
        "class": 0.05733036497128153,
        "extraction": 0.028665182485640765,
        "pluggable": 0.028665182485640765,
        "entry": 0.028665182485640765,
        "points": 0.028665182485640765,
        "main": 0.05733036497128153,
        "spring": 0.028665182485640765,
        "springbootapplication": 0.028665182485640765,
        "fastapi": 0.05733036497128153,
        "app": 0.14332591242820383,
        "bin": 0.028665182485640765,
        "cmd": 0.05733036497128153,
        "10": 0.028665182485640765,
        "interfaces": 0.028665182485640765,
        "code": 0.05733036497128153,
        "skeleton": 0.028665182485640765,
        "docgen": 0.0859955474569223,
        "__init__": 0.028665182485640765,
        "py": 0.7166295621410191,
        "cli": 0.0859955474569223,
        "click": 0.028665182485640765,
        "typer": 0.05733036497128153,
        "failsafe": 0.028665182485640765,
        "fail": 0.028665182485640765,
        "safe": 0.028665182485640765,
        "readme": 0.0859955474569223,
        "stubs": 0.028665182485640765,
        "logging": 0.05733036497128153,
        "configuration": 0.028665182485640765,
        "helpers": 0.028665182485640765,
        "orchestrator": 0.028665182485640765,
        "repo_scanner": 0.028665182485640765,
        "analyzers": 0.028665182485640765,
        "base": 0.028665182485640765,
        "analyzer": 0.0859955474569223,
        "abc": 0.14332591242820383,
        "language": 0.028665182485640765,
        "build": 0.14332591242820383,
        "dependencies": 0.028665182485640765,
        "entrypoints": 0.028665182485640765,
        "patterns": 0.028665182485640765,
        "rag": 0.028665182485640765,
        "embedder": 0.028665182485640765,
        "local": 0.05733036497128153,
        "embedding": 0.028665182485640765,
        "model": 0.028665182485640765,
        "store": 0.028665182485640765,
        "prompting": 0.028665182485640765,
        "builder": 0.028665182485640765,
        "jinja2": 0.028665182485640765,
        "templates": 0.05733036497128153,
        "token": 0.028665182485640765,
        "mgmt": 0.028665182485640765,
        "constants": 0.028665182485640765,
        "j2": 0.028665182485640765,
        "per": 0.028665182485640765,
        "section": 0.028665182485640765,
        "llm": 0.028665182485640765,
        "runner": 0.028665182485640765,
        "adapter": 0.028665182485640765,
        "ollama": 0.028665182485640765,
        "llama": 0.028665182485640765,
        "cpp": 0.028665182485640765,
        "postproc": 0.028665182485640765,
        "lint": 0.028665182485640765,
        "links": 0.05733036497128153,
        "markers": 0.0859955474569223,
        "toc": 0.05733036497128153,
        "git": 0.05733036497128153,
        "diff": 0.028665182485640765,
        "publisher": 0.028665182485640765,
        "config": 0.028665182485640765,
        "models": 0.05733036497128153,
        "python": 0.0859955474569223,
        "from": 0.05733036497128153,
        "import": 0.05733036497128153,
        "abstractmethod": 0.0859955474569223,
        "repomanifest": 0.0859955474569223,
        "signal": 0.05733036497128153,
        "def": 0.14332591242820383,
        "supports": 0.028665182485640765,
        "self": 0.05733036497128153,
        "manifest": 0.05733036497128153,
        "bool": 0.0859955474569223,
        "analyze": 0.05733036497128153,
        "list": 0.028665182485640765,
        "command": 0.0859955474569223,
        "init": 0.028665182485640765,
        "path": 0.0859955474569223,
        "str": 0.14332591242820383,
        "publish": 0.0859955474569223,
        "true": 0.028665182485640765,
        "update": 0.0859955474569223,
        "event": 0.028665182485640765,
        "commit": 0.05733036497128153,
        "diff_base": 0.028665182485640765,
        "origin": 0.028665182485640765,
        "regenerate": 0.028665182485640765,
        "sections": 0.11466072994256306,
        "full": 0.028665182485640765,
        "false": 0.028665182485640765,
        "service": 0.028665182485640765,
        "mode": 0.028665182485640765,
        "post": 0.1719910949138446,
        "generate": 0.028665182485640765,
        "arch": 0.028665182485640765,
        "quickstart": 0.0859955474569223,
        "get": 0.028665182485640765,
        "status": 0.028665182485640765,
        "run_id": 0.028665182485640765,
        "11": 0.028665182485640765,
        "change": 0.028665182485640765,
        "impact": 0.028665182485640765,
        "matrix": 0.028665182485640765,
        "examples": 0.028665182485640765,
        "changed": 0.05733036497128153,
        "pattern": 0.028665182485640765,
        "to": 0.0859955474569223,
        "rebuild": 0.028665182485640765,
        "notes": 0.028665182485640765,
        "pom": 0.028665182485640765,
        "xml": 0.028665182485640765,
        "gradle": 0.028665182485640765,
        "_and": 0.05733036497128153,
        "_test": 0.05733036497128153,
        "recompute": 0.028665182485640765,
        "commands": 0.028665182485640765,
        "requirements": 0.028665182485640765,
        "txt": 0.028665182485640765,
        "pyproject": 0.028665182485640765,
        "toml": 0.028665182485640765,
        "install": 0.028665182485640765,
        "steps": 0.028665182485640765,
        "dockerfile": 0.028665182485640765,
        "k8s": 0.028665182485640765,
        "deployment": 0.028665182485640765,
        "container": 0.028665182485640765,
        "changes": 0.028665182485640765,
        "src": 0.028665182485640765,
        "features": 0.028665182485640765,
        "architecture": 0.0859955474569223,
        "if": 0.028665182485640765,
        "entrypoint": 0.028665182485640765,
        "intro": 0.028665182485640765,
        "too": 0.028665182485640765,
        "docs": 0.028665182485640765,
        "all": 0.028665182485640765,
        "patch": 0.028665182485640765,
        "prefer": 0.028665182485640765,
        "doc": 0.028665182485640765,
        "driven": 0.028665182485640765,
        "md": 0.028665182485640765,
        "none": 0.028665182485640765,
        "unless": 0.028665182485640765,
        "empty": 0.028665182485640765,
        "prevent": 0.028665182485640765,
        "loops": 0.028665182485640765,
        "12": 0.028665182485640765,
        "processing": 0.028665182485640765,
        "rules": 0.028665182485640765,
        "headings": 0.028665182485640765,
        "start": 0.028665182485640765,
        "at": 0.028665182485640765,
        "title": 0.028665182485640765,
        "then": 0.028665182485640765,
        "add": 0.028665182485640765,
        "auto": 0.028665182485640765,
        "level": 0.028665182485640765,
        "3": 0.028665182485640765,
        "validate": 0.028665182485640765,
        "blocks": 0.028665182485640765,
        "bash": 0.028665182485640765,
        "convert": 0.028665182485640765,
        "absolute": 0.028665182485640765,
        "github": 0.028665182485640765,
        "relative": 0.028665182485640765,
        "where": 0.028665182485640765,
        "possible": 0.028665182485640765,
        "ensure": 0.028665182485640765,
        "idempotency": 0.028665182485640765,
        "only": 0.028665182485640765,
        "edit": 0.028665182485640765,
        "between": 0.028665182485640765,
        "managed": 0.028665182485640765,
        "begin": 0.028665182485640765,
        "end": 0.028665182485640765,
        "13": 0.028665182485640765,
        "ci": 0.028665182485640765,
        "integration": 0.028665182485640765,
        "pre": 0.028665182485640765,
        "forbid": 0.028665182485640765,
        "direct": 0.028665182485640765,
        "edits": 0.028665182485640765,
        "outside": 0.028665182485640765,
        "merge": 0.028665182485640765,
        "checkout": 0.028665182485640765,
        "remind": 0.028665182485640765
      },
      "text": "heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py prompting/ builder.py # Jinja2 templates, token mgmt constants.py templates/ # *.j2 per section llm/ runner.py # adapter for ollama/llama.cpp postproc/ lint.py links.py markers.py toc.py git/ diff.py publisher.py config.py models.py ``` **Analyzer ABC** ```python from abc import ABC, abstractmethod from .models import RepoManifest, Signal class Analyzer(ABC): @abstractmethod def supports(self, manifest: RepoManifest) -> bool: ... @abstractmethod def analyze(self, manifest: RepoManifest) -> list[Signal]: ... ``` **CLI (Typer)** ```python @app.command() def init(path: str = \".\", publish: bool = True): ... @app.command() def update(path: str = \".\", event: str = \"commit\", diff_base: str = \"origin/main\"): ... @app.command() def regenerate(sections: str = \"\", full: bool = False): ... ``` **FastAPI (optional service mode)** * `POST /analyze` * `POST /generate?sections=arch,quickstart` * `POST /publish` * `GET /status/{run_id}` --- ## 11) Change Impact Matrix (examples) | Changed Path Pattern | Sections to Rebuild | Notes | | ------------------------------------ | ---------------------------- | --------------------------------------- | | `pom.xml`, `build.gradle*` | build\\_and\\_test, quickstart | Recompute build commands | | `requirements.txt`, `pyproject.toml` | build\\_and\\_test, quickstart | Update install steps | | `Dockerfile`, `k8s/**` | deployment | Publish container changes | | `src/**`, `app/**`, `cmd/**` | features, architecture | If entrypoint changed, update intro too | | `docs/**` | all (patch) | Prefer doc-driven | | `README.md` | none (unless empty) | Prevent loops | --- ## 12) Post-Processing Rules * Headings start at `#` for title then `##` for sections. * Add **auto ToC** (<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#6",
      "vector": {
        "level": 0.04267895997763199,
        "3": 0.12803687993289598,
        "validate": 0.04267895997763199,
        "code": 0.04267895997763199,
        "blocks": 0.04267895997763199,
        "bash": 0.04267895997763199,
        "python": 0.08535791995526398,
        "convert": 0.04267895997763199,
        "absolute": 0.04267895997763199,
        "github": 0.12803687993289598,
        "links": 0.04267895997763199,
        "to": 0.08535791995526398,
        "relative": 0.04267895997763199,
        "where": 0.04267895997763199,
        "possible": 0.08535791995526398,
        "ensure": 0.04267895997763199,
        "idempotency": 0.04267895997763199,
        "only": 0.12803687993289598,
        "edit": 0.04267895997763199,
        "between": 0.04267895997763199,
        "managed": 0.08535791995526398,
        "markers": 0.12803687993289598,
        "docgen": 0.21339479988815996,
        "begin": 0.04267895997763199,
        "architecture": 0.21339479988815996,
        "end": 0.04267895997763199,
        "13": 0.04267895997763199,
        "git": 0.08535791995526398,
        "ci": 0.08535791995526398,
        "integration": 0.04267895997763199,
        "local": 0.12803687993289598,
        "pre": 0.04267895997763199,
        "commit": 0.08535791995526398,
        "forbid": 0.04267895997763199,
        "direct": 0.04267895997763199,
        "readme": 0.12803687993289598,
        "edits": 0.04267895997763199,
        "outside": 0.04267895997763199,
        "optional": 0.12803687993289598,
        "post": 0.12803687993289598,
        "merge": 0.04267895997763199,
        "checkout": 0.08535791995526398,
        "remind": 0.04267895997763199,
        "run": 0.04267895997763199,
        "update": 0.12803687993289598,
        "gitlab": 0.04267895997763199,
        "bitbucket": 0.04267895997763199,
        "on": 0.04267895997763199,
        "push": 0.04267895997763199,
        "pr": 0.25607375986579195,
        "1": 0.12803687993289598,
        "repo": 0.08535791995526398,
        "2": 0.17071583991052797,
        "event": 0.04267895997763199,
        "diff": 0.08535791995526398,
        "base": 0.04267895997763199,
        "base_sha": 0.04267895997763199,
        "if": 0.12803687993289598,
        "changes": 0.04267895997763199,
        "open": 0.04267895997763199,
        "with": 0.04267895997763199,
        "labeled": 0.04267895997763199,
        "docs": 0.08535791995526398,
        "auto": 0.04267895997763199,
        "tokenless": 0.04267895997763199,
        "mode": 0.12803687993289598,
        "created": 0.04267895997763199,
        "from": 0.08535791995526398,
        "a": 0.04267895997763199,
        "app": 0.04267895997763199,
        "bot": 0.04267895997763199,
        "account": 0.04267895997763199,
        "14": 0.04267895997763199,
        "quality": 0.04267895997763199,
        "gates": 0.04267895997763199,
        "evaluation": 0.04267895997763199,
        "consistency": 0.04267895997763199,
        "checks": 0.04267895997763199,
        "commands": 0.08535791995526398,
        "exist": 0.04267895997763199,
        "in": 0.12803687993289598,
        "ports": 0.04267895997763199,
        "env": 0.04267895997763199,
        "vars": 0.04267895997763199,
        "match": 0.04267895997763199,
        "configs": 0.04267895997763199,
        "no": 0.08535791995526398,
        "hallucinations": 0.04267895997763199,
        "reject": 0.04267895997763199,
        "new": 0.04267895997763199,
        "facts": 0.04267895997763199,
        "not": 0.04267895997763199,
        "found": 0.08535791995526398,
        "signals": 0.08535791995526398,
        "rag": 0.08535791995526398,
        "style": 0.04267895997763199,
        "concise": 0.04267895997763199,
        "paragraphs": 0.04267895997763199,
        "actionable": 0.04267895997763199,
        "filler": 0.04267895997763199,
        "marketing": 0.04267895997763199,
        "scorecard": 0.04267895997763199,
        "0": 0.04267895997763199,
        "100": 0.04267895997763199,
        "coverage": 0.04267895997763199,
        "of": 0.08535791995526398,
        "required": 0.04267895997763199,
        "sections": 0.08535791995526398,
        "30": 0.04267895997763199,
        "buildability": 0.04267895997763199,
        "quick": 0.08535791995526398,
        "start": 0.04267895997763199,
        "20": 0.12803687993289598,
        "link": 0.04267895997763199,
        "validity": 0.04267895997763199,
        "10": 0.12803687993289598,
        "alignment": 0.04267895997763199,
        "w": 0.04267895997763199,
        "change": 0.04267895997763199,
        "set": 0.04267895997763199,
        "lint": 0.04267895997763199,
        "reviewer": 0.04267895997763199,
        "feedback": 0.04267895997763199,
        "loop": 0.04267895997763199,
        "15": 0.04267895997763199,
        "security": 0.04267895997763199,
        "privacy": 0.04267895997763199,
        "llm": 0.08535791995526398,
        "and": 0.04267895997763199,
        "embedding": 0.04267895997763199,
        "models": 0.04267895997763199,
        "respect": 0.04267895997763199,
        "gitignore": 0.04267895997763199,
        "configurable": 0.04267895997763199,
        "exclude_paths": 0.04267895997763199,
        "never": 0.04267895997763199,
        "index": 0.04267895997763199,
        "large": 0.04267895997763199,
        "binaries": 0.04267895997763199,
        "secret": 0.08535791995526398,
        "files": 0.08535791995526398,
        "simple": 0.04267895997763199,
        "scan": 0.04267895997763199,
        "block": 0.04267895997763199,
        "16": 0.04267895997763199,
        "mvp": 0.04267895997763199,
        "plan": 0.04267895997763199,
        "weeks": 0.04267895997763199,
        "suggested": 0.04267895997763199,
        "breakdown": 0.04267895997763199,
        "core": 0.04267895997763199,
        "path": 0.04267895997763199,
        "cli": 0.04267895997763199,
        "scanner": 0.04267895997763199,
        "language": 0.04267895997763199,
        "build": 0.04267895997763199,
        "analyzers": 0.04267895997763199,
        "java": 0.04267895997763199,
        "node": 0.04267895997763199,
        "prompt": 0.04267895997763199,
        "builder": 0.04267895997763199,
        "runner": 0.04267895997763199,
        "ollama": 0.04267895997763199,
        "adapter": 0.04267895997763199,
        "processor": 0.04267895997763199,
        "publisher": 0.04267895997763199,
        "lite": 0.04267895997763199,
        "embed": 0.04267895997763199,
        "existing": 0.04267895997763199,
        "top": 0.04267895997763199,
        "largest": 0.04267895997763199,
        "source": 0.04267895997763199,
        "heads": 0.04267895997763199,
        "triggers": 0.04267895997763199,
        "single": 0.04267895997763199,
        "as": 0.08535791995526398,
        "stretch": 0.04267895997763199,
        "4": 0.04267895997763199,
        "templates": 0.08535791995526398,
        "8": 0.04267895997763199,
        "jinja2": 0.17071583991052797,
        "5": 0.04267895997763199,
        "config": 0.04267895997763199,
        "yml": 0.04267895997763199,
        "minimal": 0.04267895997763199,
        "17": 0.12803687993289598,
        "example": 0.04267895997763199,
        "section": 0.04267895997763199,
        "template": 0.04267895997763199,
        "j2": 0.08535791995526398,
        "project_name": 0.08535791995526398,
        "is": 0.04267895997763199,
        "structured": 0.04267895997763199,
        "ascii": 0.04267895997763199,
        "_architecture": 0.04267895997763199,
        "key": 0.04267895997763199,
        "components": 0.08535791995526398,
        "for": 0.04267895997763199,
        "comp": 0.12803687993289598,
        "name": 0.04267895997763199,
        "summary": 0.04267895997763199,
        "endfor": 0.04267895997763199,
        "data": 0.04267895997763199,
        "flow": 0.04267895997763199,
        "data_flow": 0.04267895997763199,
        "generated": 0.04267895997763199,
        "detected": 0.04267895997763199,
        "signals_summary": 0.04267895997763199,
        "frame": 0.04267895997763199,
        "composed": 0.04267895997763199,
        "intro": 0.04267895997763199,
        "features": 0.08535791995526398,
        "include": 0.04267895997763199
      },
      "text": "(<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to run `docgen update` (optional). ### CI (GitHub/GitLab/Bitbucket) * On push/PR: 1. Checkout repo. 2. `docgen update --event pr --diff-base $BASE_SHA` 3. If changes \u2192 open/update PR with labeled `docs:auto`. * Tokenless mode possible if PR created from a GitHub App/bot account. --- ## 14) Quality Gates & Evaluation * **Consistency checks**: commands exist in repo; ports/env vars match configs. * **No hallucinations**: reject new facts not found in signals/RAG. * **Style**: concise paragraphs, actionable commands, no filler marketing. * **Scorecard** (0\u2013100): * Coverage of required sections (30) * Buildability of quick start (20) * Link validity (10) * Diff alignment w/ change set (20) * Lint (10) * Reviewer feedback loop (10) --- ## 15) Security & Privacy * **Local only** LLM and embedding models. * Respect `.gitignore` + configurable `exclude_paths`. * Never index large binaries/secret files. * Optional simple **secret scan**; block if found. --- ## 16) MVP Plan (2 weeks suggested breakdown) 1. **Core path**: CLI, Scanner, Language+Build analyzers (Python/Java/Node), Prompt Builder, Local LLM runner (Ollama adapter), Post-processor, Git Publisher (PR). 2. **RAG Lite**: embed only `/docs`, existing `README`, top 20 largest source files\u2019 heads. 3. **Triggers**: single \u201ccommit\u201d mode; PR mode as stretch. 4. **Templates**: 8 sections, Jinja2; managed markers. 5. **Config**: `.docgen.yml` minimal. --- ## 17) Example Templates ### 17.1 Section Template (Jinja2 \u2014 architecture.j2) ```jinja2 ## Architecture {{ project_name }} is structured as: ``` {{ ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#7",
      "vector": {
        "ascii": 0.036588086663230115,
        "_architecture": 0.036588086663230115,
        "key": 0.14635234665292046,
        "components": 0.07317617332646023,
        "for": 0.2561166066426108,
        "comp": 0.10976425998969035,
        "in": 0.2195285199793807,
        "name": 0.036588086663230115,
        "summary": 0.036588086663230115,
        "endfor": 0.036588086663230115,
        "data": 0.036588086663230115,
        "flow": 0.036588086663230115,
        "data_flow": 0.036588086663230115,
        "generated": 0.036588086663230115,
        "from": 0.036588086663230115,
        "detected": 0.036588086663230115,
        "signals": 0.036588086663230115,
        "signals_summary": 0.036588086663230115,
        "17": 0.036588086663230115,
        "2": 0.036588086663230115,
        "readme": 0.10976425998969035,
        "frame": 0.036588086663230115,
        "composed": 0.036588086663230115,
        "jinja2": 0.036588086663230115,
        "project_name": 0.036588086663230115,
        "intro": 0.10976425998969035,
        "features": 0.10976425998969035,
        "include": 0.036588086663230115,
        "architecture": 0.07317617332646023,
        "j2": 0.036588086663230115,
        "quick": 0.07317617332646023,
        "start": 0.2195285199793807,
        "quickstart": 0.036588086663230115,
        "configuration": 0.07317617332646023,
        "build": 0.14635234665292046,
        "test": 0.036588086663230115,
        "build_and_test": 0.07317617332646023,
        "deployment": 0.10976425998969035,
        "troubleshooting": 0.07317617332646023,
        "faq": 0.07317617332646023,
        "license": 0.07317617332646023,
        "18": 0.036588086663230115,
        "minimal": 0.036588086663230115,
        "python": 0.14635234665292046,
        "snippets": 0.036588086663230115,
        "change": 0.036588086663230115,
        "impact": 0.036588086663230115,
        "heuristic": 0.036588086663230115,
        "section_rules": 0.07317617332646023,
        "pom": 0.10976425998969035,
        "xml": 0.10976425998969035,
        "gradle": 0.07317617332646023,
        "requirements": 0.10976425998969035,
        "txt": 0.10976425998969035,
        "pyproject": 0.036588086663230115,
        "toml": 0.036588086663230115,
        "package": 0.07317617332646023,
        "json": 0.07317617332646023,
        "dockerfile": 0.07317617332646023,
        "k8s": 0.036588086663230115,
        "src": 0.10976425998969035,
        "app": 0.10976425998969035,
        "cmd": 0.10976425998969035,
        "def": 0.07317617332646023,
        "sections_from_diff": 0.036588086663230115,
        "paths": 0.07317617332646023,
        "list": 0.036588086663230115,
        "str": 0.2195285199793807,
        "set": 0.07317617332646023,
        "out": 0.10976425998969035,
        "section": 0.07317617332646023,
        "patterns": 0.10976425998969035,
        "if": 0.18294043331615056,
        "any": 0.036588086663230115,
        "p": 0.10976425998969035,
        "pat": 0.07317617332646023,
        "startswith": 0.036588086663230115,
        "add": 0.036588086663230115,
        "return": 0.10976425998969035,
        "or": 0.10976425998969035,
        "fall": 0.036588086663230115,
        "back": 0.036588086663230115,
        "to": 0.07317617332646023,
        "uncertain": 0.036588086663230115,
        "managed": 0.036588086663230115,
        "markers": 0.07317617332646023,
        "patch": 0.036588086663230115,
        "replace_block": 0.036588086663230115,
        "md": 0.18294043331615056,
        "new": 0.07317617332646023,
        "f": 0.10976425998969035,
        "docgen": 0.18294043331615056,
        "begin": 0.036588086663230115,
        "end": 0.18294043331615056,
        "and": 0.036588086663230115,
        "pre": 0.07317617332646023,
        "rest": 0.07317617332646023,
        "split": 0.07317617332646023,
        "1": 0.07317617332646023,
        "_": 0.036588086663230115,
        "post": 0.07317617332646023,
        "n": 0.07317617332646023,
        "insert": 0.036588086663230115,
        "missing": 0.036588086663230115,
        "19": 0.036588086663230115,
        "open": 0.036588086663230115,
        "questions": 0.036588086663230115,
        "trade": 0.036588086663230115,
        "offs": 0.036588086663230115,
        "embeddings": 0.036588086663230115,
        "use": 0.036588086663230115,
        "a": 0.14635234665292046,
        "tiny": 0.036588086663230115,
        "local": 0.036588086663230115,
        "model": 0.07317617332646023,
        "vs": 0.07317617332646023,
        "rule": 0.036588086663230115,
        "based": 0.036588086663230115,
        "retrieval": 0.036588086663230115,
        "mvp": 0.036588086663230115,
        "tree": 0.036588086663230115,
        "sitter": 0.036588086663230115,
        "adds": 0.036588086663230115,
        "power": 0.036588086663230115,
        "but": 0.036588086663230115,
        "increases": 0.036588086663230115,
        "footprint": 0.036588086663230115,
        "gate": 0.036588086663230115,
        "behind": 0.036588086663230115,
        "flag": 0.036588086663230115,
        "pr": 0.10976425998969035,
        "author": 0.036588086663230115,
        "bot": 0.036588086663230115,
        "account": 0.036588086663230115,
        "developer": 0.036588086663230115,
        "token": 0.036588086663230115,
        "decide": 0.036588086663230115,
        "per": 0.036588086663230115,
        "environment": 0.036588086663230115,
        "markdown": 0.036588086663230115,
        "diffs": 0.036588086663230115,
        "keep": 0.036588086663230115,
        "sections": 0.036588086663230115,
        "atomic": 0.036588086663230115,
        "minimize": 0.036588086663230115,
        "noisy": 0.036588086663230115,
        "prs": 0.036588086663230115,
        "20": 0.036588086663230115,
        "example": 0.036588086663230115,
        "yml": 0.036588086663230115,
        "mixed": 0.036588086663230115,
        "repo": 0.036588086663230115,
        "yaml": 0.036588086663230115,
        "llm": 0.036588086663230115,
        "runner": 0.036588086663230115,
        "ollama": 0.036588086663230115,
        "llama3": 0.036588086663230115,
        "8b": 0.036588086663230115,
        "instruct": 0.036588086663230115,
        "temperature": 0.036588086663230115,
        "0": 0.036588086663230115,
        "15": 0.036588086663230115,
        "style": 0.036588086663230115,
        "comprehensive": 0.036588086663230115,
        "publish": 0.036588086663230115,
        "mode": 0.036588086663230115,
        "branch_prefix": 0.036588086663230115,
        "analyzers": 0.036588086663230115,
        "enabled": 0.036588086663230115,
        "language": 0.036588086663230115,
        "dependencies": 0.036588086663230115,
        "exclude_paths": 0.036588086663230115,
        "git": 0.036588086663230115,
        "node_modules": 0.036588086663230115,
        "dist": 0.036588086663230115,
        "target": 0.036588086663230115,
        "ci": 0.036588086663230115,
        "watched_globs": 0.036588086663230115,
        "21": 0.036588086663230115,
        "success": 0.036588086663230115,
        "criteria": 0.036588086663230115,
        "poc": 0.036588086663230115,
        "3": 0.036588086663230115,
        "diverse": 0.036588086663230115,
        "repos": 0.036588086663230115,
        "cli": 0.036588086663230115,
        "spring": 0.036588086663230115,
        "boot": 0.036588086663230115,
        "api": 0.036588086663230115,
        "node": 0.036588086663230115,
        "webapp": 0.036588086663230115,
        "init": 0.036588086663230115,
        "produces": 0.036588086663230115,
        "working": 0.036588086663230115,
        "linted": 0.036588086663230115,
        "with": 0.036588086663230115,
        "runnable": 0.036588086663230115,
        "on": 0.036588086663230115,
        "changing": 0.036588086663230115
      },
      "text": "ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick Start {{ quickstart }} ## Configuration {{ configuration }} ## Build & Test {{ build_and_test }} ## Deployment {{ deployment }} ## Troubleshooting {{ troubleshooting }} ## FAQ {{ faq }} ## License {{ license }} ``` --- ## 18) Minimal Python Snippets **Change impact heuristic** ```python SECTION_RULES = [ (\"build_and_test\", [\"pom.xml\",\"build.gradle\",\"requirements.txt\",\"pyproject.toml\",\"package.json\"]), (\"deployment\", [\"Dockerfile\",\"k8s/\"]), (\"architecture\", [\"src/\",\"app/\",\"cmd/\"]), (\"features\", [\"src/\",\"app/\",\"cmd/\"]), ] def sections_from_diff(paths: list[str]) -> set[str]: out = set() for section, patterns in SECTION_RULES: if any(p for p in paths for pat in patterns if p.startswith(pat)): out.add(section) return out or {\"intro\"} # fall back to intro if uncertain ``` **Managed markers (patch)** ```python def replace_block(md: str, key: str, new: str) -> str: start = f\"<!-- docgen:begin:{key} -->\" end = f\"<!-- docgen:end:{key} -->\" if start in md and end in md: pre, rest = md.split(start, 1) _, post = rest.split(end, 1) return f\"{pre}{start}\\n{new}\\n{end}{post}\" return md # or insert markers if missing ``` --- ## 19) Open Questions / Trade-offs * **Embeddings**: Use a tiny local model vs. rule-based retrieval for MVP? * **Tree-sitter**: Adds power but increases footprint\u2014gate behind a flag. * **PR author**: Bot account vs. developer token\u2014decide per environment. * **Markdown diffs**: Keep sections atomic to minimize noisy PRs. --- ## 20) Example `.docgen.yml` for a Mixed Repo ```yaml llm: runner: \"ollama\" model: \"llama3:8b-instruct\" temperature: 0.15 readme: style: \"comprehensive\" publish: mode: \"pr\" branch_prefix: \"docgen/\" analyzers: enabled: [language, build, dependencies, patterns] exclude_paths: [\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#8",
      "vector": {
        "git": 0.08838834764831843,
        "node_modules": 0.08838834764831843,
        "dist": 0.08838834764831843,
        "target": 0.08838834764831843,
        "ci": 0.08838834764831843,
        "watched_globs": 0.08838834764831843,
        "src": 0.08838834764831843,
        "app": 0.08838834764831843,
        "cmd": 0.08838834764831843,
        "pom": 0.17677669529663687,
        "xml": 0.17677669529663687,
        "build": 0.08838834764831843,
        "gradle": 0.08838834764831843,
        "package": 0.08838834764831843,
        "json": 0.08838834764831843,
        "requirements": 0.17677669529663687,
        "txt": 0.17677669529663687,
        "dockerfile": 0.08838834764831843,
        "21": 0.08838834764831843,
        "success": 0.08838834764831843,
        "criteria": 0.08838834764831843,
        "poc": 0.08838834764831843,
        "for": 0.08838834764831843,
        "3": 0.08838834764831843,
        "diverse": 0.08838834764831843,
        "repos": 0.08838834764831843,
        "python": 0.08838834764831843,
        "cli": 0.17677669529663687,
        "spring": 0.08838834764831843,
        "boot": 0.08838834764831843,
        "api": 0.08838834764831843,
        "node": 0.08838834764831843,
        "webapp": 0.08838834764831843,
        "docgen": 0.17677669529663687,
        "init": 0.17677669529663687,
        "produces": 0.08838834764831843,
        "a": 0.2651650429449553,
        "working": 0.08838834764831843,
        "linted": 0.08838834764831843,
        "readme": 0.08838834764831843,
        "with": 0.08838834764831843,
        "runnable": 0.08838834764831843,
        "quick": 0.08838834764831843,
        "start": 0.08838834764831843,
        "on": 0.08838834764831843,
        "changing": 0.08838834764831843,
        "or": 0.08838834764831843,
        "pr": 0.08838834764831843,
        "updates": 0.08838834764831843,
        "only": 0.08838834764831843,
        "relevant": 0.08838834764831843,
        "sections": 0.08838834764831843,
        "no": 0.08838834764831843,
        "hallucinated": 0.08838834764831843,
        "commands": 0.08838834764831843,
        "links": 0.08838834764831843,
        "and": 0.2651650429449553,
        "badges": 0.08838834764831843,
        "validate": 0.08838834764831843,
        "style": 0.08838834764831843,
        "consistent": 0.08838834764831843,
        "if": 0.08838834764831843,
        "you": 0.17677669529663687,
        "want": 0.08838834764831843,
        "i": 0.08838834764831843,
        "can": 0.17677669529663687,
        "spin": 0.08838834764831843,
        "up": 0.08838834764831843,
        "starter": 0.08838834764831843,
        "repo": 0.08838834764831843,
        "layout": 0.08838834764831843,
        "analyzers": 0.08838834764831843,
        "templates": 0.08838834764831843,
        "simple": 0.08838834764831843,
        "ollama": 0.08838834764831843,
        "adapter": 0.08838834764831843,
        "so": 0.08838834764831843,
        "drop": 0.08838834764831843,
        "it": 0.08838834764831843,
        "into": 0.08838834764831843,
        "your": 0.08838834764831843,
        "environment": 0.08838834764831843,
        "run": 0.08838834764831843,
        "right": 0.08838834764831843,
        "away": 0.08838834764831843
      },
      "text": "[\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR updates only relevant sections. * No hallucinated commands; links and badges validate; style consistent. --- If you want, I can spin up a **starter repo layout** (CLI, analyzers, templates, and a simple Ollama adapter) so you can drop it into your environment and run `docgen init` right away.",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    }
  ],
  "build_and_test": [
    {
      "id": "AGENTS.md#0",
      "vector": {
        "repository": 0.06757373783994859,
        "guidelines": 0.1013606067599229,
        "project": 0.033786868919974296,
        "structure": 0.033786868919974296,
        "module": 0.06757373783994859,
        "organization": 0.033786868919974296,
        "spec": 0.06757373783994859,
        "md": 0.033786868919974296,
        "captures": 0.033786868919974296,
        "the": 0.27029495135979437,
        "end": 0.06757373783994859,
        "to": 0.1013606067599229,
        "architecture": 0.033786868919974296,
        "component": 0.06757373783994859,
        "contracts": 0.033786868919974296,
        "and": 0.43922929595966587,
        "must": 0.033786868919974296,
        "be": 0.033786868919974296,
        "updated": 0.033786868919974296,
        "whenever": 0.033786868919974296,
        "responsibilities": 0.033786868919974296,
        "shift": 0.033786868919974296,
        "place": 0.033786868919974296,
        "python": 0.2027212135198458,
        "source": 0.033786868919974296,
        "in": 0.16893434459987147,
        "a": 0.23650808243982008,
        "docgen": 0.16893434459987147,
        "package": 0.033786868919974296,
        "create": 0.033786868919974296,
        "it": 0.033786868919974296,
        "when": 0.06757373783994859,
        "implementation": 0.033786868919974296,
        "starts": 0.033786868919974296,
        "with": 0.16893434459987147,
        "clear": 0.033786868919974296,
        "submodules": 0.033786868919974296,
        "for": 0.1013606067599229,
        "orchestrator": 0.1013606067599229,
        "analyzers": 0.033786868919974296,
        "runners": 0.033786868919974296,
        "stores": 0.033786868919974296,
        "avoid": 0.06757373783994859,
        "leaving": 0.033786868919974296,
        "logic": 0.033786868919974296,
        "repo": 0.06757373783994859,
        "root": 0.033786868919974296,
        "mirror": 0.033786868919974296,
        "runtime": 0.033786868919974296,
        "modules": 0.06757373783994859,
        "under": 0.1013606067599229,
        "tests": 0.2027212135198458,
        "using": 0.033786868919974296,
        "test_": 0.033786868919974296,
        "py": 0.1013606067599229,
        "co": 0.033786868919974296,
        "locate": 0.033786868919974296,
        "fixtures": 0.06757373783994859,
        "_fixtures": 0.033786868919974296,
        "so": 0.13514747567989718,
        "imports": 0.06757373783994859,
        "stay": 0.06757373783994859,
        "clean": 0.033786868919974296,
        "reusable": 0.033786868919974296,
        "keep": 0.13514747567989718,
        "throwaway": 0.033786868919974296,
        "experiments": 0.033786868919974296,
        "inside": 0.033786868919974296,
        "an": 0.06757373783994859,
        "ignored": 0.033786868919974296,
        "sandbox": 0.033786868919974296,
        "directory": 0.033786868919974296,
        "scans": 0.033786868919974296,
        "remain": 0.033786868919974296,
        "focused": 0.033786868919974296,
        "on": 0.06757373783994859,
        "production": 0.033786868919974296,
        "code": 0.033786868919974296,
        "paths": 0.033786868919974296,
        "build": 0.033786868919974296,
        "test": 0.06757373783994859,
        "development": 0.033786868919974296,
        "commands": 0.033786868919974296,
        "m": 0.16893434459987147,
        "venv": 0.1013606067599229,
        "followed": 0.033786868919974296,
        "by": 0.033786868919974296,
        "scripts": 0.06757373783994859,
        "activate": 0.033786868919974296,
        "aligns": 0.033786868919974296,
        "local": 0.033786868919974296,
        "shells": 0.033786868919974296,
        "pycharm": 0.033786868919974296,
        "interpreter": 0.033786868919974296,
        "settings": 0.033786868919974296,
        "pip": 0.033786868919974296,
        "install": 0.033786868919974296,
        "e": 0.033786868919974296,
        "dev": 0.033786868919974296,
        "after": 0.06757373783994859,
        "pyproject": 0.033786868919974296,
        "toml": 0.033786868919974296,
        "is": 0.1013606067599229,
        "committed": 0.033786868919974296,
        "exposes": 0.033786868919974296,
        "cli": 0.033786868919974296,
        "plugins": 0.033786868919974296,
        "editable": 0.033786868919974296,
        "form": 0.033786868919974296,
        "without": 0.033786868919974296,
        "repeated": 0.033786868919974296,
        "reinstalls": 0.033786868919974296,
        "pytest": 0.06757373783994859,
        "runs": 0.033786868919974296,
        "full": 0.033786868919974296,
        "suite": 0.033786868919974296,
        "append": 0.033786868919974296,
        "k": 0.033786868919974296,
        "pattern": 0.033786868919974296,
        "iterate": 0.033786868919974296,
        "single": 0.06757373783994859,
        "analyzer": 0.06757373783994859,
        "or": 0.06757373783994859,
        "pipeline": 0.1013606067599229,
        "stage": 0.033786868919974296,
        "mypy": 0.033786868919974296,
        "ruff": 0.033786868919974296,
        "check": 0.033786868919974296,
        "catch": 0.033786868919974296,
        "type": 0.033786868919974296,
        "drift": 0.033786868919974296,
        "lint": 0.033786868919974296,
        "violations": 0.033786868919974296,
        "before": 0.06757373783994859,
        "readme": 0.06757373783994859,
        "generation": 0.06757373783994859,
        "attempted": 0.033786868919974296,
        "coding": 0.033786868919974296,
        "style": 0.033786868919974296,
        "naming": 0.033786868919974296,
        "conventions": 0.033786868919974296,
        "follow": 0.06757373783994859,
        "pep": 0.033786868919974296,
        "8": 0.033786868919974296,
        "4": 0.033786868919974296,
        "space": 0.033786868919974296,
        "indents": 0.033786868919974296,
        "explicit": 0.033786868919974296,
        "example": 0.033786868919974296,
        "from": 0.033786868919974296,
        "import": 0.033786868919974296,
        "static": 0.033786868919974296,
        "tooling": 0.033786868919974296,
        "can": 0.033786868919974296,
        "trace": 0.033786868919974296,
        "dependencies": 0.033786868919974296,
        "name": 0.033786868919974296,
        "their": 0.033786868919974296,
        "roles": 0.033786868919974296,
        "prompt_builder": 0.033786868919974296,
        "functions": 0.033786868919974296,
        "snake_case": 0.033786868919974296,
        "descriptive": 0.06757373783994859,
        "nouns": 0.033786868919974296,
        "first": 0.033786868919974296,
        "build_prompt_section": 0.033786868919974296,
        "run": 0.033786868919974296,
        "black": 0.033786868919974296,
        "commits": 0.06757373783994859,
        "manual": 0.033786868919974296,
        "reformatting": 0.033786868919974296,
        "unless": 0.033786868919974296,
        "formatter": 0.033786868919974296,
        "cannot": 0.033786868919974296,
        "resolve": 0.033786868919974296,
        "construct": 0.033786868919974296,
        "testing": 0.06757373783994859,
        "default": 0.033786868919974296,
        "harness": 0.033786868919974296,
        "every": 0.033786868919974296,
        "needs": 0.033786868919974296,
        "unit": 0.033786868919974296,
        "coverage": 0.033786868919974296,
        "plus": 0.033786868919974296,
        "integration": 0.06757373783994859,
        "case": 0.033786868919974296,
        "that": 0.06757373783994859,
        "walks": 0.033786868919974296,
        "snapshot": 0.033786868919974296,
        "through": 0.033786868919974296,
        "use": 0.033786868919974296,
        "names": 0.033786868919974296,
        "such": 0.033786868919974296,
        "as": 0.033786868919974296,
        "test_prompt_builder_handles_missing_signals": 0.033786868919974296,
        "arrange": 0.033786868919974296,
        "act": 0.033786868919974296,
        "assert": 0.033786868919974296,
        "comments": 0.033786868919974296,
        "minimal": 0.033786868919974296,
        "but": 0.033786868919974296,
        "intentional": 0.033786868919974296,
        "store": 0.033786868919974296,
        "regression": 0.033786868919974296,
        "generated": 0.033786868919974296,
        "slices": 0.033786868919974296,
        "data": 0.033786868919974296,
        "update": 0.033786868919974296,
        "them": 0.033786868919974296,
        "helper": 0.033786868919974296,
        "diffs": 0.033786868919974296,
        "reviewable": 0.033786868919974296,
        "commit": 0.033786868919974296,
        "pull": 0.033786868919974296,
        "request": 0.033786868919974296,
        "conventional": 0.033786868919974296,
        "feat": 0.033786868919974296,
        "fix": 0.033786868919974296,
        "docs": 0.033786868919974296,
        "subject": 0.033786868919974296,
        "lines": 0.033786868919974296,
        "72": 0.033786868919974296,
        "characters": 0.033786868919974296,
        "explain": 0.033786868919974296,
        "broader": 0.033786868919974296,
        "scope": 0.033786868919974296,
        "body": 0.033786868919974296,
        "multiple": 0.033786868919974296,
        "subsystems": 0.033786868919974296,
        "change": 0.033786868919974296,
        "bundle": 0.033786868919974296,
        "related": 0.033786868919974296,
        "work": 0.033786868919974296,
        "into": 0.033786868919974296,
        "pr": 0.033786868919974296,
        "includes": 0.033786868919974296,
        "summary": 0.033786868919974296,
        "notes": 0.033786868919974296,
        "links": 0.033786868919974296
      },
      "text": "# Repository Guidelines ## Project Structure & Module Organization - `spec/spec.md` captures the end-to-end architecture, component contracts, and must be updated whenever responsibilities shift. - Place Python source in a `docgen/` package (create it when implementation starts) with clear submodules for orchestrator, analyzers, runners, and stores; avoid leaving logic in the repo root. - Mirror runtime modules under `tests/` using `test_<module>.py`; co-locate fixtures in `tests/_fixtures/` so imports stay clean and reusable. - Keep throwaway experiments inside an ignored `sandbox/` directory so repository scans remain focused on production code paths. ## Build, Test, and Development Commands - `python -m venv .venv` followed by `.\\\\.venv\\\\Scripts\\\\activate` aligns local shells with the PyCharm interpreter settings. - `python -m pip install -e .[dev]` (after a `pyproject.toml` is committed) exposes the CLI and plugins in editable form without repeated reinstalls. - `python -m pytest` runs the full suite; append `-k <pattern>` to iterate on a single analyzer or pipeline stage. - `python -m mypy docgen` and `python -m ruff check docgen tests` catch type drift and lint violations before README generation is attempted. ## Coding Style & Naming Conventions - Follow PEP 8 with 4-space indents and explicit imports (for example, `from docgen.orchestrator import Pipeline`) so static tooling can trace dependencies. - Name modules after their roles (`orchestrator.py`, `prompt_builder.py`) and keep functions snake_case with descriptive nouns first (`build_prompt_section`). - Run `black docgen tests` before commits; avoid manual reformatting unless the formatter cannot resolve a construct. ## Testing Guidelines - Pytest is the default harness; every analyzer or pipeline component needs unit coverage plus an integration case under `tests/integration/` that walks a repo snapshot through generation. - Use descriptive test names such as `test_prompt_builder_handles_missing_signals` and keep Arrange-Act-Assert comments minimal but intentional. - Store regression fixtures for generated README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "AGENTS.md#1",
      "vector": {
        "readme": 0.1270001270001905,
        "slices": 0.06350006350009525,
        "under": 0.06350006350009525,
        "tests": 0.06350006350009525,
        "data": 0.06350006350009525,
        "and": 0.4445004445006667,
        "update": 0.06350006350009525,
        "them": 0.06350006350009525,
        "with": 0.06350006350009525,
        "helper": 0.06350006350009525,
        "scripts": 0.06350006350009525,
        "so": 0.06350006350009525,
        "diffs": 0.06350006350009525,
        "stay": 0.06350006350009525,
        "reviewable": 0.06350006350009525,
        "commit": 0.1270001270001905,
        "pull": 0.06350006350009525,
        "request": 0.06350006350009525,
        "guidelines": 0.06350006350009525,
        "follow": 0.06350006350009525,
        "conventional": 0.06350006350009525,
        "commits": 0.06350006350009525,
        "feat": 0.06350006350009525,
        "fix": 0.06350006350009525,
        "docs": 0.1270001270001905,
        "keep": 0.1270001270001905,
        "subject": 0.06350006350009525,
        "lines": 0.06350006350009525,
        "72": 0.06350006350009525,
        "characters": 0.06350006350009525,
        "explain": 0.06350006350009525,
        "broader": 0.06350006350009525,
        "scope": 0.06350006350009525,
        "in": 0.254000254000381,
        "the": 0.31750031750047625,
        "body": 0.06350006350009525,
        "when": 0.1270001270001905,
        "multiple": 0.06350006350009525,
        "subsystems": 0.06350006350009525,
        "change": 0.06350006350009525,
        "bundle": 0.06350006350009525,
        "related": 0.06350006350009525,
        "work": 0.1270001270001905,
        "into": 0.06350006350009525,
        "a": 0.254000254000381,
        "single": 0.06350006350009525,
        "pr": 0.1270001270001905,
        "that": 0.06350006350009525,
        "includes": 0.06350006350009525,
        "summary": 0.06350006350009525,
        "testing": 0.06350006350009525,
        "notes": 0.1270001270001905,
        "links": 0.06350006350009525,
        "to": 0.06350006350009525,
        "relevant": 0.06350006350009525,
        "issues": 0.06350006350009525,
        "or": 0.06350006350009525,
        "spec": 0.06350006350009525,
        "sections": 0.06350006350009525,
        "attach": 0.06350006350009525,
        "before": 0.1270001270001905,
        "after": 0.06350006350009525,
        "excerpts": 0.06350006350009525,
        "altering": 0.06350006350009525,
        "generation": 0.06350006350009525,
        "output": 0.06350006350009525,
        "run": 0.06350006350009525,
        "lint": 0.06350006350009525,
        "type": 0.06350006350009525,
        "check": 0.06350006350009525,
        "test": 0.06350006350009525,
        "commands": 0.06350006350009525,
        "opening": 0.06350006350009525,
        "paste": 0.06350006350009525,
        "condensed": 0.06350006350009525,
        "results": 0.06350006350009525,
        "description": 0.06350006350009525,
        "for": 0.06350006350009525,
        "quick": 0.06350006350009525,
        "verification": 0.06350006350009525,
        "environment": 0.1270001270001905,
        "tooling": 0.06350006350009525,
        "reuse": 0.06350006350009525,
        "local": 0.1270001270001905,
        "venv": 0.06350006350009525,
        "seeded": 0.06350006350009525,
        "by": 0.1270001270001905,
        "pycharm": 0.06350006350009525,
        "do": 0.06350006350009525,
        "not": 0.06350006350009525,
        "artifacts": 0.06350006350009525,
        "store": 0.06350006350009525,
        "secrets": 0.06350006350009525,
        "env": 0.06350006350009525,
        "consumed": 0.06350006350009525,
        "llm": 0.06350006350009525,
        "runner": 0.06350006350009525,
        "large": 0.06350006350009525,
        "model": 0.06350006350009525,
        "weights": 0.06350006350009525,
        "outside": 0.06350006350009525,
        "repository": 0.06350006350009525,
        "document": 0.06350006350009525,
        "their": 0.06350006350009525,
        "locations": 0.06350006350009525,
        "models": 0.06350006350009525,
        "md": 0.06350006350009525,
        "once": 0.06350006350009525,
        "integration": 0.06350006350009525,
        "begins": 0.06350006350009525
      },
      "text": "README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to relevant issues or spec sections; attach before/after README excerpts when altering generation output. - Run lint, type-check, and test commands before opening a PR and paste condensed results in the description for quick verification. ## Environment & Tooling Notes - Reuse the local `.venv` seeded by PyCharm; do not commit environment artifacts and store secrets in a `.env` consumed by the local LLM runner. - Keep large model weights outside the repository and document their locations in `docs/models.md` once integration work begins.",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "docs/ci/docgen-update.yml#0",
      "vector": {
        "name": 0.2773500981126145,
        "docgen": 0.1849000654084097,
        "update": 0.2311250817605121,
        "on": 0.09245003270420485,
        "push": 0.046225016352102424,
        "branches": 0.09245003270420485,
        "main": 0.13867504905630726,
        "pull_request": 0.13867504905630726,
        "jobs": 0.046225016352102424,
        "readme": 0.1849000654084097,
        "runs": 0.046225016352102424,
        "self": 0.046225016352102424,
        "hosted": 0.046225016352102424,
        "steps": 0.09245003270420485,
        "uses": 0.13867504905630726,
        "actions": 0.2311250817605121,
        "checkout": 0.046225016352102424,
        "v4": 0.09245003270420485,
        "with": 0.13867504905630726,
        "fetch": 0.046225016352102424,
        "depth": 0.046225016352102424,
        "0": 0.046225016352102424,
        "setup": 0.046225016352102424,
        "python": 0.2311250817605121,
        "v5": 0.046225016352102424,
        "version": 0.046225016352102424,
        "3": 0.046225016352102424,
        "11": 0.046225016352102424,
        "cache": 0.09245003270420485,
        "path": 0.046225016352102424,
        "pip": 0.2773500981126145,
        "key": 0.046225016352102424,
        "runner": 0.09245003270420485,
        "os": 0.09245003270420485,
        "hashfiles": 0.046225016352102424,
        "pyproject": 0.046225016352102424,
        "toml": 0.046225016352102424,
        "restore": 0.046225016352102424,
        "keys": 0.046225016352102424,
        "install": 0.13867504905630726,
        "dependencies": 0.046225016352102424,
        "run": 0.2311250817605121,
        "m": 0.13867504905630726,
        "upgrade": 0.046225016352102424,
        "e": 0.046225016352102424,
        "dev": 0.046225016352102424,
        "determine": 0.046225016352102424,
        "diff": 0.1849000654084097,
        "base": 0.2773500981126145,
        "id": 0.046225016352102424,
        "if": 0.09245003270420485,
        "github": 0.2311250817605121,
        "event_name": 0.046225016352102424,
        "then": 0.09245003270420485,
        "echo": 0.09245003270420485,
        "event": 0.046225016352102424,
        "sha": 0.046225016352102424,
        "github_output": 0.09245003270420485,
        "else": 0.046225016352102424,
        "origin": 0.046225016352102424,
        "fi": 0.09245003270420485,
        "env": 0.046225016352102424,
        "docgen_llm_base_url": 0.046225016352102424,
        "http": 0.046225016352102424,
        "localhost": 0.046225016352102424,
        "12434": 0.046225016352102424,
        "engines": 0.046225016352102424,
        "v1": 0.046225016352102424,
        "cli": 0.046225016352102424,
        "outputs": 0.046225016352102424,
        "commit": 0.09245003270420485,
        "md": 0.09245003270420485,
        "optional": 0.046225016352102424,
        "git": 0.1849000654084097,
        "status": 0.046225016352102424,
        "short": 0.046225016352102424,
        "grep": 0.046225016352102424,
        "q": 0.046225016352102424,
        "config": 0.09245003270420485,
        "user": 0.09245003270420485,
        "email": 0.046225016352102424,
        "users": 0.046225016352102424,
        "noreply": 0.046225016352102424,
        "com": 0.046225016352102424,
        "am": 0.046225016352102424,
        "docs": 0.046225016352102424,
        "via": 0.046225016352102424
      },
      "text": "name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted steps: - uses: actions/checkout@v4 with: fetch-depth: 0 - uses: actions/setup-python@v5 with: python-version: '3.11' - uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install dependencies run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README.md (optional) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi",
      "metadata": {
        "path": "docs/ci/docgen-update.yml",
        "tags": [
          "docs"
        ],
        "hash": "48bec2bc404707486fcb1661def194395cc581bf55cb2f610704d495663e6a14"
      }
    },
    {
      "id": "docs/ci/github-actions.md#0",
      "vector": {
        "github": 0.2528558164964056,
        "actions": 0.2212488394343549,
        "integration": 0.0316069770620507,
        "the": 0.18964186237230418,
        "workflow": 0.0632139541241014,
        "below": 0.0316069770620507,
        "runs": 0.0632139541241014,
        "docgen": 0.2212488394343549,
        "update": 0.18964186237230418,
        "on": 0.1264279082482028,
        "pushes": 0.0316069770620507,
        "and": 0.0316069770620507,
        "pull": 0.0316069770620507,
        "requests": 0.0316069770620507,
        "it": 0.0316069770620507,
        "assumes": 0.0316069770620507,
        "a": 0.0632139541241014,
        "self": 0.0632139541241014,
        "hosted": 0.1264279082482028,
        "runner": 0.15803488531025348,
        "or": 0.09482093118615209,
        "with": 0.18964186237230418,
        "network": 0.0632139541241014,
        "access": 0.0632139541241014,
        "to": 0.1264279082482028,
        "your": 0.0632139541241014,
        "local": 0.09482093118615209,
        "model": 0.0316069770620507,
        "runtime": 0.0316069770620507,
        "job": 0.0316069770620507,
        "skips": 0.0316069770620507,
        "early": 0.0316069770620507,
        "when": 0.0316069770620507,
        "no": 0.0316069770620507,
        "files": 0.0316069770620507,
        "match": 0.0316069770620507,
        "yml": 0.0316069770620507,
        "s": 0.0316069770620507,
        "ci": 0.0316069770620507,
        "watched_globs": 0.0316069770620507,
        "entries": 0.0316069770620507,
        "so": 0.0316069770620507,
        "that": 0.0316069770620507,
        "purely": 0.0316069770620507,
        "documentation": 0.0316069770620507,
        "only": 0.0316069770620507,
        "changes": 0.0316069770620507,
        "do": 0.0316069770620507,
        "not": 0.0316069770620507,
        "trigger": 0.0316069770620507,
        "generator": 0.0316069770620507,
        "yaml": 0.0316069770620507,
        "name": 0.3476767476825577,
        "push": 0.0316069770620507,
        "branches": 0.0632139541241014,
        "main": 0.09482093118615209,
        "pull_request": 0.09482093118615209,
        "jobs": 0.0316069770620507,
        "readme": 0.2212488394343549,
        "requires": 0.0316069770620507,
        "llm": 0.0316069770620507,
        "steps": 0.0632139541241014,
        "checkout": 0.0632139541241014,
        "repository": 0.0316069770620507,
        "uses": 0.1264279082482028,
        "v4": 0.09482093118615209,
        "fetch": 0.0316069770620507,
        "depth": 0.0316069770620507,
        "0": 0.0316069770620507,
        "set": 0.0316069770620507,
        "up": 0.0316069770620507,
        "python": 0.18964186237230418,
        "setup": 0.0316069770620507,
        "v5": 0.0316069770620507,
        "version": 0.0316069770620507,
        "3": 0.0316069770620507,
        "11": 0.0316069770620507,
        "cache": 0.09482093118615209,
        "pip": 0.2212488394343549,
        "dependencies": 0.0316069770620507,
        "path": 0.0632139541241014,
        "key": 0.0316069770620507,
        "os": 0.0632139541241014,
        "hashfiles": 0.0316069770620507,
        "pyproject": 0.0316069770620507,
        "toml": 0.0316069770620507,
        "restore": 0.0316069770620507,
        "keys": 0.0316069770620507,
        "install": 0.09482093118615209,
        "in": 0.0316069770620507,
        "editable": 0.0316069770620507,
        "mode": 0.0316069770620507,
        "run": 0.15803488531025348,
        "m": 0.09482093118615209,
        "upgrade": 0.0316069770620507,
        "e": 0.0316069770620507,
        "dev": 0.0316069770620507,
        "determine": 0.0316069770620507,
        "diff": 0.1264279082482028,
        "base": 0.18964186237230418,
        "id": 0.0316069770620507,
        "if": 0.1264279082482028,
        "event_name": 0.0316069770620507,
        "then": 0.0632139541241014,
        "echo": 0.0632139541241014,
        "event": 0.0316069770620507,
        "sha": 0.0316069770620507,
        "github_output": 0.0632139541241014,
        "else": 0.0316069770620507,
        "origin": 0.0316069770620507,
        "fi": 0.0632139541241014,
        "env": 0.0316069770620507,
        "docgen_llm_base_url": 0.0632139541241014,
        "http": 0.0316069770620507,
        "localhost": 0.0316069770620507,
        "12434": 0.0316069770620507,
        "engines": 0.0316069770620507,
        "v1": 0.0316069770620507,
        "cli": 0.0632139541241014,
        "outputs": 0.0316069770620507,
        "commit": 0.0632139541241014,
        "updates": 0.0316069770620507,
        "any": 0.0316069770620507,
        "git": 0.1264279082482028,
        "status": 0.0316069770620507,
        "short": 0.0316069770620507,
        "grep": 0.0316069770620507,
        "q": 0.0316069770620507,
        "md": 0.0632139541241014,
        "config": 0.0632139541241014,
        "user": 0.0632139541241014,
        "email": 0.0316069770620507,
        "users": 0.0316069770620507,
        "noreply": 0.0316069770620507,
        "com": 0.0316069770620507,
        "am": 0.0316069770620507,
        "docs": 0.0316069770620507,
        "via": 0.0316069770620507,
        "upload": 0.0632139541241014,
        "artifact": 0.0632139541241014,
        "success": 0.0316069770620507,
        "generated": 0.0316069770620507,
        "note": 0.0316069770620507,
        "relies": 0.0316069770620507,
        "pointing": 0.0316069770620507,
        "private": 0.0632139541241014,
        "inference": 0.0316069770620507,
        "endpoint": 0.0316069770620507,
        "for": 0.0316069770620507,
        "runners": 0.0316069770620507,
        "you": 0.0316069770620507,
        "will": 0.0316069770620507,
        "need": 0.0316069770620507,
        "expose": 0.0316069770620507,
        "within": 0.0316069770620507,
        "switch": 0.0316069770620507,
        "ollama": 0.0316069770620507,
        "appropriate": 0.0316069770620507,
        "caching": 0.0316069770620507
      },
      "text": "# GitHub Actions Integration The workflow below runs `docgen update` on pushes and pull requests. It assumes a self-hosted runner (or GitHub-hosted runner with network access to your local model runtime). The job skips early when no files match `.docgen.yml`'s `ci.watched_globs` entries so that purely documentation-only changes do not trigger the generator. ```yaml name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted # requires local LLM access steps: - name: Checkout repository uses: actions/checkout@v4 with: fetch-depth: 0 - name: Set up Python uses: actions/setup-python@v5 with: python-version: '3.11' - name: Cache pip dependencies uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install docgen in editable mode run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: | python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README updates (if any) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi - name: Upload README artifact if: success() uses: actions/upload-artifact@v4 with: name: generated-readme path: README.md ``` > **Note:** the workflow relies on `DOCGEN_LLM_BASE_URL` pointing to a local or > private inference endpoint. For GitHub-hosted runners you will need to expose > the runner within your private network or switch to the `ollama` CLI with > appropriate caching. ```",
      "metadata": {
        "path": "docs/ci/github-actions.md",
        "tags": [
          "docs"
        ],
        "hash": "178c6f25ecf7325348a9158158c6e6f36c29d520a922a6f0c2c739f4efe1b0d8"
      }
    },
    {
      "id": "spec/feature_checklist.md#0",
      "vector": {
        "intelligent": 0.028513297425610054,
        "readme": 0.08553989227683016,
        "generator": 0.028513297425610054,
        "feature": 0.028513297425610054,
        "checklist": 0.028513297425610054,
        "status": 0.028513297425610054,
        "legend": 0.028513297425610054,
        "not": 0.028513297425610054,
        "started": 0.028513297425610054,
        "in": 0.028513297425610054,
        "progress": 0.028513297425610054,
        "done": 0.028513297425610054,
        "scope": 0.028513297425610054,
        "tags": 0.028513297425610054,
        "mvp": 0.4847260562353709,
        "required": 0.028513297425610054,
        "for": 0.11405318970244022,
        "proof": 0.028513297425610054,
        "of": 0.08553989227683016,
        "concept": 0.028513297425610054,
        "next": 0.2851329742561005,
        "nice": 0.028513297425610054,
        "to": 0.08553989227683016,
        "have": 0.028513297425610054,
        "soon": 0.028513297425610054,
        "stretch": 0.11405318970244022,
        "later": 0.028513297425610054,
        "1": 0.05702659485122011,
        "core": 0.028513297425610054,
        "workflows": 0.028513297425610054,
        "x": 0.570265948512201,
        "docgen": 0.11405318970244022,
        "init": 0.028513297425610054,
        "initialize": 0.028513297425610054,
        "repos": 0.028513297425610054,
        "without": 0.05702659485122011,
        "docs": 0.11405318970244022,
        "update": 0.028513297425610054,
        "detect": 0.028513297425610054,
        "changes": 0.028513297425610054,
        "on": 0.028513297425610054,
        "commit": 0.028513297425610054,
        "pr": 0.028513297425610054,
        "and": 0.028513297425610054,
        "patch": 0.028513297425610054,
        "affected": 0.028513297425610054,
        "sections": 0.05702659485122011,
        "regenerate": 0.028513297425610054,
        "manual": 0.028513297425610054,
        "full": 0.028513297425610054,
        "partial": 0.028513297425610054,
        "regeneration": 0.028513297425610054,
        "dry": 0.05702659485122011,
        "run": 0.05702659485122011,
        "mode": 0.05702659485122011,
        "preview": 0.028513297425610054,
        "diffs": 0.028513297425610054,
        "writing": 0.028513297425610054,
        "service": 0.028513297425610054,
        "fastapi": 0.05702659485122011,
        "endpoints": 0.028513297425610054,
        "ci": 0.05702659485122011,
        "bots": 0.028513297425610054,
        "2": 0.028513297425610054,
        "repository": 0.028513297425610054,
        "scanning": 0.028513297425610054,
        "indexing": 0.028513297425610054,
        "walk": 0.028513297425610054,
        "filesystem": 0.028513297425610054,
        "with": 0.028513297425610054,
        "ignore": 0.028513297425610054,
        "rules": 0.028513297425610054,
        "gitignore": 0.028513297425610054,
        "yml": 0.028513297425610054,
        "build": 0.08553989227683016,
        "normalized": 0.028513297425610054,
        "manifest": 0.05702659485122011,
        "files": 0.05702659485122011,
        "roles": 0.028513297425610054,
        "src": 0.028513297425610054,
        "test": 0.05702659485122011,
        "config": 0.08553989227683016,
        "infra": 0.028513297425610054,
        "hash": 0.028513297425610054,
        "cache": 0.028513297425610054,
        "file": 0.028513297425610054,
        "metadata": 0.028513297425610054,
        "speed": 0.028513297425610054,
        "subsequent": 0.028513297425610054,
        "runs": 0.028513297425610054,
        "entrypoint": 0.05702659485122011,
        "detection": 0.05702659485122011,
        "e": 0.028513297425610054,
        "g": 0.028513297425610054,
        "main": 0.028513297425610054,
        "springbootapplication": 0.028513297425610054,
        "app": 0.028513297425610054,
        "monorepo": 0.05702659485122011,
        "module": 0.028513297425610054,
        "3": 0.028513297425610054,
        "analyzers": 0.14256648712805026,
        "plugin": 0.028513297425610054,
        "based": 0.028513297425610054,
        "language": 0.028513297425610054,
        "python": 0.028513297425610054,
        "java": 0.028513297425610054,
        "node": 0.028513297425610054,
        "js": 0.05702659485122011,
        "tier": 0.028513297425610054,
        "poetry": 0.028513297425610054,
        "setuptools": 0.028513297425610054,
        "maven": 0.028513297425610054,
        "gradle": 0.028513297425610054,
        "npm": 0.028513297425610054,
        "pnpm": 0.028513297425610054,
        "yarn": 0.028513297425610054,
        "dependency": 0.028513297425610054,
        "from": 0.028513297425610054,
        "pattern": 0.028513297425610054,
        "docker": 0.028513297425610054,
        "k8s": 0.028513297425610054,
        "layout": 0.028513297425610054,
        "tree": 0.028513297425610054,
        "sitter": 0.028513297425610054,
        "powered": 0.028513297425610054,
        "symbol": 0.028513297425610054,
        "extraction": 0.028513297425610054,
        "flagged": 0.028513297425610054,
        "4": 0.028513297425610054,
        "knowledge": 0.05702659485122011,
        "store": 0.028513297425610054,
        "rag": 0.028513297425610054,
        "local": 0.05702659485122011,
        "embedding": 0.028513297425610054,
        "model": 0.05702659485122011,
        "chunking": 0.028513297425610054,
        "strategy": 0.028513297425610054,
        "index": 0.028513297425610054,
        "top": 0.05702659485122011,
        "n": 0.028513297425610054,
        "source": 0.028513297425610054,
        "headers": 0.028513297425610054,
        "comments": 0.028513297425610054,
        "section": 0.14256648712805026,
        "scoped": 0.028513297425610054,
        "retrieval": 0.028513297425610054,
        "k": 0.028513297425610054,
        "per": 0.05702659485122011,
        "lightweight": 0.028513297425610054,
        "graph": 0.028513297425610054,
        "modules": 0.028513297425610054,
        "services": 0.028513297425610054,
        "signals": 0.028513297425610054,
        "5": 0.028513297425610054,
        "prompting": 0.028513297425610054,
        "templates": 0.08553989227683016,
        "jinja2": 0.028513297425610054,
        "intro": 0.028513297425610054,
        "features": 0.028513297425610054,
        "architecture": 0.05702659485122011,
        "quickstart": 0.028513297425610054,
        "deployment": 0.028513297425610054,
        "troubleshooting": 0.028513297425610054,
        "faq": 0.028513297425610054,
        "license": 0.028513297425610054,
        "guardrailed": 0.028513297425610054,
        "system": 0.028513297425610054,
        "prompt": 0.028513297425610054,
        "no": 0.028513297425610054,
        "speculation": 0.028513297425610054,
        "cite": 0.028513297425610054,
        "repo": 0.028513297425610054,
        "facts": 0.028513297425610054,
        "only": 0.028513297425610054,
        "token": 0.028513297425610054,
        "budgeting": 0.028513297425610054,
        "streaming": 0.028513297425610054,
        "by": 0.028513297425610054,
        "generation": 0.028513297425610054,
        "template": 0.028513297425610054,
        "override": 0.028513297425610054,
        "mechanism": 0.028513297425610054,
        "j2": 0.028513297425610054,
        "style": 0.028513297425610054,
        "presets": 0.028513297425610054,
        "concise": 0.028513297425610054,
        "vs": 0.028513297425610054,
        "comprehensive": 0.028513297425610054,
        "mermaid": 0.028513297425610054,
        "diagrams": 0.028513297425610054,
        "flow": 0.028513297425610054,
        "where": 0.028513297425610054,
        "appropriate": 0.028513297425610054,
        "6": 0.028513297425610054,
        "llm": 0.028513297425610054,
        "runner": 0.05702659485122011,
        "http": 0.028513297425610054,
        "adapter": 0.05702659485122011,
        "host": 0.028513297425610054,
        "container": 0.028513297425610054,
        "defaults": 0.028513297425610054,
        "env": 0.028513297425610054,
        "api": 0.028513297425610054,
        "key": 0.028513297425610054,
        "overrides": 0.028513297425610054,
        "llama": 0.028513297425610054,
        "cpp": 0.028513297425610054,
        "structured": 0.028513297425610054,
        "outputs": 0.028513297425610054,
        "tool": 0.028513297425610054,
        "use": 0.028513297425610054,
        "compatibility": 0.028513297425610054,
        "7": 0.028513297425610054,
        "post": 0.028513297425610054,
        "processing": 0.028513297425610054,
        "markdown": 0.028513297425610054,
        "lint": 0.028513297425610054,
        "heading": 0.028513297425610054,
        "hierarchy": 0.028513297425610054
      },
      "text": "# Intelligent README Generator \u2014 Feature Checklist > Status legend: \u2610 Not started \u00b7 \u25d0 In progress \u00b7 \u2714 Done > Scope tags: **[MVP]** required for proof\u2011of\u2011concept, **[NEXT]** nice\u2011to\u2011have soon, **[STRETCH]** later ## 1) Core Workflows - [x] **docgen init** \u2014 Initialize README for repos without docs **[MVP]** - [x] **docgen update** \u2014 Detect changes on commit/PR and patch affected sections **[MVP]** - [ ] **docgen regenerate** \u2014 Manual full/partial regeneration **[MVP]** - [x] Dry\u2011run mode (`--dry-run`) to preview diffs without writing **[NEXT]** - [ ] Service mode (FastAPI) endpoints for CI/bots **[STRETCH]** ## 2) Repository Scanning & Indexing - [x] Walk filesystem with ignore rules (`.gitignore`, `.docgen.yml`) **[MVP]** - [x] Build normalized manifest of files, roles (src/test/docs/config/infra) **[MVP]** - [x] Hash & cache file metadata to speed subsequent runs **[MVP]** - [x] Entrypoint detection (e.g., `main()`, `@SpringBootApplication`, FastAPI app) **[NEXT]** - [x] Monorepo module detection **[NEXT]** ## 3) Analyzers (Plugin\u2011based) - [x] Language analyzers: Python, Java, Node.js (Tier\u20111) **[MVP]** - [x] Build analyzers: Poetry/Setuptools, Maven/Gradle, npm/pnpm/yarn **[MVP]** - [x] Dependency analyzers from manifest files **[MVP]** - [x] Pattern analyzers: Docker/K8s, CI config, monorepo layout **[NEXT]** - [ ] Tree\u2011sitter powered symbol/entrypoint extraction (flagged) **[STRETCH]** ## 4) Knowledge Store (RAG) - [ ] Local embedding model + chunking strategy **[MVP]** - [ ] Index `README`, `/docs`, top N source headers & comments **[MVP]** - [ ] Section\u2011scoped retrieval (top\u2011k per section) **[MVP]** - [ ] Lightweight knowledge graph of modules/services/signals **[NEXT]** ## 5) Prompting & Templates - [x] Jinja2 templates per section (intro, features, architecture, quickstart, config, build/test, deployment, troubleshooting, FAQ, license) **[MVP]** - [x] Guardrailed system prompt (\u201cno speculation; cite repo facts only\u201d) **[MVP]** - [x] Token budgeting & streaming section-by-section generation **[MVP]** - [x] Template override mechanism (`docs/templates/*.j2`) **[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy,",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#1",
      "vector": {
        "next": 0.3907019005301633,
        "x": 0.5860528507952449,
        "style": 0.05581455721859476,
        "presets": 0.02790727860929738,
        "concise": 0.02790727860929738,
        "vs": 0.02790727860929738,
        "comprehensive": 0.02790727860929738,
        "mermaid": 0.02790727860929738,
        "js": 0.05581455721859476,
        "diagrams": 0.02790727860929738,
        "for": 0.11162911443718952,
        "architecture": 0.02790727860929738,
        "flow": 0.02790727860929738,
        "sections": 0.05581455721859476,
        "where": 0.02790727860929738,
        "appropriate": 0.02790727860929738,
        "6": 0.02790727860929738,
        "local": 0.05581455721859476,
        "llm": 0.05581455721859476,
        "runner": 0.05581455721859476,
        "model": 0.02790727860929738,
        "http": 0.02790727860929738,
        "adapter": 0.05581455721859476,
        "host": 0.02790727860929738,
        "container": 0.02790727860929738,
        "defaults": 0.05581455721859476,
        "env": 0.02790727860929738,
        "api": 0.02790727860929738,
        "key": 0.02790727860929738,
        "overrides": 0.02790727860929738,
        "mvp": 0.47442373635805546,
        "llama": 0.02790727860929738,
        "cpp": 0.02790727860929738,
        "structured": 0.02790727860929738,
        "outputs": 0.05581455721859476,
        "tool": 0.02790727860929738,
        "use": 0.02790727860929738,
        "compatibility": 0.02790727860929738,
        "stretch": 0.05581455721859476,
        "7": 0.02790727860929738,
        "post": 0.02790727860929738,
        "processing": 0.02790727860929738,
        "markdown": 0.02790727860929738,
        "lint": 0.05581455721859476,
        "heading": 0.02790727860929738,
        "hierarchy": 0.02790727860929738,
        "code": 0.05581455721859476,
        "fences": 0.02790727860929738,
        "line": 0.02790727860929738,
        "length": 0.02790727860929738,
        "auto": 0.05581455721859476,
        "toc": 0.02790727860929738,
        "level": 0.02790727860929738,
        "3": 0.02790727860929738,
        "badges": 0.02790727860929738,
        "build": 0.05581455721859476,
        "coverage": 0.05581455721859476,
        "license": 0.02790727860929738,
        "with": 0.05581455721859476,
        "safe": 0.05581455721859476,
        "link": 0.05581455721859476,
        "validator": 0.02790727860929738,
        "relative": 0.02790727860929738,
        "absolute": 0.02790727860929738,
        "managed": 0.02790727860929738,
        "markers": 0.02790727860929738,
        "idempotent": 0.02790727860929738,
        "patching": 0.02790727860929738,
        "docgen": 0.08372183582789214,
        "begin": 0.02790727860929738,
        "end": 0.02790727860929738,
        "8": 0.02790727860929738,
        "git": 0.02790727860929738,
        "integration": 0.05581455721859476,
        "diff": 0.05581455721859476,
        "detection": 0.02790727860929738,
        "map": 0.02790727860929738,
        "changed": 0.05581455721859476,
        "files": 0.05581455721859476,
        "impacted": 0.02790727860929738,
        "branch": 0.02790727860929738,
        "pr": 0.05581455721859476,
        "creation": 0.02790727860929738,
        "summary": 0.02790727860929738,
        "of": 0.02790727860929738,
        "readme": 0.11162911443718952,
        "deltas": 0.02790727860929738,
        "commit": 0.02790727860929738,
        "mode": 0.02790727860929738,
        "init": 0.02790727860929738,
        "or": 0.02790727860929738,
        "small": 0.02790727860929738,
        "changes": 0.05581455721859476,
        "configurable": 0.02790727860929738,
        "prevent": 0.02790727860929738,
        "loops": 0.02790727860929738,
        "on": 0.05581455721859476,
        "only": 0.08372183582789214,
        "9": 0.02790727860929738,
        "configuration": 0.02790727860929738,
        "parse": 0.02790727860929738,
        "yml": 0.02790727860929738,
        "analyzers": 0.02790727860929738,
        "publish": 0.02790727860929738,
        "path": 0.02790727860929738,
        "exclusions": 0.02790727860929738,
        "watched_globs": 0.02790727860929738,
        "ci": 0.08372183582789214,
        "triggers": 0.02790727860929738,
        "per": 0.05581455721859476,
        "section": 0.02790727860929738,
        "off": 0.02790727860929738,
        "toggles": 0.02790727860929738,
        "and": 0.08372183582789214,
        "titles": 0.02790727860929738,
        "10": 0.02790727860929738,
        "github": 0.02790727860929738,
        "actions": 0.02790727860929738,
        "example": 0.02790727860929738,
        "workflow": 0.02790727860929738,
        "gitlab": 0.02790727860929738,
        "bitbucket": 0.02790727860929738,
        "pipelines": 0.02790727860929738,
        "samples": 0.02790727860929738,
        "labeling": 0.02790727860929738,
        "docs": 0.02790727860929738,
        "update": 0.02790727860929738,
        "behavior": 0.02790727860929738,
        "11": 0.02790727860929738,
        "security": 0.02790727860929738,
        "privacy": 0.02790727860929738,
        "models": 0.02790727860929738,
        "never": 0.02790727860929738,
        "exfiltrate": 0.02790727860929738,
        "respect": 0.02790727860929738,
        "gitignore": 0.02790727860929738,
        "exclude": 0.02790727860929738,
        "large": 0.02790727860929738,
        "binaries": 0.02790727860929738,
        "secrets": 0.02790727860929738,
        "optional": 0.02790727860929738,
        "simple": 0.02790727860929738,
        "secret": 0.02790727860929738,
        "scanner": 0.02790727860929738,
        "gate": 0.02790727860929738,
        "12": 0.02790727860929738,
        "multi": 0.02790727860929738,
        "language": 0.02790727860929738,
        "project": 0.02790727860929738,
        "types": 0.02790727860929738,
        "tier": 0.05581455721859476,
        "1": 0.02790727860929738,
        "python": 0.02790727860929738,
        "poetry": 0.02790727860929738,
        "setuptools": 0.02790727860929738,
        "java": 0.02790727860929738,
        "maven": 0.02790727860929738,
        "gradle": 0.02790727860929738,
        "spring": 0.02790727860929738,
        "boot": 0.02790727860929738,
        "node": 0.02790727860929738,
        "npm": 0.02790727860929738,
        "pnpm": 0.02790727860929738,
        "express": 0.02790727860929738,
        "2": 0.02790727860929738,
        "go": 0.02790727860929738,
        "rust": 0.02790727860929738,
        "ruby": 0.02790727860929738,
        "php": 0.02790727860929738,
        "framework": 0.02790727860929738,
        "aware": 0.02790727860929738,
        "quickstart": 0.02790727860929738,
        "commands": 0.02790727860929738,
        "system": 0.02790727860929738,
        "13": 0.02790727860929738,
        "quality": 0.02790727860929738,
        "gates": 0.02790727860929738,
        "evaluation": 0.02790727860929738,
        "command": 0.02790727860929738,
        "validation": 0.02790727860929738,
        "existence": 0.02790727860929738,
        "checks": 0.05581455721859476,
        "no": 0.02790727860929738,
        "hallucination": 0.02790727860929738,
        "reject": 0.02790727860929738,
        "facts": 0.02790727860929738,
        "not": 0.02790727860929738,
        "in": 0.02790727860929738,
        "signals": 0.02790727860929738,
        "rag": 0.05581455721859476,
        "scorecard": 0.02790727860929738,
        "buildability": 0.02790727860929738,
        "validity": 0.02790727860929738,
        "alignment": 0.02790727860929738,
        "14": 0.02790727860929738,
        "performance": 0.02790727860929738,
        "caching": 0.02790727860929738,
        "persist": 0.02790727860929738,
        "analyzer": 0.02790727860929738,
        "embeddings": 0.02790727860929738,
        "under": 0.02790727860929738,
        "incremental": 0.02790727860929738,
        "refresh": 0.02790727860929738,
        "15": 0.02790727860929738,
        "error": 0.02790727860929738,
        "handling": 0.02790727860929738,
        "ux": 0.02790727860929738,
        "fail": 0.02790727860929738,
        "stub": 0.02790727860929738,
        "generation": 0.02790727860929738,
        "when": 0.02790727860929738,
        "evidence": 0.02790727860929738
      },
      "text": "**[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy, code fences, line length **[MVP]** - [x] Auto ToC (\u2264 level 3) **[MVP]** - [x] Badges (build, coverage, license) with safe defaults **[NEXT]** - [x] Link validator (relative/absolute) **[NEXT]** - [x] Managed markers for idempotent patching (`<!-- docgen:begin:end -->`) **[MVP]** ## 8) Git Integration - [x] Diff detection (map changed files \u2192 impacted sections) **[MVP]** - [x] Branch + PR creation with summary of README deltas **[MVP]** - [x] Commit mode for init or small changes (configurable) **[NEXT]** - [ ] Prevent loops on README\u2011only changes **[MVP]** ## 9) Configuration - [x] Parse `.docgen.yml` (LLM, readme style, analyzers, publish) **[MVP]** - [x] Path exclusions & `watched_globs` for CI triggers **[MVP]** - [ ] Per-section on/off toggles and titles **[NEXT]** ## 10) CI Integration - [x] GitHub Actions example workflow **[MVP]** - [ ] GitLab CI and Bitbucket Pipelines samples **[NEXT]** - [x] Labeling (`docs:auto`) and PR update behavior **[NEXT]** ## 11) Security & Privacy - [x] Local-only models; never exfiltrate code **[MVP]** - [ ] Respect `.gitignore`; exclude large binaries/secrets **[MVP]** - [ ] Optional simple secret scanner gate **[NEXT]** ## 12) Multi\u2011Language & Project Types - [ ] Tier\u20111: Python (Poetry/Setuptools), Java (Maven/Gradle/Spring Boot), Node.js (npm/pnpm/Express/Next) **[MVP]** - [ ] Tier\u20112: Go, Rust, Ruby, PHP **[STRETCH]** - [x] Framework\u2011aware quickstart commands per build system **[MVP]** ## 13) Quality Gates & Evaluation - [ ] Command validation (existence checks) **[MVP]** - [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#2",
      "vector": {
        "no": 0.07018624063435965,
        "hallucination": 0.07018624063435965,
        "checks": 0.07018624063435965,
        "reject": 0.07018624063435965,
        "facts": 0.07018624063435965,
        "not": 0.07018624063435965,
        "in": 0.07018624063435965,
        "signals": 0.07018624063435965,
        "rag": 0.1403724812687193,
        "mvp": 0.42111744380615784,
        "x": 0.49130368444051753,
        "readme": 0.1403724812687193,
        "scorecard": 0.07018624063435965,
        "coverage": 0.07018624063435965,
        "buildability": 0.07018624063435965,
        "link": 0.07018624063435965,
        "validity": 0.07018624063435965,
        "diff": 0.07018624063435965,
        "alignment": 0.07018624063435965,
        "lint": 0.1403724812687193,
        "next": 0.21055872190307892,
        "14": 0.07018624063435965,
        "performance": 0.07018624063435965,
        "caching": 0.07018624063435965,
        "persist": 0.07018624063435965,
        "analyzer": 0.1403724812687193,
        "outputs": 0.07018624063435965,
        "embeddings": 0.07018624063435965,
        "under": 0.07018624063435965,
        "docgen": 0.07018624063435965,
        "incremental": 0.07018624063435965,
        "refresh": 0.07018624063435965,
        "changed": 0.07018624063435965,
        "files": 0.07018624063435965,
        "only": 0.07018624063435965,
        "15": 0.07018624063435965,
        "error": 0.07018624063435965,
        "handling": 0.07018624063435965,
        "ux": 0.07018624063435965,
        "fail": 0.07018624063435965,
        "safe": 0.07018624063435965,
        "stub": 0.07018624063435965,
        "generation": 0.07018624063435965,
        "when": 0.07018624063435965,
        "evidence": 0.07018624063435965,
        "is": 0.07018624063435965,
        "insufficient": 0.07018624063435965,
        "clear": 0.07018624063435965,
        "run": 0.07018624063435965,
        "logs": 0.07018624063435965,
        "pr": 0.07018624063435965,
        "body": 0.07018624063435965,
        "with": 0.07018624063435965,
        "rationale": 0.07018624063435965,
        "sections": 0.07018624063435965,
        "updated": 0.07018624063435965,
        "because": 0.07018624063435965,
        "helpful": 0.07018624063435965,
        "cli": 0.07018624063435965,
        "errors": 0.07018624063435965,
        "and": 0.1403724812687193,
        "verbose": 0.07018624063435965,
        "flag": 0.07018624063435965,
        "works": 0.07018624063435965,
        "pre": 0.07018624063435965,
        "post": 0.07018624063435965,
        "subcommand": 0.07018624063435965,
        "16": 0.07018624063435965,
        "extensibility": 0.07018624063435965,
        "abc": 0.07018624063435965,
        "plugin": 0.07018624063435965,
        "discovery": 0.07018624063435965,
        "template": 0.07018624063435965,
        "packs": 0.07018624063435965,
        "org": 0.07018624063435965,
        "style": 0.1403724812687193,
        "definition": 0.07018624063435965,
        "of": 0.07018624063435965,
        "done": 0.07018624063435965,
        "per": 0.07018624063435965,
        "section": 0.07018624063435965,
        "passing": 0.07018624063435965,
        "unit": 0.07018624063435965,
        "integration": 0.07018624063435965,
        "tests": 0.07018624063435965,
        "for": 0.07018624063435965,
        "core": 0.07018624063435965,
        "logic": 0.07018624063435965,
        "golden": 0.07018624063435965,
        "regression": 0.07018624063435965,
        "test": 0.07018624063435965,
        "s": 0.07018624063435965,
        "meets": 0.07018624063435965,
        "requirements": 0.07018624063435965
      },
      "text": "- [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence is insufficient **[MVP]** - [ ] Clear run logs + PR body with rationale (\u201csections updated because\u2026\u201d) **[MVP]** - [x] Helpful CLI errors and `--verbose` flag (works pre/post subcommand) **[MVP]** ## 16) Extensibility - [x] Analyzer ABC and plugin discovery **[MVP]** - [x] Template packs (org\u2011style) **[NEXT]** --- ### Definition of Done (per section) - [ ] Passing unit & integration tests for core logic - [ ] Golden README regression test(s) - [ ] Meets lint/style requirements",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_order.md#0",
      "vector": {
        "docgen": 0.23979625973207228,
        "development": 0.029974532466509034,
        "roadmap": 0.029974532466509034,
        "phase": 0.20982172726556325,
        "0": 0.029974532466509034,
        "bootstrap": 0.029974532466509034,
        "the": 0.029974532466509034,
        "skeleton": 0.05994906493301807,
        "1": 0.3596943895981084,
        "project": 0.029974532466509034,
        "cli": 0.05994906493301807,
        "config": 0.11989812986603614,
        "loader": 0.029974532466509034,
        "yml": 0.029974532466509034,
        "models": 0.029974532466509034,
        "covers": 0.47959251946414455,
        "commands": 0.029974532466509034,
        "scaffolding": 0.029974532466509034,
        "9": 0.05994906493301807,
        "parse": 0.029974532466509034,
        "16": 0.05994906493301807,
        "analyzer": 0.05994906493301807,
        "abc": 0.05994906493301807,
        "2": 0.23979625973207228,
        "plugin": 0.05994906493301807,
        "discovery": 0.05994906493301807,
        "init": 0.11989812986603614,
        "happy": 0.029974532466509034,
        "path": 0.05994906493301807,
        "single": 0.029974532466509034,
        "repo": 0.11989812986603614,
        "local": 0.11989812986603614,
        "scanner": 0.029974532466509034,
        "manifest": 0.05994906493301807,
        "roles": 0.029974532466509034,
        "hashing": 0.029974532466509034,
        "ignores": 0.05994906493301807,
        "walk": 0.029974532466509034,
        "fs": 0.029974532466509034,
        "cache": 0.029974532466509034,
        "tier": 0.029974532466509034,
        "analyzers": 0.0899235973995271,
        "python": 0.029974532466509034,
        "java": 0.029974532466509034,
        "node": 0.029974532466509034,
        "build": 0.05994906493301807,
        "dependency": 0.029974532466509034,
        "3": 0.0899235973995271,
        "language": 0.05994906493301807,
        "deps": 0.029974532466509034,
        "templates": 0.05994906493301807,
        "prompt": 0.05994906493301807,
        "builder": 0.029974532466509034,
        "section": 0.14987266233254518,
        "by": 0.029974532466509034,
        "guardrailed": 0.029974532466509034,
        "system": 0.029974532466509034,
        "5": 0.11989812986603614,
        "jinja2": 0.029974532466509034,
        "guardrails": 0.029974532466509034,
        "token": 0.029974532466509034,
        "budget": 0.029974532466509034,
        "4": 0.0899235973995271,
        "llm": 0.029974532466509034,
        "runner": 0.029974532466509034,
        "ollama": 0.05994906493301807,
        "adapter": 0.029974532466509034,
        "6": 0.0899235973995271,
        "post": 0.029974532466509034,
        "processor": 0.029974532466509034,
        "managed": 0.029974532466509034,
        "markers": 0.0899235973995271,
        "toc": 0.05994906493301807,
        "markdown": 0.029974532466509034,
        "lint": 0.05994906493301807,
        "7": 0.029974532466509034,
        "git": 0.05994906493301807,
        "publisher": 0.05994906493301807,
        "commit": 0.05994906493301807,
        "mode": 0.05994906493301807,
        "for": 0.05994906493301807,
        "only": 0.0899235973995271,
        "8": 0.0899235973995271,
        "end": 0.05994906493301807,
        "to": 0.029974532466509034,
        "milestone": 0.0899235973995271,
        "generates": 0.029974532466509034,
        "a": 0.0899235973995271,
        "clean": 0.029974532466509034,
        "readme": 0.05994906493301807,
        "with": 0.0899235973995271,
        "no": 0.0899235973995271,
        "docs": 0.05994906493301807,
        "update": 0.11989812986603614,
        "on": 0.029974532466509034,
        "change": 0.05994906493301807,
        "pr": 0.14987266233254518,
        "workflow": 0.029974532466509034,
        "diff": 0.05994906493301807,
        "detection": 0.05994906493301807,
        "mapping": 0.05994906493301807,
        "patching": 0.029974532466509034,
        "inside": 0.029974532466509034,
        "prevent": 0.029974532466509034,
        "loops": 0.029974532466509034,
        "branch": 0.05994906493301807,
        "delta": 0.029974532466509034,
        "summary": 0.029974532466509034,
        "10": 0.05994906493301807,
        "labeling": 0.029974532466509034,
        "later": 0.029974532466509034,
        "opens": 0.029974532466509034,
        "updating": 0.029974532466509034,
        "impacted": 0.029974532466509034,
        "sections": 0.029974532466509034,
        "minimal": 0.029974532466509034,
        "rag": 0.05994906493301807,
        "accuracy": 0.029974532466509034,
        "lite": 0.029974532466509034,
        "embed": 0.029974532466509034,
        "top": 0.029974532466509034,
        "n": 0.029974532466509034,
        "source": 0.029974532466509034,
        "headers": 0.029974532466509034,
        "scoped": 0.029974532466509034,
        "retrieval": 0.05994906493301807,
        "embedding": 0.029974532466509034,
        "index": 0.029974532466509034,
        "sources": 0.029974532466509034,
        "per": 0.029974532466509034,
        "hallucination": 0.05994906493301807,
        "command": 0.05994906493301807,
        "existence": 0.029974532466509034,
        "checks": 0.029974532466509034,
        "13": 0.029974532466509034,
        "validation": 0.029974532466509034,
        "outputs": 0.029974532466509034,
        "grounded": 0.029974532466509034,
        "in": 0.029974532466509034,
        "facts": 0.029974532466509034,
        "targeted": 0.029974532466509034,
        "context": 0.029974532466509034,
        "hardening": 0.029974532466509034,
        "dx": 0.029974532466509034,
        "error": 0.029974532466509034,
        "handling": 0.029974532466509034,
        "clear": 0.029974532466509034,
        "logs": 0.05994906493301807,
        "verbose": 0.029974532466509034,
        "fail": 0.05994906493301807,
        "safe": 0.05994906493301807,
        "stubs": 0.029974532466509034,
        "15": 0.029974532466509034,
        "ux": 0.029974532466509034,
        "security": 0.029974532466509034,
        "gitignore": 0.029974532466509034,
        "respect": 0.029974532466509034,
        "excludes": 0.05994906493301807,
        "enforcement": 0.029974532466509034,
        "11": 0.029974532466509034,
        "privacy": 0.029974532466509034,
        "ci": 0.029974532466509034,
        "integration": 0.029974532466509034,
        "polish": 0.029974532466509034,
        "github": 0.029974532466509034,
        "actions": 0.05994906493301807,
        "sample": 0.029974532466509034,
        "push": 0.029974532466509034,
        "trigger": 0.029974532466509034,
        "calling": 0.029974532466509034,
        "gh": 0.029974532466509034,
        "refinements": 0.029974532466509034,
        "watched": 0.029974532466509034,
        "globs": 0.029974532466509034,
        "style": 0.05994906493301807,
        "preset": 0.029974532466509034,
        "concise": 0.029974532466509034,
        "comprehensive": 0.029974532466509034,
        "watched_globs": 0.029974532466509034,
        "presets": 0.029974532466509034,
        "multi": 0.029974532466509034,
        "breadth": 0.029974532466509034,
        "framework": 0.029974532466509034,
        "smarts": 0.029974532466509034,
        "entrypoint": 0.029974532466509034,
        "main": 0.029974532466509034,
        "spring": 0.029974532466509034,
        "boot": 0.029974532466509034,
        "fastapi": 0.029974532466509034
      },
      "text": "# DocGen Development Roadmap ## Phase 0 \u2014 Bootstrap the skeleton 1. **Project skeleton + CLI (`docgen`) + config loader (`.docgen.yml`) + models** * Covers: 1 (commands scaffolding), 9 (parse config), 16 (Analyzer ABC) 2. **Analyzer plugin ABC & discovery** * Covers: 16 (plugin discovery) ## Phase 1 \u2014 \"Init\" happy-path (single repo, local) 1. **Repo scanner & manifest (roles, hashing, ignores)** * Covers: 2 (walk FS, manifest, cache, ignores) 2. **Tier-1 analyzers (Python, Java, Node) + build analyzers + dependency analyzers** * Covers: 3 (language/build/deps) 3. **Templates + prompt builder (section-by-section) + guardrailed system prompt** * Covers: 5 (Jinja2 templates, guardrails, token budget) 4. **Local LLM runner (Ollama adapter)** * Covers: 6 (Ollama) 5. **Post-processor: managed markers, ToC, markdown lint** * Covers: 7 (markers, ToC, lint) 6. **Git publisher: commit mode (for init only)** * Covers: 8 (commit mode), 1 (`docgen init` end-to-end) \u2705 **Milestone**: `docgen init` generates a clean README for a repo with no docs. ## Phase 2 \u2014 Update-on-change (PR workflow) 1. **Diff detection + change\u2192section mapping + patching inside markers** * Covers: 8 (diff mapping, prevent loops), 1 (`docgen update`) 2. **Git publisher: branch + PR with delta summary** * Covers: 8 (branch/PR), 10 (labeling later) \u2705 **Milestone**: `docgen update` opens a PR updating only impacted sections. ## Phase 3 \u2014 Minimal RAG & accuracy 1. **RAG Lite: embed README/docs/top N source headers; section-scoped retrieval** * Covers: 4 (local embedding, index sources, per-section retrieval) 2. **No-hallucination & command existence checks** * Covers: 13 (command validation, no-hallucination) \u2705 **Milestone**: outputs grounded in repo facts with targeted context. ## Phase 4 \u2014 Hardening & DX 1. **Error handling, clear logs, `--verbose`, fail-safe stubs** * Covers: 15 (fail-safe, logs, CLI UX) 2. **Security: .gitignore respect, path excludes, local-only enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI)",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/feature_order.md#1",
      "vector": {
        "enforcement": 0.04252432555625623,
        "covers": 0.4252432555625623,
        "11": 0.04252432555625623,
        "privacy": 0.04252432555625623,
        "excludes": 0.04252432555625623,
        "phase": 0.17009730222502492,
        "5": 0.12757297666876868,
        "ci": 0.12757297666876868,
        "integration": 0.04252432555625623,
        "config": 0.12757297666876868,
        "polish": 0.08504865111251246,
        "1": 0.25514595333753737,
        "github": 0.04252432555625623,
        "actions": 0.08504865111251246,
        "sample": 0.04252432555625623,
        "push": 0.04252432555625623,
        "pr": 0.17009730222502492,
        "trigger": 0.04252432555625623,
        "calling": 0.04252432555625623,
        "docgen": 0.12757297666876868,
        "update": 0.04252432555625623,
        "10": 0.08504865111251246,
        "gh": 0.04252432555625623,
        "2": 0.21262162778128116,
        "refinements": 0.04252432555625623,
        "watched": 0.04252432555625623,
        "globs": 0.04252432555625623,
        "style": 0.08504865111251246,
        "preset": 0.04252432555625623,
        "concise": 0.04252432555625623,
        "comprehensive": 0.04252432555625623,
        "9": 0.04252432555625623,
        "watched_globs": 0.04252432555625623,
        "presets": 0.04252432555625623,
        "6": 0.08504865111251246,
        "multi": 0.04252432555625623,
        "language": 0.08504865111251246,
        "breadth": 0.08504865111251246,
        "framework": 0.17009730222502492,
        "smarts": 0.04252432555625623,
        "entrypoint": 0.04252432555625623,
        "detection": 0.04252432555625623,
        "main": 0.04252432555625623,
        "spring": 0.04252432555625623,
        "boot": 0.04252432555625623,
        "fastapi": 0.08504865111251246,
        "aware": 0.08504865111251246,
        "quick": 0.04252432555625623,
        "start": 0.04252432555625623,
        "entrypoints": 0.04252432555625623,
        "12": 0.04252432555625623,
        "commands": 0.04252432555625623,
        "pattern": 0.08504865111251246,
        "analyzers": 0.08504865111251246,
        "docker": 0.04252432555625623,
        "k8s": 0.04252432555625623,
        "monorepo": 0.04252432555625623,
        "layout": 0.04252432555625623,
        "3": 0.12757297666876868,
        "7": 0.12757297666876868,
        "quality": 0.08504865111251246,
        "gates": 0.08504865111251246,
        "performance": 0.08504865111251246,
        "readme": 0.08504865111251246,
        "scorecard": 0.08504865111251246,
        "link": 0.08504865111251246,
        "validator": 0.08504865111251246,
        "badges": 0.08504865111251246,
        "13": 0.04252432555625623,
        "artifact": 0.04252432555625623,
        "embedding": 0.04252432555625623,
        "caching": 0.08504865111251246,
        "in": 0.04252432555625623,
        "incremental": 0.08504865111251246,
        "rag": 0.12757297666876868,
        "refresh": 0.08504865111251246,
        "14": 0.04252432555625623,
        "persist": 0.04252432555625623,
        "outputs": 0.04252432555625623,
        "8": 0.04252432555625623,
        "nice": 0.04252432555625623,
        "to": 0.12757297666876868,
        "have": 0.04252432555625623,
        "stretch": 0.04252432555625623,
        "dry": 0.08504865111251246,
        "run": 0.08504865111251246,
        "mode": 0.12757297666876868,
        "labeling": 0.08504865111251246,
        "updates": 0.08504865111251246,
        "commit": 0.08504865111251246,
        "policy": 0.04252432555625623,
        "tuning": 0.04252432555625623,
        "template": 0.12757297666876868,
        "overrides": 0.04252432555625623,
        "docs": 0.04252432555625623,
        "templates": 0.04252432555625623,
        "j2": 0.04252432555625623,
        "org": 0.04252432555625623,
        "packs": 0.08504865111251246,
        "override": 0.04252432555625623,
        "16": 0.04252432555625623,
        "service": 0.08504865111251246,
        "llama": 0.08504865111251246,
        "cpp": 0.08504865111251246,
        "adapter": 0.04252432555625623,
        "tree": 0.08504865111251246,
        "sitter": 0.08504865111251246,
        "extraction": 0.04252432555625623,
        "why": 0.04252432555625623,
        "this": 0.04252432555625623,
        "order": 0.04252432555625623,
        "fastest": 0.04252432555625623,
        "path": 0.04252432555625623,
        "value": 0.04252432555625623,
        "get": 0.04252432555625623,
        "init": 0.04252432555625623,
        "producing": 0.04252432555625623,
        "a": 0.04252432555625623,
        "solid": 0.04252432555625623,
        "before": 0.04252432555625623,
        "adding": 0.04252432555625623,
        "diffing": 0.04252432555625623,
        "contain": 0.04252432555625623,
        "risk": 0.04252432555625623,
        "early": 0.04252432555625623,
        "section": 0.04252432555625623,
        "markers": 0.04252432555625623,
        "lint": 0.04252432555625623,
        "and": 0.12757297666876868,
        "publishing": 0.04252432555625623,
        "ensure": 0.04252432555625623,
        "safe": 0.04252432555625623,
        "idempotent": 0.04252432555625623,
        "edits": 0.04252432555625623,
        "accuracy": 0.04252432555625623,
        "next": 0.04252432555625623,
        "add": 0.04252432555625623,
        "validation": 0.04252432555625623,
        "avoid": 0.04252432555625623,
        "hallucinations": 0.04252432555625623,
        "once": 0.04252432555625623,
        "the": 0.08504865111251246,
        "pipeline": 0.04252432555625623,
        "works": 0.04252432555625623,
        "scale": 0.04252432555625623,
        "later": 0.04252432555625623,
        "only": 0.04252432555625623,
        "after": 0.04252432555625623,
        "core": 0.04252432555625623,
        "loop": 0.04252432555625623,
        "is": 0.04252432555625623,
        "robust": 0.04252432555625623,
        "do": 0.04252432555625623,
        "we": 0.04252432555625623,
        "widen": 0.04252432555625623,
        "coverage": 0.04252432555625623,
        "last": 0.04252432555625623,
        "refine": 0.04252432555625623,
        "dev": 0.04252432555625623,
        "experience": 0.04252432555625623
      },
      "text": "enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI) + framework-aware Quick Start** * Covers: 2 (entrypoints), 12 (framework-aware commands) 2. **Pattern analyzers (Docker/K8s, CI config, monorepo layout)** * Covers: 3 (pattern analyzers) ## Phase 7 \u2014 Quality gates & performance 1. **README scorecard + link validator + badges** * Covers: 13 (scorecard), 7 (link validator), 7 (badges) 2. **Artifact & embedding caching in `.docgen/` + incremental RAG refresh** * Covers: 14 (persist outputs, incremental refresh) ## Phase 8 \u2014 \"Nice to have\" & stretch 1. **Dry-run mode, PR labeling/updates, commit/PR policy tuning** * Covers: 1 (dry-run), 10 (labeling/PR updates) 2. **Template overrides (`docs/templates/*.j2`) & org template packs** * Covers: 5 (override), 16 (template packs) 3. **Service mode (FastAPI), llama.cpp adapter, tree-sitter extraction** * Covers: 1 (service mode), 6 (llama.cpp), 3 (tree-sitter) ## Why this order * **Fastest path to value**: get `docgen init` producing a solid README before adding diffing/RAG. * **Contain risk early**: section markers, lint, and commit publishing ensure safe/idempotent edits. * **Accuracy next**: add RAG + validation to avoid hallucinations once the pipeline works. * **Scale breadth later**: only after the core loop is robust do we widen language/framework coverage. * **Polish last**: CI, caching, and quality gates refine dev experience and performance.",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/spec.md#0",
      "vector": {
        "intelligent": 0.04393747751637468,
        "readme": 0.17574991006549873,
        "generator": 0.04393747751637468,
        "architecture": 0.08787495503274936,
        "spec": 0.04393747751637468,
        "python": 0.08787495503274936,
        "local": 0.13181243254912403,
        "llm": 0.13181243254912403,
        "1": 0.08787495503274936,
        "purpose": 0.04393747751637468,
        "scope": 0.04393747751637468,
        "build": 0.17574991006549873,
        "a": 0.26362486509824806,
        "based": 0.04393747751637468,
        "system": 0.04393747751637468,
        "that": 0.04393747751637468,
        "analyzes": 0.04393747751637468,
        "git": 0.26362486509824806,
        "repository": 0.04393747751637468,
        "structure": 0.04393747751637468,
        "code": 0.04393747751637468,
        "dependencies": 0.04393747751637468,
        "then": 0.04393747751637468,
        "generates": 0.04393747751637468,
        "and": 0.2196873875818734,
        "maintains": 0.04393747751637468,
        "high": 0.08787495503274936,
        "quality": 0.04393747751637468,
        "md": 0.04393747751637468,
        "using": 0.04393747751637468,
        "it": 0.04393747751637468,
        "initializes": 0.04393747751637468,
        "repos": 0.04393747751637468,
        "with": 0.08787495503274936,
        "no": 0.04393747751637468,
        "docs": 0.17574991006549873,
        "keeps": 0.04393747751637468,
        "up": 0.04393747751637468,
        "to": 0.2196873875818734,
        "date": 0.04393747751637468,
        "on": 0.04393747751637468,
        "commits": 0.04393747751637468,
        "prs": 0.04393747751637468,
        "supports": 0.08787495503274936,
        "multiple": 0.04393747751637468,
        "languages": 0.04393747751637468,
        "project": 0.04393747751637468,
        "types": 0.04393747751637468,
        "via": 0.04393747751637468,
        "analyzers": 0.08787495503274936,
        "non": 0.04393747751637468,
        "goals": 0.04393747751637468,
        "for": 0.08787495503274936,
        "the": 0.04393747751637468,
        "poc": 0.04393747751637468,
        "multi": 0.04393747751637468,
        "repo": 0.2196873875818734,
        "orchestration": 0.04393747751637468,
        "full": 0.08787495503274936,
        "website": 0.04393747751637468,
        "api": 0.04393747751637468,
        "reference": 0.04393747751637468,
        "extraction": 0.04393747751637468,
        "beyond": 0.04393747751637468,
        "summaries": 0.04393747751637468,
        "cloud": 0.04393747751637468,
        "llms": 0.04393747751637468,
        "2": 0.08787495503274936,
        "level": 0.04393747751637468,
        "at": 0.04393747751637468,
        "glance": 0.04393747751637468,
        "events": 0.04393747751637468,
        "event": 0.04393747751637468,
        "sources": 0.04393747751637468,
        "cli": 0.04393747751637468,
        "commands": 0.04393747751637468,
        "hooks": 0.04393747751637468,
        "webhooks": 0.04393747751637468,
        "ci": 0.08787495503274936,
        "commit": 0.08787495503274936,
        "pr": 0.08787495503274936,
        "orchestr": 0.04393747751637468,
        "async": 0.04393747751637468,
        "task": 0.04393747751637468,
        "graph": 0.08787495503274936,
        "scanner": 0.08787495503274936,
        "doc": 0.04393747751637468,
        "store": 0.04393747751637468,
        "indexer": 0.08787495503274936,
        "language": 0.08787495503274936,
        "artifacts": 0.08787495503274936,
        "fs": 0.04393747751637468,
        "deps": 0.04393747751637468,
        "cache": 0.04393747751637468,
        "versions": 0.04393747751637468,
        "knowledge": 0.04393747751637468,
        "embeddings": 0.04393747751637468,
        "prompt": 0.04393747751637468,
        "builder": 0.04393747751637468,
        "templates": 0.04393747751637468,
        "rag": 0.04393747751637468,
        "runner": 0.04393747751637468,
        "llama": 0.04393747751637468,
        "cpp": 0.04393747751637468,
        "ollama": 0.04393747751637468,
        "post": 0.04393747751637468,
        "processor": 0.04393747751637468,
        "lint": 0.04393747751637468,
        "toc": 0.04393747751637468,
        "badges": 0.04393747751637468,
        "links": 0.04393747751637468,
        "publisher": 0.04393747751637468,
        "branch": 0.04393747751637468,
        "3": 0.13181243254912403,
        "components": 0.04393747751637468,
        "responsibilities": 0.04393747751637468,
        "orchestrator": 0.04393747751637468,
        "coordinates": 0.04393747751637468,
        "end": 0.08787495503274936,
        "pipelines": 0.04393747751637468,
        "init": 0.04393747751637468,
        "update": 0.08787495503274936,
        "regenerate": 0.08787495503274936,
        "computes": 0.04393747751637468,
        "change": 0.04393747751637468,
        "impact": 0.04393747751637468,
        "from": 0.04393747751637468,
        "diff": 0.04393747751637468,
        "decides": 0.04393747751637468,
        "whether": 0.04393747751637468,
        "or": 0.04393747751637468,
        "patch": 0.04393747751637468,
        "sections": 0.04393747751637468,
        "schedules": 0.04393747751637468,
        "tasks": 0.04393747751637468,
        "caches": 0.04393747751637468,
        "intermediate": 0.04393747751637468,
        "results": 0.04393747751637468,
        "emits": 0.04393747751637468,
        "structured": 0.04393747751637468,
        "logs": 0.04393747751637468,
        "info": 0.04393747751637468,
        "by": 0.04393747751637468,
        "default": 0.04393747751637468,
        "debug": 0.04393747751637468,
        "verbose": 0.04393747751637468,
        "respects": 0.04393747751637468,
        "docgen": 0.13181243254912403,
        "yml": 0.04393747751637468,
        "watched_globs": 0.04393747751637468,
        "skip": 0.04393747751637468,
        "unrelated": 0.04393747751637468,
        "diffs": 0.04393747751637468,
        "substitutes": 0.04393747751637468,
        "fail": 0.04393747751637468,
        "safe": 0.04393747751637468,
        "stubs": 0.04393747751637468,
        "when": 0.04393747751637468,
        "generation": 0.04393747751637468,
        "fails": 0.04393747751637468,
        "dry": 0.08787495503274936,
        "run": 0.13181243254912403,
        "previews": 0.04393747751637468,
        "records": 0.04393747751637468,
        "scorecards": 0.04393747751637468,
        "each": 0.04393747751637468,
        "under": 0.04393747751637468,
        "walks": 0.04393747751637468,
        "builds": 0.04393747751637468,
        "normalized": 0.04393747751637468,
        "manifest": 0.04393747751637468,
        "files": 0.08787495503274936,
        "sizes": 0.04393747751637468,
        "tags": 0.04393747751637468,
        "path": 0.04393747751637468,
        "roles": 0.04393747751637468,
        "src": 0.04393747751637468,
        "test": 0.08787495503274936,
        "examples": 0.04393747751637468,
        "dependency": 0.04393747751637468,
        "manifests": 0.04393747751637468,
        "e": 0.04393747751637468,
        "g": 0.04393747751637468,
        "pom": 0.04393747751637468,
        "xml": 0.04393747751637468,
        "gradle": 0.04393747751637468,
        "package": 0.04393747751637468,
        "json": 0.13181243254912403,
        "requirements": 0.04393747751637468,
        "txt": 0.04393747751637468,
        "pyproject": 0.04393747751637468,
        "toml": 0.08787495503274936,
        "go": 0.04393747751637468,
        "mod": 0.04393747751637468,
        "cargo": 0.04393747751637468,
        "gemfile": 0.04393747751637468,
        "composer": 0.04393747751637468,
        "entrypoints": 0.04393747751637468,
        "clis": 0.04393747751637468,
        "services": 0.04393747751637468,
        "coverage": 0.04393747751637468,
        "if": 0.04393747751637468,
        "available": 0.04393747751637468,
        "stores": 0.04393747751637468,
        "per": 0.04393747751637468,
        "index": 0.04393747751637468,
        "speed": 0.04393747751637468,
        "future": 0.04393747751637468
      },
      "text": "# Intelligent README Generator \u2014 Architecture & Spec (Python, Local LLM) ## 1) Purpose & Scope Build a Python-based system that **analyzes a Git repository** (structure, code, dependencies), then **generates and maintains a high-quality README.md** using a **local LLM**. It initializes repos with no docs and **keeps docs up to date** on commits/PRs. Supports **multiple languages/project types** via analyzers. Non-goals (for the POC): multi-repo orchestration, full website docs, API reference extraction (beyond README summaries), cloud LLMs. --- ## 2) High-Level Architecture (at a glance) ``` \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 Git Events \u2502 Event Sources \u2502 CLI commands, Git hooks, Webhooks/CI (commit/PR) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Orchestr \u2502 (Async task graph) \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Repo Scanner\u2502 \u2502 Analyzers \u2502 \u2502 Doc Store \u2502 \u2502 + Indexer \u2502 \u2502 (Language, \u2502 \u2502 (Artifacts, \u2502 \u2502 (Git, FS) \u2502 \u2502 Build, Deps) \u2502 \u2502 Cache, \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 Versions) \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 Knowledge Graph \u2502 \u2502 \u2502 \u2502 & Embeddings \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Prompt Builder \u2502 (Templates + RAG) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Local LLM Runner \u2502 (llama.cpp/Ollama) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 Post-Processor \u2502 (lint, ToC, badges, links) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Git Publisher \u2502 (branch/PR/commit) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 ``` --- ## 3) Components & Responsibilities ### 3.1 Orchestrator * Coordinates end-to-end pipelines (init, update, regenerate). * Computes *change impact* from Git diff; decides whether to regenerate full README or patch sections. * Schedules tasks and caches intermediate results. * Emits structured logs (info by default, debug with `--verbose`), respects `.docgen.yml` `ci.watched_globs` to skip unrelated diffs, and substitutes fail-safe stubs when generation fails. * Supports dry-run previews (`docgen update --dry-run`) and records scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#1",
      "vector": {
        "scorecards": 0.03721614637823934,
        "for": 0.18608073189119673,
        "each": 0.07443229275647868,
        "run": 0.07443229275647868,
        "under": 0.07443229275647868,
        "docgen": 0.11164843913471803,
        "3": 0.22329687826943606,
        "2": 0.03721614637823934,
        "repo": 0.18608073189119673,
        "scanner": 0.03721614637823934,
        "indexer": 0.03721614637823934,
        "walks": 0.03721614637823934,
        "builds": 0.03721614637823934,
        "normalized": 0.03721614637823934,
        "manifest": 0.03721614637823934,
        "files": 0.11164843913471803,
        "sizes": 0.03721614637823934,
        "language": 0.07443229275647868,
        "tags": 0.03721614637823934,
        "path": 0.03721614637823934,
        "roles": 0.03721614637823934,
        "src": 0.03721614637823934,
        "test": 0.11164843913471803,
        "docs": 0.11164843913471803,
        "examples": 0.03721614637823934,
        "build": 0.14886458551295736,
        "dependency": 0.07443229275647868,
        "manifests": 0.03721614637823934,
        "e": 0.11164843913471803,
        "g": 0.11164843913471803,
        "pom": 0.03721614637823934,
        "xml": 0.03721614637823934,
        "gradle": 0.07443229275647868,
        "package": 0.03721614637823934,
        "json": 0.11164843913471803,
        "requirements": 0.03721614637823934,
        "txt": 0.03721614637823934,
        "pyproject": 0.03721614637823934,
        "toml": 0.07443229275647868,
        "go": 0.11164843913471803,
        "mod": 0.03721614637823934,
        "cargo": 0.07443229275647868,
        "gemfile": 0.03721614637823934,
        "composer": 0.03721614637823934,
        "entrypoints": 0.11164843913471803,
        "clis": 0.03721614637823934,
        "services": 0.11164843913471803,
        "coverage": 0.03721614637823934,
        "artifacts": 0.03721614637823934,
        "if": 0.03721614637823934,
        "available": 0.03721614637823934,
        "stores": 0.03721614637823934,
        "a": 0.03721614637823934,
        "per": 0.07443229275647868,
        "index": 0.03721614637823934,
        "to": 0.11164843913471803,
        "speed": 0.03721614637823934,
        "future": 0.03721614637823934,
        "runs": 0.03721614637823934,
        "analyzers": 0.22329687826943606,
        "plugin": 0.03721614637823934,
        "based": 0.03721614637823934,
        "detect": 0.03721614637823934,
        "idioms": 0.03721614637823934,
        "frameworks": 0.03721614637823934,
        "spring": 0.07443229275647868,
        "boot": 0.07443229275647868,
        "fastapi": 0.07443229275647868,
        "node": 0.07443229275647868,
        "express": 0.03721614637823934,
        "react": 0.03721614637823934,
        "next": 0.03721614637823934,
        "js": 0.03721614637823934,
        "http": 0.14886458551295736,
        "rust": 0.03721614637823934,
        "bin": 0.03721614637823934,
        "lib": 0.03721614637823934,
        "maven": 0.03721614637823934,
        "setuptools": 0.03721614637823934,
        "poetry": 0.03721614637823934,
        "npm": 0.03721614637823934,
        "pnpm": 0.03721614637823934,
        "yarn": 0.03721614637823934,
        "extract": 0.03721614637823934,
        "top": 0.07443229275647868,
        "level": 0.03721614637823934,
        "libs": 0.03721614637823934,
        "notable": 0.03721614637823934,
        "transitive": 0.03721614637823934,
        "categories": 0.03721614637823934,
        "entrypoint": 0.03721614637823934,
        "infer": 0.03721614637823934,
        "commands": 0.03721614637823934,
        "django": 0.03721614637823934,
        "scripts": 0.07443229275647868,
        "pattern": 0.03721614637823934,
        "monorepo": 0.03721614637823934,
        "layout": 0.03721614637823934,
        "ci": 0.03721614637823934,
        "cd": 0.03721614637823934,
        "containerization": 0.03721614637823934,
        "k8s": 0.03721614637823934,
        "heuristics": 0.03721614637823934,
        "structure": 0.03721614637823934,
        "analyzer": 0.07443229275647868,
        "module": 0.03721614637823934,
        "topology": 0.03721614637823934,
        "detected": 0.11164843913471803,
        "entities": 0.07443229275647868,
        "dtos": 0.03721614637823934,
        "api": 0.11164843913471803,
        "endpoint": 0.07443229275647868,
        "sequences": 0.03721614637823934,
        "service": 0.03721614637823934,
        "interactions": 0.03721614637823934,
        "returns": 0.03721614637823934,
        "signals": 0.07443229275647868,
        "key": 0.07443229275647868,
        "facts": 0.03721614637823934,
        "the": 0.11164843913471803,
        "knowledge": 0.07443229275647868,
        "graph": 0.11164843913471803,
        "4": 0.03721614637823934,
        "embeddings": 0.07443229275647868,
        "rag": 0.03721614637823934,
        "of": 0.07443229275647868,
        "modules": 0.03721614637823934,
        "packages": 0.03721614637823934,
        "configs": 0.03721614637823934,
        "tests": 0.03721614637823934,
        "lightweight": 0.03721614637823934,
        "embedding": 0.03721614637823934,
        "store": 0.03721614637823934,
        "faiss": 0.03721614637823934,
        "in": 0.03721614637823934,
        "memory": 0.03721614637823934,
        "chunks": 0.03721614637823934,
        "code": 0.03721614637823934,
        "comments": 0.03721614637823934,
        "readme": 0.07443229275647868,
        "fragments": 0.03721614637823934,
        "changelog": 0.03721614637823934,
        "issues": 0.03721614637823934,
        "optional": 0.03721614637823934,
        "commit": 0.03721614637823934,
        "messages": 0.07443229275647868,
        "provides": 0.03721614637823934,
        "context": 0.07443229275647868,
        "retrieval": 0.03721614637823934,
        "prompt": 0.07443229275647868,
        "building": 0.03721614637823934,
        "k": 0.03721614637823934,
        "by": 0.03721614637823934,
        "section": 0.11164843913471803,
        "and": 0.2605130246476754,
        "persists": 0.03721614637823934,
        "refreshing": 0.03721614637823934,
        "only": 0.03721614637823934,
        "whose": 0.03721614637823934,
        "hashes": 0.03721614637823934,
        "changed": 0.03721614637823934,
        "5": 0.03721614637823934,
        "builder": 0.03721614637823934,
        "aware": 0.03721614637823934,
        "jinja2": 0.03721614637823934,
        "templates": 0.03721614637823934,
        "with": 0.11164843913471803,
        "guardrails": 0.03721614637823934,
        "project": 0.03721614637823934,
        "intro": 0.03721614637823934,
        "features": 0.03721614637823934,
        "architecture": 0.03721614637823934,
        "overview": 0.03721614637823934,
        "quick": 0.07443229275647868,
        "start": 0.07443229275647868,
        "configuration": 0.03721614637823934,
        "deployment": 0.03721614637823934,
        "troubleshooting": 0.03721614637823934,
        "faq": 0.03721614637823934,
        "roadmap": 0.03721614637823934,
        "contribution": 0.03721614637823934,
        "license": 0.03721614637823934,
        "badges": 0.03721614637823934,
        "dynamically": 0.03721614637823934,
        "injects": 0.07443229275647868,
        "retrieved": 0.03721614637823934,
        "produces": 0.03721614637823934,
        "llm": 0.07443229275647868,
        "ready": 0.03721614637823934,
        "structured": 0.07443229275647868,
        "prompts": 0.03721614637823934,
        "system": 0.03721614637823934,
        "user": 0.03721614637823934,
        "token": 0.03721614637823934,
        "budgets": 0.03721614637823934,
        "honours": 0.03721614637823934,
        "style": 0.07443229275647868,
        "presets": 0.03721614637823934,
        "concise": 0.03721614637823934,
        "trims": 0.03721614637823934,
        "list": 0.03721614637823934,
        "heavy": 0.03721614637823934,
        "sections": 0.03721614637823934,
        "comprehensive": 0.03721614637823934,
        "keeps": 0.03721614637823934,
        "full": 0.03721614637823934,
        "detail": 0.03721614637823934,
        "infrastructure": 0.03721614637823934,
        "patterns": 0.03721614637823934,
        "into": 0.03721614637823934,
        "guidance": 0.03721614637823934,
        "uvicorn": 0.03721614637823934,
        "docker": 0.11164843913471803,
        "compose": 0.03721614637823934,
        "up": 0.03721614637823934,
        "generates": 0.03721614637823934,
        "mermaid": 0.03721614637823934,
        "sequence": 0.03721614637823934,
        "diagrams": 0.03721614637823934,
        "highlighting": 0.03721614637823934,
        "request": 0.03721614637823934,
        "flow": 0.03721614637823934,
        "across": 0.03721614637823934,
        "when": 0.03721614637823934,
        "endpoints": 0.03721614637823934,
        "are": 0.03721614637823934,
        "6": 0.03721614637823934,
        "local": 0.03721614637823934,
        "runner": 0.11164843913471803,
        "pluggable": 0.03721614637823934,
        "runtime": 0.03721614637823934,
        "that": 0.03721614637823934,
        "prefers": 0.03721614637823934,
        "model": 0.07443229275647868,
        "host": 0.03721614637823934,
        "localhost": 0.03721614637823934,
        "12434": 0.03721614637823934,
        "engines": 0.07443229275647868,
        "v1": 0.07443229275647868,
        "container": 0.03721614637823934,
        "internal": 0.03721614637823934,
        "environment": 0.03721614637823934,
        "overrides": 0.03721614637823934,
        "an": 0.03721614637823934,
        "ollama": 0.03721614637823934,
        "cli": 0.03721614637823934,
        "fallback": 0.03721614637823934,
        "defaults": 0.03721614637823934,
        "ai": 0.03721614637823934,
        "smollm2": 0.03721614637823934,
        "360m": 0.03721614637823934,
        "q4_k_m": 0.03721614637823934,
        "but": 0.03721614637823934,
        "respects": 0.03721614637823934,
        "yml": 0.03721614637823934,
        "openai": 0.03721614637823934,
        "compatible": 0.03721614637823934,
        "env": 0.03721614637823934,
        "vars": 0.03721614637823934,
        "alternate": 0.03721614637823934,
        "weights": 0.03721614637823934,
        "keys": 0.03721614637823934,
        "supports": 0.03721614637823934,
        "function": 0.03721614637823934,
        "calling": 0.03721614637823934,
        "outputs": 0.03721614637823934
      },
      "text": "scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future runs. ### 3.3 Analyzers (Plugin-based) * **Language analyzers** (detect idioms, entrypoints, frameworks: Spring Boot, FastAPI, Node/Express, React, Next.js, Go HTTP, Rust bin/lib). * **Build analyzers** (Maven/Gradle, setuptools/Poetry, npm/pnpm/yarn, Go, Cargo). * **Dependency analyzers** (extract top-level libs & notable transitive categories). * **Entrypoint analyzers** (infer run commands for FastAPI, Django, Spring Boot, Node scripts). * **Pattern analyzers** (monorepo layout, CI/CD, containerization/K8s heuristics). * **Structure analyzer** (module topology, detected entities/DTOs, API endpoint sequences, service interactions). * Each analyzer returns **Signals** (key facts) to the knowledge graph. ### 3.4 Knowledge Graph & Embeddings (RAG) * Graph of Repo entities: modules, packages, services, scripts, configs, tests, docs. * Lightweight embedding store (e.g., `faiss`/in-memory) of **chunks**: code comments, README fragments, `docs/`, `CHANGELOG`, issues (optional), commit messages. * Provides **context retrieval** for prompt building (top-k by section) and persists embeddings under `.docgen/`, refreshing only the files whose hashes changed. ### 3.5 Prompt Builder * **Section-aware** Jinja2 templates with **guardrails**: * Project intro, key features, architecture overview, quick start, configuration, build/test, deployment, troubleshooting, FAQ, roadmap, contribution, license, badges. * Dynamically injects repo signals and retrieved context per section. * Produces **LLM-ready structured prompts** (system + user messages) with token budgets and honours `readme.style` presets (`concise` trims list-heavy sections, `comprehensive` keeps full detail). * Injects detected entrypoints and infrastructure patterns into Quick Start guidance (e.g., `uvicorn ...`, `docker compose up`). * Generates Mermaid sequence diagrams highlighting request flow across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#2",
      "vector": {
        "across": 0.028060676663315687,
        "services": 0.028060676663315687,
        "when": 0.08418202998994706,
        "api": 0.056121353326631374,
        "endpoints": 0.028060676663315687,
        "are": 0.056121353326631374,
        "detected": 0.056121353326631374,
        "3": 0.11224270665326275,
        "6": 0.028060676663315687,
        "local": 0.056121353326631374,
        "llm": 0.028060676663315687,
        "runner": 0.08418202998994706,
        "pluggable": 0.028060676663315687,
        "runtime": 0.028060676663315687,
        "that": 0.028060676663315687,
        "prefers": 0.028060676663315687,
        "the": 0.028060676663315687,
        "docker": 0.056121353326631374,
        "model": 0.08418202998994706,
        "http": 0.08418202998994706,
        "endpoint": 0.028060676663315687,
        "host": 0.028060676663315687,
        "localhost": 0.028060676663315687,
        "12434": 0.028060676663315687,
        "engines": 0.056121353326631374,
        "v1": 0.056121353326631374,
        "container": 0.028060676663315687,
        "internal": 0.08418202998994706,
        "with": 0.08418202998994706,
        "environment": 0.028060676663315687,
        "overrides": 0.028060676663315687,
        "and": 0.36478879662310393,
        "an": 0.028060676663315687,
        "ollama": 0.028060676663315687,
        "cli": 0.056121353326631374,
        "fallback": 0.028060676663315687,
        "defaults": 0.056121353326631374,
        "to": 0.08418202998994706,
        "ai": 0.028060676663315687,
        "smollm2": 0.028060676663315687,
        "360m": 0.028060676663315687,
        "q4_k_m": 0.028060676663315687,
        "but": 0.028060676663315687,
        "respects": 0.028060676663315687,
        "docgen": 0.11224270665326275,
        "yml": 0.028060676663315687,
        "openai": 0.028060676663315687,
        "compatible": 0.028060676663315687,
        "env": 0.028060676663315687,
        "vars": 0.028060676663315687,
        "for": 0.08418202998994706,
        "alternate": 0.028060676663315687,
        "weights": 0.028060676663315687,
        "keys": 0.028060676663315687,
        "supports": 0.056121353326631374,
        "function": 0.028060676663315687,
        "calling": 0.028060676663315687,
        "style": 0.056121353326631374,
        "structured": 0.028060676663315687,
        "outputs": 0.056121353326631374,
        "available": 0.028060676663315687,
        "streaming": 0.028060676663315687,
        "decode": 0.028060676663315687,
        "stop": 0.028060676663315687,
        "tokens": 0.028060676663315687,
        "section": 0.056121353326631374,
        "by": 0.056121353326631374,
        "generation": 0.028060676663315687,
        "stay": 0.056121353326631374,
        "within": 0.028060676663315687,
        "context": 0.028060676663315687,
        "limits": 0.028060676663315687,
        "validates": 0.056121353326631374,
        "configuration": 0.028060676663315687,
        "ensure": 0.028060676663315687,
        "runners": 0.028060676663315687,
        "loopback": 0.028060676663315687,
        "hosts": 0.028060676663315687,
        "only": 0.056121353326631374,
        "7": 0.028060676663315687,
        "post": 0.056121353326631374,
        "processor": 0.028060676663315687,
        "lints": 0.028060676663315687,
        "markdown": 0.028060676663315687,
        "builds": 0.028060676663315687,
        "toc": 0.028060676663315687,
        "adds": 0.056121353326631374,
        "shields": 0.028060676663315687,
        "badges": 0.056121353326631374,
        "normalizes": 0.028060676663315687,
        "heading": 0.028060676663315687,
        "hierarchy": 0.028060676663315687,
        "enforces": 0.028060676663315687,
        "guide": 0.028060676663315687,
        "readme": 0.08418202998994706,
        "contract": 0.028060676663315687,
        "required": 0.056121353326631374,
        "sections": 0.11224270665326275,
        "links": 0.028060676663315687,
        "relative": 0.028060676663315687,
        "absolute": 0.028060676663315687,
        "code": 0.028060676663315687,
        "block": 0.028060676663315687,
        "languages": 0.028060676663315687,
        "line": 0.028060676663315687,
        "length": 0.028060676663315687,
        "computes": 0.028060676663315687,
        "diff": 0.028060676663315687,
        "aware": 0.028060676663315687,
        "updates": 0.056121353326631374,
        "modifies": 0.028060676663315687,
        "impacted": 0.028060676663315687,
        "changes": 0.056121353326631374,
        "persists": 0.028060676663315687,
        "a": 0.08418202998994706,
        "scorecard": 0.056121353326631374,
        "json": 0.056121353326631374,
        "capturing": 0.028060676663315687,
        "coverage": 0.056121353326631374,
        "quick": 0.028060676663315687,
        "start": 0.028060676663315687,
        "health": 0.028060676663315687,
        "link": 0.056121353326631374,
        "results": 0.028060676663315687,
        "build": 0.056121353326631374,
        "license": 0.028060676663315687,
        "safe": 0.028060676663315687,
        "reports": 0.028060676663315687,
        "warnings": 0.028060676663315687,
        "during": 0.028060676663315687,
        "processing": 0.028060676663315687,
        "8": 0.028060676663315687,
        "doc": 0.028060676663315687,
        "store": 0.028060676663315687,
        "artifacts": 0.028060676663315687,
        "versions": 0.028060676663315687,
        "keeps": 0.028060676663315687,
        "generated": 0.028060676663315687,
        "drafts": 0.028060676663315687,
        "logs": 0.028060676663315687,
        "prompts": 0.028060676663315687,
        "inputs": 0.028060676663315687,
        "diffs": 0.028060676663315687,
        "under": 0.028060676663315687,
        "per": 0.028060676663315687,
        "repo": 0.028060676663315687,
        "rollback": 0.028060676663315687,
        "regression": 0.028060676663315687,
        "testing": 0.028060676663315687,
        "via": 0.028060676663315687,
        "golden": 0.028060676663315687,
        "readmes": 0.028060676663315687,
        "stores": 0.028060676663315687,
        "embedding": 0.028060676663315687,
        "cache": 0.028060676663315687,
        "embeddings": 0.028060676663315687,
        "scorecards": 0.028060676663315687,
        "so": 0.028060676663315687,
        "subsequent": 0.028060676663315687,
        "runs": 0.028060676663315687,
        "incremental": 0.028060676663315687,
        "9": 0.028060676663315687,
        "git": 0.028060676663315687,
        "publisher": 0.028060676663315687,
        "creates": 0.028060676663315687,
        "branch": 0.028060676663315687,
        "e": 0.056121353326631374,
        "g": 0.056121353326631374,
        "update": 0.028060676663315687,
        "yyyymmdd": 0.028060676663315687,
        "pr": 0.056121353326631374,
        "body": 0.028060676663315687,
        "explains": 0.028060676663315687,
        "what": 0.028060676663315687,
        "were": 0.028060676663315687,
        "updated": 0.028060676663315687,
        "can": 0.028060676663315687,
        "commit": 0.028060676663315687,
        "directly": 0.028060676663315687,
        "configurable": 0.028060676663315687,
        "on": 0.028060676663315687,
        "init": 0.028060676663315687,
        "empty": 0.028060676663315687,
        "repos": 0.028060676663315687,
        "applies": 0.028060676663315687,
        "labels": 0.028060676663315687,
        "docs": 0.056121353326631374,
        "auto": 0.028060676663315687,
        "existing": 0.028060676663315687,
        "prs": 0.028060676663315687,
        "configured": 0.028060676663315687,
        "4": 0.028060676663315687,
        "data": 0.028060676663315687,
        "python": 0.056121353326631374,
        "pydantic": 0.028060676663315687,
        "dataclasses": 0.056121353326631374,
        "from": 0.056121353326631374,
        "import": 0.056121353326631374,
        "dataclass": 0.2244854133065255,
        "typing": 0.028060676663315687,
        "list": 0.11224270665326275,
        "dict": 0.14030338331657843,
        "optional": 0.056121353326631374,
        "class": 0.1964247366432098,
        "filemeta": 0.056121353326631374,
        "path": 0.028060676663315687,
        "str": 0.5892742099296294,
        "size": 0.028060676663315687,
        "int": 0.028060676663315687,
        "language": 0.028060676663315687,
        "role": 0.028060676663315687,
        "src": 0.028060676663315687,
        "test": 0.056121353326631374,
        "config": 0.028060676663315687,
        "script": 0.028060676663315687,
        "infra": 0.028060676663315687,
        "other": 0.028060676663315687,
        "hash": 0.028060676663315687,
        "repomanifest": 0.056121353326631374,
        "root": 0.028060676663315687,
        "files": 0.028060676663315687,
        "detectors": 0.028060676663315687,
        "build_system": 0.028060676663315687,
        "maven": 0.028060676663315687,
        "framework": 0.056121353326631374,
        "spring": 0.028060676663315687,
        "boot": 0.028060676663315687,
        "dependency_files": 0.028060676663315687,
        "pom": 0.028060676663315687,
        "xml": 0.028060676663315687,
        "requirements": 0.028060676663315687,
        "txt": 0.028060676663315687,
        "signal": 0.056121353326631374,
        "kind": 0.028060676663315687,
        "service": 0.028060676663315687,
        "db": 0.028060676663315687,
        "queue": 0.028060676663315687,
        "dep": 0.028060676663315687,
        "entrypoint": 0.028060676663315687,
        "name": 0.028060676663315687,
        "detail": 0.028060676663315687,
        "analysisresult": 0.028060676663315687,
        "manifest": 0.028060676663315687,
        "signals": 0.028060676663315687,
        "embedding_index_path": 0.028060676663315687,
        "sectionspec": 0.028060676663315687,
        "key": 0.028060676663315687,
        "intro": 0.028060676663315687,
        "features": 0.028060676663315687,
        "arch": 0.028060676663315687,
        "quickstart": 0.028060676663315687,
        "bool": 0.028060676663315687,
        "sources": 0.028060676663315687,
        "preferred": 0.028060676663315687,
        "retrieval": 0.028060676663315687,
        "tags": 0.028060676663315687,
        "template_name": 0.028060676663315687,
        "readmedraft": 0.028060676663315687,
        "full_markdown": 0.028060676663315687,
        "updateplan": 0.028060676663315687,
        "strategy": 0.028060676663315687
      },
      "text": "across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs when available. * Streaming decode with stop tokens; **section-by-section** generation to stay within context limits. * Validates configuration to ensure runners stay local (loopback/`*.internal` hosts only). ### 3.7 Post-Processor * Lints Markdown, builds ToC, adds shields/badges, normalizes heading hierarchy. * Enforces internal style guide and **README contract** (required sections). * Validates links (relative/absolute), code block languages, and line length. * Computes **diff-aware updates**: only modifies sections impacted by changes. * Persists a README scorecard (`.docgen/scorecard.json`) capturing coverage, quick start health, and link results. * Adds build/coverage/license badges with safe defaults and reports link warnings during post-processing. ### 3.8 Doc Store (Artifacts & Versions) * Keeps generated drafts, logs, prompts, inputs/outputs, and diffs under `.docgen/` per repo. * Supports rollback and regression testing via \u201cgolden\u201d READMEs. * Stores embedding cache (`embeddings.json`) and scorecards so subsequent runs are incremental. ### 3.9 Git Publisher * Creates a branch (e.g., `docgen/readme-update-YYYYMMDD`) and a PR. * PR body explains detected changes and what sections were updated. * Can commit directly (configurable) on init for empty repos. * Applies labels (e.g., `docs:auto`) and updates existing PRs when configured. --- ## 4) Data Model (Python `pydantic`/`dataclasses`) ```python from dataclasses import dataclass from typing import List, Dict, Optional @dataclass class FileMeta: path: str size: int language: Optional[str] role: str # src|test|docs|config|build|script|infra|other hash: str @dataclass class RepoManifest: root: str files: List[FileMeta] detectors: Dict[str, str] # {\"build_system\": \"maven\", \"framework\":\"spring-boot\", ...} dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str #",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#3",
      "vector": {
        "dependency_files": 0.03280893574623933,
        "dict": 0.13123574298495733,
        "str": 0.5577519076860686,
        "pom": 0.098426807238718,
        "xml": 0.098426807238718,
        "requirements": 0.06561787149247866,
        "txt": 0.06561787149247866,
        "dataclass": 0.16404467873119666,
        "class": 0.16404467873119666,
        "signal": 0.06561787149247866,
        "kind": 0.03280893574623933,
        "framework": 0.03280893574623933,
        "service": 0.03280893574623933,
        "cli": 0.03280893574623933,
        "db": 0.03280893574623933,
        "queue": 0.03280893574623933,
        "dep": 0.03280893574623933,
        "entrypoint": 0.03280893574623933,
        "test": 0.06561787149247866,
        "name": 0.03280893574623933,
        "detail": 0.03280893574623933,
        "analysisresult": 0.03280893574623933,
        "manifest": 0.06561787149247866,
        "repomanifest": 0.03280893574623933,
        "signals": 0.06561787149247866,
        "list": 0.098426807238718,
        "embedding_index_path": 0.03280893574623933,
        "sectionspec": 0.03280893574623933,
        "key": 0.03280893574623933,
        "intro": 0.06561787149247866,
        "features": 0.098426807238718,
        "arch": 0.03280893574623933,
        "quickstart": 0.06561787149247866,
        "required": 0.03280893574623933,
        "bool": 0.03280893574623933,
        "sources": 0.03280893574623933,
        "preferred": 0.03280893574623933,
        "retrieval": 0.06561787149247866,
        "tags": 0.03280893574623933,
        "template_name": 0.03280893574623933,
        "readmedraft": 0.03280893574623933,
        "sections": 0.13123574298495733,
        "full_markdown": 0.03280893574623933,
        "updateplan": 0.06561787149247866,
        "strategy": 0.03280893574623933,
        "full": 0.03280893574623933,
        "patch": 0.06561787149247866,
        "changed_sections": 0.03280893574623933,
        "reasons": 0.03280893574623933,
        "section": 0.06561787149247866,
        "why": 0.03280893574623933,
        "5": 0.098426807238718,
        "configuration": 0.06561787149247866,
        "docgen": 0.196853614477436,
        "yml": 0.06561787149247866,
        "at": 0.03280893574623933,
        "repo": 0.06561787149247866,
        "root": 0.06561787149247866,
        "yaml": 0.03280893574623933,
        "llm": 0.03280893574623933,
        "runner": 0.03280893574623933,
        "ollama": 0.03280893574623933,
        "or": 0.06561787149247866,
        "llama": 0.03280893574623933,
        "cpp": 0.03280893574623933,
        "model": 0.03280893574623933,
        "llama3": 0.03280893574623933,
        "8b": 0.03280893574623933,
        "instruct": 0.03280893574623933,
        "example": 0.03280893574623933,
        "local": 0.03280893574623933,
        "only": 0.098426807238718,
        "max_tokens": 0.03280893574623933,
        "2048": 0.03280893574623933,
        "temperature": 0.03280893574623933,
        "0": 0.03280893574623933,
        "2": 0.13123574298495733,
        "readme": 0.196853614477436,
        "style": 0.03280893574623933,
        "concise": 0.03280893574623933,
        "comprehensive": 0.03280893574623933,
        "template_pack": 0.06561787149247866,
        "enterprise": 0.03280893574623933,
        "optional": 0.03280893574623933,
        "bundle": 0.03280893574623933,
        "shipped": 0.03280893574623933,
        "with": 0.06561787149247866,
        "required_sections": 0.03280893574623933,
        "architecture": 0.06561787149247866,
        "build_and_test": 0.03280893574623933,
        "deployment": 0.06561787149247866,
        "troubleshooting": 0.03280893574623933,
        "faq": 0.03280893574623933,
        "license": 0.03280893574623933,
        "publish": 0.06561787149247866,
        "mode": 0.03280893574623933,
        "pr": 0.13123574298495733,
        "commit": 0.098426807238718,
        "dry": 0.03280893574623933,
        "run": 0.03280893574623933,
        "branch_prefix": 0.03280893574623933,
        "labels": 0.03280893574623933,
        "docs": 0.06561787149247866,
        "auto": 0.03280893574623933,
        "update_existing": 0.03280893574623933,
        "true": 0.03280893574623933,
        "refresh": 0.03280893574623933,
        "an": 0.03280893574623933,
        "existing": 0.03280893574623933,
        "instead": 0.03280893574623933,
        "of": 0.03280893574623933,
        "opening": 0.03280893574623933,
        "a": 0.06561787149247866,
        "new": 0.03280893574623933,
        "one": 0.03280893574623933,
        "analyzers": 0.03280893574623933,
        "enabled": 0.03280893574623933,
        "language": 0.03280893574623933,
        "build": 0.196853614477436,
        "dependencies": 0.03280893574623933,
        "patterns": 0.03280893574623933,
        "exclude_paths": 0.03280893574623933,
        "git": 0.06561787149247866,
        "node_modules": 0.03280893574623933,
        "dist": 0.03280893574623933,
        "ci": 0.098426807238718,
        "update": 0.06561787149247866,
        "if": 0.098426807238718,
        "these": 0.03280893574623933,
        "paths": 0.03280893574623933,
        "change": 0.03280893574623933,
        "watched_globs": 0.06561787149247866,
        "src": 0.06561787149247866,
        "app": 0.03280893574623933,
        "cmd": 0.03280893574623933,
        "gradle": 0.06561787149247866,
        "package": 0.03280893574623933,
        "json": 0.03280893574623933,
        "pyproject": 0.03280893574623933,
        "toml": 0.03280893574623933,
        "dockerfile": 0.06561787149247866,
        "no": 0.06561787149247866,
        "templates_dir": 0.03280893574623933,
        "is": 0.03280893574623933,
        "provided": 0.03280893574623933,
        "automatically": 0.03280893574623933,
        "picks": 0.03280893574623933,
        "up": 0.03280893574623933,
        "templates": 0.06561787149247866,
        "bundles": 0.03280893574623933,
        "in": 0.06561787149247866,
        "the": 0.03280893574623933,
        "repository": 0.03280893574623933,
        "and": 0.03280893574623933,
        "supports": 0.03280893574623933,
        "built": 0.03280893574623933,
        "template": 0.03280893574623933,
        "packs": 0.03280893574623933,
        "via": 0.06561787149247866,
        "6": 0.098426807238718,
        "workflows": 0.03280893574623933,
        "1": 0.098426807238718,
        "initialization": 0.03280893574623933,
        "without": 0.03280893574623933,
        "scan": 0.03280893574623933,
        "analyze": 0.03280893574623933,
        "embeddings": 0.03280893574623933,
        "prompt": 0.03280893574623933,
        "default": 0.03280893574623933,
        "include": 0.03280893574623933,
        "getting": 0.03280893574623933,
        "started": 0.03280893574623933,
        "suggestions": 0.03280893574623933,
        "3": 0.06561787149247866,
        "generate": 0.06561787149247866,
        "sequentially": 0.03280893574623933,
        "streaming": 0.03280893574623933,
        "4": 0.06561787149247866,
        "post": 0.03280893574623933,
        "process": 0.03280893574623933,
        "toc": 0.03280893574623933,
        "badges": 0.03280893574623933,
        "status": 0.03280893574623933,
        "placeholder": 0.03280893574623933,
        "lint": 0.03280893574623933,
        "direct": 0.03280893574623933,
        "md": 0.03280893574623933,
        "artifacts": 0.03280893574623933,
        "on": 0.03280893574623933,
        "detect": 0.03280893574623933,
        "changes": 0.03280893574623933,
        "diff": 0.03280893574623933,
        "map": 0.03280893574623933,
        "files": 0.03280893574623933,
        "to": 0.098426807238718,
        "using": 0.03280893574623933,
        "rules": 0.03280893574623933,
        "matrix": 0.03280893574623933,
        "quick": 0.03280893574623933,
        "start": 0.03280893574623933,
        "k8s": 0.03280893574623933,
        "entrypoints": 0.03280893574623933,
        "decide": 0.03280893574623933,
        "impacted": 0.03280893574623933,
        "regenerate": 0.03280893574623933,
        "those": 0.03280893574623933,
        "skip": 0.03280893574623933,
        "changed": 0.03280893574623933,
        "file": 0.03280893574623933,
        "matches": 0.03280893574623933,
        "allows": 0.03280893574623933,
        "avoid": 0.03280893574623933,
        "unnecessary": 0.03280893574623933,
        "runs": 0.03280893574623933,
        "rag": 0.03280893574623933,
        "fetch": 0.03280893574623933,
        "top": 0.03280893574623933,
        "k": 0.03280893574623933,
        "chunks": 0.03280893574623933,
        "relevant": 0.03280893574623933,
        "each": 0.03280893574623933
      },
      "text": "dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str # \"full\"|\"patch\" changed_sections: List[str] reasons: Dict[str, str] # section->why ``` --- ## 5) Configuration (`.docgen.yml` at repo root) ```yaml llm: runner: \"ollama\" # or \"llama.cpp\" model: \"llama3:8b-instruct\" # example; local only max_tokens: 2048 temperature: 0.2 readme: style: \"concise\" # or \"comprehensive\" template_pack: \"enterprise\" # optional bundle shipped with docgen required_sections: - intro - features - architecture - quickstart - configuration - build_and_test - deployment - troubleshooting - faq - license publish: mode: \"pr\" # \"commit\" | \"pr\" | \"dry-run\" branch_prefix: \"docgen/\" labels: - \"docs:auto\" update_existing: true # refresh an existing PR instead of opening a new one analyzers: enabled: - language - build - dependencies - patterns exclude_paths: - \".git/\" - \"node_modules/\" - \"dist/\" ci: # Only update README if these paths change watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"pyproject.toml\" - \"Dockerfile\" ``` > If no `readme.templates_dir` is provided, docgen automatically picks up `docs/templates/` bundles in the repository root and supports built-in template packs via `readme.template_pack`. --- ## 6) Workflows ### 6.1 Initialization (Repo without README) 1. **Scan & Analyze** \u2192 Manifest + Signals + Embeddings. 2. **Prompt Build** with default templates, include \u201cgetting started\u201d suggestions. 3. **Generate Sections** sequentially (streaming). 4. **Post-process** \u2192 ToC, badges (build status placeholder), lint. 5. **Publish**: direct commit `README.md` + `.docgen/` artifacts. ### 6.2 Update on Commit/PR 1. **Detect changes** via Git diff; map files to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate**",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#4",
      "vector": {
        "to": 0.146943671674129,
        "sections": 0.11020775375559676,
        "using": 0.03673591791853225,
        "a": 0.11020775375559676,
        "rules": 0.03673591791853225,
        "matrix": 0.03673591791853225,
        "pom": 0.03673591791853225,
        "xml": 0.03673591791853225,
        "build": 0.18367958959266126,
        "gradle": 0.0734718358370645,
        "test": 0.0734718358370645,
        "quick": 0.0734718358370645,
        "start": 0.0734718358370645,
        "dockerfile": 0.03673591791853225,
        "k8s": 0.0734718358370645,
        "deployment": 0.0734718358370645,
        "src": 0.03673591791853225,
        "entrypoints": 0.0734718358370645,
        "architecture": 0.0734718358370645,
        "features": 0.0734718358370645,
        "2": 0.0734718358370645,
        "decide": 0.03673591791853225,
        "updateplan": 0.03673591791853225,
        "patch": 0.03673591791853225,
        "impacted": 0.03673591791853225,
        "regenerate": 0.11020775375559676,
        "only": 0.0734718358370645,
        "those": 0.03673591791853225,
        "3": 0.0734718358370645,
        "skip": 0.03673591791853225,
        "if": 0.146943671674129,
        "no": 0.0734718358370645,
        "changed": 0.03673591791853225,
        "file": 0.0734718358370645,
        "matches": 0.03673591791853225,
        "docgen": 0.146943671674129,
        "yml": 0.03673591791853225,
        "ci": 0.0734718358370645,
        "watched_globs": 0.03673591791853225,
        "allows": 0.03673591791853225,
        "avoid": 0.03673591791853225,
        "unnecessary": 0.03673591791853225,
        "runs": 0.03673591791853225,
        "4": 0.03673591791853225,
        "rag": 0.11020775375559676,
        "retrieval": 0.03673591791853225,
        "fetch": 0.03673591791853225,
        "top": 0.0734718358370645,
        "k": 0.0734718358370645,
        "chunks": 0.0734718358370645,
        "relevant": 0.03673591791853225,
        "each": 0.0734718358370645,
        "section": 0.18367958959266126,
        "5": 0.0734718358370645,
        "generate": 0.03673591791853225,
        "post": 0.0734718358370645,
        "process": 0.03673591791853225,
        "open": 0.03673591791853225,
        "pr": 0.03673591791853225,
        "with": 0.03673591791853225,
        "summary": 0.03673591791853225,
        "of": 0.03673591791853225,
        "deltas": 0.03673591791853225,
        "6": 0.0734718358370645,
        "dry": 0.0734718358370645,
        "run": 0.0734718358370645,
        "support": 0.0734718358370645,
        "update": 0.03673591791853225,
        "computes": 0.03673591791853225,
        "diffs": 0.03673591791853225,
        "and": 0.0734718358370645,
        "scorecards": 0.03673591791853225,
        "without": 0.03673591791853225,
        "writing": 0.03673591791853225,
        "or": 0.11020775375559676,
        "publishing": 0.03673591791853225,
        "manual": 0.03673591791853225,
        "full": 0.03673591791853225,
        "intro": 0.0734718358370645,
        "arch": 0.03673591791853225,
        "7": 0.03673591791853225,
        "contract": 0.03673591791853225,
        "readme": 0.0734718358370645,
        "what": 0.03673591791853225,
        "why": 0.03673591791853225,
        "who": 0.03673591791853225,
        "it": 0.03673591791853225,
        "s": 0.03673591791853225,
        "for": 0.0734718358370645,
        "key": 0.03673591791853225,
        "bullets": 0.03673591791853225,
        "grounded": 0.03673591791853225,
        "in": 0.03673591791853225,
        "real": 0.03673591791853225,
        "repo": 0.0734718358370645,
        "signals": 0.0734718358370645,
        "overview": 0.03673591791853225,
        "diagram": 0.03673591791853225,
        "ascii": 0.03673591791853225,
        "components": 0.03673591791853225,
        "minimal": 0.03673591791853225,
        "commands": 0.146943671674129,
        "per": 0.0734718358370645,
        "system": 0.0734718358370645,
        "configuration": 0.0734718358370645,
        "env": 0.03673591791853225,
        "vars": 0.03673591791853225,
        "files": 0.03673591791853225,
        "examples": 0.03673591791853225,
        "coverage": 0.03673591791853225,
        "hint": 0.03673591791853225,
        "container": 0.03673591791853225,
        "instructions": 0.03673591791853225,
        "detected": 0.11020775375559676,
        "troubleshooting": 0.03673591791853225,
        "common": 0.03673591791853225,
        "failures": 0.03673591791853225,
        "faq": 0.03673591791853225,
        "10": 0.0734718358370645,
        "concise": 0.03673591791853225,
        "q": 0.03673591791853225,
        "contributing": 0.0734718358370645,
        "md": 0.03673591791853225,
        "absent": 0.03673591791853225,
        "license": 0.03673591791853225,
        "templated": 0.03673591791853225,
        "must": 0.03673591791853225,
        "be": 0.0734718358370645,
        "independently": 0.03673591791853225,
        "regenerable": 0.03673591791853225,
        "self": 0.03673591791853225,
        "contained": 0.03673591791853225,
        "8": 0.03673591791853225,
        "prompting": 0.03673591791853225,
        "strategy": 0.03673591791853225,
        "local": 0.0734718358370645,
        "llm": 0.03673591791853225,
        "message": 0.0734718358370645,
        "fixed": 0.03673591791853225,
        "guardrails": 0.03673591791853225,
        "you": 0.03673591791853225,
        "are": 0.03673591791853225,
        "senior": 0.03673591791853225,
        "dev": 0.03673591791853225,
        "doc": 0.03673591791853225,
        "writer": 0.03673591791853225,
        "precise": 0.03673591791853225,
        "cite": 0.03673591791853225,
        "facts": 0.03673591791853225,
        "speculation": 0.03673591791853225,
        "never": 0.03673591791853225,
        "invent": 0.03673591791853225,
        "prefer": 0.03673591791853225,
        "by": 0.03673591791853225,
        "analyzers": 0.0734718358370645,
        "user": 0.03673591791853225,
        "objective": 0.03673591791853225,
        "constraints": 0.03673591791853225,
        "tone": 0.03673591791853225,
        "length": 0.03673591791853225,
        "inject": 0.03673591791853225,
        "provide": 0.03673591791853225,
        "style": 0.03673591791853225,
        "tokens": 0.03673591791853225,
        "headings": 0.03673591791853225,
        "code": 0.0734718358370645,
        "blocks": 0.03673591791853225,
        "tables": 0.03673591791853225,
        "filters": 0.03673591791853225,
        "refuse": 0.03673591791853225,
        "insufficient": 0.03673591791853225,
        "evidence": 0.03673591791853225,
        "fall": 0.03673591791853225,
        "back": 0.03673591791853225,
        "template": 0.03673591791853225,
        "stubs": 0.0734718358370645,
        "9": 0.03673591791853225,
        "language": 0.0734718358370645,
        "project": 0.03673591791853225,
        "poc": 0.0734718358370645,
        "targets": 0.03673591791853225,
        "tier": 0.0734718358370645,
        "1": 0.03673591791853225,
        "python": 0.03673591791853225,
        "poetry": 0.03673591791853225,
        "setuptools": 0.03673591791853225,
        "java": 0.03673591791853225,
        "maven": 0.03673591791853225,
        "spring": 0.0734718358370645,
        "boot": 0.03673591791853225,
        "node": 0.03673591791853225,
        "js": 0.03673591791853225,
        "npm": 0.03673591791853225,
        "pnpm": 0.03673591791853225,
        "express": 0.03673591791853225,
        "next": 0.03673591791853225,
        "soon": 0.03673591791853225,
        "go": 0.03673591791853225,
        "modules": 0.03673591791853225,
        "rust": 0.03673591791853225,
        "cargo": 0.03673591791853225,
        "ruby": 0.03673591791853225,
        "bundler": 0.03673591791853225,
        "php": 0.03673591791853225,
        "composer": 0.03673591791853225,
        "detection": 0.03673591791853225,
        "via": 0.03673591791853225,
        "heuristics": 0.03673591791853225,
        "optional": 0.03673591791853225,
        "tree": 0.03673591791853225,
        "sitter": 0.03673591791853225,
        "function": 0.03673591791853225,
        "class": 0.03673591791853225,
        "extraction": 0.03673591791853225,
        "pluggable": 0.03673591791853225,
        "entry": 0.03673591791853225,
        "points": 0.03673591791853225,
        "main": 0.03673591791853225,
        "springbootapplication": 0.03673591791853225,
        "fastapi": 0.03673591791853225,
        "app": 0.03673591791853225,
        "bin": 0.03673591791853225,
        "cmd": 0.03673591791853225,
        "interfaces": 0.03673591791853225,
        "skeleton": 0.03673591791853225,
        "__init__": 0.03673591791853225,
        "py": 0.5143028508594515,
        "cli": 0.0734718358370645,
        "click": 0.03673591791853225,
        "typer": 0.03673591791853225,
        "failsafe": 0.03673591791853225,
        "fail": 0.03673591791853225,
        "safe": 0.03673591791853225,
        "logging": 0.0734718358370645,
        "helpers": 0.03673591791853225,
        "orchestrator": 0.03673591791853225,
        "repo_scanner": 0.03673591791853225,
        "base": 0.03673591791853225,
        "analyzer": 0.03673591791853225,
        "abc": 0.03673591791853225,
        "dependencies": 0.03673591791853225,
        "patterns": 0.03673591791853225,
        "embedder": 0.03673591791853225,
        "embedding": 0.03673591791853225,
        "model": 0.03673591791853225,
        "store": 0.03673591791853225
      },
      "text": "to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate** \u2192 **Post-process** \u2192 **Open PR** with summary of deltas. 6. Dry-run support: `docgen update --dry-run` computes diffs and scorecards without writing or publishing. ### 6.3 Regenerate (Manual) * `docgen regenerate --full` or `--sections intro,arch`. --- ## 7) Section Contract (README) * **Intro**: what, why, who it\u2019s for * **Key Features**: bullets grounded in real repo signals * **Architecture**: overview diagram (ASCII) + components * **Quick Start**: minimal commands (per build system) * **Configuration**: env vars, files, examples * **Build & Test**: commands, coverage hint * **Deployment**: container/K8s instructions if detected * **Troubleshooting**: common failures * **FAQ**: 5\u201310 concise Q\\&A * **Contributing** (if `CONTRIBUTING.md` absent) * **License** (detected or templated) > Each section must be independently regenerable and self-contained. --- ## 8) Prompting Strategy (Local LLM) * **System message (fixed guardrails)**: * \u201cYou are a senior dev doc writer. Be precise. Cite repo facts only. No speculation.\u201d * \u201cNever invent commands. Prefer commands detected by analyzers.\u201d * **User message per section**: * Section objective + constraints (tone, length). * Inject **Signals** + **Top-k chunks** (RAG). * Provide **style tokens** (headings, code blocks, tables). * **Post-filters**: refuse if insufficient evidence; fall back to template stubs. --- ## 9) Language & Project Support (POC targets) * **Tier-1 (POC)**: Python (Poetry/Setuptools), Java (Maven/Gradle, Spring Boot), Node.js (npm/pnpm, Express/Next). * **Tier-2 (soon)**: Go (modules), Rust (Cargo), Ruby (Bundler), PHP (Composer). * Detection via: * File heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#5",
      "vector": {
        "heuristics": 0.028665182485640765,
        "optional": 0.0859955474569223,
        "tree": 0.028665182485640765,
        "sitter": 0.028665182485640765,
        "for": 0.11466072994256306,
        "function": 0.028665182485640765,
        "class": 0.05733036497128153,
        "extraction": 0.028665182485640765,
        "pluggable": 0.028665182485640765,
        "entry": 0.028665182485640765,
        "points": 0.028665182485640765,
        "main": 0.05733036497128153,
        "spring": 0.028665182485640765,
        "springbootapplication": 0.028665182485640765,
        "fastapi": 0.05733036497128153,
        "app": 0.14332591242820383,
        "bin": 0.028665182485640765,
        "cmd": 0.05733036497128153,
        "10": 0.028665182485640765,
        "interfaces": 0.028665182485640765,
        "code": 0.05733036497128153,
        "skeleton": 0.028665182485640765,
        "docgen": 0.0859955474569223,
        "__init__": 0.028665182485640765,
        "py": 0.7166295621410191,
        "cli": 0.0859955474569223,
        "click": 0.028665182485640765,
        "typer": 0.05733036497128153,
        "failsafe": 0.028665182485640765,
        "fail": 0.028665182485640765,
        "safe": 0.028665182485640765,
        "readme": 0.0859955474569223,
        "stubs": 0.028665182485640765,
        "logging": 0.05733036497128153,
        "configuration": 0.028665182485640765,
        "helpers": 0.028665182485640765,
        "orchestrator": 0.028665182485640765,
        "repo_scanner": 0.028665182485640765,
        "analyzers": 0.028665182485640765,
        "base": 0.028665182485640765,
        "analyzer": 0.0859955474569223,
        "abc": 0.14332591242820383,
        "language": 0.028665182485640765,
        "build": 0.14332591242820383,
        "dependencies": 0.028665182485640765,
        "entrypoints": 0.028665182485640765,
        "patterns": 0.028665182485640765,
        "rag": 0.028665182485640765,
        "embedder": 0.028665182485640765,
        "local": 0.05733036497128153,
        "embedding": 0.028665182485640765,
        "model": 0.028665182485640765,
        "store": 0.028665182485640765,
        "prompting": 0.028665182485640765,
        "builder": 0.028665182485640765,
        "jinja2": 0.028665182485640765,
        "templates": 0.05733036497128153,
        "token": 0.028665182485640765,
        "mgmt": 0.028665182485640765,
        "constants": 0.028665182485640765,
        "j2": 0.028665182485640765,
        "per": 0.028665182485640765,
        "section": 0.028665182485640765,
        "llm": 0.028665182485640765,
        "runner": 0.028665182485640765,
        "adapter": 0.028665182485640765,
        "ollama": 0.028665182485640765,
        "llama": 0.028665182485640765,
        "cpp": 0.028665182485640765,
        "postproc": 0.028665182485640765,
        "lint": 0.028665182485640765,
        "links": 0.05733036497128153,
        "markers": 0.0859955474569223,
        "toc": 0.05733036497128153,
        "git": 0.05733036497128153,
        "diff": 0.028665182485640765,
        "publisher": 0.028665182485640765,
        "config": 0.028665182485640765,
        "models": 0.05733036497128153,
        "python": 0.0859955474569223,
        "from": 0.05733036497128153,
        "import": 0.05733036497128153,
        "abstractmethod": 0.0859955474569223,
        "repomanifest": 0.0859955474569223,
        "signal": 0.05733036497128153,
        "def": 0.14332591242820383,
        "supports": 0.028665182485640765,
        "self": 0.05733036497128153,
        "manifest": 0.05733036497128153,
        "bool": 0.0859955474569223,
        "analyze": 0.05733036497128153,
        "list": 0.028665182485640765,
        "command": 0.0859955474569223,
        "init": 0.028665182485640765,
        "path": 0.0859955474569223,
        "str": 0.14332591242820383,
        "publish": 0.0859955474569223,
        "true": 0.028665182485640765,
        "update": 0.0859955474569223,
        "event": 0.028665182485640765,
        "commit": 0.05733036497128153,
        "diff_base": 0.028665182485640765,
        "origin": 0.028665182485640765,
        "regenerate": 0.028665182485640765,
        "sections": 0.11466072994256306,
        "full": 0.028665182485640765,
        "false": 0.028665182485640765,
        "service": 0.028665182485640765,
        "mode": 0.028665182485640765,
        "post": 0.1719910949138446,
        "generate": 0.028665182485640765,
        "arch": 0.028665182485640765,
        "quickstart": 0.0859955474569223,
        "get": 0.028665182485640765,
        "status": 0.028665182485640765,
        "run_id": 0.028665182485640765,
        "11": 0.028665182485640765,
        "change": 0.028665182485640765,
        "impact": 0.028665182485640765,
        "matrix": 0.028665182485640765,
        "examples": 0.028665182485640765,
        "changed": 0.05733036497128153,
        "pattern": 0.028665182485640765,
        "to": 0.0859955474569223,
        "rebuild": 0.028665182485640765,
        "notes": 0.028665182485640765,
        "pom": 0.028665182485640765,
        "xml": 0.028665182485640765,
        "gradle": 0.028665182485640765,
        "_and": 0.05733036497128153,
        "_test": 0.05733036497128153,
        "recompute": 0.028665182485640765,
        "commands": 0.028665182485640765,
        "requirements": 0.028665182485640765,
        "txt": 0.028665182485640765,
        "pyproject": 0.028665182485640765,
        "toml": 0.028665182485640765,
        "install": 0.028665182485640765,
        "steps": 0.028665182485640765,
        "dockerfile": 0.028665182485640765,
        "k8s": 0.028665182485640765,
        "deployment": 0.028665182485640765,
        "container": 0.028665182485640765,
        "changes": 0.028665182485640765,
        "src": 0.028665182485640765,
        "features": 0.028665182485640765,
        "architecture": 0.0859955474569223,
        "if": 0.028665182485640765,
        "entrypoint": 0.028665182485640765,
        "intro": 0.028665182485640765,
        "too": 0.028665182485640765,
        "docs": 0.028665182485640765,
        "all": 0.028665182485640765,
        "patch": 0.028665182485640765,
        "prefer": 0.028665182485640765,
        "doc": 0.028665182485640765,
        "driven": 0.028665182485640765,
        "md": 0.028665182485640765,
        "none": 0.028665182485640765,
        "unless": 0.028665182485640765,
        "empty": 0.028665182485640765,
        "prevent": 0.028665182485640765,
        "loops": 0.028665182485640765,
        "12": 0.028665182485640765,
        "processing": 0.028665182485640765,
        "rules": 0.028665182485640765,
        "headings": 0.028665182485640765,
        "start": 0.028665182485640765,
        "at": 0.028665182485640765,
        "title": 0.028665182485640765,
        "then": 0.028665182485640765,
        "add": 0.028665182485640765,
        "auto": 0.028665182485640765,
        "level": 0.028665182485640765,
        "3": 0.028665182485640765,
        "validate": 0.028665182485640765,
        "blocks": 0.028665182485640765,
        "bash": 0.028665182485640765,
        "convert": 0.028665182485640765,
        "absolute": 0.028665182485640765,
        "github": 0.028665182485640765,
        "relative": 0.028665182485640765,
        "where": 0.028665182485640765,
        "possible": 0.028665182485640765,
        "ensure": 0.028665182485640765,
        "idempotency": 0.028665182485640765,
        "only": 0.028665182485640765,
        "edit": 0.028665182485640765,
        "between": 0.028665182485640765,
        "managed": 0.028665182485640765,
        "begin": 0.028665182485640765,
        "end": 0.028665182485640765,
        "13": 0.028665182485640765,
        "ci": 0.028665182485640765,
        "integration": 0.028665182485640765,
        "pre": 0.028665182485640765,
        "forbid": 0.028665182485640765,
        "direct": 0.028665182485640765,
        "edits": 0.028665182485640765,
        "outside": 0.028665182485640765,
        "merge": 0.028665182485640765,
        "checkout": 0.028665182485640765,
        "remind": 0.028665182485640765
      },
      "text": "heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py prompting/ builder.py # Jinja2 templates, token mgmt constants.py templates/ # *.j2 per section llm/ runner.py # adapter for ollama/llama.cpp postproc/ lint.py links.py markers.py toc.py git/ diff.py publisher.py config.py models.py ``` **Analyzer ABC** ```python from abc import ABC, abstractmethod from .models import RepoManifest, Signal class Analyzer(ABC): @abstractmethod def supports(self, manifest: RepoManifest) -> bool: ... @abstractmethod def analyze(self, manifest: RepoManifest) -> list[Signal]: ... ``` **CLI (Typer)** ```python @app.command() def init(path: str = \".\", publish: bool = True): ... @app.command() def update(path: str = \".\", event: str = \"commit\", diff_base: str = \"origin/main\"): ... @app.command() def regenerate(sections: str = \"\", full: bool = False): ... ``` **FastAPI (optional service mode)** * `POST /analyze` * `POST /generate?sections=arch,quickstart` * `POST /publish` * `GET /status/{run_id}` --- ## 11) Change Impact Matrix (examples) | Changed Path Pattern | Sections to Rebuild | Notes | | ------------------------------------ | ---------------------------- | --------------------------------------- | | `pom.xml`, `build.gradle*` | build\\_and\\_test, quickstart | Recompute build commands | | `requirements.txt`, `pyproject.toml` | build\\_and\\_test, quickstart | Update install steps | | `Dockerfile`, `k8s/**` | deployment | Publish container changes | | `src/**`, `app/**`, `cmd/**` | features, architecture | If entrypoint changed, update intro too | | `docs/**` | all (patch) | Prefer doc-driven | | `README.md` | none (unless empty) | Prevent loops | --- ## 12) Post-Processing Rules * Headings start at `#` for title then `##` for sections. * Add **auto ToC** (<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#6",
      "vector": {
        "level": 0.04267895997763199,
        "3": 0.12803687993289598,
        "validate": 0.04267895997763199,
        "code": 0.04267895997763199,
        "blocks": 0.04267895997763199,
        "bash": 0.04267895997763199,
        "python": 0.08535791995526398,
        "convert": 0.04267895997763199,
        "absolute": 0.04267895997763199,
        "github": 0.12803687993289598,
        "links": 0.04267895997763199,
        "to": 0.08535791995526398,
        "relative": 0.04267895997763199,
        "where": 0.04267895997763199,
        "possible": 0.08535791995526398,
        "ensure": 0.04267895997763199,
        "idempotency": 0.04267895997763199,
        "only": 0.12803687993289598,
        "edit": 0.04267895997763199,
        "between": 0.04267895997763199,
        "managed": 0.08535791995526398,
        "markers": 0.12803687993289598,
        "docgen": 0.21339479988815996,
        "begin": 0.04267895997763199,
        "architecture": 0.21339479988815996,
        "end": 0.04267895997763199,
        "13": 0.04267895997763199,
        "git": 0.08535791995526398,
        "ci": 0.08535791995526398,
        "integration": 0.04267895997763199,
        "local": 0.12803687993289598,
        "pre": 0.04267895997763199,
        "commit": 0.08535791995526398,
        "forbid": 0.04267895997763199,
        "direct": 0.04267895997763199,
        "readme": 0.12803687993289598,
        "edits": 0.04267895997763199,
        "outside": 0.04267895997763199,
        "optional": 0.12803687993289598,
        "post": 0.12803687993289598,
        "merge": 0.04267895997763199,
        "checkout": 0.08535791995526398,
        "remind": 0.04267895997763199,
        "run": 0.04267895997763199,
        "update": 0.12803687993289598,
        "gitlab": 0.04267895997763199,
        "bitbucket": 0.04267895997763199,
        "on": 0.04267895997763199,
        "push": 0.04267895997763199,
        "pr": 0.25607375986579195,
        "1": 0.12803687993289598,
        "repo": 0.08535791995526398,
        "2": 0.17071583991052797,
        "event": 0.04267895997763199,
        "diff": 0.08535791995526398,
        "base": 0.04267895997763199,
        "base_sha": 0.04267895997763199,
        "if": 0.12803687993289598,
        "changes": 0.04267895997763199,
        "open": 0.04267895997763199,
        "with": 0.04267895997763199,
        "labeled": 0.04267895997763199,
        "docs": 0.08535791995526398,
        "auto": 0.04267895997763199,
        "tokenless": 0.04267895997763199,
        "mode": 0.12803687993289598,
        "created": 0.04267895997763199,
        "from": 0.08535791995526398,
        "a": 0.04267895997763199,
        "app": 0.04267895997763199,
        "bot": 0.04267895997763199,
        "account": 0.04267895997763199,
        "14": 0.04267895997763199,
        "quality": 0.04267895997763199,
        "gates": 0.04267895997763199,
        "evaluation": 0.04267895997763199,
        "consistency": 0.04267895997763199,
        "checks": 0.04267895997763199,
        "commands": 0.08535791995526398,
        "exist": 0.04267895997763199,
        "in": 0.12803687993289598,
        "ports": 0.04267895997763199,
        "env": 0.04267895997763199,
        "vars": 0.04267895997763199,
        "match": 0.04267895997763199,
        "configs": 0.04267895997763199,
        "no": 0.08535791995526398,
        "hallucinations": 0.04267895997763199,
        "reject": 0.04267895997763199,
        "new": 0.04267895997763199,
        "facts": 0.04267895997763199,
        "not": 0.04267895997763199,
        "found": 0.08535791995526398,
        "signals": 0.08535791995526398,
        "rag": 0.08535791995526398,
        "style": 0.04267895997763199,
        "concise": 0.04267895997763199,
        "paragraphs": 0.04267895997763199,
        "actionable": 0.04267895997763199,
        "filler": 0.04267895997763199,
        "marketing": 0.04267895997763199,
        "scorecard": 0.04267895997763199,
        "0": 0.04267895997763199,
        "100": 0.04267895997763199,
        "coverage": 0.04267895997763199,
        "of": 0.08535791995526398,
        "required": 0.04267895997763199,
        "sections": 0.08535791995526398,
        "30": 0.04267895997763199,
        "buildability": 0.04267895997763199,
        "quick": 0.08535791995526398,
        "start": 0.04267895997763199,
        "20": 0.12803687993289598,
        "link": 0.04267895997763199,
        "validity": 0.04267895997763199,
        "10": 0.12803687993289598,
        "alignment": 0.04267895997763199,
        "w": 0.04267895997763199,
        "change": 0.04267895997763199,
        "set": 0.04267895997763199,
        "lint": 0.04267895997763199,
        "reviewer": 0.04267895997763199,
        "feedback": 0.04267895997763199,
        "loop": 0.04267895997763199,
        "15": 0.04267895997763199,
        "security": 0.04267895997763199,
        "privacy": 0.04267895997763199,
        "llm": 0.08535791995526398,
        "and": 0.04267895997763199,
        "embedding": 0.04267895997763199,
        "models": 0.04267895997763199,
        "respect": 0.04267895997763199,
        "gitignore": 0.04267895997763199,
        "configurable": 0.04267895997763199,
        "exclude_paths": 0.04267895997763199,
        "never": 0.04267895997763199,
        "index": 0.04267895997763199,
        "large": 0.04267895997763199,
        "binaries": 0.04267895997763199,
        "secret": 0.08535791995526398,
        "files": 0.08535791995526398,
        "simple": 0.04267895997763199,
        "scan": 0.04267895997763199,
        "block": 0.04267895997763199,
        "16": 0.04267895997763199,
        "mvp": 0.04267895997763199,
        "plan": 0.04267895997763199,
        "weeks": 0.04267895997763199,
        "suggested": 0.04267895997763199,
        "breakdown": 0.04267895997763199,
        "core": 0.04267895997763199,
        "path": 0.04267895997763199,
        "cli": 0.04267895997763199,
        "scanner": 0.04267895997763199,
        "language": 0.04267895997763199,
        "build": 0.04267895997763199,
        "analyzers": 0.04267895997763199,
        "java": 0.04267895997763199,
        "node": 0.04267895997763199,
        "prompt": 0.04267895997763199,
        "builder": 0.04267895997763199,
        "runner": 0.04267895997763199,
        "ollama": 0.04267895997763199,
        "adapter": 0.04267895997763199,
        "processor": 0.04267895997763199,
        "publisher": 0.04267895997763199,
        "lite": 0.04267895997763199,
        "embed": 0.04267895997763199,
        "existing": 0.04267895997763199,
        "top": 0.04267895997763199,
        "largest": 0.04267895997763199,
        "source": 0.04267895997763199,
        "heads": 0.04267895997763199,
        "triggers": 0.04267895997763199,
        "single": 0.04267895997763199,
        "as": 0.08535791995526398,
        "stretch": 0.04267895997763199,
        "4": 0.04267895997763199,
        "templates": 0.08535791995526398,
        "8": 0.04267895997763199,
        "jinja2": 0.17071583991052797,
        "5": 0.04267895997763199,
        "config": 0.04267895997763199,
        "yml": 0.04267895997763199,
        "minimal": 0.04267895997763199,
        "17": 0.12803687993289598,
        "example": 0.04267895997763199,
        "section": 0.04267895997763199,
        "template": 0.04267895997763199,
        "j2": 0.08535791995526398,
        "project_name": 0.08535791995526398,
        "is": 0.04267895997763199,
        "structured": 0.04267895997763199,
        "ascii": 0.04267895997763199,
        "_architecture": 0.04267895997763199,
        "key": 0.04267895997763199,
        "components": 0.08535791995526398,
        "for": 0.04267895997763199,
        "comp": 0.12803687993289598,
        "name": 0.04267895997763199,
        "summary": 0.04267895997763199,
        "endfor": 0.04267895997763199,
        "data": 0.04267895997763199,
        "flow": 0.04267895997763199,
        "data_flow": 0.04267895997763199,
        "generated": 0.04267895997763199,
        "detected": 0.04267895997763199,
        "signals_summary": 0.04267895997763199,
        "frame": 0.04267895997763199,
        "composed": 0.04267895997763199,
        "intro": 0.04267895997763199,
        "features": 0.08535791995526398,
        "include": 0.04267895997763199
      },
      "text": "(<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to run `docgen update` (optional). ### CI (GitHub/GitLab/Bitbucket) * On push/PR: 1. Checkout repo. 2. `docgen update --event pr --diff-base $BASE_SHA` 3. If changes \u2192 open/update PR with labeled `docs:auto`. * Tokenless mode possible if PR created from a GitHub App/bot account. --- ## 14) Quality Gates & Evaluation * **Consistency checks**: commands exist in repo; ports/env vars match configs. * **No hallucinations**: reject new facts not found in signals/RAG. * **Style**: concise paragraphs, actionable commands, no filler marketing. * **Scorecard** (0\u2013100): * Coverage of required sections (30) * Buildability of quick start (20) * Link validity (10) * Diff alignment w/ change set (20) * Lint (10) * Reviewer feedback loop (10) --- ## 15) Security & Privacy * **Local only** LLM and embedding models. * Respect `.gitignore` + configurable `exclude_paths`. * Never index large binaries/secret files. * Optional simple **secret scan**; block if found. --- ## 16) MVP Plan (2 weeks suggested breakdown) 1. **Core path**: CLI, Scanner, Language+Build analyzers (Python/Java/Node), Prompt Builder, Local LLM runner (Ollama adapter), Post-processor, Git Publisher (PR). 2. **RAG Lite**: embed only `/docs`, existing `README`, top 20 largest source files\u2019 heads. 3. **Triggers**: single \u201ccommit\u201d mode; PR mode as stretch. 4. **Templates**: 8 sections, Jinja2; managed markers. 5. **Config**: `.docgen.yml` minimal. --- ## 17) Example Templates ### 17.1 Section Template (Jinja2 \u2014 architecture.j2) ```jinja2 ## Architecture {{ project_name }} is structured as: ``` {{ ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#7",
      "vector": {
        "ascii": 0.036588086663230115,
        "_architecture": 0.036588086663230115,
        "key": 0.14635234665292046,
        "components": 0.07317617332646023,
        "for": 0.2561166066426108,
        "comp": 0.10976425998969035,
        "in": 0.2195285199793807,
        "name": 0.036588086663230115,
        "summary": 0.036588086663230115,
        "endfor": 0.036588086663230115,
        "data": 0.036588086663230115,
        "flow": 0.036588086663230115,
        "data_flow": 0.036588086663230115,
        "generated": 0.036588086663230115,
        "from": 0.036588086663230115,
        "detected": 0.036588086663230115,
        "signals": 0.036588086663230115,
        "signals_summary": 0.036588086663230115,
        "17": 0.036588086663230115,
        "2": 0.036588086663230115,
        "readme": 0.10976425998969035,
        "frame": 0.036588086663230115,
        "composed": 0.036588086663230115,
        "jinja2": 0.036588086663230115,
        "project_name": 0.036588086663230115,
        "intro": 0.10976425998969035,
        "features": 0.10976425998969035,
        "include": 0.036588086663230115,
        "architecture": 0.07317617332646023,
        "j2": 0.036588086663230115,
        "quick": 0.07317617332646023,
        "start": 0.2195285199793807,
        "quickstart": 0.036588086663230115,
        "configuration": 0.07317617332646023,
        "build": 0.14635234665292046,
        "test": 0.036588086663230115,
        "build_and_test": 0.07317617332646023,
        "deployment": 0.10976425998969035,
        "troubleshooting": 0.07317617332646023,
        "faq": 0.07317617332646023,
        "license": 0.07317617332646023,
        "18": 0.036588086663230115,
        "minimal": 0.036588086663230115,
        "python": 0.14635234665292046,
        "snippets": 0.036588086663230115,
        "change": 0.036588086663230115,
        "impact": 0.036588086663230115,
        "heuristic": 0.036588086663230115,
        "section_rules": 0.07317617332646023,
        "pom": 0.10976425998969035,
        "xml": 0.10976425998969035,
        "gradle": 0.07317617332646023,
        "requirements": 0.10976425998969035,
        "txt": 0.10976425998969035,
        "pyproject": 0.036588086663230115,
        "toml": 0.036588086663230115,
        "package": 0.07317617332646023,
        "json": 0.07317617332646023,
        "dockerfile": 0.07317617332646023,
        "k8s": 0.036588086663230115,
        "src": 0.10976425998969035,
        "app": 0.10976425998969035,
        "cmd": 0.10976425998969035,
        "def": 0.07317617332646023,
        "sections_from_diff": 0.036588086663230115,
        "paths": 0.07317617332646023,
        "list": 0.036588086663230115,
        "str": 0.2195285199793807,
        "set": 0.07317617332646023,
        "out": 0.10976425998969035,
        "section": 0.07317617332646023,
        "patterns": 0.10976425998969035,
        "if": 0.18294043331615056,
        "any": 0.036588086663230115,
        "p": 0.10976425998969035,
        "pat": 0.07317617332646023,
        "startswith": 0.036588086663230115,
        "add": 0.036588086663230115,
        "return": 0.10976425998969035,
        "or": 0.10976425998969035,
        "fall": 0.036588086663230115,
        "back": 0.036588086663230115,
        "to": 0.07317617332646023,
        "uncertain": 0.036588086663230115,
        "managed": 0.036588086663230115,
        "markers": 0.07317617332646023,
        "patch": 0.036588086663230115,
        "replace_block": 0.036588086663230115,
        "md": 0.18294043331615056,
        "new": 0.07317617332646023,
        "f": 0.10976425998969035,
        "docgen": 0.18294043331615056,
        "begin": 0.036588086663230115,
        "end": 0.18294043331615056,
        "and": 0.036588086663230115,
        "pre": 0.07317617332646023,
        "rest": 0.07317617332646023,
        "split": 0.07317617332646023,
        "1": 0.07317617332646023,
        "_": 0.036588086663230115,
        "post": 0.07317617332646023,
        "n": 0.07317617332646023,
        "insert": 0.036588086663230115,
        "missing": 0.036588086663230115,
        "19": 0.036588086663230115,
        "open": 0.036588086663230115,
        "questions": 0.036588086663230115,
        "trade": 0.036588086663230115,
        "offs": 0.036588086663230115,
        "embeddings": 0.036588086663230115,
        "use": 0.036588086663230115,
        "a": 0.14635234665292046,
        "tiny": 0.036588086663230115,
        "local": 0.036588086663230115,
        "model": 0.07317617332646023,
        "vs": 0.07317617332646023,
        "rule": 0.036588086663230115,
        "based": 0.036588086663230115,
        "retrieval": 0.036588086663230115,
        "mvp": 0.036588086663230115,
        "tree": 0.036588086663230115,
        "sitter": 0.036588086663230115,
        "adds": 0.036588086663230115,
        "power": 0.036588086663230115,
        "but": 0.036588086663230115,
        "increases": 0.036588086663230115,
        "footprint": 0.036588086663230115,
        "gate": 0.036588086663230115,
        "behind": 0.036588086663230115,
        "flag": 0.036588086663230115,
        "pr": 0.10976425998969035,
        "author": 0.036588086663230115,
        "bot": 0.036588086663230115,
        "account": 0.036588086663230115,
        "developer": 0.036588086663230115,
        "token": 0.036588086663230115,
        "decide": 0.036588086663230115,
        "per": 0.036588086663230115,
        "environment": 0.036588086663230115,
        "markdown": 0.036588086663230115,
        "diffs": 0.036588086663230115,
        "keep": 0.036588086663230115,
        "sections": 0.036588086663230115,
        "atomic": 0.036588086663230115,
        "minimize": 0.036588086663230115,
        "noisy": 0.036588086663230115,
        "prs": 0.036588086663230115,
        "20": 0.036588086663230115,
        "example": 0.036588086663230115,
        "yml": 0.036588086663230115,
        "mixed": 0.036588086663230115,
        "repo": 0.036588086663230115,
        "yaml": 0.036588086663230115,
        "llm": 0.036588086663230115,
        "runner": 0.036588086663230115,
        "ollama": 0.036588086663230115,
        "llama3": 0.036588086663230115,
        "8b": 0.036588086663230115,
        "instruct": 0.036588086663230115,
        "temperature": 0.036588086663230115,
        "0": 0.036588086663230115,
        "15": 0.036588086663230115,
        "style": 0.036588086663230115,
        "comprehensive": 0.036588086663230115,
        "publish": 0.036588086663230115,
        "mode": 0.036588086663230115,
        "branch_prefix": 0.036588086663230115,
        "analyzers": 0.036588086663230115,
        "enabled": 0.036588086663230115,
        "language": 0.036588086663230115,
        "dependencies": 0.036588086663230115,
        "exclude_paths": 0.036588086663230115,
        "git": 0.036588086663230115,
        "node_modules": 0.036588086663230115,
        "dist": 0.036588086663230115,
        "target": 0.036588086663230115,
        "ci": 0.036588086663230115,
        "watched_globs": 0.036588086663230115,
        "21": 0.036588086663230115,
        "success": 0.036588086663230115,
        "criteria": 0.036588086663230115,
        "poc": 0.036588086663230115,
        "3": 0.036588086663230115,
        "diverse": 0.036588086663230115,
        "repos": 0.036588086663230115,
        "cli": 0.036588086663230115,
        "spring": 0.036588086663230115,
        "boot": 0.036588086663230115,
        "api": 0.036588086663230115,
        "node": 0.036588086663230115,
        "webapp": 0.036588086663230115,
        "init": 0.036588086663230115,
        "produces": 0.036588086663230115,
        "working": 0.036588086663230115,
        "linted": 0.036588086663230115,
        "with": 0.036588086663230115,
        "runnable": 0.036588086663230115,
        "on": 0.036588086663230115,
        "changing": 0.036588086663230115
      },
      "text": "ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick Start {{ quickstart }} ## Configuration {{ configuration }} ## Build & Test {{ build_and_test }} ## Deployment {{ deployment }} ## Troubleshooting {{ troubleshooting }} ## FAQ {{ faq }} ## License {{ license }} ``` --- ## 18) Minimal Python Snippets **Change impact heuristic** ```python SECTION_RULES = [ (\"build_and_test\", [\"pom.xml\",\"build.gradle\",\"requirements.txt\",\"pyproject.toml\",\"package.json\"]), (\"deployment\", [\"Dockerfile\",\"k8s/\"]), (\"architecture\", [\"src/\",\"app/\",\"cmd/\"]), (\"features\", [\"src/\",\"app/\",\"cmd/\"]), ] def sections_from_diff(paths: list[str]) -> set[str]: out = set() for section, patterns in SECTION_RULES: if any(p for p in paths for pat in patterns if p.startswith(pat)): out.add(section) return out or {\"intro\"} # fall back to intro if uncertain ``` **Managed markers (patch)** ```python def replace_block(md: str, key: str, new: str) -> str: start = f\"<!-- docgen:begin:{key} -->\" end = f\"<!-- docgen:end:{key} -->\" if start in md and end in md: pre, rest = md.split(start, 1) _, post = rest.split(end, 1) return f\"{pre}{start}\\n{new}\\n{end}{post}\" return md # or insert markers if missing ``` --- ## 19) Open Questions / Trade-offs * **Embeddings**: Use a tiny local model vs. rule-based retrieval for MVP? * **Tree-sitter**: Adds power but increases footprint\u2014gate behind a flag. * **PR author**: Bot account vs. developer token\u2014decide per environment. * **Markdown diffs**: Keep sections atomic to minimize noisy PRs. --- ## 20) Example `.docgen.yml` for a Mixed Repo ```yaml llm: runner: \"ollama\" model: \"llama3:8b-instruct\" temperature: 0.15 readme: style: \"comprehensive\" publish: mode: \"pr\" branch_prefix: \"docgen/\" analyzers: enabled: [language, build, dependencies, patterns] exclude_paths: [\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#8",
      "vector": {
        "git": 0.08838834764831843,
        "node_modules": 0.08838834764831843,
        "dist": 0.08838834764831843,
        "target": 0.08838834764831843,
        "ci": 0.08838834764831843,
        "watched_globs": 0.08838834764831843,
        "src": 0.08838834764831843,
        "app": 0.08838834764831843,
        "cmd": 0.08838834764831843,
        "pom": 0.17677669529663687,
        "xml": 0.17677669529663687,
        "build": 0.08838834764831843,
        "gradle": 0.08838834764831843,
        "package": 0.08838834764831843,
        "json": 0.08838834764831843,
        "requirements": 0.17677669529663687,
        "txt": 0.17677669529663687,
        "dockerfile": 0.08838834764831843,
        "21": 0.08838834764831843,
        "success": 0.08838834764831843,
        "criteria": 0.08838834764831843,
        "poc": 0.08838834764831843,
        "for": 0.08838834764831843,
        "3": 0.08838834764831843,
        "diverse": 0.08838834764831843,
        "repos": 0.08838834764831843,
        "python": 0.08838834764831843,
        "cli": 0.17677669529663687,
        "spring": 0.08838834764831843,
        "boot": 0.08838834764831843,
        "api": 0.08838834764831843,
        "node": 0.08838834764831843,
        "webapp": 0.08838834764831843,
        "docgen": 0.17677669529663687,
        "init": 0.17677669529663687,
        "produces": 0.08838834764831843,
        "a": 0.2651650429449553,
        "working": 0.08838834764831843,
        "linted": 0.08838834764831843,
        "readme": 0.08838834764831843,
        "with": 0.08838834764831843,
        "runnable": 0.08838834764831843,
        "quick": 0.08838834764831843,
        "start": 0.08838834764831843,
        "on": 0.08838834764831843,
        "changing": 0.08838834764831843,
        "or": 0.08838834764831843,
        "pr": 0.08838834764831843,
        "updates": 0.08838834764831843,
        "only": 0.08838834764831843,
        "relevant": 0.08838834764831843,
        "sections": 0.08838834764831843,
        "no": 0.08838834764831843,
        "hallucinated": 0.08838834764831843,
        "commands": 0.08838834764831843,
        "links": 0.08838834764831843,
        "and": 0.2651650429449553,
        "badges": 0.08838834764831843,
        "validate": 0.08838834764831843,
        "style": 0.08838834764831843,
        "consistent": 0.08838834764831843,
        "if": 0.08838834764831843,
        "you": 0.17677669529663687,
        "want": 0.08838834764831843,
        "i": 0.08838834764831843,
        "can": 0.17677669529663687,
        "spin": 0.08838834764831843,
        "up": 0.08838834764831843,
        "starter": 0.08838834764831843,
        "repo": 0.08838834764831843,
        "layout": 0.08838834764831843,
        "analyzers": 0.08838834764831843,
        "templates": 0.08838834764831843,
        "simple": 0.08838834764831843,
        "ollama": 0.08838834764831843,
        "adapter": 0.08838834764831843,
        "so": 0.08838834764831843,
        "drop": 0.08838834764831843,
        "it": 0.08838834764831843,
        "into": 0.08838834764831843,
        "your": 0.08838834764831843,
        "environment": 0.08838834764831843,
        "run": 0.08838834764831843,
        "right": 0.08838834764831843,
        "away": 0.08838834764831843
      },
      "text": "[\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR updates only relevant sections. * No hallucinated commands; links and badges validate; style consistent. --- If you want, I can spin up a **starter repo layout** (CLI, analyzers, templates, and a simple Ollama adapter) so you can drop it into your environment and run `docgen init` right away.",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    }
  ],
  "deployment": [
    {
      "id": "AGENTS.md#0",
      "vector": {
        "repository": 0.06757373783994859,
        "guidelines": 0.1013606067599229,
        "project": 0.033786868919974296,
        "structure": 0.033786868919974296,
        "module": 0.06757373783994859,
        "organization": 0.033786868919974296,
        "spec": 0.06757373783994859,
        "md": 0.033786868919974296,
        "captures": 0.033786868919974296,
        "the": 0.27029495135979437,
        "end": 0.06757373783994859,
        "to": 0.1013606067599229,
        "architecture": 0.033786868919974296,
        "component": 0.06757373783994859,
        "contracts": 0.033786868919974296,
        "and": 0.43922929595966587,
        "must": 0.033786868919974296,
        "be": 0.033786868919974296,
        "updated": 0.033786868919974296,
        "whenever": 0.033786868919974296,
        "responsibilities": 0.033786868919974296,
        "shift": 0.033786868919974296,
        "place": 0.033786868919974296,
        "python": 0.2027212135198458,
        "source": 0.033786868919974296,
        "in": 0.16893434459987147,
        "a": 0.23650808243982008,
        "docgen": 0.16893434459987147,
        "package": 0.033786868919974296,
        "create": 0.033786868919974296,
        "it": 0.033786868919974296,
        "when": 0.06757373783994859,
        "implementation": 0.033786868919974296,
        "starts": 0.033786868919974296,
        "with": 0.16893434459987147,
        "clear": 0.033786868919974296,
        "submodules": 0.033786868919974296,
        "for": 0.1013606067599229,
        "orchestrator": 0.1013606067599229,
        "analyzers": 0.033786868919974296,
        "runners": 0.033786868919974296,
        "stores": 0.033786868919974296,
        "avoid": 0.06757373783994859,
        "leaving": 0.033786868919974296,
        "logic": 0.033786868919974296,
        "repo": 0.06757373783994859,
        "root": 0.033786868919974296,
        "mirror": 0.033786868919974296,
        "runtime": 0.033786868919974296,
        "modules": 0.06757373783994859,
        "under": 0.1013606067599229,
        "tests": 0.2027212135198458,
        "using": 0.033786868919974296,
        "test_": 0.033786868919974296,
        "py": 0.1013606067599229,
        "co": 0.033786868919974296,
        "locate": 0.033786868919974296,
        "fixtures": 0.06757373783994859,
        "_fixtures": 0.033786868919974296,
        "so": 0.13514747567989718,
        "imports": 0.06757373783994859,
        "stay": 0.06757373783994859,
        "clean": 0.033786868919974296,
        "reusable": 0.033786868919974296,
        "keep": 0.13514747567989718,
        "throwaway": 0.033786868919974296,
        "experiments": 0.033786868919974296,
        "inside": 0.033786868919974296,
        "an": 0.06757373783994859,
        "ignored": 0.033786868919974296,
        "sandbox": 0.033786868919974296,
        "directory": 0.033786868919974296,
        "scans": 0.033786868919974296,
        "remain": 0.033786868919974296,
        "focused": 0.033786868919974296,
        "on": 0.06757373783994859,
        "production": 0.033786868919974296,
        "code": 0.033786868919974296,
        "paths": 0.033786868919974296,
        "build": 0.033786868919974296,
        "test": 0.06757373783994859,
        "development": 0.033786868919974296,
        "commands": 0.033786868919974296,
        "m": 0.16893434459987147,
        "venv": 0.1013606067599229,
        "followed": 0.033786868919974296,
        "by": 0.033786868919974296,
        "scripts": 0.06757373783994859,
        "activate": 0.033786868919974296,
        "aligns": 0.033786868919974296,
        "local": 0.033786868919974296,
        "shells": 0.033786868919974296,
        "pycharm": 0.033786868919974296,
        "interpreter": 0.033786868919974296,
        "settings": 0.033786868919974296,
        "pip": 0.033786868919974296,
        "install": 0.033786868919974296,
        "e": 0.033786868919974296,
        "dev": 0.033786868919974296,
        "after": 0.06757373783994859,
        "pyproject": 0.033786868919974296,
        "toml": 0.033786868919974296,
        "is": 0.1013606067599229,
        "committed": 0.033786868919974296,
        "exposes": 0.033786868919974296,
        "cli": 0.033786868919974296,
        "plugins": 0.033786868919974296,
        "editable": 0.033786868919974296,
        "form": 0.033786868919974296,
        "without": 0.033786868919974296,
        "repeated": 0.033786868919974296,
        "reinstalls": 0.033786868919974296,
        "pytest": 0.06757373783994859,
        "runs": 0.033786868919974296,
        "full": 0.033786868919974296,
        "suite": 0.033786868919974296,
        "append": 0.033786868919974296,
        "k": 0.033786868919974296,
        "pattern": 0.033786868919974296,
        "iterate": 0.033786868919974296,
        "single": 0.06757373783994859,
        "analyzer": 0.06757373783994859,
        "or": 0.06757373783994859,
        "pipeline": 0.1013606067599229,
        "stage": 0.033786868919974296,
        "mypy": 0.033786868919974296,
        "ruff": 0.033786868919974296,
        "check": 0.033786868919974296,
        "catch": 0.033786868919974296,
        "type": 0.033786868919974296,
        "drift": 0.033786868919974296,
        "lint": 0.033786868919974296,
        "violations": 0.033786868919974296,
        "before": 0.06757373783994859,
        "readme": 0.06757373783994859,
        "generation": 0.06757373783994859,
        "attempted": 0.033786868919974296,
        "coding": 0.033786868919974296,
        "style": 0.033786868919974296,
        "naming": 0.033786868919974296,
        "conventions": 0.033786868919974296,
        "follow": 0.06757373783994859,
        "pep": 0.033786868919974296,
        "8": 0.033786868919974296,
        "4": 0.033786868919974296,
        "space": 0.033786868919974296,
        "indents": 0.033786868919974296,
        "explicit": 0.033786868919974296,
        "example": 0.033786868919974296,
        "from": 0.033786868919974296,
        "import": 0.033786868919974296,
        "static": 0.033786868919974296,
        "tooling": 0.033786868919974296,
        "can": 0.033786868919974296,
        "trace": 0.033786868919974296,
        "dependencies": 0.033786868919974296,
        "name": 0.033786868919974296,
        "their": 0.033786868919974296,
        "roles": 0.033786868919974296,
        "prompt_builder": 0.033786868919974296,
        "functions": 0.033786868919974296,
        "snake_case": 0.033786868919974296,
        "descriptive": 0.06757373783994859,
        "nouns": 0.033786868919974296,
        "first": 0.033786868919974296,
        "build_prompt_section": 0.033786868919974296,
        "run": 0.033786868919974296,
        "black": 0.033786868919974296,
        "commits": 0.06757373783994859,
        "manual": 0.033786868919974296,
        "reformatting": 0.033786868919974296,
        "unless": 0.033786868919974296,
        "formatter": 0.033786868919974296,
        "cannot": 0.033786868919974296,
        "resolve": 0.033786868919974296,
        "construct": 0.033786868919974296,
        "testing": 0.06757373783994859,
        "default": 0.033786868919974296,
        "harness": 0.033786868919974296,
        "every": 0.033786868919974296,
        "needs": 0.033786868919974296,
        "unit": 0.033786868919974296,
        "coverage": 0.033786868919974296,
        "plus": 0.033786868919974296,
        "integration": 0.06757373783994859,
        "case": 0.033786868919974296,
        "that": 0.06757373783994859,
        "walks": 0.033786868919974296,
        "snapshot": 0.033786868919974296,
        "through": 0.033786868919974296,
        "use": 0.033786868919974296,
        "names": 0.033786868919974296,
        "such": 0.033786868919974296,
        "as": 0.033786868919974296,
        "test_prompt_builder_handles_missing_signals": 0.033786868919974296,
        "arrange": 0.033786868919974296,
        "act": 0.033786868919974296,
        "assert": 0.033786868919974296,
        "comments": 0.033786868919974296,
        "minimal": 0.033786868919974296,
        "but": 0.033786868919974296,
        "intentional": 0.033786868919974296,
        "store": 0.033786868919974296,
        "regression": 0.033786868919974296,
        "generated": 0.033786868919974296,
        "slices": 0.033786868919974296,
        "data": 0.033786868919974296,
        "update": 0.033786868919974296,
        "them": 0.033786868919974296,
        "helper": 0.033786868919974296,
        "diffs": 0.033786868919974296,
        "reviewable": 0.033786868919974296,
        "commit": 0.033786868919974296,
        "pull": 0.033786868919974296,
        "request": 0.033786868919974296,
        "conventional": 0.033786868919974296,
        "feat": 0.033786868919974296,
        "fix": 0.033786868919974296,
        "docs": 0.033786868919974296,
        "subject": 0.033786868919974296,
        "lines": 0.033786868919974296,
        "72": 0.033786868919974296,
        "characters": 0.033786868919974296,
        "explain": 0.033786868919974296,
        "broader": 0.033786868919974296,
        "scope": 0.033786868919974296,
        "body": 0.033786868919974296,
        "multiple": 0.033786868919974296,
        "subsystems": 0.033786868919974296,
        "change": 0.033786868919974296,
        "bundle": 0.033786868919974296,
        "related": 0.033786868919974296,
        "work": 0.033786868919974296,
        "into": 0.033786868919974296,
        "pr": 0.033786868919974296,
        "includes": 0.033786868919974296,
        "summary": 0.033786868919974296,
        "notes": 0.033786868919974296,
        "links": 0.033786868919974296
      },
      "text": "# Repository Guidelines ## Project Structure & Module Organization - `spec/spec.md` captures the end-to-end architecture, component contracts, and must be updated whenever responsibilities shift. - Place Python source in a `docgen/` package (create it when implementation starts) with clear submodules for orchestrator, analyzers, runners, and stores; avoid leaving logic in the repo root. - Mirror runtime modules under `tests/` using `test_<module>.py`; co-locate fixtures in `tests/_fixtures/` so imports stay clean and reusable. - Keep throwaway experiments inside an ignored `sandbox/` directory so repository scans remain focused on production code paths. ## Build, Test, and Development Commands - `python -m venv .venv` followed by `.\\\\.venv\\\\Scripts\\\\activate` aligns local shells with the PyCharm interpreter settings. - `python -m pip install -e .[dev]` (after a `pyproject.toml` is committed) exposes the CLI and plugins in editable form without repeated reinstalls. - `python -m pytest` runs the full suite; append `-k <pattern>` to iterate on a single analyzer or pipeline stage. - `python -m mypy docgen` and `python -m ruff check docgen tests` catch type drift and lint violations before README generation is attempted. ## Coding Style & Naming Conventions - Follow PEP 8 with 4-space indents and explicit imports (for example, `from docgen.orchestrator import Pipeline`) so static tooling can trace dependencies. - Name modules after their roles (`orchestrator.py`, `prompt_builder.py`) and keep functions snake_case with descriptive nouns first (`build_prompt_section`). - Run `black docgen tests` before commits; avoid manual reformatting unless the formatter cannot resolve a construct. ## Testing Guidelines - Pytest is the default harness; every analyzer or pipeline component needs unit coverage plus an integration case under `tests/integration/` that walks a repo snapshot through generation. - Use descriptive test names such as `test_prompt_builder_handles_missing_signals` and keep Arrange-Act-Assert comments minimal but intentional. - Store regression fixtures for generated README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "AGENTS.md#1",
      "vector": {
        "readme": 0.1270001270001905,
        "slices": 0.06350006350009525,
        "under": 0.06350006350009525,
        "tests": 0.06350006350009525,
        "data": 0.06350006350009525,
        "and": 0.4445004445006667,
        "update": 0.06350006350009525,
        "them": 0.06350006350009525,
        "with": 0.06350006350009525,
        "helper": 0.06350006350009525,
        "scripts": 0.06350006350009525,
        "so": 0.06350006350009525,
        "diffs": 0.06350006350009525,
        "stay": 0.06350006350009525,
        "reviewable": 0.06350006350009525,
        "commit": 0.1270001270001905,
        "pull": 0.06350006350009525,
        "request": 0.06350006350009525,
        "guidelines": 0.06350006350009525,
        "follow": 0.06350006350009525,
        "conventional": 0.06350006350009525,
        "commits": 0.06350006350009525,
        "feat": 0.06350006350009525,
        "fix": 0.06350006350009525,
        "docs": 0.1270001270001905,
        "keep": 0.1270001270001905,
        "subject": 0.06350006350009525,
        "lines": 0.06350006350009525,
        "72": 0.06350006350009525,
        "characters": 0.06350006350009525,
        "explain": 0.06350006350009525,
        "broader": 0.06350006350009525,
        "scope": 0.06350006350009525,
        "in": 0.254000254000381,
        "the": 0.31750031750047625,
        "body": 0.06350006350009525,
        "when": 0.1270001270001905,
        "multiple": 0.06350006350009525,
        "subsystems": 0.06350006350009525,
        "change": 0.06350006350009525,
        "bundle": 0.06350006350009525,
        "related": 0.06350006350009525,
        "work": 0.1270001270001905,
        "into": 0.06350006350009525,
        "a": 0.254000254000381,
        "single": 0.06350006350009525,
        "pr": 0.1270001270001905,
        "that": 0.06350006350009525,
        "includes": 0.06350006350009525,
        "summary": 0.06350006350009525,
        "testing": 0.06350006350009525,
        "notes": 0.1270001270001905,
        "links": 0.06350006350009525,
        "to": 0.06350006350009525,
        "relevant": 0.06350006350009525,
        "issues": 0.06350006350009525,
        "or": 0.06350006350009525,
        "spec": 0.06350006350009525,
        "sections": 0.06350006350009525,
        "attach": 0.06350006350009525,
        "before": 0.1270001270001905,
        "after": 0.06350006350009525,
        "excerpts": 0.06350006350009525,
        "altering": 0.06350006350009525,
        "generation": 0.06350006350009525,
        "output": 0.06350006350009525,
        "run": 0.06350006350009525,
        "lint": 0.06350006350009525,
        "type": 0.06350006350009525,
        "check": 0.06350006350009525,
        "test": 0.06350006350009525,
        "commands": 0.06350006350009525,
        "opening": 0.06350006350009525,
        "paste": 0.06350006350009525,
        "condensed": 0.06350006350009525,
        "results": 0.06350006350009525,
        "description": 0.06350006350009525,
        "for": 0.06350006350009525,
        "quick": 0.06350006350009525,
        "verification": 0.06350006350009525,
        "environment": 0.1270001270001905,
        "tooling": 0.06350006350009525,
        "reuse": 0.06350006350009525,
        "local": 0.1270001270001905,
        "venv": 0.06350006350009525,
        "seeded": 0.06350006350009525,
        "by": 0.1270001270001905,
        "pycharm": 0.06350006350009525,
        "do": 0.06350006350009525,
        "not": 0.06350006350009525,
        "artifacts": 0.06350006350009525,
        "store": 0.06350006350009525,
        "secrets": 0.06350006350009525,
        "env": 0.06350006350009525,
        "consumed": 0.06350006350009525,
        "llm": 0.06350006350009525,
        "runner": 0.06350006350009525,
        "large": 0.06350006350009525,
        "model": 0.06350006350009525,
        "weights": 0.06350006350009525,
        "outside": 0.06350006350009525,
        "repository": 0.06350006350009525,
        "document": 0.06350006350009525,
        "their": 0.06350006350009525,
        "locations": 0.06350006350009525,
        "models": 0.06350006350009525,
        "md": 0.06350006350009525,
        "once": 0.06350006350009525,
        "integration": 0.06350006350009525,
        "begins": 0.06350006350009525
      },
      "text": "README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to relevant issues or spec sections; attach before/after README excerpts when altering generation output. - Run lint, type-check, and test commands before opening a PR and paste condensed results in the description for quick verification. ## Environment & Tooling Notes - Reuse the local `.venv` seeded by PyCharm; do not commit environment artifacts and store secrets in a `.env` consumed by the local LLM runner. - Keep large model weights outside the repository and document their locations in `docs/models.md` once integration work begins.",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "docs/ci/docgen-update.yml#0",
      "vector": {
        "name": 0.2773500981126145,
        "docgen": 0.1849000654084097,
        "update": 0.2311250817605121,
        "on": 0.09245003270420485,
        "push": 0.046225016352102424,
        "branches": 0.09245003270420485,
        "main": 0.13867504905630726,
        "pull_request": 0.13867504905630726,
        "jobs": 0.046225016352102424,
        "readme": 0.1849000654084097,
        "runs": 0.046225016352102424,
        "self": 0.046225016352102424,
        "hosted": 0.046225016352102424,
        "steps": 0.09245003270420485,
        "uses": 0.13867504905630726,
        "actions": 0.2311250817605121,
        "checkout": 0.046225016352102424,
        "v4": 0.09245003270420485,
        "with": 0.13867504905630726,
        "fetch": 0.046225016352102424,
        "depth": 0.046225016352102424,
        "0": 0.046225016352102424,
        "setup": 0.046225016352102424,
        "python": 0.2311250817605121,
        "v5": 0.046225016352102424,
        "version": 0.046225016352102424,
        "3": 0.046225016352102424,
        "11": 0.046225016352102424,
        "cache": 0.09245003270420485,
        "path": 0.046225016352102424,
        "pip": 0.2773500981126145,
        "key": 0.046225016352102424,
        "runner": 0.09245003270420485,
        "os": 0.09245003270420485,
        "hashfiles": 0.046225016352102424,
        "pyproject": 0.046225016352102424,
        "toml": 0.046225016352102424,
        "restore": 0.046225016352102424,
        "keys": 0.046225016352102424,
        "install": 0.13867504905630726,
        "dependencies": 0.046225016352102424,
        "run": 0.2311250817605121,
        "m": 0.13867504905630726,
        "upgrade": 0.046225016352102424,
        "e": 0.046225016352102424,
        "dev": 0.046225016352102424,
        "determine": 0.046225016352102424,
        "diff": 0.1849000654084097,
        "base": 0.2773500981126145,
        "id": 0.046225016352102424,
        "if": 0.09245003270420485,
        "github": 0.2311250817605121,
        "event_name": 0.046225016352102424,
        "then": 0.09245003270420485,
        "echo": 0.09245003270420485,
        "event": 0.046225016352102424,
        "sha": 0.046225016352102424,
        "github_output": 0.09245003270420485,
        "else": 0.046225016352102424,
        "origin": 0.046225016352102424,
        "fi": 0.09245003270420485,
        "env": 0.046225016352102424,
        "docgen_llm_base_url": 0.046225016352102424,
        "http": 0.046225016352102424,
        "localhost": 0.046225016352102424,
        "12434": 0.046225016352102424,
        "engines": 0.046225016352102424,
        "v1": 0.046225016352102424,
        "cli": 0.046225016352102424,
        "outputs": 0.046225016352102424,
        "commit": 0.09245003270420485,
        "md": 0.09245003270420485,
        "optional": 0.046225016352102424,
        "git": 0.1849000654084097,
        "status": 0.046225016352102424,
        "short": 0.046225016352102424,
        "grep": 0.046225016352102424,
        "q": 0.046225016352102424,
        "config": 0.09245003270420485,
        "user": 0.09245003270420485,
        "email": 0.046225016352102424,
        "users": 0.046225016352102424,
        "noreply": 0.046225016352102424,
        "com": 0.046225016352102424,
        "am": 0.046225016352102424,
        "docs": 0.046225016352102424,
        "via": 0.046225016352102424
      },
      "text": "name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted steps: - uses: actions/checkout@v4 with: fetch-depth: 0 - uses: actions/setup-python@v5 with: python-version: '3.11' - uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install dependencies run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README.md (optional) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi",
      "metadata": {
        "path": "docs/ci/docgen-update.yml",
        "tags": [
          "docs"
        ],
        "hash": "48bec2bc404707486fcb1661def194395cc581bf55cb2f610704d495663e6a14"
      }
    },
    {
      "id": "docs/ci/github-actions.md#0",
      "vector": {
        "github": 0.2528558164964056,
        "actions": 0.2212488394343549,
        "integration": 0.0316069770620507,
        "the": 0.18964186237230418,
        "workflow": 0.0632139541241014,
        "below": 0.0316069770620507,
        "runs": 0.0632139541241014,
        "docgen": 0.2212488394343549,
        "update": 0.18964186237230418,
        "on": 0.1264279082482028,
        "pushes": 0.0316069770620507,
        "and": 0.0316069770620507,
        "pull": 0.0316069770620507,
        "requests": 0.0316069770620507,
        "it": 0.0316069770620507,
        "assumes": 0.0316069770620507,
        "a": 0.0632139541241014,
        "self": 0.0632139541241014,
        "hosted": 0.1264279082482028,
        "runner": 0.15803488531025348,
        "or": 0.09482093118615209,
        "with": 0.18964186237230418,
        "network": 0.0632139541241014,
        "access": 0.0632139541241014,
        "to": 0.1264279082482028,
        "your": 0.0632139541241014,
        "local": 0.09482093118615209,
        "model": 0.0316069770620507,
        "runtime": 0.0316069770620507,
        "job": 0.0316069770620507,
        "skips": 0.0316069770620507,
        "early": 0.0316069770620507,
        "when": 0.0316069770620507,
        "no": 0.0316069770620507,
        "files": 0.0316069770620507,
        "match": 0.0316069770620507,
        "yml": 0.0316069770620507,
        "s": 0.0316069770620507,
        "ci": 0.0316069770620507,
        "watched_globs": 0.0316069770620507,
        "entries": 0.0316069770620507,
        "so": 0.0316069770620507,
        "that": 0.0316069770620507,
        "purely": 0.0316069770620507,
        "documentation": 0.0316069770620507,
        "only": 0.0316069770620507,
        "changes": 0.0316069770620507,
        "do": 0.0316069770620507,
        "not": 0.0316069770620507,
        "trigger": 0.0316069770620507,
        "generator": 0.0316069770620507,
        "yaml": 0.0316069770620507,
        "name": 0.3476767476825577,
        "push": 0.0316069770620507,
        "branches": 0.0632139541241014,
        "main": 0.09482093118615209,
        "pull_request": 0.09482093118615209,
        "jobs": 0.0316069770620507,
        "readme": 0.2212488394343549,
        "requires": 0.0316069770620507,
        "llm": 0.0316069770620507,
        "steps": 0.0632139541241014,
        "checkout": 0.0632139541241014,
        "repository": 0.0316069770620507,
        "uses": 0.1264279082482028,
        "v4": 0.09482093118615209,
        "fetch": 0.0316069770620507,
        "depth": 0.0316069770620507,
        "0": 0.0316069770620507,
        "set": 0.0316069770620507,
        "up": 0.0316069770620507,
        "python": 0.18964186237230418,
        "setup": 0.0316069770620507,
        "v5": 0.0316069770620507,
        "version": 0.0316069770620507,
        "3": 0.0316069770620507,
        "11": 0.0316069770620507,
        "cache": 0.09482093118615209,
        "pip": 0.2212488394343549,
        "dependencies": 0.0316069770620507,
        "path": 0.0632139541241014,
        "key": 0.0316069770620507,
        "os": 0.0632139541241014,
        "hashfiles": 0.0316069770620507,
        "pyproject": 0.0316069770620507,
        "toml": 0.0316069770620507,
        "restore": 0.0316069770620507,
        "keys": 0.0316069770620507,
        "install": 0.09482093118615209,
        "in": 0.0316069770620507,
        "editable": 0.0316069770620507,
        "mode": 0.0316069770620507,
        "run": 0.15803488531025348,
        "m": 0.09482093118615209,
        "upgrade": 0.0316069770620507,
        "e": 0.0316069770620507,
        "dev": 0.0316069770620507,
        "determine": 0.0316069770620507,
        "diff": 0.1264279082482028,
        "base": 0.18964186237230418,
        "id": 0.0316069770620507,
        "if": 0.1264279082482028,
        "event_name": 0.0316069770620507,
        "then": 0.0632139541241014,
        "echo": 0.0632139541241014,
        "event": 0.0316069770620507,
        "sha": 0.0316069770620507,
        "github_output": 0.0632139541241014,
        "else": 0.0316069770620507,
        "origin": 0.0316069770620507,
        "fi": 0.0632139541241014,
        "env": 0.0316069770620507,
        "docgen_llm_base_url": 0.0632139541241014,
        "http": 0.0316069770620507,
        "localhost": 0.0316069770620507,
        "12434": 0.0316069770620507,
        "engines": 0.0316069770620507,
        "v1": 0.0316069770620507,
        "cli": 0.0632139541241014,
        "outputs": 0.0316069770620507,
        "commit": 0.0632139541241014,
        "updates": 0.0316069770620507,
        "any": 0.0316069770620507,
        "git": 0.1264279082482028,
        "status": 0.0316069770620507,
        "short": 0.0316069770620507,
        "grep": 0.0316069770620507,
        "q": 0.0316069770620507,
        "md": 0.0632139541241014,
        "config": 0.0632139541241014,
        "user": 0.0632139541241014,
        "email": 0.0316069770620507,
        "users": 0.0316069770620507,
        "noreply": 0.0316069770620507,
        "com": 0.0316069770620507,
        "am": 0.0316069770620507,
        "docs": 0.0316069770620507,
        "via": 0.0316069770620507,
        "upload": 0.0632139541241014,
        "artifact": 0.0632139541241014,
        "success": 0.0316069770620507,
        "generated": 0.0316069770620507,
        "note": 0.0316069770620507,
        "relies": 0.0316069770620507,
        "pointing": 0.0316069770620507,
        "private": 0.0632139541241014,
        "inference": 0.0316069770620507,
        "endpoint": 0.0316069770620507,
        "for": 0.0316069770620507,
        "runners": 0.0316069770620507,
        "you": 0.0316069770620507,
        "will": 0.0316069770620507,
        "need": 0.0316069770620507,
        "expose": 0.0316069770620507,
        "within": 0.0316069770620507,
        "switch": 0.0316069770620507,
        "ollama": 0.0316069770620507,
        "appropriate": 0.0316069770620507,
        "caching": 0.0316069770620507
      },
      "text": "# GitHub Actions Integration The workflow below runs `docgen update` on pushes and pull requests. It assumes a self-hosted runner (or GitHub-hosted runner with network access to your local model runtime). The job skips early when no files match `.docgen.yml`'s `ci.watched_globs` entries so that purely documentation-only changes do not trigger the generator. ```yaml name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted # requires local LLM access steps: - name: Checkout repository uses: actions/checkout@v4 with: fetch-depth: 0 - name: Set up Python uses: actions/setup-python@v5 with: python-version: '3.11' - name: Cache pip dependencies uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install docgen in editable mode run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: | python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README updates (if any) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi - name: Upload README artifact if: success() uses: actions/upload-artifact@v4 with: name: generated-readme path: README.md ``` > **Note:** the workflow relies on `DOCGEN_LLM_BASE_URL` pointing to a local or > private inference endpoint. For GitHub-hosted runners you will need to expose > the runner within your private network or switch to the `ollama` CLI with > appropriate caching. ```",
      "metadata": {
        "path": "docs/ci/github-actions.md",
        "tags": [
          "docs"
        ],
        "hash": "178c6f25ecf7325348a9158158c6e6f36c29d520a922a6f0c2c739f4efe1b0d8"
      }
    },
    {
      "id": "spec/feature_checklist.md#0",
      "vector": {
        "intelligent": 0.028513297425610054,
        "readme": 0.08553989227683016,
        "generator": 0.028513297425610054,
        "feature": 0.028513297425610054,
        "checklist": 0.028513297425610054,
        "status": 0.028513297425610054,
        "legend": 0.028513297425610054,
        "not": 0.028513297425610054,
        "started": 0.028513297425610054,
        "in": 0.028513297425610054,
        "progress": 0.028513297425610054,
        "done": 0.028513297425610054,
        "scope": 0.028513297425610054,
        "tags": 0.028513297425610054,
        "mvp": 0.4847260562353709,
        "required": 0.028513297425610054,
        "for": 0.11405318970244022,
        "proof": 0.028513297425610054,
        "of": 0.08553989227683016,
        "concept": 0.028513297425610054,
        "next": 0.2851329742561005,
        "nice": 0.028513297425610054,
        "to": 0.08553989227683016,
        "have": 0.028513297425610054,
        "soon": 0.028513297425610054,
        "stretch": 0.11405318970244022,
        "later": 0.028513297425610054,
        "1": 0.05702659485122011,
        "core": 0.028513297425610054,
        "workflows": 0.028513297425610054,
        "x": 0.570265948512201,
        "docgen": 0.11405318970244022,
        "init": 0.028513297425610054,
        "initialize": 0.028513297425610054,
        "repos": 0.028513297425610054,
        "without": 0.05702659485122011,
        "docs": 0.11405318970244022,
        "update": 0.028513297425610054,
        "detect": 0.028513297425610054,
        "changes": 0.028513297425610054,
        "on": 0.028513297425610054,
        "commit": 0.028513297425610054,
        "pr": 0.028513297425610054,
        "and": 0.028513297425610054,
        "patch": 0.028513297425610054,
        "affected": 0.028513297425610054,
        "sections": 0.05702659485122011,
        "regenerate": 0.028513297425610054,
        "manual": 0.028513297425610054,
        "full": 0.028513297425610054,
        "partial": 0.028513297425610054,
        "regeneration": 0.028513297425610054,
        "dry": 0.05702659485122011,
        "run": 0.05702659485122011,
        "mode": 0.05702659485122011,
        "preview": 0.028513297425610054,
        "diffs": 0.028513297425610054,
        "writing": 0.028513297425610054,
        "service": 0.028513297425610054,
        "fastapi": 0.05702659485122011,
        "endpoints": 0.028513297425610054,
        "ci": 0.05702659485122011,
        "bots": 0.028513297425610054,
        "2": 0.028513297425610054,
        "repository": 0.028513297425610054,
        "scanning": 0.028513297425610054,
        "indexing": 0.028513297425610054,
        "walk": 0.028513297425610054,
        "filesystem": 0.028513297425610054,
        "with": 0.028513297425610054,
        "ignore": 0.028513297425610054,
        "rules": 0.028513297425610054,
        "gitignore": 0.028513297425610054,
        "yml": 0.028513297425610054,
        "build": 0.08553989227683016,
        "normalized": 0.028513297425610054,
        "manifest": 0.05702659485122011,
        "files": 0.05702659485122011,
        "roles": 0.028513297425610054,
        "src": 0.028513297425610054,
        "test": 0.05702659485122011,
        "config": 0.08553989227683016,
        "infra": 0.028513297425610054,
        "hash": 0.028513297425610054,
        "cache": 0.028513297425610054,
        "file": 0.028513297425610054,
        "metadata": 0.028513297425610054,
        "speed": 0.028513297425610054,
        "subsequent": 0.028513297425610054,
        "runs": 0.028513297425610054,
        "entrypoint": 0.05702659485122011,
        "detection": 0.05702659485122011,
        "e": 0.028513297425610054,
        "g": 0.028513297425610054,
        "main": 0.028513297425610054,
        "springbootapplication": 0.028513297425610054,
        "app": 0.028513297425610054,
        "monorepo": 0.05702659485122011,
        "module": 0.028513297425610054,
        "3": 0.028513297425610054,
        "analyzers": 0.14256648712805026,
        "plugin": 0.028513297425610054,
        "based": 0.028513297425610054,
        "language": 0.028513297425610054,
        "python": 0.028513297425610054,
        "java": 0.028513297425610054,
        "node": 0.028513297425610054,
        "js": 0.05702659485122011,
        "tier": 0.028513297425610054,
        "poetry": 0.028513297425610054,
        "setuptools": 0.028513297425610054,
        "maven": 0.028513297425610054,
        "gradle": 0.028513297425610054,
        "npm": 0.028513297425610054,
        "pnpm": 0.028513297425610054,
        "yarn": 0.028513297425610054,
        "dependency": 0.028513297425610054,
        "from": 0.028513297425610054,
        "pattern": 0.028513297425610054,
        "docker": 0.028513297425610054,
        "k8s": 0.028513297425610054,
        "layout": 0.028513297425610054,
        "tree": 0.028513297425610054,
        "sitter": 0.028513297425610054,
        "powered": 0.028513297425610054,
        "symbol": 0.028513297425610054,
        "extraction": 0.028513297425610054,
        "flagged": 0.028513297425610054,
        "4": 0.028513297425610054,
        "knowledge": 0.05702659485122011,
        "store": 0.028513297425610054,
        "rag": 0.028513297425610054,
        "local": 0.05702659485122011,
        "embedding": 0.028513297425610054,
        "model": 0.05702659485122011,
        "chunking": 0.028513297425610054,
        "strategy": 0.028513297425610054,
        "index": 0.028513297425610054,
        "top": 0.05702659485122011,
        "n": 0.028513297425610054,
        "source": 0.028513297425610054,
        "headers": 0.028513297425610054,
        "comments": 0.028513297425610054,
        "section": 0.14256648712805026,
        "scoped": 0.028513297425610054,
        "retrieval": 0.028513297425610054,
        "k": 0.028513297425610054,
        "per": 0.05702659485122011,
        "lightweight": 0.028513297425610054,
        "graph": 0.028513297425610054,
        "modules": 0.028513297425610054,
        "services": 0.028513297425610054,
        "signals": 0.028513297425610054,
        "5": 0.028513297425610054,
        "prompting": 0.028513297425610054,
        "templates": 0.08553989227683016,
        "jinja2": 0.028513297425610054,
        "intro": 0.028513297425610054,
        "features": 0.028513297425610054,
        "architecture": 0.05702659485122011,
        "quickstart": 0.028513297425610054,
        "deployment": 0.028513297425610054,
        "troubleshooting": 0.028513297425610054,
        "faq": 0.028513297425610054,
        "license": 0.028513297425610054,
        "guardrailed": 0.028513297425610054,
        "system": 0.028513297425610054,
        "prompt": 0.028513297425610054,
        "no": 0.028513297425610054,
        "speculation": 0.028513297425610054,
        "cite": 0.028513297425610054,
        "repo": 0.028513297425610054,
        "facts": 0.028513297425610054,
        "only": 0.028513297425610054,
        "token": 0.028513297425610054,
        "budgeting": 0.028513297425610054,
        "streaming": 0.028513297425610054,
        "by": 0.028513297425610054,
        "generation": 0.028513297425610054,
        "template": 0.028513297425610054,
        "override": 0.028513297425610054,
        "mechanism": 0.028513297425610054,
        "j2": 0.028513297425610054,
        "style": 0.028513297425610054,
        "presets": 0.028513297425610054,
        "concise": 0.028513297425610054,
        "vs": 0.028513297425610054,
        "comprehensive": 0.028513297425610054,
        "mermaid": 0.028513297425610054,
        "diagrams": 0.028513297425610054,
        "flow": 0.028513297425610054,
        "where": 0.028513297425610054,
        "appropriate": 0.028513297425610054,
        "6": 0.028513297425610054,
        "llm": 0.028513297425610054,
        "runner": 0.05702659485122011,
        "http": 0.028513297425610054,
        "adapter": 0.05702659485122011,
        "host": 0.028513297425610054,
        "container": 0.028513297425610054,
        "defaults": 0.028513297425610054,
        "env": 0.028513297425610054,
        "api": 0.028513297425610054,
        "key": 0.028513297425610054,
        "overrides": 0.028513297425610054,
        "llama": 0.028513297425610054,
        "cpp": 0.028513297425610054,
        "structured": 0.028513297425610054,
        "outputs": 0.028513297425610054,
        "tool": 0.028513297425610054,
        "use": 0.028513297425610054,
        "compatibility": 0.028513297425610054,
        "7": 0.028513297425610054,
        "post": 0.028513297425610054,
        "processing": 0.028513297425610054,
        "markdown": 0.028513297425610054,
        "lint": 0.028513297425610054,
        "heading": 0.028513297425610054,
        "hierarchy": 0.028513297425610054
      },
      "text": "# Intelligent README Generator \u2014 Feature Checklist > Status legend: \u2610 Not started \u00b7 \u25d0 In progress \u00b7 \u2714 Done > Scope tags: **[MVP]** required for proof\u2011of\u2011concept, **[NEXT]** nice\u2011to\u2011have soon, **[STRETCH]** later ## 1) Core Workflows - [x] **docgen init** \u2014 Initialize README for repos without docs **[MVP]** - [x] **docgen update** \u2014 Detect changes on commit/PR and patch affected sections **[MVP]** - [ ] **docgen regenerate** \u2014 Manual full/partial regeneration **[MVP]** - [x] Dry\u2011run mode (`--dry-run`) to preview diffs without writing **[NEXT]** - [ ] Service mode (FastAPI) endpoints for CI/bots **[STRETCH]** ## 2) Repository Scanning & Indexing - [x] Walk filesystem with ignore rules (`.gitignore`, `.docgen.yml`) **[MVP]** - [x] Build normalized manifest of files, roles (src/test/docs/config/infra) **[MVP]** - [x] Hash & cache file metadata to speed subsequent runs **[MVP]** - [x] Entrypoint detection (e.g., `main()`, `@SpringBootApplication`, FastAPI app) **[NEXT]** - [x] Monorepo module detection **[NEXT]** ## 3) Analyzers (Plugin\u2011based) - [x] Language analyzers: Python, Java, Node.js (Tier\u20111) **[MVP]** - [x] Build analyzers: Poetry/Setuptools, Maven/Gradle, npm/pnpm/yarn **[MVP]** - [x] Dependency analyzers from manifest files **[MVP]** - [x] Pattern analyzers: Docker/K8s, CI config, monorepo layout **[NEXT]** - [ ] Tree\u2011sitter powered symbol/entrypoint extraction (flagged) **[STRETCH]** ## 4) Knowledge Store (RAG) - [ ] Local embedding model + chunking strategy **[MVP]** - [ ] Index `README`, `/docs`, top N source headers & comments **[MVP]** - [ ] Section\u2011scoped retrieval (top\u2011k per section) **[MVP]** - [ ] Lightweight knowledge graph of modules/services/signals **[NEXT]** ## 5) Prompting & Templates - [x] Jinja2 templates per section (intro, features, architecture, quickstart, config, build/test, deployment, troubleshooting, FAQ, license) **[MVP]** - [x] Guardrailed system prompt (\u201cno speculation; cite repo facts only\u201d) **[MVP]** - [x] Token budgeting & streaming section-by-section generation **[MVP]** - [x] Template override mechanism (`docs/templates/*.j2`) **[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy,",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#1",
      "vector": {
        "next": 0.3907019005301633,
        "x": 0.5860528507952449,
        "style": 0.05581455721859476,
        "presets": 0.02790727860929738,
        "concise": 0.02790727860929738,
        "vs": 0.02790727860929738,
        "comprehensive": 0.02790727860929738,
        "mermaid": 0.02790727860929738,
        "js": 0.05581455721859476,
        "diagrams": 0.02790727860929738,
        "for": 0.11162911443718952,
        "architecture": 0.02790727860929738,
        "flow": 0.02790727860929738,
        "sections": 0.05581455721859476,
        "where": 0.02790727860929738,
        "appropriate": 0.02790727860929738,
        "6": 0.02790727860929738,
        "local": 0.05581455721859476,
        "llm": 0.05581455721859476,
        "runner": 0.05581455721859476,
        "model": 0.02790727860929738,
        "http": 0.02790727860929738,
        "adapter": 0.05581455721859476,
        "host": 0.02790727860929738,
        "container": 0.02790727860929738,
        "defaults": 0.05581455721859476,
        "env": 0.02790727860929738,
        "api": 0.02790727860929738,
        "key": 0.02790727860929738,
        "overrides": 0.02790727860929738,
        "mvp": 0.47442373635805546,
        "llama": 0.02790727860929738,
        "cpp": 0.02790727860929738,
        "structured": 0.02790727860929738,
        "outputs": 0.05581455721859476,
        "tool": 0.02790727860929738,
        "use": 0.02790727860929738,
        "compatibility": 0.02790727860929738,
        "stretch": 0.05581455721859476,
        "7": 0.02790727860929738,
        "post": 0.02790727860929738,
        "processing": 0.02790727860929738,
        "markdown": 0.02790727860929738,
        "lint": 0.05581455721859476,
        "heading": 0.02790727860929738,
        "hierarchy": 0.02790727860929738,
        "code": 0.05581455721859476,
        "fences": 0.02790727860929738,
        "line": 0.02790727860929738,
        "length": 0.02790727860929738,
        "auto": 0.05581455721859476,
        "toc": 0.02790727860929738,
        "level": 0.02790727860929738,
        "3": 0.02790727860929738,
        "badges": 0.02790727860929738,
        "build": 0.05581455721859476,
        "coverage": 0.05581455721859476,
        "license": 0.02790727860929738,
        "with": 0.05581455721859476,
        "safe": 0.05581455721859476,
        "link": 0.05581455721859476,
        "validator": 0.02790727860929738,
        "relative": 0.02790727860929738,
        "absolute": 0.02790727860929738,
        "managed": 0.02790727860929738,
        "markers": 0.02790727860929738,
        "idempotent": 0.02790727860929738,
        "patching": 0.02790727860929738,
        "docgen": 0.08372183582789214,
        "begin": 0.02790727860929738,
        "end": 0.02790727860929738,
        "8": 0.02790727860929738,
        "git": 0.02790727860929738,
        "integration": 0.05581455721859476,
        "diff": 0.05581455721859476,
        "detection": 0.02790727860929738,
        "map": 0.02790727860929738,
        "changed": 0.05581455721859476,
        "files": 0.05581455721859476,
        "impacted": 0.02790727860929738,
        "branch": 0.02790727860929738,
        "pr": 0.05581455721859476,
        "creation": 0.02790727860929738,
        "summary": 0.02790727860929738,
        "of": 0.02790727860929738,
        "readme": 0.11162911443718952,
        "deltas": 0.02790727860929738,
        "commit": 0.02790727860929738,
        "mode": 0.02790727860929738,
        "init": 0.02790727860929738,
        "or": 0.02790727860929738,
        "small": 0.02790727860929738,
        "changes": 0.05581455721859476,
        "configurable": 0.02790727860929738,
        "prevent": 0.02790727860929738,
        "loops": 0.02790727860929738,
        "on": 0.05581455721859476,
        "only": 0.08372183582789214,
        "9": 0.02790727860929738,
        "configuration": 0.02790727860929738,
        "parse": 0.02790727860929738,
        "yml": 0.02790727860929738,
        "analyzers": 0.02790727860929738,
        "publish": 0.02790727860929738,
        "path": 0.02790727860929738,
        "exclusions": 0.02790727860929738,
        "watched_globs": 0.02790727860929738,
        "ci": 0.08372183582789214,
        "triggers": 0.02790727860929738,
        "per": 0.05581455721859476,
        "section": 0.02790727860929738,
        "off": 0.02790727860929738,
        "toggles": 0.02790727860929738,
        "and": 0.08372183582789214,
        "titles": 0.02790727860929738,
        "10": 0.02790727860929738,
        "github": 0.02790727860929738,
        "actions": 0.02790727860929738,
        "example": 0.02790727860929738,
        "workflow": 0.02790727860929738,
        "gitlab": 0.02790727860929738,
        "bitbucket": 0.02790727860929738,
        "pipelines": 0.02790727860929738,
        "samples": 0.02790727860929738,
        "labeling": 0.02790727860929738,
        "docs": 0.02790727860929738,
        "update": 0.02790727860929738,
        "behavior": 0.02790727860929738,
        "11": 0.02790727860929738,
        "security": 0.02790727860929738,
        "privacy": 0.02790727860929738,
        "models": 0.02790727860929738,
        "never": 0.02790727860929738,
        "exfiltrate": 0.02790727860929738,
        "respect": 0.02790727860929738,
        "gitignore": 0.02790727860929738,
        "exclude": 0.02790727860929738,
        "large": 0.02790727860929738,
        "binaries": 0.02790727860929738,
        "secrets": 0.02790727860929738,
        "optional": 0.02790727860929738,
        "simple": 0.02790727860929738,
        "secret": 0.02790727860929738,
        "scanner": 0.02790727860929738,
        "gate": 0.02790727860929738,
        "12": 0.02790727860929738,
        "multi": 0.02790727860929738,
        "language": 0.02790727860929738,
        "project": 0.02790727860929738,
        "types": 0.02790727860929738,
        "tier": 0.05581455721859476,
        "1": 0.02790727860929738,
        "python": 0.02790727860929738,
        "poetry": 0.02790727860929738,
        "setuptools": 0.02790727860929738,
        "java": 0.02790727860929738,
        "maven": 0.02790727860929738,
        "gradle": 0.02790727860929738,
        "spring": 0.02790727860929738,
        "boot": 0.02790727860929738,
        "node": 0.02790727860929738,
        "npm": 0.02790727860929738,
        "pnpm": 0.02790727860929738,
        "express": 0.02790727860929738,
        "2": 0.02790727860929738,
        "go": 0.02790727860929738,
        "rust": 0.02790727860929738,
        "ruby": 0.02790727860929738,
        "php": 0.02790727860929738,
        "framework": 0.02790727860929738,
        "aware": 0.02790727860929738,
        "quickstart": 0.02790727860929738,
        "commands": 0.02790727860929738,
        "system": 0.02790727860929738,
        "13": 0.02790727860929738,
        "quality": 0.02790727860929738,
        "gates": 0.02790727860929738,
        "evaluation": 0.02790727860929738,
        "command": 0.02790727860929738,
        "validation": 0.02790727860929738,
        "existence": 0.02790727860929738,
        "checks": 0.05581455721859476,
        "no": 0.02790727860929738,
        "hallucination": 0.02790727860929738,
        "reject": 0.02790727860929738,
        "facts": 0.02790727860929738,
        "not": 0.02790727860929738,
        "in": 0.02790727860929738,
        "signals": 0.02790727860929738,
        "rag": 0.05581455721859476,
        "scorecard": 0.02790727860929738,
        "buildability": 0.02790727860929738,
        "validity": 0.02790727860929738,
        "alignment": 0.02790727860929738,
        "14": 0.02790727860929738,
        "performance": 0.02790727860929738,
        "caching": 0.02790727860929738,
        "persist": 0.02790727860929738,
        "analyzer": 0.02790727860929738,
        "embeddings": 0.02790727860929738,
        "under": 0.02790727860929738,
        "incremental": 0.02790727860929738,
        "refresh": 0.02790727860929738,
        "15": 0.02790727860929738,
        "error": 0.02790727860929738,
        "handling": 0.02790727860929738,
        "ux": 0.02790727860929738,
        "fail": 0.02790727860929738,
        "stub": 0.02790727860929738,
        "generation": 0.02790727860929738,
        "when": 0.02790727860929738,
        "evidence": 0.02790727860929738
      },
      "text": "**[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy, code fences, line length **[MVP]** - [x] Auto ToC (\u2264 level 3) **[MVP]** - [x] Badges (build, coverage, license) with safe defaults **[NEXT]** - [x] Link validator (relative/absolute) **[NEXT]** - [x] Managed markers for idempotent patching (`<!-- docgen:begin:end -->`) **[MVP]** ## 8) Git Integration - [x] Diff detection (map changed files \u2192 impacted sections) **[MVP]** - [x] Branch + PR creation with summary of README deltas **[MVP]** - [x] Commit mode for init or small changes (configurable) **[NEXT]** - [ ] Prevent loops on README\u2011only changes **[MVP]** ## 9) Configuration - [x] Parse `.docgen.yml` (LLM, readme style, analyzers, publish) **[MVP]** - [x] Path exclusions & `watched_globs` for CI triggers **[MVP]** - [ ] Per-section on/off toggles and titles **[NEXT]** ## 10) CI Integration - [x] GitHub Actions example workflow **[MVP]** - [ ] GitLab CI and Bitbucket Pipelines samples **[NEXT]** - [x] Labeling (`docs:auto`) and PR update behavior **[NEXT]** ## 11) Security & Privacy - [x] Local-only models; never exfiltrate code **[MVP]** - [ ] Respect `.gitignore`; exclude large binaries/secrets **[MVP]** - [ ] Optional simple secret scanner gate **[NEXT]** ## 12) Multi\u2011Language & Project Types - [ ] Tier\u20111: Python (Poetry/Setuptools), Java (Maven/Gradle/Spring Boot), Node.js (npm/pnpm/Express/Next) **[MVP]** - [ ] Tier\u20112: Go, Rust, Ruby, PHP **[STRETCH]** - [x] Framework\u2011aware quickstart commands per build system **[MVP]** ## 13) Quality Gates & Evaluation - [ ] Command validation (existence checks) **[MVP]** - [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#2",
      "vector": {
        "no": 0.07018624063435965,
        "hallucination": 0.07018624063435965,
        "checks": 0.07018624063435965,
        "reject": 0.07018624063435965,
        "facts": 0.07018624063435965,
        "not": 0.07018624063435965,
        "in": 0.07018624063435965,
        "signals": 0.07018624063435965,
        "rag": 0.1403724812687193,
        "mvp": 0.42111744380615784,
        "x": 0.49130368444051753,
        "readme": 0.1403724812687193,
        "scorecard": 0.07018624063435965,
        "coverage": 0.07018624063435965,
        "buildability": 0.07018624063435965,
        "link": 0.07018624063435965,
        "validity": 0.07018624063435965,
        "diff": 0.07018624063435965,
        "alignment": 0.07018624063435965,
        "lint": 0.1403724812687193,
        "next": 0.21055872190307892,
        "14": 0.07018624063435965,
        "performance": 0.07018624063435965,
        "caching": 0.07018624063435965,
        "persist": 0.07018624063435965,
        "analyzer": 0.1403724812687193,
        "outputs": 0.07018624063435965,
        "embeddings": 0.07018624063435965,
        "under": 0.07018624063435965,
        "docgen": 0.07018624063435965,
        "incremental": 0.07018624063435965,
        "refresh": 0.07018624063435965,
        "changed": 0.07018624063435965,
        "files": 0.07018624063435965,
        "only": 0.07018624063435965,
        "15": 0.07018624063435965,
        "error": 0.07018624063435965,
        "handling": 0.07018624063435965,
        "ux": 0.07018624063435965,
        "fail": 0.07018624063435965,
        "safe": 0.07018624063435965,
        "stub": 0.07018624063435965,
        "generation": 0.07018624063435965,
        "when": 0.07018624063435965,
        "evidence": 0.07018624063435965,
        "is": 0.07018624063435965,
        "insufficient": 0.07018624063435965,
        "clear": 0.07018624063435965,
        "run": 0.07018624063435965,
        "logs": 0.07018624063435965,
        "pr": 0.07018624063435965,
        "body": 0.07018624063435965,
        "with": 0.07018624063435965,
        "rationale": 0.07018624063435965,
        "sections": 0.07018624063435965,
        "updated": 0.07018624063435965,
        "because": 0.07018624063435965,
        "helpful": 0.07018624063435965,
        "cli": 0.07018624063435965,
        "errors": 0.07018624063435965,
        "and": 0.1403724812687193,
        "verbose": 0.07018624063435965,
        "flag": 0.07018624063435965,
        "works": 0.07018624063435965,
        "pre": 0.07018624063435965,
        "post": 0.07018624063435965,
        "subcommand": 0.07018624063435965,
        "16": 0.07018624063435965,
        "extensibility": 0.07018624063435965,
        "abc": 0.07018624063435965,
        "plugin": 0.07018624063435965,
        "discovery": 0.07018624063435965,
        "template": 0.07018624063435965,
        "packs": 0.07018624063435965,
        "org": 0.07018624063435965,
        "style": 0.1403724812687193,
        "definition": 0.07018624063435965,
        "of": 0.07018624063435965,
        "done": 0.07018624063435965,
        "per": 0.07018624063435965,
        "section": 0.07018624063435965,
        "passing": 0.07018624063435965,
        "unit": 0.07018624063435965,
        "integration": 0.07018624063435965,
        "tests": 0.07018624063435965,
        "for": 0.07018624063435965,
        "core": 0.07018624063435965,
        "logic": 0.07018624063435965,
        "golden": 0.07018624063435965,
        "regression": 0.07018624063435965,
        "test": 0.07018624063435965,
        "s": 0.07018624063435965,
        "meets": 0.07018624063435965,
        "requirements": 0.07018624063435965
      },
      "text": "- [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence is insufficient **[MVP]** - [ ] Clear run logs + PR body with rationale (\u201csections updated because\u2026\u201d) **[MVP]** - [x] Helpful CLI errors and `--verbose` flag (works pre/post subcommand) **[MVP]** ## 16) Extensibility - [x] Analyzer ABC and plugin discovery **[MVP]** - [x] Template packs (org\u2011style) **[NEXT]** --- ### Definition of Done (per section) - [ ] Passing unit & integration tests for core logic - [ ] Golden README regression test(s) - [ ] Meets lint/style requirements",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_order.md#0",
      "vector": {
        "docgen": 0.23979625973207228,
        "development": 0.029974532466509034,
        "roadmap": 0.029974532466509034,
        "phase": 0.20982172726556325,
        "0": 0.029974532466509034,
        "bootstrap": 0.029974532466509034,
        "the": 0.029974532466509034,
        "skeleton": 0.05994906493301807,
        "1": 0.3596943895981084,
        "project": 0.029974532466509034,
        "cli": 0.05994906493301807,
        "config": 0.11989812986603614,
        "loader": 0.029974532466509034,
        "yml": 0.029974532466509034,
        "models": 0.029974532466509034,
        "covers": 0.47959251946414455,
        "commands": 0.029974532466509034,
        "scaffolding": 0.029974532466509034,
        "9": 0.05994906493301807,
        "parse": 0.029974532466509034,
        "16": 0.05994906493301807,
        "analyzer": 0.05994906493301807,
        "abc": 0.05994906493301807,
        "2": 0.23979625973207228,
        "plugin": 0.05994906493301807,
        "discovery": 0.05994906493301807,
        "init": 0.11989812986603614,
        "happy": 0.029974532466509034,
        "path": 0.05994906493301807,
        "single": 0.029974532466509034,
        "repo": 0.11989812986603614,
        "local": 0.11989812986603614,
        "scanner": 0.029974532466509034,
        "manifest": 0.05994906493301807,
        "roles": 0.029974532466509034,
        "hashing": 0.029974532466509034,
        "ignores": 0.05994906493301807,
        "walk": 0.029974532466509034,
        "fs": 0.029974532466509034,
        "cache": 0.029974532466509034,
        "tier": 0.029974532466509034,
        "analyzers": 0.0899235973995271,
        "python": 0.029974532466509034,
        "java": 0.029974532466509034,
        "node": 0.029974532466509034,
        "build": 0.05994906493301807,
        "dependency": 0.029974532466509034,
        "3": 0.0899235973995271,
        "language": 0.05994906493301807,
        "deps": 0.029974532466509034,
        "templates": 0.05994906493301807,
        "prompt": 0.05994906493301807,
        "builder": 0.029974532466509034,
        "section": 0.14987266233254518,
        "by": 0.029974532466509034,
        "guardrailed": 0.029974532466509034,
        "system": 0.029974532466509034,
        "5": 0.11989812986603614,
        "jinja2": 0.029974532466509034,
        "guardrails": 0.029974532466509034,
        "token": 0.029974532466509034,
        "budget": 0.029974532466509034,
        "4": 0.0899235973995271,
        "llm": 0.029974532466509034,
        "runner": 0.029974532466509034,
        "ollama": 0.05994906493301807,
        "adapter": 0.029974532466509034,
        "6": 0.0899235973995271,
        "post": 0.029974532466509034,
        "processor": 0.029974532466509034,
        "managed": 0.029974532466509034,
        "markers": 0.0899235973995271,
        "toc": 0.05994906493301807,
        "markdown": 0.029974532466509034,
        "lint": 0.05994906493301807,
        "7": 0.029974532466509034,
        "git": 0.05994906493301807,
        "publisher": 0.05994906493301807,
        "commit": 0.05994906493301807,
        "mode": 0.05994906493301807,
        "for": 0.05994906493301807,
        "only": 0.0899235973995271,
        "8": 0.0899235973995271,
        "end": 0.05994906493301807,
        "to": 0.029974532466509034,
        "milestone": 0.0899235973995271,
        "generates": 0.029974532466509034,
        "a": 0.0899235973995271,
        "clean": 0.029974532466509034,
        "readme": 0.05994906493301807,
        "with": 0.0899235973995271,
        "no": 0.0899235973995271,
        "docs": 0.05994906493301807,
        "update": 0.11989812986603614,
        "on": 0.029974532466509034,
        "change": 0.05994906493301807,
        "pr": 0.14987266233254518,
        "workflow": 0.029974532466509034,
        "diff": 0.05994906493301807,
        "detection": 0.05994906493301807,
        "mapping": 0.05994906493301807,
        "patching": 0.029974532466509034,
        "inside": 0.029974532466509034,
        "prevent": 0.029974532466509034,
        "loops": 0.029974532466509034,
        "branch": 0.05994906493301807,
        "delta": 0.029974532466509034,
        "summary": 0.029974532466509034,
        "10": 0.05994906493301807,
        "labeling": 0.029974532466509034,
        "later": 0.029974532466509034,
        "opens": 0.029974532466509034,
        "updating": 0.029974532466509034,
        "impacted": 0.029974532466509034,
        "sections": 0.029974532466509034,
        "minimal": 0.029974532466509034,
        "rag": 0.05994906493301807,
        "accuracy": 0.029974532466509034,
        "lite": 0.029974532466509034,
        "embed": 0.029974532466509034,
        "top": 0.029974532466509034,
        "n": 0.029974532466509034,
        "source": 0.029974532466509034,
        "headers": 0.029974532466509034,
        "scoped": 0.029974532466509034,
        "retrieval": 0.05994906493301807,
        "embedding": 0.029974532466509034,
        "index": 0.029974532466509034,
        "sources": 0.029974532466509034,
        "per": 0.029974532466509034,
        "hallucination": 0.05994906493301807,
        "command": 0.05994906493301807,
        "existence": 0.029974532466509034,
        "checks": 0.029974532466509034,
        "13": 0.029974532466509034,
        "validation": 0.029974532466509034,
        "outputs": 0.029974532466509034,
        "grounded": 0.029974532466509034,
        "in": 0.029974532466509034,
        "facts": 0.029974532466509034,
        "targeted": 0.029974532466509034,
        "context": 0.029974532466509034,
        "hardening": 0.029974532466509034,
        "dx": 0.029974532466509034,
        "error": 0.029974532466509034,
        "handling": 0.029974532466509034,
        "clear": 0.029974532466509034,
        "logs": 0.05994906493301807,
        "verbose": 0.029974532466509034,
        "fail": 0.05994906493301807,
        "safe": 0.05994906493301807,
        "stubs": 0.029974532466509034,
        "15": 0.029974532466509034,
        "ux": 0.029974532466509034,
        "security": 0.029974532466509034,
        "gitignore": 0.029974532466509034,
        "respect": 0.029974532466509034,
        "excludes": 0.05994906493301807,
        "enforcement": 0.029974532466509034,
        "11": 0.029974532466509034,
        "privacy": 0.029974532466509034,
        "ci": 0.029974532466509034,
        "integration": 0.029974532466509034,
        "polish": 0.029974532466509034,
        "github": 0.029974532466509034,
        "actions": 0.05994906493301807,
        "sample": 0.029974532466509034,
        "push": 0.029974532466509034,
        "trigger": 0.029974532466509034,
        "calling": 0.029974532466509034,
        "gh": 0.029974532466509034,
        "refinements": 0.029974532466509034,
        "watched": 0.029974532466509034,
        "globs": 0.029974532466509034,
        "style": 0.05994906493301807,
        "preset": 0.029974532466509034,
        "concise": 0.029974532466509034,
        "comprehensive": 0.029974532466509034,
        "watched_globs": 0.029974532466509034,
        "presets": 0.029974532466509034,
        "multi": 0.029974532466509034,
        "breadth": 0.029974532466509034,
        "framework": 0.029974532466509034,
        "smarts": 0.029974532466509034,
        "entrypoint": 0.029974532466509034,
        "main": 0.029974532466509034,
        "spring": 0.029974532466509034,
        "boot": 0.029974532466509034,
        "fastapi": 0.029974532466509034
      },
      "text": "# DocGen Development Roadmap ## Phase 0 \u2014 Bootstrap the skeleton 1. **Project skeleton + CLI (`docgen`) + config loader (`.docgen.yml`) + models** * Covers: 1 (commands scaffolding), 9 (parse config), 16 (Analyzer ABC) 2. **Analyzer plugin ABC & discovery** * Covers: 16 (plugin discovery) ## Phase 1 \u2014 \"Init\" happy-path (single repo, local) 1. **Repo scanner & manifest (roles, hashing, ignores)** * Covers: 2 (walk FS, manifest, cache, ignores) 2. **Tier-1 analyzers (Python, Java, Node) + build analyzers + dependency analyzers** * Covers: 3 (language/build/deps) 3. **Templates + prompt builder (section-by-section) + guardrailed system prompt** * Covers: 5 (Jinja2 templates, guardrails, token budget) 4. **Local LLM runner (Ollama adapter)** * Covers: 6 (Ollama) 5. **Post-processor: managed markers, ToC, markdown lint** * Covers: 7 (markers, ToC, lint) 6. **Git publisher: commit mode (for init only)** * Covers: 8 (commit mode), 1 (`docgen init` end-to-end) \u2705 **Milestone**: `docgen init` generates a clean README for a repo with no docs. ## Phase 2 \u2014 Update-on-change (PR workflow) 1. **Diff detection + change\u2192section mapping + patching inside markers** * Covers: 8 (diff mapping, prevent loops), 1 (`docgen update`) 2. **Git publisher: branch + PR with delta summary** * Covers: 8 (branch/PR), 10 (labeling later) \u2705 **Milestone**: `docgen update` opens a PR updating only impacted sections. ## Phase 3 \u2014 Minimal RAG & accuracy 1. **RAG Lite: embed README/docs/top N source headers; section-scoped retrieval** * Covers: 4 (local embedding, index sources, per-section retrieval) 2. **No-hallucination & command existence checks** * Covers: 13 (command validation, no-hallucination) \u2705 **Milestone**: outputs grounded in repo facts with targeted context. ## Phase 4 \u2014 Hardening & DX 1. **Error handling, clear logs, `--verbose`, fail-safe stubs** * Covers: 15 (fail-safe, logs, CLI UX) 2. **Security: .gitignore respect, path excludes, local-only enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI)",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/feature_order.md#1",
      "vector": {
        "enforcement": 0.04252432555625623,
        "covers": 0.4252432555625623,
        "11": 0.04252432555625623,
        "privacy": 0.04252432555625623,
        "excludes": 0.04252432555625623,
        "phase": 0.17009730222502492,
        "5": 0.12757297666876868,
        "ci": 0.12757297666876868,
        "integration": 0.04252432555625623,
        "config": 0.12757297666876868,
        "polish": 0.08504865111251246,
        "1": 0.25514595333753737,
        "github": 0.04252432555625623,
        "actions": 0.08504865111251246,
        "sample": 0.04252432555625623,
        "push": 0.04252432555625623,
        "pr": 0.17009730222502492,
        "trigger": 0.04252432555625623,
        "calling": 0.04252432555625623,
        "docgen": 0.12757297666876868,
        "update": 0.04252432555625623,
        "10": 0.08504865111251246,
        "gh": 0.04252432555625623,
        "2": 0.21262162778128116,
        "refinements": 0.04252432555625623,
        "watched": 0.04252432555625623,
        "globs": 0.04252432555625623,
        "style": 0.08504865111251246,
        "preset": 0.04252432555625623,
        "concise": 0.04252432555625623,
        "comprehensive": 0.04252432555625623,
        "9": 0.04252432555625623,
        "watched_globs": 0.04252432555625623,
        "presets": 0.04252432555625623,
        "6": 0.08504865111251246,
        "multi": 0.04252432555625623,
        "language": 0.08504865111251246,
        "breadth": 0.08504865111251246,
        "framework": 0.17009730222502492,
        "smarts": 0.04252432555625623,
        "entrypoint": 0.04252432555625623,
        "detection": 0.04252432555625623,
        "main": 0.04252432555625623,
        "spring": 0.04252432555625623,
        "boot": 0.04252432555625623,
        "fastapi": 0.08504865111251246,
        "aware": 0.08504865111251246,
        "quick": 0.04252432555625623,
        "start": 0.04252432555625623,
        "entrypoints": 0.04252432555625623,
        "12": 0.04252432555625623,
        "commands": 0.04252432555625623,
        "pattern": 0.08504865111251246,
        "analyzers": 0.08504865111251246,
        "docker": 0.04252432555625623,
        "k8s": 0.04252432555625623,
        "monorepo": 0.04252432555625623,
        "layout": 0.04252432555625623,
        "3": 0.12757297666876868,
        "7": 0.12757297666876868,
        "quality": 0.08504865111251246,
        "gates": 0.08504865111251246,
        "performance": 0.08504865111251246,
        "readme": 0.08504865111251246,
        "scorecard": 0.08504865111251246,
        "link": 0.08504865111251246,
        "validator": 0.08504865111251246,
        "badges": 0.08504865111251246,
        "13": 0.04252432555625623,
        "artifact": 0.04252432555625623,
        "embedding": 0.04252432555625623,
        "caching": 0.08504865111251246,
        "in": 0.04252432555625623,
        "incremental": 0.08504865111251246,
        "rag": 0.12757297666876868,
        "refresh": 0.08504865111251246,
        "14": 0.04252432555625623,
        "persist": 0.04252432555625623,
        "outputs": 0.04252432555625623,
        "8": 0.04252432555625623,
        "nice": 0.04252432555625623,
        "to": 0.12757297666876868,
        "have": 0.04252432555625623,
        "stretch": 0.04252432555625623,
        "dry": 0.08504865111251246,
        "run": 0.08504865111251246,
        "mode": 0.12757297666876868,
        "labeling": 0.08504865111251246,
        "updates": 0.08504865111251246,
        "commit": 0.08504865111251246,
        "policy": 0.04252432555625623,
        "tuning": 0.04252432555625623,
        "template": 0.12757297666876868,
        "overrides": 0.04252432555625623,
        "docs": 0.04252432555625623,
        "templates": 0.04252432555625623,
        "j2": 0.04252432555625623,
        "org": 0.04252432555625623,
        "packs": 0.08504865111251246,
        "override": 0.04252432555625623,
        "16": 0.04252432555625623,
        "service": 0.08504865111251246,
        "llama": 0.08504865111251246,
        "cpp": 0.08504865111251246,
        "adapter": 0.04252432555625623,
        "tree": 0.08504865111251246,
        "sitter": 0.08504865111251246,
        "extraction": 0.04252432555625623,
        "why": 0.04252432555625623,
        "this": 0.04252432555625623,
        "order": 0.04252432555625623,
        "fastest": 0.04252432555625623,
        "path": 0.04252432555625623,
        "value": 0.04252432555625623,
        "get": 0.04252432555625623,
        "init": 0.04252432555625623,
        "producing": 0.04252432555625623,
        "a": 0.04252432555625623,
        "solid": 0.04252432555625623,
        "before": 0.04252432555625623,
        "adding": 0.04252432555625623,
        "diffing": 0.04252432555625623,
        "contain": 0.04252432555625623,
        "risk": 0.04252432555625623,
        "early": 0.04252432555625623,
        "section": 0.04252432555625623,
        "markers": 0.04252432555625623,
        "lint": 0.04252432555625623,
        "and": 0.12757297666876868,
        "publishing": 0.04252432555625623,
        "ensure": 0.04252432555625623,
        "safe": 0.04252432555625623,
        "idempotent": 0.04252432555625623,
        "edits": 0.04252432555625623,
        "accuracy": 0.04252432555625623,
        "next": 0.04252432555625623,
        "add": 0.04252432555625623,
        "validation": 0.04252432555625623,
        "avoid": 0.04252432555625623,
        "hallucinations": 0.04252432555625623,
        "once": 0.04252432555625623,
        "the": 0.08504865111251246,
        "pipeline": 0.04252432555625623,
        "works": 0.04252432555625623,
        "scale": 0.04252432555625623,
        "later": 0.04252432555625623,
        "only": 0.04252432555625623,
        "after": 0.04252432555625623,
        "core": 0.04252432555625623,
        "loop": 0.04252432555625623,
        "is": 0.04252432555625623,
        "robust": 0.04252432555625623,
        "do": 0.04252432555625623,
        "we": 0.04252432555625623,
        "widen": 0.04252432555625623,
        "coverage": 0.04252432555625623,
        "last": 0.04252432555625623,
        "refine": 0.04252432555625623,
        "dev": 0.04252432555625623,
        "experience": 0.04252432555625623
      },
      "text": "enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI) + framework-aware Quick Start** * Covers: 2 (entrypoints), 12 (framework-aware commands) 2. **Pattern analyzers (Docker/K8s, CI config, monorepo layout)** * Covers: 3 (pattern analyzers) ## Phase 7 \u2014 Quality gates & performance 1. **README scorecard + link validator + badges** * Covers: 13 (scorecard), 7 (link validator), 7 (badges) 2. **Artifact & embedding caching in `.docgen/` + incremental RAG refresh** * Covers: 14 (persist outputs, incremental refresh) ## Phase 8 \u2014 \"Nice to have\" & stretch 1. **Dry-run mode, PR labeling/updates, commit/PR policy tuning** * Covers: 1 (dry-run), 10 (labeling/PR updates) 2. **Template overrides (`docs/templates/*.j2`) & org template packs** * Covers: 5 (override), 16 (template packs) 3. **Service mode (FastAPI), llama.cpp adapter, tree-sitter extraction** * Covers: 1 (service mode), 6 (llama.cpp), 3 (tree-sitter) ## Why this order * **Fastest path to value**: get `docgen init` producing a solid README before adding diffing/RAG. * **Contain risk early**: section markers, lint, and commit publishing ensure safe/idempotent edits. * **Accuracy next**: add RAG + validation to avoid hallucinations once the pipeline works. * **Scale breadth later**: only after the core loop is robust do we widen language/framework coverage. * **Polish last**: CI, caching, and quality gates refine dev experience and performance.",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/spec.md#0",
      "vector": {
        "intelligent": 0.04393747751637468,
        "readme": 0.17574991006549873,
        "generator": 0.04393747751637468,
        "architecture": 0.08787495503274936,
        "spec": 0.04393747751637468,
        "python": 0.08787495503274936,
        "local": 0.13181243254912403,
        "llm": 0.13181243254912403,
        "1": 0.08787495503274936,
        "purpose": 0.04393747751637468,
        "scope": 0.04393747751637468,
        "build": 0.17574991006549873,
        "a": 0.26362486509824806,
        "based": 0.04393747751637468,
        "system": 0.04393747751637468,
        "that": 0.04393747751637468,
        "analyzes": 0.04393747751637468,
        "git": 0.26362486509824806,
        "repository": 0.04393747751637468,
        "structure": 0.04393747751637468,
        "code": 0.04393747751637468,
        "dependencies": 0.04393747751637468,
        "then": 0.04393747751637468,
        "generates": 0.04393747751637468,
        "and": 0.2196873875818734,
        "maintains": 0.04393747751637468,
        "high": 0.08787495503274936,
        "quality": 0.04393747751637468,
        "md": 0.04393747751637468,
        "using": 0.04393747751637468,
        "it": 0.04393747751637468,
        "initializes": 0.04393747751637468,
        "repos": 0.04393747751637468,
        "with": 0.08787495503274936,
        "no": 0.04393747751637468,
        "docs": 0.17574991006549873,
        "keeps": 0.04393747751637468,
        "up": 0.04393747751637468,
        "to": 0.2196873875818734,
        "date": 0.04393747751637468,
        "on": 0.04393747751637468,
        "commits": 0.04393747751637468,
        "prs": 0.04393747751637468,
        "supports": 0.08787495503274936,
        "multiple": 0.04393747751637468,
        "languages": 0.04393747751637468,
        "project": 0.04393747751637468,
        "types": 0.04393747751637468,
        "via": 0.04393747751637468,
        "analyzers": 0.08787495503274936,
        "non": 0.04393747751637468,
        "goals": 0.04393747751637468,
        "for": 0.08787495503274936,
        "the": 0.04393747751637468,
        "poc": 0.04393747751637468,
        "multi": 0.04393747751637468,
        "repo": 0.2196873875818734,
        "orchestration": 0.04393747751637468,
        "full": 0.08787495503274936,
        "website": 0.04393747751637468,
        "api": 0.04393747751637468,
        "reference": 0.04393747751637468,
        "extraction": 0.04393747751637468,
        "beyond": 0.04393747751637468,
        "summaries": 0.04393747751637468,
        "cloud": 0.04393747751637468,
        "llms": 0.04393747751637468,
        "2": 0.08787495503274936,
        "level": 0.04393747751637468,
        "at": 0.04393747751637468,
        "glance": 0.04393747751637468,
        "events": 0.04393747751637468,
        "event": 0.04393747751637468,
        "sources": 0.04393747751637468,
        "cli": 0.04393747751637468,
        "commands": 0.04393747751637468,
        "hooks": 0.04393747751637468,
        "webhooks": 0.04393747751637468,
        "ci": 0.08787495503274936,
        "commit": 0.08787495503274936,
        "pr": 0.08787495503274936,
        "orchestr": 0.04393747751637468,
        "async": 0.04393747751637468,
        "task": 0.04393747751637468,
        "graph": 0.08787495503274936,
        "scanner": 0.08787495503274936,
        "doc": 0.04393747751637468,
        "store": 0.04393747751637468,
        "indexer": 0.08787495503274936,
        "language": 0.08787495503274936,
        "artifacts": 0.08787495503274936,
        "fs": 0.04393747751637468,
        "deps": 0.04393747751637468,
        "cache": 0.04393747751637468,
        "versions": 0.04393747751637468,
        "knowledge": 0.04393747751637468,
        "embeddings": 0.04393747751637468,
        "prompt": 0.04393747751637468,
        "builder": 0.04393747751637468,
        "templates": 0.04393747751637468,
        "rag": 0.04393747751637468,
        "runner": 0.04393747751637468,
        "llama": 0.04393747751637468,
        "cpp": 0.04393747751637468,
        "ollama": 0.04393747751637468,
        "post": 0.04393747751637468,
        "processor": 0.04393747751637468,
        "lint": 0.04393747751637468,
        "toc": 0.04393747751637468,
        "badges": 0.04393747751637468,
        "links": 0.04393747751637468,
        "publisher": 0.04393747751637468,
        "branch": 0.04393747751637468,
        "3": 0.13181243254912403,
        "components": 0.04393747751637468,
        "responsibilities": 0.04393747751637468,
        "orchestrator": 0.04393747751637468,
        "coordinates": 0.04393747751637468,
        "end": 0.08787495503274936,
        "pipelines": 0.04393747751637468,
        "init": 0.04393747751637468,
        "update": 0.08787495503274936,
        "regenerate": 0.08787495503274936,
        "computes": 0.04393747751637468,
        "change": 0.04393747751637468,
        "impact": 0.04393747751637468,
        "from": 0.04393747751637468,
        "diff": 0.04393747751637468,
        "decides": 0.04393747751637468,
        "whether": 0.04393747751637468,
        "or": 0.04393747751637468,
        "patch": 0.04393747751637468,
        "sections": 0.04393747751637468,
        "schedules": 0.04393747751637468,
        "tasks": 0.04393747751637468,
        "caches": 0.04393747751637468,
        "intermediate": 0.04393747751637468,
        "results": 0.04393747751637468,
        "emits": 0.04393747751637468,
        "structured": 0.04393747751637468,
        "logs": 0.04393747751637468,
        "info": 0.04393747751637468,
        "by": 0.04393747751637468,
        "default": 0.04393747751637468,
        "debug": 0.04393747751637468,
        "verbose": 0.04393747751637468,
        "respects": 0.04393747751637468,
        "docgen": 0.13181243254912403,
        "yml": 0.04393747751637468,
        "watched_globs": 0.04393747751637468,
        "skip": 0.04393747751637468,
        "unrelated": 0.04393747751637468,
        "diffs": 0.04393747751637468,
        "substitutes": 0.04393747751637468,
        "fail": 0.04393747751637468,
        "safe": 0.04393747751637468,
        "stubs": 0.04393747751637468,
        "when": 0.04393747751637468,
        "generation": 0.04393747751637468,
        "fails": 0.04393747751637468,
        "dry": 0.08787495503274936,
        "run": 0.13181243254912403,
        "previews": 0.04393747751637468,
        "records": 0.04393747751637468,
        "scorecards": 0.04393747751637468,
        "each": 0.04393747751637468,
        "under": 0.04393747751637468,
        "walks": 0.04393747751637468,
        "builds": 0.04393747751637468,
        "normalized": 0.04393747751637468,
        "manifest": 0.04393747751637468,
        "files": 0.08787495503274936,
        "sizes": 0.04393747751637468,
        "tags": 0.04393747751637468,
        "path": 0.04393747751637468,
        "roles": 0.04393747751637468,
        "src": 0.04393747751637468,
        "test": 0.08787495503274936,
        "examples": 0.04393747751637468,
        "dependency": 0.04393747751637468,
        "manifests": 0.04393747751637468,
        "e": 0.04393747751637468,
        "g": 0.04393747751637468,
        "pom": 0.04393747751637468,
        "xml": 0.04393747751637468,
        "gradle": 0.04393747751637468,
        "package": 0.04393747751637468,
        "json": 0.13181243254912403,
        "requirements": 0.04393747751637468,
        "txt": 0.04393747751637468,
        "pyproject": 0.04393747751637468,
        "toml": 0.08787495503274936,
        "go": 0.04393747751637468,
        "mod": 0.04393747751637468,
        "cargo": 0.04393747751637468,
        "gemfile": 0.04393747751637468,
        "composer": 0.04393747751637468,
        "entrypoints": 0.04393747751637468,
        "clis": 0.04393747751637468,
        "services": 0.04393747751637468,
        "coverage": 0.04393747751637468,
        "if": 0.04393747751637468,
        "available": 0.04393747751637468,
        "stores": 0.04393747751637468,
        "per": 0.04393747751637468,
        "index": 0.04393747751637468,
        "speed": 0.04393747751637468,
        "future": 0.04393747751637468
      },
      "text": "# Intelligent README Generator \u2014 Architecture & Spec (Python, Local LLM) ## 1) Purpose & Scope Build a Python-based system that **analyzes a Git repository** (structure, code, dependencies), then **generates and maintains a high-quality README.md** using a **local LLM**. It initializes repos with no docs and **keeps docs up to date** on commits/PRs. Supports **multiple languages/project types** via analyzers. Non-goals (for the POC): multi-repo orchestration, full website docs, API reference extraction (beyond README summaries), cloud LLMs. --- ## 2) High-Level Architecture (at a glance) ``` \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 Git Events \u2502 Event Sources \u2502 CLI commands, Git hooks, Webhooks/CI (commit/PR) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Orchestr \u2502 (Async task graph) \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Repo Scanner\u2502 \u2502 Analyzers \u2502 \u2502 Doc Store \u2502 \u2502 + Indexer \u2502 \u2502 (Language, \u2502 \u2502 (Artifacts, \u2502 \u2502 (Git, FS) \u2502 \u2502 Build, Deps) \u2502 \u2502 Cache, \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 Versions) \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 Knowledge Graph \u2502 \u2502 \u2502 \u2502 & Embeddings \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Prompt Builder \u2502 (Templates + RAG) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Local LLM Runner \u2502 (llama.cpp/Ollama) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 Post-Processor \u2502 (lint, ToC, badges, links) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Git Publisher \u2502 (branch/PR/commit) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 ``` --- ## 3) Components & Responsibilities ### 3.1 Orchestrator * Coordinates end-to-end pipelines (init, update, regenerate). * Computes *change impact* from Git diff; decides whether to regenerate full README or patch sections. * Schedules tasks and caches intermediate results. * Emits structured logs (info by default, debug with `--verbose`), respects `.docgen.yml` `ci.watched_globs` to skip unrelated diffs, and substitutes fail-safe stubs when generation fails. * Supports dry-run previews (`docgen update --dry-run`) and records scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#1",
      "vector": {
        "scorecards": 0.03721614637823934,
        "for": 0.18608073189119673,
        "each": 0.07443229275647868,
        "run": 0.07443229275647868,
        "under": 0.07443229275647868,
        "docgen": 0.11164843913471803,
        "3": 0.22329687826943606,
        "2": 0.03721614637823934,
        "repo": 0.18608073189119673,
        "scanner": 0.03721614637823934,
        "indexer": 0.03721614637823934,
        "walks": 0.03721614637823934,
        "builds": 0.03721614637823934,
        "normalized": 0.03721614637823934,
        "manifest": 0.03721614637823934,
        "files": 0.11164843913471803,
        "sizes": 0.03721614637823934,
        "language": 0.07443229275647868,
        "tags": 0.03721614637823934,
        "path": 0.03721614637823934,
        "roles": 0.03721614637823934,
        "src": 0.03721614637823934,
        "test": 0.11164843913471803,
        "docs": 0.11164843913471803,
        "examples": 0.03721614637823934,
        "build": 0.14886458551295736,
        "dependency": 0.07443229275647868,
        "manifests": 0.03721614637823934,
        "e": 0.11164843913471803,
        "g": 0.11164843913471803,
        "pom": 0.03721614637823934,
        "xml": 0.03721614637823934,
        "gradle": 0.07443229275647868,
        "package": 0.03721614637823934,
        "json": 0.11164843913471803,
        "requirements": 0.03721614637823934,
        "txt": 0.03721614637823934,
        "pyproject": 0.03721614637823934,
        "toml": 0.07443229275647868,
        "go": 0.11164843913471803,
        "mod": 0.03721614637823934,
        "cargo": 0.07443229275647868,
        "gemfile": 0.03721614637823934,
        "composer": 0.03721614637823934,
        "entrypoints": 0.11164843913471803,
        "clis": 0.03721614637823934,
        "services": 0.11164843913471803,
        "coverage": 0.03721614637823934,
        "artifacts": 0.03721614637823934,
        "if": 0.03721614637823934,
        "available": 0.03721614637823934,
        "stores": 0.03721614637823934,
        "a": 0.03721614637823934,
        "per": 0.07443229275647868,
        "index": 0.03721614637823934,
        "to": 0.11164843913471803,
        "speed": 0.03721614637823934,
        "future": 0.03721614637823934,
        "runs": 0.03721614637823934,
        "analyzers": 0.22329687826943606,
        "plugin": 0.03721614637823934,
        "based": 0.03721614637823934,
        "detect": 0.03721614637823934,
        "idioms": 0.03721614637823934,
        "frameworks": 0.03721614637823934,
        "spring": 0.07443229275647868,
        "boot": 0.07443229275647868,
        "fastapi": 0.07443229275647868,
        "node": 0.07443229275647868,
        "express": 0.03721614637823934,
        "react": 0.03721614637823934,
        "next": 0.03721614637823934,
        "js": 0.03721614637823934,
        "http": 0.14886458551295736,
        "rust": 0.03721614637823934,
        "bin": 0.03721614637823934,
        "lib": 0.03721614637823934,
        "maven": 0.03721614637823934,
        "setuptools": 0.03721614637823934,
        "poetry": 0.03721614637823934,
        "npm": 0.03721614637823934,
        "pnpm": 0.03721614637823934,
        "yarn": 0.03721614637823934,
        "extract": 0.03721614637823934,
        "top": 0.07443229275647868,
        "level": 0.03721614637823934,
        "libs": 0.03721614637823934,
        "notable": 0.03721614637823934,
        "transitive": 0.03721614637823934,
        "categories": 0.03721614637823934,
        "entrypoint": 0.03721614637823934,
        "infer": 0.03721614637823934,
        "commands": 0.03721614637823934,
        "django": 0.03721614637823934,
        "scripts": 0.07443229275647868,
        "pattern": 0.03721614637823934,
        "monorepo": 0.03721614637823934,
        "layout": 0.03721614637823934,
        "ci": 0.03721614637823934,
        "cd": 0.03721614637823934,
        "containerization": 0.03721614637823934,
        "k8s": 0.03721614637823934,
        "heuristics": 0.03721614637823934,
        "structure": 0.03721614637823934,
        "analyzer": 0.07443229275647868,
        "module": 0.03721614637823934,
        "topology": 0.03721614637823934,
        "detected": 0.11164843913471803,
        "entities": 0.07443229275647868,
        "dtos": 0.03721614637823934,
        "api": 0.11164843913471803,
        "endpoint": 0.07443229275647868,
        "sequences": 0.03721614637823934,
        "service": 0.03721614637823934,
        "interactions": 0.03721614637823934,
        "returns": 0.03721614637823934,
        "signals": 0.07443229275647868,
        "key": 0.07443229275647868,
        "facts": 0.03721614637823934,
        "the": 0.11164843913471803,
        "knowledge": 0.07443229275647868,
        "graph": 0.11164843913471803,
        "4": 0.03721614637823934,
        "embeddings": 0.07443229275647868,
        "rag": 0.03721614637823934,
        "of": 0.07443229275647868,
        "modules": 0.03721614637823934,
        "packages": 0.03721614637823934,
        "configs": 0.03721614637823934,
        "tests": 0.03721614637823934,
        "lightweight": 0.03721614637823934,
        "embedding": 0.03721614637823934,
        "store": 0.03721614637823934,
        "faiss": 0.03721614637823934,
        "in": 0.03721614637823934,
        "memory": 0.03721614637823934,
        "chunks": 0.03721614637823934,
        "code": 0.03721614637823934,
        "comments": 0.03721614637823934,
        "readme": 0.07443229275647868,
        "fragments": 0.03721614637823934,
        "changelog": 0.03721614637823934,
        "issues": 0.03721614637823934,
        "optional": 0.03721614637823934,
        "commit": 0.03721614637823934,
        "messages": 0.07443229275647868,
        "provides": 0.03721614637823934,
        "context": 0.07443229275647868,
        "retrieval": 0.03721614637823934,
        "prompt": 0.07443229275647868,
        "building": 0.03721614637823934,
        "k": 0.03721614637823934,
        "by": 0.03721614637823934,
        "section": 0.11164843913471803,
        "and": 0.2605130246476754,
        "persists": 0.03721614637823934,
        "refreshing": 0.03721614637823934,
        "only": 0.03721614637823934,
        "whose": 0.03721614637823934,
        "hashes": 0.03721614637823934,
        "changed": 0.03721614637823934,
        "5": 0.03721614637823934,
        "builder": 0.03721614637823934,
        "aware": 0.03721614637823934,
        "jinja2": 0.03721614637823934,
        "templates": 0.03721614637823934,
        "with": 0.11164843913471803,
        "guardrails": 0.03721614637823934,
        "project": 0.03721614637823934,
        "intro": 0.03721614637823934,
        "features": 0.03721614637823934,
        "architecture": 0.03721614637823934,
        "overview": 0.03721614637823934,
        "quick": 0.07443229275647868,
        "start": 0.07443229275647868,
        "configuration": 0.03721614637823934,
        "deployment": 0.03721614637823934,
        "troubleshooting": 0.03721614637823934,
        "faq": 0.03721614637823934,
        "roadmap": 0.03721614637823934,
        "contribution": 0.03721614637823934,
        "license": 0.03721614637823934,
        "badges": 0.03721614637823934,
        "dynamically": 0.03721614637823934,
        "injects": 0.07443229275647868,
        "retrieved": 0.03721614637823934,
        "produces": 0.03721614637823934,
        "llm": 0.07443229275647868,
        "ready": 0.03721614637823934,
        "structured": 0.07443229275647868,
        "prompts": 0.03721614637823934,
        "system": 0.03721614637823934,
        "user": 0.03721614637823934,
        "token": 0.03721614637823934,
        "budgets": 0.03721614637823934,
        "honours": 0.03721614637823934,
        "style": 0.07443229275647868,
        "presets": 0.03721614637823934,
        "concise": 0.03721614637823934,
        "trims": 0.03721614637823934,
        "list": 0.03721614637823934,
        "heavy": 0.03721614637823934,
        "sections": 0.03721614637823934,
        "comprehensive": 0.03721614637823934,
        "keeps": 0.03721614637823934,
        "full": 0.03721614637823934,
        "detail": 0.03721614637823934,
        "infrastructure": 0.03721614637823934,
        "patterns": 0.03721614637823934,
        "into": 0.03721614637823934,
        "guidance": 0.03721614637823934,
        "uvicorn": 0.03721614637823934,
        "docker": 0.11164843913471803,
        "compose": 0.03721614637823934,
        "up": 0.03721614637823934,
        "generates": 0.03721614637823934,
        "mermaid": 0.03721614637823934,
        "sequence": 0.03721614637823934,
        "diagrams": 0.03721614637823934,
        "highlighting": 0.03721614637823934,
        "request": 0.03721614637823934,
        "flow": 0.03721614637823934,
        "across": 0.03721614637823934,
        "when": 0.03721614637823934,
        "endpoints": 0.03721614637823934,
        "are": 0.03721614637823934,
        "6": 0.03721614637823934,
        "local": 0.03721614637823934,
        "runner": 0.11164843913471803,
        "pluggable": 0.03721614637823934,
        "runtime": 0.03721614637823934,
        "that": 0.03721614637823934,
        "prefers": 0.03721614637823934,
        "model": 0.07443229275647868,
        "host": 0.03721614637823934,
        "localhost": 0.03721614637823934,
        "12434": 0.03721614637823934,
        "engines": 0.07443229275647868,
        "v1": 0.07443229275647868,
        "container": 0.03721614637823934,
        "internal": 0.03721614637823934,
        "environment": 0.03721614637823934,
        "overrides": 0.03721614637823934,
        "an": 0.03721614637823934,
        "ollama": 0.03721614637823934,
        "cli": 0.03721614637823934,
        "fallback": 0.03721614637823934,
        "defaults": 0.03721614637823934,
        "ai": 0.03721614637823934,
        "smollm2": 0.03721614637823934,
        "360m": 0.03721614637823934,
        "q4_k_m": 0.03721614637823934,
        "but": 0.03721614637823934,
        "respects": 0.03721614637823934,
        "yml": 0.03721614637823934,
        "openai": 0.03721614637823934,
        "compatible": 0.03721614637823934,
        "env": 0.03721614637823934,
        "vars": 0.03721614637823934,
        "alternate": 0.03721614637823934,
        "weights": 0.03721614637823934,
        "keys": 0.03721614637823934,
        "supports": 0.03721614637823934,
        "function": 0.03721614637823934,
        "calling": 0.03721614637823934,
        "outputs": 0.03721614637823934
      },
      "text": "scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future runs. ### 3.3 Analyzers (Plugin-based) * **Language analyzers** (detect idioms, entrypoints, frameworks: Spring Boot, FastAPI, Node/Express, React, Next.js, Go HTTP, Rust bin/lib). * **Build analyzers** (Maven/Gradle, setuptools/Poetry, npm/pnpm/yarn, Go, Cargo). * **Dependency analyzers** (extract top-level libs & notable transitive categories). * **Entrypoint analyzers** (infer run commands for FastAPI, Django, Spring Boot, Node scripts). * **Pattern analyzers** (monorepo layout, CI/CD, containerization/K8s heuristics). * **Structure analyzer** (module topology, detected entities/DTOs, API endpoint sequences, service interactions). * Each analyzer returns **Signals** (key facts) to the knowledge graph. ### 3.4 Knowledge Graph & Embeddings (RAG) * Graph of Repo entities: modules, packages, services, scripts, configs, tests, docs. * Lightweight embedding store (e.g., `faiss`/in-memory) of **chunks**: code comments, README fragments, `docs/`, `CHANGELOG`, issues (optional), commit messages. * Provides **context retrieval** for prompt building (top-k by section) and persists embeddings under `.docgen/`, refreshing only the files whose hashes changed. ### 3.5 Prompt Builder * **Section-aware** Jinja2 templates with **guardrails**: * Project intro, key features, architecture overview, quick start, configuration, build/test, deployment, troubleshooting, FAQ, roadmap, contribution, license, badges. * Dynamically injects repo signals and retrieved context per section. * Produces **LLM-ready structured prompts** (system + user messages) with token budgets and honours `readme.style` presets (`concise` trims list-heavy sections, `comprehensive` keeps full detail). * Injects detected entrypoints and infrastructure patterns into Quick Start guidance (e.g., `uvicorn ...`, `docker compose up`). * Generates Mermaid sequence diagrams highlighting request flow across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#2",
      "vector": {
        "across": 0.028060676663315687,
        "services": 0.028060676663315687,
        "when": 0.08418202998994706,
        "api": 0.056121353326631374,
        "endpoints": 0.028060676663315687,
        "are": 0.056121353326631374,
        "detected": 0.056121353326631374,
        "3": 0.11224270665326275,
        "6": 0.028060676663315687,
        "local": 0.056121353326631374,
        "llm": 0.028060676663315687,
        "runner": 0.08418202998994706,
        "pluggable": 0.028060676663315687,
        "runtime": 0.028060676663315687,
        "that": 0.028060676663315687,
        "prefers": 0.028060676663315687,
        "the": 0.028060676663315687,
        "docker": 0.056121353326631374,
        "model": 0.08418202998994706,
        "http": 0.08418202998994706,
        "endpoint": 0.028060676663315687,
        "host": 0.028060676663315687,
        "localhost": 0.028060676663315687,
        "12434": 0.028060676663315687,
        "engines": 0.056121353326631374,
        "v1": 0.056121353326631374,
        "container": 0.028060676663315687,
        "internal": 0.08418202998994706,
        "with": 0.08418202998994706,
        "environment": 0.028060676663315687,
        "overrides": 0.028060676663315687,
        "and": 0.36478879662310393,
        "an": 0.028060676663315687,
        "ollama": 0.028060676663315687,
        "cli": 0.056121353326631374,
        "fallback": 0.028060676663315687,
        "defaults": 0.056121353326631374,
        "to": 0.08418202998994706,
        "ai": 0.028060676663315687,
        "smollm2": 0.028060676663315687,
        "360m": 0.028060676663315687,
        "q4_k_m": 0.028060676663315687,
        "but": 0.028060676663315687,
        "respects": 0.028060676663315687,
        "docgen": 0.11224270665326275,
        "yml": 0.028060676663315687,
        "openai": 0.028060676663315687,
        "compatible": 0.028060676663315687,
        "env": 0.028060676663315687,
        "vars": 0.028060676663315687,
        "for": 0.08418202998994706,
        "alternate": 0.028060676663315687,
        "weights": 0.028060676663315687,
        "keys": 0.028060676663315687,
        "supports": 0.056121353326631374,
        "function": 0.028060676663315687,
        "calling": 0.028060676663315687,
        "style": 0.056121353326631374,
        "structured": 0.028060676663315687,
        "outputs": 0.056121353326631374,
        "available": 0.028060676663315687,
        "streaming": 0.028060676663315687,
        "decode": 0.028060676663315687,
        "stop": 0.028060676663315687,
        "tokens": 0.028060676663315687,
        "section": 0.056121353326631374,
        "by": 0.056121353326631374,
        "generation": 0.028060676663315687,
        "stay": 0.056121353326631374,
        "within": 0.028060676663315687,
        "context": 0.028060676663315687,
        "limits": 0.028060676663315687,
        "validates": 0.056121353326631374,
        "configuration": 0.028060676663315687,
        "ensure": 0.028060676663315687,
        "runners": 0.028060676663315687,
        "loopback": 0.028060676663315687,
        "hosts": 0.028060676663315687,
        "only": 0.056121353326631374,
        "7": 0.028060676663315687,
        "post": 0.056121353326631374,
        "processor": 0.028060676663315687,
        "lints": 0.028060676663315687,
        "markdown": 0.028060676663315687,
        "builds": 0.028060676663315687,
        "toc": 0.028060676663315687,
        "adds": 0.056121353326631374,
        "shields": 0.028060676663315687,
        "badges": 0.056121353326631374,
        "normalizes": 0.028060676663315687,
        "heading": 0.028060676663315687,
        "hierarchy": 0.028060676663315687,
        "enforces": 0.028060676663315687,
        "guide": 0.028060676663315687,
        "readme": 0.08418202998994706,
        "contract": 0.028060676663315687,
        "required": 0.056121353326631374,
        "sections": 0.11224270665326275,
        "links": 0.028060676663315687,
        "relative": 0.028060676663315687,
        "absolute": 0.028060676663315687,
        "code": 0.028060676663315687,
        "block": 0.028060676663315687,
        "languages": 0.028060676663315687,
        "line": 0.028060676663315687,
        "length": 0.028060676663315687,
        "computes": 0.028060676663315687,
        "diff": 0.028060676663315687,
        "aware": 0.028060676663315687,
        "updates": 0.056121353326631374,
        "modifies": 0.028060676663315687,
        "impacted": 0.028060676663315687,
        "changes": 0.056121353326631374,
        "persists": 0.028060676663315687,
        "a": 0.08418202998994706,
        "scorecard": 0.056121353326631374,
        "json": 0.056121353326631374,
        "capturing": 0.028060676663315687,
        "coverage": 0.056121353326631374,
        "quick": 0.028060676663315687,
        "start": 0.028060676663315687,
        "health": 0.028060676663315687,
        "link": 0.056121353326631374,
        "results": 0.028060676663315687,
        "build": 0.056121353326631374,
        "license": 0.028060676663315687,
        "safe": 0.028060676663315687,
        "reports": 0.028060676663315687,
        "warnings": 0.028060676663315687,
        "during": 0.028060676663315687,
        "processing": 0.028060676663315687,
        "8": 0.028060676663315687,
        "doc": 0.028060676663315687,
        "store": 0.028060676663315687,
        "artifacts": 0.028060676663315687,
        "versions": 0.028060676663315687,
        "keeps": 0.028060676663315687,
        "generated": 0.028060676663315687,
        "drafts": 0.028060676663315687,
        "logs": 0.028060676663315687,
        "prompts": 0.028060676663315687,
        "inputs": 0.028060676663315687,
        "diffs": 0.028060676663315687,
        "under": 0.028060676663315687,
        "per": 0.028060676663315687,
        "repo": 0.028060676663315687,
        "rollback": 0.028060676663315687,
        "regression": 0.028060676663315687,
        "testing": 0.028060676663315687,
        "via": 0.028060676663315687,
        "golden": 0.028060676663315687,
        "readmes": 0.028060676663315687,
        "stores": 0.028060676663315687,
        "embedding": 0.028060676663315687,
        "cache": 0.028060676663315687,
        "embeddings": 0.028060676663315687,
        "scorecards": 0.028060676663315687,
        "so": 0.028060676663315687,
        "subsequent": 0.028060676663315687,
        "runs": 0.028060676663315687,
        "incremental": 0.028060676663315687,
        "9": 0.028060676663315687,
        "git": 0.028060676663315687,
        "publisher": 0.028060676663315687,
        "creates": 0.028060676663315687,
        "branch": 0.028060676663315687,
        "e": 0.056121353326631374,
        "g": 0.056121353326631374,
        "update": 0.028060676663315687,
        "yyyymmdd": 0.028060676663315687,
        "pr": 0.056121353326631374,
        "body": 0.028060676663315687,
        "explains": 0.028060676663315687,
        "what": 0.028060676663315687,
        "were": 0.028060676663315687,
        "updated": 0.028060676663315687,
        "can": 0.028060676663315687,
        "commit": 0.028060676663315687,
        "directly": 0.028060676663315687,
        "configurable": 0.028060676663315687,
        "on": 0.028060676663315687,
        "init": 0.028060676663315687,
        "empty": 0.028060676663315687,
        "repos": 0.028060676663315687,
        "applies": 0.028060676663315687,
        "labels": 0.028060676663315687,
        "docs": 0.056121353326631374,
        "auto": 0.028060676663315687,
        "existing": 0.028060676663315687,
        "prs": 0.028060676663315687,
        "configured": 0.028060676663315687,
        "4": 0.028060676663315687,
        "data": 0.028060676663315687,
        "python": 0.056121353326631374,
        "pydantic": 0.028060676663315687,
        "dataclasses": 0.056121353326631374,
        "from": 0.056121353326631374,
        "import": 0.056121353326631374,
        "dataclass": 0.2244854133065255,
        "typing": 0.028060676663315687,
        "list": 0.11224270665326275,
        "dict": 0.14030338331657843,
        "optional": 0.056121353326631374,
        "class": 0.1964247366432098,
        "filemeta": 0.056121353326631374,
        "path": 0.028060676663315687,
        "str": 0.5892742099296294,
        "size": 0.028060676663315687,
        "int": 0.028060676663315687,
        "language": 0.028060676663315687,
        "role": 0.028060676663315687,
        "src": 0.028060676663315687,
        "test": 0.056121353326631374,
        "config": 0.028060676663315687,
        "script": 0.028060676663315687,
        "infra": 0.028060676663315687,
        "other": 0.028060676663315687,
        "hash": 0.028060676663315687,
        "repomanifest": 0.056121353326631374,
        "root": 0.028060676663315687,
        "files": 0.028060676663315687,
        "detectors": 0.028060676663315687,
        "build_system": 0.028060676663315687,
        "maven": 0.028060676663315687,
        "framework": 0.056121353326631374,
        "spring": 0.028060676663315687,
        "boot": 0.028060676663315687,
        "dependency_files": 0.028060676663315687,
        "pom": 0.028060676663315687,
        "xml": 0.028060676663315687,
        "requirements": 0.028060676663315687,
        "txt": 0.028060676663315687,
        "signal": 0.056121353326631374,
        "kind": 0.028060676663315687,
        "service": 0.028060676663315687,
        "db": 0.028060676663315687,
        "queue": 0.028060676663315687,
        "dep": 0.028060676663315687,
        "entrypoint": 0.028060676663315687,
        "name": 0.028060676663315687,
        "detail": 0.028060676663315687,
        "analysisresult": 0.028060676663315687,
        "manifest": 0.028060676663315687,
        "signals": 0.028060676663315687,
        "embedding_index_path": 0.028060676663315687,
        "sectionspec": 0.028060676663315687,
        "key": 0.028060676663315687,
        "intro": 0.028060676663315687,
        "features": 0.028060676663315687,
        "arch": 0.028060676663315687,
        "quickstart": 0.028060676663315687,
        "bool": 0.028060676663315687,
        "sources": 0.028060676663315687,
        "preferred": 0.028060676663315687,
        "retrieval": 0.028060676663315687,
        "tags": 0.028060676663315687,
        "template_name": 0.028060676663315687,
        "readmedraft": 0.028060676663315687,
        "full_markdown": 0.028060676663315687,
        "updateplan": 0.028060676663315687,
        "strategy": 0.028060676663315687
      },
      "text": "across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs when available. * Streaming decode with stop tokens; **section-by-section** generation to stay within context limits. * Validates configuration to ensure runners stay local (loopback/`*.internal` hosts only). ### 3.7 Post-Processor * Lints Markdown, builds ToC, adds shields/badges, normalizes heading hierarchy. * Enforces internal style guide and **README contract** (required sections). * Validates links (relative/absolute), code block languages, and line length. * Computes **diff-aware updates**: only modifies sections impacted by changes. * Persists a README scorecard (`.docgen/scorecard.json`) capturing coverage, quick start health, and link results. * Adds build/coverage/license badges with safe defaults and reports link warnings during post-processing. ### 3.8 Doc Store (Artifacts & Versions) * Keeps generated drafts, logs, prompts, inputs/outputs, and diffs under `.docgen/` per repo. * Supports rollback and regression testing via \u201cgolden\u201d READMEs. * Stores embedding cache (`embeddings.json`) and scorecards so subsequent runs are incremental. ### 3.9 Git Publisher * Creates a branch (e.g., `docgen/readme-update-YYYYMMDD`) and a PR. * PR body explains detected changes and what sections were updated. * Can commit directly (configurable) on init for empty repos. * Applies labels (e.g., `docs:auto`) and updates existing PRs when configured. --- ## 4) Data Model (Python `pydantic`/`dataclasses`) ```python from dataclasses import dataclass from typing import List, Dict, Optional @dataclass class FileMeta: path: str size: int language: Optional[str] role: str # src|test|docs|config|build|script|infra|other hash: str @dataclass class RepoManifest: root: str files: List[FileMeta] detectors: Dict[str, str] # {\"build_system\": \"maven\", \"framework\":\"spring-boot\", ...} dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str #",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#3",
      "vector": {
        "dependency_files": 0.03280893574623933,
        "dict": 0.13123574298495733,
        "str": 0.5577519076860686,
        "pom": 0.098426807238718,
        "xml": 0.098426807238718,
        "requirements": 0.06561787149247866,
        "txt": 0.06561787149247866,
        "dataclass": 0.16404467873119666,
        "class": 0.16404467873119666,
        "signal": 0.06561787149247866,
        "kind": 0.03280893574623933,
        "framework": 0.03280893574623933,
        "service": 0.03280893574623933,
        "cli": 0.03280893574623933,
        "db": 0.03280893574623933,
        "queue": 0.03280893574623933,
        "dep": 0.03280893574623933,
        "entrypoint": 0.03280893574623933,
        "test": 0.06561787149247866,
        "name": 0.03280893574623933,
        "detail": 0.03280893574623933,
        "analysisresult": 0.03280893574623933,
        "manifest": 0.06561787149247866,
        "repomanifest": 0.03280893574623933,
        "signals": 0.06561787149247866,
        "list": 0.098426807238718,
        "embedding_index_path": 0.03280893574623933,
        "sectionspec": 0.03280893574623933,
        "key": 0.03280893574623933,
        "intro": 0.06561787149247866,
        "features": 0.098426807238718,
        "arch": 0.03280893574623933,
        "quickstart": 0.06561787149247866,
        "required": 0.03280893574623933,
        "bool": 0.03280893574623933,
        "sources": 0.03280893574623933,
        "preferred": 0.03280893574623933,
        "retrieval": 0.06561787149247866,
        "tags": 0.03280893574623933,
        "template_name": 0.03280893574623933,
        "readmedraft": 0.03280893574623933,
        "sections": 0.13123574298495733,
        "full_markdown": 0.03280893574623933,
        "updateplan": 0.06561787149247866,
        "strategy": 0.03280893574623933,
        "full": 0.03280893574623933,
        "patch": 0.06561787149247866,
        "changed_sections": 0.03280893574623933,
        "reasons": 0.03280893574623933,
        "section": 0.06561787149247866,
        "why": 0.03280893574623933,
        "5": 0.098426807238718,
        "configuration": 0.06561787149247866,
        "docgen": 0.196853614477436,
        "yml": 0.06561787149247866,
        "at": 0.03280893574623933,
        "repo": 0.06561787149247866,
        "root": 0.06561787149247866,
        "yaml": 0.03280893574623933,
        "llm": 0.03280893574623933,
        "runner": 0.03280893574623933,
        "ollama": 0.03280893574623933,
        "or": 0.06561787149247866,
        "llama": 0.03280893574623933,
        "cpp": 0.03280893574623933,
        "model": 0.03280893574623933,
        "llama3": 0.03280893574623933,
        "8b": 0.03280893574623933,
        "instruct": 0.03280893574623933,
        "example": 0.03280893574623933,
        "local": 0.03280893574623933,
        "only": 0.098426807238718,
        "max_tokens": 0.03280893574623933,
        "2048": 0.03280893574623933,
        "temperature": 0.03280893574623933,
        "0": 0.03280893574623933,
        "2": 0.13123574298495733,
        "readme": 0.196853614477436,
        "style": 0.03280893574623933,
        "concise": 0.03280893574623933,
        "comprehensive": 0.03280893574623933,
        "template_pack": 0.06561787149247866,
        "enterprise": 0.03280893574623933,
        "optional": 0.03280893574623933,
        "bundle": 0.03280893574623933,
        "shipped": 0.03280893574623933,
        "with": 0.06561787149247866,
        "required_sections": 0.03280893574623933,
        "architecture": 0.06561787149247866,
        "build_and_test": 0.03280893574623933,
        "deployment": 0.06561787149247866,
        "troubleshooting": 0.03280893574623933,
        "faq": 0.03280893574623933,
        "license": 0.03280893574623933,
        "publish": 0.06561787149247866,
        "mode": 0.03280893574623933,
        "pr": 0.13123574298495733,
        "commit": 0.098426807238718,
        "dry": 0.03280893574623933,
        "run": 0.03280893574623933,
        "branch_prefix": 0.03280893574623933,
        "labels": 0.03280893574623933,
        "docs": 0.06561787149247866,
        "auto": 0.03280893574623933,
        "update_existing": 0.03280893574623933,
        "true": 0.03280893574623933,
        "refresh": 0.03280893574623933,
        "an": 0.03280893574623933,
        "existing": 0.03280893574623933,
        "instead": 0.03280893574623933,
        "of": 0.03280893574623933,
        "opening": 0.03280893574623933,
        "a": 0.06561787149247866,
        "new": 0.03280893574623933,
        "one": 0.03280893574623933,
        "analyzers": 0.03280893574623933,
        "enabled": 0.03280893574623933,
        "language": 0.03280893574623933,
        "build": 0.196853614477436,
        "dependencies": 0.03280893574623933,
        "patterns": 0.03280893574623933,
        "exclude_paths": 0.03280893574623933,
        "git": 0.06561787149247866,
        "node_modules": 0.03280893574623933,
        "dist": 0.03280893574623933,
        "ci": 0.098426807238718,
        "update": 0.06561787149247866,
        "if": 0.098426807238718,
        "these": 0.03280893574623933,
        "paths": 0.03280893574623933,
        "change": 0.03280893574623933,
        "watched_globs": 0.06561787149247866,
        "src": 0.06561787149247866,
        "app": 0.03280893574623933,
        "cmd": 0.03280893574623933,
        "gradle": 0.06561787149247866,
        "package": 0.03280893574623933,
        "json": 0.03280893574623933,
        "pyproject": 0.03280893574623933,
        "toml": 0.03280893574623933,
        "dockerfile": 0.06561787149247866,
        "no": 0.06561787149247866,
        "templates_dir": 0.03280893574623933,
        "is": 0.03280893574623933,
        "provided": 0.03280893574623933,
        "automatically": 0.03280893574623933,
        "picks": 0.03280893574623933,
        "up": 0.03280893574623933,
        "templates": 0.06561787149247866,
        "bundles": 0.03280893574623933,
        "in": 0.06561787149247866,
        "the": 0.03280893574623933,
        "repository": 0.03280893574623933,
        "and": 0.03280893574623933,
        "supports": 0.03280893574623933,
        "built": 0.03280893574623933,
        "template": 0.03280893574623933,
        "packs": 0.03280893574623933,
        "via": 0.06561787149247866,
        "6": 0.098426807238718,
        "workflows": 0.03280893574623933,
        "1": 0.098426807238718,
        "initialization": 0.03280893574623933,
        "without": 0.03280893574623933,
        "scan": 0.03280893574623933,
        "analyze": 0.03280893574623933,
        "embeddings": 0.03280893574623933,
        "prompt": 0.03280893574623933,
        "default": 0.03280893574623933,
        "include": 0.03280893574623933,
        "getting": 0.03280893574623933,
        "started": 0.03280893574623933,
        "suggestions": 0.03280893574623933,
        "3": 0.06561787149247866,
        "generate": 0.06561787149247866,
        "sequentially": 0.03280893574623933,
        "streaming": 0.03280893574623933,
        "4": 0.06561787149247866,
        "post": 0.03280893574623933,
        "process": 0.03280893574623933,
        "toc": 0.03280893574623933,
        "badges": 0.03280893574623933,
        "status": 0.03280893574623933,
        "placeholder": 0.03280893574623933,
        "lint": 0.03280893574623933,
        "direct": 0.03280893574623933,
        "md": 0.03280893574623933,
        "artifacts": 0.03280893574623933,
        "on": 0.03280893574623933,
        "detect": 0.03280893574623933,
        "changes": 0.03280893574623933,
        "diff": 0.03280893574623933,
        "map": 0.03280893574623933,
        "files": 0.03280893574623933,
        "to": 0.098426807238718,
        "using": 0.03280893574623933,
        "rules": 0.03280893574623933,
        "matrix": 0.03280893574623933,
        "quick": 0.03280893574623933,
        "start": 0.03280893574623933,
        "k8s": 0.03280893574623933,
        "entrypoints": 0.03280893574623933,
        "decide": 0.03280893574623933,
        "impacted": 0.03280893574623933,
        "regenerate": 0.03280893574623933,
        "those": 0.03280893574623933,
        "skip": 0.03280893574623933,
        "changed": 0.03280893574623933,
        "file": 0.03280893574623933,
        "matches": 0.03280893574623933,
        "allows": 0.03280893574623933,
        "avoid": 0.03280893574623933,
        "unnecessary": 0.03280893574623933,
        "runs": 0.03280893574623933,
        "rag": 0.03280893574623933,
        "fetch": 0.03280893574623933,
        "top": 0.03280893574623933,
        "k": 0.03280893574623933,
        "chunks": 0.03280893574623933,
        "relevant": 0.03280893574623933,
        "each": 0.03280893574623933
      },
      "text": "dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str # \"full\"|\"patch\" changed_sections: List[str] reasons: Dict[str, str] # section->why ``` --- ## 5) Configuration (`.docgen.yml` at repo root) ```yaml llm: runner: \"ollama\" # or \"llama.cpp\" model: \"llama3:8b-instruct\" # example; local only max_tokens: 2048 temperature: 0.2 readme: style: \"concise\" # or \"comprehensive\" template_pack: \"enterprise\" # optional bundle shipped with docgen required_sections: - intro - features - architecture - quickstart - configuration - build_and_test - deployment - troubleshooting - faq - license publish: mode: \"pr\" # \"commit\" | \"pr\" | \"dry-run\" branch_prefix: \"docgen/\" labels: - \"docs:auto\" update_existing: true # refresh an existing PR instead of opening a new one analyzers: enabled: - language - build - dependencies - patterns exclude_paths: - \".git/\" - \"node_modules/\" - \"dist/\" ci: # Only update README if these paths change watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"pyproject.toml\" - \"Dockerfile\" ``` > If no `readme.templates_dir` is provided, docgen automatically picks up `docs/templates/` bundles in the repository root and supports built-in template packs via `readme.template_pack`. --- ## 6) Workflows ### 6.1 Initialization (Repo without README) 1. **Scan & Analyze** \u2192 Manifest + Signals + Embeddings. 2. **Prompt Build** with default templates, include \u201cgetting started\u201d suggestions. 3. **Generate Sections** sequentially (streaming). 4. **Post-process** \u2192 ToC, badges (build status placeholder), lint. 5. **Publish**: direct commit `README.md` + `.docgen/` artifacts. ### 6.2 Update on Commit/PR 1. **Detect changes** via Git diff; map files to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate**",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#4",
      "vector": {
        "to": 0.146943671674129,
        "sections": 0.11020775375559676,
        "using": 0.03673591791853225,
        "a": 0.11020775375559676,
        "rules": 0.03673591791853225,
        "matrix": 0.03673591791853225,
        "pom": 0.03673591791853225,
        "xml": 0.03673591791853225,
        "build": 0.18367958959266126,
        "gradle": 0.0734718358370645,
        "test": 0.0734718358370645,
        "quick": 0.0734718358370645,
        "start": 0.0734718358370645,
        "dockerfile": 0.03673591791853225,
        "k8s": 0.0734718358370645,
        "deployment": 0.0734718358370645,
        "src": 0.03673591791853225,
        "entrypoints": 0.0734718358370645,
        "architecture": 0.0734718358370645,
        "features": 0.0734718358370645,
        "2": 0.0734718358370645,
        "decide": 0.03673591791853225,
        "updateplan": 0.03673591791853225,
        "patch": 0.03673591791853225,
        "impacted": 0.03673591791853225,
        "regenerate": 0.11020775375559676,
        "only": 0.0734718358370645,
        "those": 0.03673591791853225,
        "3": 0.0734718358370645,
        "skip": 0.03673591791853225,
        "if": 0.146943671674129,
        "no": 0.0734718358370645,
        "changed": 0.03673591791853225,
        "file": 0.0734718358370645,
        "matches": 0.03673591791853225,
        "docgen": 0.146943671674129,
        "yml": 0.03673591791853225,
        "ci": 0.0734718358370645,
        "watched_globs": 0.03673591791853225,
        "allows": 0.03673591791853225,
        "avoid": 0.03673591791853225,
        "unnecessary": 0.03673591791853225,
        "runs": 0.03673591791853225,
        "4": 0.03673591791853225,
        "rag": 0.11020775375559676,
        "retrieval": 0.03673591791853225,
        "fetch": 0.03673591791853225,
        "top": 0.0734718358370645,
        "k": 0.0734718358370645,
        "chunks": 0.0734718358370645,
        "relevant": 0.03673591791853225,
        "each": 0.0734718358370645,
        "section": 0.18367958959266126,
        "5": 0.0734718358370645,
        "generate": 0.03673591791853225,
        "post": 0.0734718358370645,
        "process": 0.03673591791853225,
        "open": 0.03673591791853225,
        "pr": 0.03673591791853225,
        "with": 0.03673591791853225,
        "summary": 0.03673591791853225,
        "of": 0.03673591791853225,
        "deltas": 0.03673591791853225,
        "6": 0.0734718358370645,
        "dry": 0.0734718358370645,
        "run": 0.0734718358370645,
        "support": 0.0734718358370645,
        "update": 0.03673591791853225,
        "computes": 0.03673591791853225,
        "diffs": 0.03673591791853225,
        "and": 0.0734718358370645,
        "scorecards": 0.03673591791853225,
        "without": 0.03673591791853225,
        "writing": 0.03673591791853225,
        "or": 0.11020775375559676,
        "publishing": 0.03673591791853225,
        "manual": 0.03673591791853225,
        "full": 0.03673591791853225,
        "intro": 0.0734718358370645,
        "arch": 0.03673591791853225,
        "7": 0.03673591791853225,
        "contract": 0.03673591791853225,
        "readme": 0.0734718358370645,
        "what": 0.03673591791853225,
        "why": 0.03673591791853225,
        "who": 0.03673591791853225,
        "it": 0.03673591791853225,
        "s": 0.03673591791853225,
        "for": 0.0734718358370645,
        "key": 0.03673591791853225,
        "bullets": 0.03673591791853225,
        "grounded": 0.03673591791853225,
        "in": 0.03673591791853225,
        "real": 0.03673591791853225,
        "repo": 0.0734718358370645,
        "signals": 0.0734718358370645,
        "overview": 0.03673591791853225,
        "diagram": 0.03673591791853225,
        "ascii": 0.03673591791853225,
        "components": 0.03673591791853225,
        "minimal": 0.03673591791853225,
        "commands": 0.146943671674129,
        "per": 0.0734718358370645,
        "system": 0.0734718358370645,
        "configuration": 0.0734718358370645,
        "env": 0.03673591791853225,
        "vars": 0.03673591791853225,
        "files": 0.03673591791853225,
        "examples": 0.03673591791853225,
        "coverage": 0.03673591791853225,
        "hint": 0.03673591791853225,
        "container": 0.03673591791853225,
        "instructions": 0.03673591791853225,
        "detected": 0.11020775375559676,
        "troubleshooting": 0.03673591791853225,
        "common": 0.03673591791853225,
        "failures": 0.03673591791853225,
        "faq": 0.03673591791853225,
        "10": 0.0734718358370645,
        "concise": 0.03673591791853225,
        "q": 0.03673591791853225,
        "contributing": 0.0734718358370645,
        "md": 0.03673591791853225,
        "absent": 0.03673591791853225,
        "license": 0.03673591791853225,
        "templated": 0.03673591791853225,
        "must": 0.03673591791853225,
        "be": 0.0734718358370645,
        "independently": 0.03673591791853225,
        "regenerable": 0.03673591791853225,
        "self": 0.03673591791853225,
        "contained": 0.03673591791853225,
        "8": 0.03673591791853225,
        "prompting": 0.03673591791853225,
        "strategy": 0.03673591791853225,
        "local": 0.0734718358370645,
        "llm": 0.03673591791853225,
        "message": 0.0734718358370645,
        "fixed": 0.03673591791853225,
        "guardrails": 0.03673591791853225,
        "you": 0.03673591791853225,
        "are": 0.03673591791853225,
        "senior": 0.03673591791853225,
        "dev": 0.03673591791853225,
        "doc": 0.03673591791853225,
        "writer": 0.03673591791853225,
        "precise": 0.03673591791853225,
        "cite": 0.03673591791853225,
        "facts": 0.03673591791853225,
        "speculation": 0.03673591791853225,
        "never": 0.03673591791853225,
        "invent": 0.03673591791853225,
        "prefer": 0.03673591791853225,
        "by": 0.03673591791853225,
        "analyzers": 0.0734718358370645,
        "user": 0.03673591791853225,
        "objective": 0.03673591791853225,
        "constraints": 0.03673591791853225,
        "tone": 0.03673591791853225,
        "length": 0.03673591791853225,
        "inject": 0.03673591791853225,
        "provide": 0.03673591791853225,
        "style": 0.03673591791853225,
        "tokens": 0.03673591791853225,
        "headings": 0.03673591791853225,
        "code": 0.0734718358370645,
        "blocks": 0.03673591791853225,
        "tables": 0.03673591791853225,
        "filters": 0.03673591791853225,
        "refuse": 0.03673591791853225,
        "insufficient": 0.03673591791853225,
        "evidence": 0.03673591791853225,
        "fall": 0.03673591791853225,
        "back": 0.03673591791853225,
        "template": 0.03673591791853225,
        "stubs": 0.0734718358370645,
        "9": 0.03673591791853225,
        "language": 0.0734718358370645,
        "project": 0.03673591791853225,
        "poc": 0.0734718358370645,
        "targets": 0.03673591791853225,
        "tier": 0.0734718358370645,
        "1": 0.03673591791853225,
        "python": 0.03673591791853225,
        "poetry": 0.03673591791853225,
        "setuptools": 0.03673591791853225,
        "java": 0.03673591791853225,
        "maven": 0.03673591791853225,
        "spring": 0.0734718358370645,
        "boot": 0.03673591791853225,
        "node": 0.03673591791853225,
        "js": 0.03673591791853225,
        "npm": 0.03673591791853225,
        "pnpm": 0.03673591791853225,
        "express": 0.03673591791853225,
        "next": 0.03673591791853225,
        "soon": 0.03673591791853225,
        "go": 0.03673591791853225,
        "modules": 0.03673591791853225,
        "rust": 0.03673591791853225,
        "cargo": 0.03673591791853225,
        "ruby": 0.03673591791853225,
        "bundler": 0.03673591791853225,
        "php": 0.03673591791853225,
        "composer": 0.03673591791853225,
        "detection": 0.03673591791853225,
        "via": 0.03673591791853225,
        "heuristics": 0.03673591791853225,
        "optional": 0.03673591791853225,
        "tree": 0.03673591791853225,
        "sitter": 0.03673591791853225,
        "function": 0.03673591791853225,
        "class": 0.03673591791853225,
        "extraction": 0.03673591791853225,
        "pluggable": 0.03673591791853225,
        "entry": 0.03673591791853225,
        "points": 0.03673591791853225,
        "main": 0.03673591791853225,
        "springbootapplication": 0.03673591791853225,
        "fastapi": 0.03673591791853225,
        "app": 0.03673591791853225,
        "bin": 0.03673591791853225,
        "cmd": 0.03673591791853225,
        "interfaces": 0.03673591791853225,
        "skeleton": 0.03673591791853225,
        "__init__": 0.03673591791853225,
        "py": 0.5143028508594515,
        "cli": 0.0734718358370645,
        "click": 0.03673591791853225,
        "typer": 0.03673591791853225,
        "failsafe": 0.03673591791853225,
        "fail": 0.03673591791853225,
        "safe": 0.03673591791853225,
        "logging": 0.0734718358370645,
        "helpers": 0.03673591791853225,
        "orchestrator": 0.03673591791853225,
        "repo_scanner": 0.03673591791853225,
        "base": 0.03673591791853225,
        "analyzer": 0.03673591791853225,
        "abc": 0.03673591791853225,
        "dependencies": 0.03673591791853225,
        "patterns": 0.03673591791853225,
        "embedder": 0.03673591791853225,
        "embedding": 0.03673591791853225,
        "model": 0.03673591791853225,
        "store": 0.03673591791853225
      },
      "text": "to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate** \u2192 **Post-process** \u2192 **Open PR** with summary of deltas. 6. Dry-run support: `docgen update --dry-run` computes diffs and scorecards without writing or publishing. ### 6.3 Regenerate (Manual) * `docgen regenerate --full` or `--sections intro,arch`. --- ## 7) Section Contract (README) * **Intro**: what, why, who it\u2019s for * **Key Features**: bullets grounded in real repo signals * **Architecture**: overview diagram (ASCII) + components * **Quick Start**: minimal commands (per build system) * **Configuration**: env vars, files, examples * **Build & Test**: commands, coverage hint * **Deployment**: container/K8s instructions if detected * **Troubleshooting**: common failures * **FAQ**: 5\u201310 concise Q\\&A * **Contributing** (if `CONTRIBUTING.md` absent) * **License** (detected or templated) > Each section must be independently regenerable and self-contained. --- ## 8) Prompting Strategy (Local LLM) * **System message (fixed guardrails)**: * \u201cYou are a senior dev doc writer. Be precise. Cite repo facts only. No speculation.\u201d * \u201cNever invent commands. Prefer commands detected by analyzers.\u201d * **User message per section**: * Section objective + constraints (tone, length). * Inject **Signals** + **Top-k chunks** (RAG). * Provide **style tokens** (headings, code blocks, tables). * **Post-filters**: refuse if insufficient evidence; fall back to template stubs. --- ## 9) Language & Project Support (POC targets) * **Tier-1 (POC)**: Python (Poetry/Setuptools), Java (Maven/Gradle, Spring Boot), Node.js (npm/pnpm, Express/Next). * **Tier-2 (soon)**: Go (modules), Rust (Cargo), Ruby (Bundler), PHP (Composer). * Detection via: * File heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#5",
      "vector": {
        "heuristics": 0.028665182485640765,
        "optional": 0.0859955474569223,
        "tree": 0.028665182485640765,
        "sitter": 0.028665182485640765,
        "for": 0.11466072994256306,
        "function": 0.028665182485640765,
        "class": 0.05733036497128153,
        "extraction": 0.028665182485640765,
        "pluggable": 0.028665182485640765,
        "entry": 0.028665182485640765,
        "points": 0.028665182485640765,
        "main": 0.05733036497128153,
        "spring": 0.028665182485640765,
        "springbootapplication": 0.028665182485640765,
        "fastapi": 0.05733036497128153,
        "app": 0.14332591242820383,
        "bin": 0.028665182485640765,
        "cmd": 0.05733036497128153,
        "10": 0.028665182485640765,
        "interfaces": 0.028665182485640765,
        "code": 0.05733036497128153,
        "skeleton": 0.028665182485640765,
        "docgen": 0.0859955474569223,
        "__init__": 0.028665182485640765,
        "py": 0.7166295621410191,
        "cli": 0.0859955474569223,
        "click": 0.028665182485640765,
        "typer": 0.05733036497128153,
        "failsafe": 0.028665182485640765,
        "fail": 0.028665182485640765,
        "safe": 0.028665182485640765,
        "readme": 0.0859955474569223,
        "stubs": 0.028665182485640765,
        "logging": 0.05733036497128153,
        "configuration": 0.028665182485640765,
        "helpers": 0.028665182485640765,
        "orchestrator": 0.028665182485640765,
        "repo_scanner": 0.028665182485640765,
        "analyzers": 0.028665182485640765,
        "base": 0.028665182485640765,
        "analyzer": 0.0859955474569223,
        "abc": 0.14332591242820383,
        "language": 0.028665182485640765,
        "build": 0.14332591242820383,
        "dependencies": 0.028665182485640765,
        "entrypoints": 0.028665182485640765,
        "patterns": 0.028665182485640765,
        "rag": 0.028665182485640765,
        "embedder": 0.028665182485640765,
        "local": 0.05733036497128153,
        "embedding": 0.028665182485640765,
        "model": 0.028665182485640765,
        "store": 0.028665182485640765,
        "prompting": 0.028665182485640765,
        "builder": 0.028665182485640765,
        "jinja2": 0.028665182485640765,
        "templates": 0.05733036497128153,
        "token": 0.028665182485640765,
        "mgmt": 0.028665182485640765,
        "constants": 0.028665182485640765,
        "j2": 0.028665182485640765,
        "per": 0.028665182485640765,
        "section": 0.028665182485640765,
        "llm": 0.028665182485640765,
        "runner": 0.028665182485640765,
        "adapter": 0.028665182485640765,
        "ollama": 0.028665182485640765,
        "llama": 0.028665182485640765,
        "cpp": 0.028665182485640765,
        "postproc": 0.028665182485640765,
        "lint": 0.028665182485640765,
        "links": 0.05733036497128153,
        "markers": 0.0859955474569223,
        "toc": 0.05733036497128153,
        "git": 0.05733036497128153,
        "diff": 0.028665182485640765,
        "publisher": 0.028665182485640765,
        "config": 0.028665182485640765,
        "models": 0.05733036497128153,
        "python": 0.0859955474569223,
        "from": 0.05733036497128153,
        "import": 0.05733036497128153,
        "abstractmethod": 0.0859955474569223,
        "repomanifest": 0.0859955474569223,
        "signal": 0.05733036497128153,
        "def": 0.14332591242820383,
        "supports": 0.028665182485640765,
        "self": 0.05733036497128153,
        "manifest": 0.05733036497128153,
        "bool": 0.0859955474569223,
        "analyze": 0.05733036497128153,
        "list": 0.028665182485640765,
        "command": 0.0859955474569223,
        "init": 0.028665182485640765,
        "path": 0.0859955474569223,
        "str": 0.14332591242820383,
        "publish": 0.0859955474569223,
        "true": 0.028665182485640765,
        "update": 0.0859955474569223,
        "event": 0.028665182485640765,
        "commit": 0.05733036497128153,
        "diff_base": 0.028665182485640765,
        "origin": 0.028665182485640765,
        "regenerate": 0.028665182485640765,
        "sections": 0.11466072994256306,
        "full": 0.028665182485640765,
        "false": 0.028665182485640765,
        "service": 0.028665182485640765,
        "mode": 0.028665182485640765,
        "post": 0.1719910949138446,
        "generate": 0.028665182485640765,
        "arch": 0.028665182485640765,
        "quickstart": 0.0859955474569223,
        "get": 0.028665182485640765,
        "status": 0.028665182485640765,
        "run_id": 0.028665182485640765,
        "11": 0.028665182485640765,
        "change": 0.028665182485640765,
        "impact": 0.028665182485640765,
        "matrix": 0.028665182485640765,
        "examples": 0.028665182485640765,
        "changed": 0.05733036497128153,
        "pattern": 0.028665182485640765,
        "to": 0.0859955474569223,
        "rebuild": 0.028665182485640765,
        "notes": 0.028665182485640765,
        "pom": 0.028665182485640765,
        "xml": 0.028665182485640765,
        "gradle": 0.028665182485640765,
        "_and": 0.05733036497128153,
        "_test": 0.05733036497128153,
        "recompute": 0.028665182485640765,
        "commands": 0.028665182485640765,
        "requirements": 0.028665182485640765,
        "txt": 0.028665182485640765,
        "pyproject": 0.028665182485640765,
        "toml": 0.028665182485640765,
        "install": 0.028665182485640765,
        "steps": 0.028665182485640765,
        "dockerfile": 0.028665182485640765,
        "k8s": 0.028665182485640765,
        "deployment": 0.028665182485640765,
        "container": 0.028665182485640765,
        "changes": 0.028665182485640765,
        "src": 0.028665182485640765,
        "features": 0.028665182485640765,
        "architecture": 0.0859955474569223,
        "if": 0.028665182485640765,
        "entrypoint": 0.028665182485640765,
        "intro": 0.028665182485640765,
        "too": 0.028665182485640765,
        "docs": 0.028665182485640765,
        "all": 0.028665182485640765,
        "patch": 0.028665182485640765,
        "prefer": 0.028665182485640765,
        "doc": 0.028665182485640765,
        "driven": 0.028665182485640765,
        "md": 0.028665182485640765,
        "none": 0.028665182485640765,
        "unless": 0.028665182485640765,
        "empty": 0.028665182485640765,
        "prevent": 0.028665182485640765,
        "loops": 0.028665182485640765,
        "12": 0.028665182485640765,
        "processing": 0.028665182485640765,
        "rules": 0.028665182485640765,
        "headings": 0.028665182485640765,
        "start": 0.028665182485640765,
        "at": 0.028665182485640765,
        "title": 0.028665182485640765,
        "then": 0.028665182485640765,
        "add": 0.028665182485640765,
        "auto": 0.028665182485640765,
        "level": 0.028665182485640765,
        "3": 0.028665182485640765,
        "validate": 0.028665182485640765,
        "blocks": 0.028665182485640765,
        "bash": 0.028665182485640765,
        "convert": 0.028665182485640765,
        "absolute": 0.028665182485640765,
        "github": 0.028665182485640765,
        "relative": 0.028665182485640765,
        "where": 0.028665182485640765,
        "possible": 0.028665182485640765,
        "ensure": 0.028665182485640765,
        "idempotency": 0.028665182485640765,
        "only": 0.028665182485640765,
        "edit": 0.028665182485640765,
        "between": 0.028665182485640765,
        "managed": 0.028665182485640765,
        "begin": 0.028665182485640765,
        "end": 0.028665182485640765,
        "13": 0.028665182485640765,
        "ci": 0.028665182485640765,
        "integration": 0.028665182485640765,
        "pre": 0.028665182485640765,
        "forbid": 0.028665182485640765,
        "direct": 0.028665182485640765,
        "edits": 0.028665182485640765,
        "outside": 0.028665182485640765,
        "merge": 0.028665182485640765,
        "checkout": 0.028665182485640765,
        "remind": 0.028665182485640765
      },
      "text": "heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py prompting/ builder.py # Jinja2 templates, token mgmt constants.py templates/ # *.j2 per section llm/ runner.py # adapter for ollama/llama.cpp postproc/ lint.py links.py markers.py toc.py git/ diff.py publisher.py config.py models.py ``` **Analyzer ABC** ```python from abc import ABC, abstractmethod from .models import RepoManifest, Signal class Analyzer(ABC): @abstractmethod def supports(self, manifest: RepoManifest) -> bool: ... @abstractmethod def analyze(self, manifest: RepoManifest) -> list[Signal]: ... ``` **CLI (Typer)** ```python @app.command() def init(path: str = \".\", publish: bool = True): ... @app.command() def update(path: str = \".\", event: str = \"commit\", diff_base: str = \"origin/main\"): ... @app.command() def regenerate(sections: str = \"\", full: bool = False): ... ``` **FastAPI (optional service mode)** * `POST /analyze` * `POST /generate?sections=arch,quickstart` * `POST /publish` * `GET /status/{run_id}` --- ## 11) Change Impact Matrix (examples) | Changed Path Pattern | Sections to Rebuild | Notes | | ------------------------------------ | ---------------------------- | --------------------------------------- | | `pom.xml`, `build.gradle*` | build\\_and\\_test, quickstart | Recompute build commands | | `requirements.txt`, `pyproject.toml` | build\\_and\\_test, quickstart | Update install steps | | `Dockerfile`, `k8s/**` | deployment | Publish container changes | | `src/**`, `app/**`, `cmd/**` | features, architecture | If entrypoint changed, update intro too | | `docs/**` | all (patch) | Prefer doc-driven | | `README.md` | none (unless empty) | Prevent loops | --- ## 12) Post-Processing Rules * Headings start at `#` for title then `##` for sections. * Add **auto ToC** (<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#6",
      "vector": {
        "level": 0.04267895997763199,
        "3": 0.12803687993289598,
        "validate": 0.04267895997763199,
        "code": 0.04267895997763199,
        "blocks": 0.04267895997763199,
        "bash": 0.04267895997763199,
        "python": 0.08535791995526398,
        "convert": 0.04267895997763199,
        "absolute": 0.04267895997763199,
        "github": 0.12803687993289598,
        "links": 0.04267895997763199,
        "to": 0.08535791995526398,
        "relative": 0.04267895997763199,
        "where": 0.04267895997763199,
        "possible": 0.08535791995526398,
        "ensure": 0.04267895997763199,
        "idempotency": 0.04267895997763199,
        "only": 0.12803687993289598,
        "edit": 0.04267895997763199,
        "between": 0.04267895997763199,
        "managed": 0.08535791995526398,
        "markers": 0.12803687993289598,
        "docgen": 0.21339479988815996,
        "begin": 0.04267895997763199,
        "architecture": 0.21339479988815996,
        "end": 0.04267895997763199,
        "13": 0.04267895997763199,
        "git": 0.08535791995526398,
        "ci": 0.08535791995526398,
        "integration": 0.04267895997763199,
        "local": 0.12803687993289598,
        "pre": 0.04267895997763199,
        "commit": 0.08535791995526398,
        "forbid": 0.04267895997763199,
        "direct": 0.04267895997763199,
        "readme": 0.12803687993289598,
        "edits": 0.04267895997763199,
        "outside": 0.04267895997763199,
        "optional": 0.12803687993289598,
        "post": 0.12803687993289598,
        "merge": 0.04267895997763199,
        "checkout": 0.08535791995526398,
        "remind": 0.04267895997763199,
        "run": 0.04267895997763199,
        "update": 0.12803687993289598,
        "gitlab": 0.04267895997763199,
        "bitbucket": 0.04267895997763199,
        "on": 0.04267895997763199,
        "push": 0.04267895997763199,
        "pr": 0.25607375986579195,
        "1": 0.12803687993289598,
        "repo": 0.08535791995526398,
        "2": 0.17071583991052797,
        "event": 0.04267895997763199,
        "diff": 0.08535791995526398,
        "base": 0.04267895997763199,
        "base_sha": 0.04267895997763199,
        "if": 0.12803687993289598,
        "changes": 0.04267895997763199,
        "open": 0.04267895997763199,
        "with": 0.04267895997763199,
        "labeled": 0.04267895997763199,
        "docs": 0.08535791995526398,
        "auto": 0.04267895997763199,
        "tokenless": 0.04267895997763199,
        "mode": 0.12803687993289598,
        "created": 0.04267895997763199,
        "from": 0.08535791995526398,
        "a": 0.04267895997763199,
        "app": 0.04267895997763199,
        "bot": 0.04267895997763199,
        "account": 0.04267895997763199,
        "14": 0.04267895997763199,
        "quality": 0.04267895997763199,
        "gates": 0.04267895997763199,
        "evaluation": 0.04267895997763199,
        "consistency": 0.04267895997763199,
        "checks": 0.04267895997763199,
        "commands": 0.08535791995526398,
        "exist": 0.04267895997763199,
        "in": 0.12803687993289598,
        "ports": 0.04267895997763199,
        "env": 0.04267895997763199,
        "vars": 0.04267895997763199,
        "match": 0.04267895997763199,
        "configs": 0.04267895997763199,
        "no": 0.08535791995526398,
        "hallucinations": 0.04267895997763199,
        "reject": 0.04267895997763199,
        "new": 0.04267895997763199,
        "facts": 0.04267895997763199,
        "not": 0.04267895997763199,
        "found": 0.08535791995526398,
        "signals": 0.08535791995526398,
        "rag": 0.08535791995526398,
        "style": 0.04267895997763199,
        "concise": 0.04267895997763199,
        "paragraphs": 0.04267895997763199,
        "actionable": 0.04267895997763199,
        "filler": 0.04267895997763199,
        "marketing": 0.04267895997763199,
        "scorecard": 0.04267895997763199,
        "0": 0.04267895997763199,
        "100": 0.04267895997763199,
        "coverage": 0.04267895997763199,
        "of": 0.08535791995526398,
        "required": 0.04267895997763199,
        "sections": 0.08535791995526398,
        "30": 0.04267895997763199,
        "buildability": 0.04267895997763199,
        "quick": 0.08535791995526398,
        "start": 0.04267895997763199,
        "20": 0.12803687993289598,
        "link": 0.04267895997763199,
        "validity": 0.04267895997763199,
        "10": 0.12803687993289598,
        "alignment": 0.04267895997763199,
        "w": 0.04267895997763199,
        "change": 0.04267895997763199,
        "set": 0.04267895997763199,
        "lint": 0.04267895997763199,
        "reviewer": 0.04267895997763199,
        "feedback": 0.04267895997763199,
        "loop": 0.04267895997763199,
        "15": 0.04267895997763199,
        "security": 0.04267895997763199,
        "privacy": 0.04267895997763199,
        "llm": 0.08535791995526398,
        "and": 0.04267895997763199,
        "embedding": 0.04267895997763199,
        "models": 0.04267895997763199,
        "respect": 0.04267895997763199,
        "gitignore": 0.04267895997763199,
        "configurable": 0.04267895997763199,
        "exclude_paths": 0.04267895997763199,
        "never": 0.04267895997763199,
        "index": 0.04267895997763199,
        "large": 0.04267895997763199,
        "binaries": 0.04267895997763199,
        "secret": 0.08535791995526398,
        "files": 0.08535791995526398,
        "simple": 0.04267895997763199,
        "scan": 0.04267895997763199,
        "block": 0.04267895997763199,
        "16": 0.04267895997763199,
        "mvp": 0.04267895997763199,
        "plan": 0.04267895997763199,
        "weeks": 0.04267895997763199,
        "suggested": 0.04267895997763199,
        "breakdown": 0.04267895997763199,
        "core": 0.04267895997763199,
        "path": 0.04267895997763199,
        "cli": 0.04267895997763199,
        "scanner": 0.04267895997763199,
        "language": 0.04267895997763199,
        "build": 0.04267895997763199,
        "analyzers": 0.04267895997763199,
        "java": 0.04267895997763199,
        "node": 0.04267895997763199,
        "prompt": 0.04267895997763199,
        "builder": 0.04267895997763199,
        "runner": 0.04267895997763199,
        "ollama": 0.04267895997763199,
        "adapter": 0.04267895997763199,
        "processor": 0.04267895997763199,
        "publisher": 0.04267895997763199,
        "lite": 0.04267895997763199,
        "embed": 0.04267895997763199,
        "existing": 0.04267895997763199,
        "top": 0.04267895997763199,
        "largest": 0.04267895997763199,
        "source": 0.04267895997763199,
        "heads": 0.04267895997763199,
        "triggers": 0.04267895997763199,
        "single": 0.04267895997763199,
        "as": 0.08535791995526398,
        "stretch": 0.04267895997763199,
        "4": 0.04267895997763199,
        "templates": 0.08535791995526398,
        "8": 0.04267895997763199,
        "jinja2": 0.17071583991052797,
        "5": 0.04267895997763199,
        "config": 0.04267895997763199,
        "yml": 0.04267895997763199,
        "minimal": 0.04267895997763199,
        "17": 0.12803687993289598,
        "example": 0.04267895997763199,
        "section": 0.04267895997763199,
        "template": 0.04267895997763199,
        "j2": 0.08535791995526398,
        "project_name": 0.08535791995526398,
        "is": 0.04267895997763199,
        "structured": 0.04267895997763199,
        "ascii": 0.04267895997763199,
        "_architecture": 0.04267895997763199,
        "key": 0.04267895997763199,
        "components": 0.08535791995526398,
        "for": 0.04267895997763199,
        "comp": 0.12803687993289598,
        "name": 0.04267895997763199,
        "summary": 0.04267895997763199,
        "endfor": 0.04267895997763199,
        "data": 0.04267895997763199,
        "flow": 0.04267895997763199,
        "data_flow": 0.04267895997763199,
        "generated": 0.04267895997763199,
        "detected": 0.04267895997763199,
        "signals_summary": 0.04267895997763199,
        "frame": 0.04267895997763199,
        "composed": 0.04267895997763199,
        "intro": 0.04267895997763199,
        "features": 0.08535791995526398,
        "include": 0.04267895997763199
      },
      "text": "(<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to run `docgen update` (optional). ### CI (GitHub/GitLab/Bitbucket) * On push/PR: 1. Checkout repo. 2. `docgen update --event pr --diff-base $BASE_SHA` 3. If changes \u2192 open/update PR with labeled `docs:auto`. * Tokenless mode possible if PR created from a GitHub App/bot account. --- ## 14) Quality Gates & Evaluation * **Consistency checks**: commands exist in repo; ports/env vars match configs. * **No hallucinations**: reject new facts not found in signals/RAG. * **Style**: concise paragraphs, actionable commands, no filler marketing. * **Scorecard** (0\u2013100): * Coverage of required sections (30) * Buildability of quick start (20) * Link validity (10) * Diff alignment w/ change set (20) * Lint (10) * Reviewer feedback loop (10) --- ## 15) Security & Privacy * **Local only** LLM and embedding models. * Respect `.gitignore` + configurable `exclude_paths`. * Never index large binaries/secret files. * Optional simple **secret scan**; block if found. --- ## 16) MVP Plan (2 weeks suggested breakdown) 1. **Core path**: CLI, Scanner, Language+Build analyzers (Python/Java/Node), Prompt Builder, Local LLM runner (Ollama adapter), Post-processor, Git Publisher (PR). 2. **RAG Lite**: embed only `/docs`, existing `README`, top 20 largest source files\u2019 heads. 3. **Triggers**: single \u201ccommit\u201d mode; PR mode as stretch. 4. **Templates**: 8 sections, Jinja2; managed markers. 5. **Config**: `.docgen.yml` minimal. --- ## 17) Example Templates ### 17.1 Section Template (Jinja2 \u2014 architecture.j2) ```jinja2 ## Architecture {{ project_name }} is structured as: ``` {{ ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#7",
      "vector": {
        "ascii": 0.036588086663230115,
        "_architecture": 0.036588086663230115,
        "key": 0.14635234665292046,
        "components": 0.07317617332646023,
        "for": 0.2561166066426108,
        "comp": 0.10976425998969035,
        "in": 0.2195285199793807,
        "name": 0.036588086663230115,
        "summary": 0.036588086663230115,
        "endfor": 0.036588086663230115,
        "data": 0.036588086663230115,
        "flow": 0.036588086663230115,
        "data_flow": 0.036588086663230115,
        "generated": 0.036588086663230115,
        "from": 0.036588086663230115,
        "detected": 0.036588086663230115,
        "signals": 0.036588086663230115,
        "signals_summary": 0.036588086663230115,
        "17": 0.036588086663230115,
        "2": 0.036588086663230115,
        "readme": 0.10976425998969035,
        "frame": 0.036588086663230115,
        "composed": 0.036588086663230115,
        "jinja2": 0.036588086663230115,
        "project_name": 0.036588086663230115,
        "intro": 0.10976425998969035,
        "features": 0.10976425998969035,
        "include": 0.036588086663230115,
        "architecture": 0.07317617332646023,
        "j2": 0.036588086663230115,
        "quick": 0.07317617332646023,
        "start": 0.2195285199793807,
        "quickstart": 0.036588086663230115,
        "configuration": 0.07317617332646023,
        "build": 0.14635234665292046,
        "test": 0.036588086663230115,
        "build_and_test": 0.07317617332646023,
        "deployment": 0.10976425998969035,
        "troubleshooting": 0.07317617332646023,
        "faq": 0.07317617332646023,
        "license": 0.07317617332646023,
        "18": 0.036588086663230115,
        "minimal": 0.036588086663230115,
        "python": 0.14635234665292046,
        "snippets": 0.036588086663230115,
        "change": 0.036588086663230115,
        "impact": 0.036588086663230115,
        "heuristic": 0.036588086663230115,
        "section_rules": 0.07317617332646023,
        "pom": 0.10976425998969035,
        "xml": 0.10976425998969035,
        "gradle": 0.07317617332646023,
        "requirements": 0.10976425998969035,
        "txt": 0.10976425998969035,
        "pyproject": 0.036588086663230115,
        "toml": 0.036588086663230115,
        "package": 0.07317617332646023,
        "json": 0.07317617332646023,
        "dockerfile": 0.07317617332646023,
        "k8s": 0.036588086663230115,
        "src": 0.10976425998969035,
        "app": 0.10976425998969035,
        "cmd": 0.10976425998969035,
        "def": 0.07317617332646023,
        "sections_from_diff": 0.036588086663230115,
        "paths": 0.07317617332646023,
        "list": 0.036588086663230115,
        "str": 0.2195285199793807,
        "set": 0.07317617332646023,
        "out": 0.10976425998969035,
        "section": 0.07317617332646023,
        "patterns": 0.10976425998969035,
        "if": 0.18294043331615056,
        "any": 0.036588086663230115,
        "p": 0.10976425998969035,
        "pat": 0.07317617332646023,
        "startswith": 0.036588086663230115,
        "add": 0.036588086663230115,
        "return": 0.10976425998969035,
        "or": 0.10976425998969035,
        "fall": 0.036588086663230115,
        "back": 0.036588086663230115,
        "to": 0.07317617332646023,
        "uncertain": 0.036588086663230115,
        "managed": 0.036588086663230115,
        "markers": 0.07317617332646023,
        "patch": 0.036588086663230115,
        "replace_block": 0.036588086663230115,
        "md": 0.18294043331615056,
        "new": 0.07317617332646023,
        "f": 0.10976425998969035,
        "docgen": 0.18294043331615056,
        "begin": 0.036588086663230115,
        "end": 0.18294043331615056,
        "and": 0.036588086663230115,
        "pre": 0.07317617332646023,
        "rest": 0.07317617332646023,
        "split": 0.07317617332646023,
        "1": 0.07317617332646023,
        "_": 0.036588086663230115,
        "post": 0.07317617332646023,
        "n": 0.07317617332646023,
        "insert": 0.036588086663230115,
        "missing": 0.036588086663230115,
        "19": 0.036588086663230115,
        "open": 0.036588086663230115,
        "questions": 0.036588086663230115,
        "trade": 0.036588086663230115,
        "offs": 0.036588086663230115,
        "embeddings": 0.036588086663230115,
        "use": 0.036588086663230115,
        "a": 0.14635234665292046,
        "tiny": 0.036588086663230115,
        "local": 0.036588086663230115,
        "model": 0.07317617332646023,
        "vs": 0.07317617332646023,
        "rule": 0.036588086663230115,
        "based": 0.036588086663230115,
        "retrieval": 0.036588086663230115,
        "mvp": 0.036588086663230115,
        "tree": 0.036588086663230115,
        "sitter": 0.036588086663230115,
        "adds": 0.036588086663230115,
        "power": 0.036588086663230115,
        "but": 0.036588086663230115,
        "increases": 0.036588086663230115,
        "footprint": 0.036588086663230115,
        "gate": 0.036588086663230115,
        "behind": 0.036588086663230115,
        "flag": 0.036588086663230115,
        "pr": 0.10976425998969035,
        "author": 0.036588086663230115,
        "bot": 0.036588086663230115,
        "account": 0.036588086663230115,
        "developer": 0.036588086663230115,
        "token": 0.036588086663230115,
        "decide": 0.036588086663230115,
        "per": 0.036588086663230115,
        "environment": 0.036588086663230115,
        "markdown": 0.036588086663230115,
        "diffs": 0.036588086663230115,
        "keep": 0.036588086663230115,
        "sections": 0.036588086663230115,
        "atomic": 0.036588086663230115,
        "minimize": 0.036588086663230115,
        "noisy": 0.036588086663230115,
        "prs": 0.036588086663230115,
        "20": 0.036588086663230115,
        "example": 0.036588086663230115,
        "yml": 0.036588086663230115,
        "mixed": 0.036588086663230115,
        "repo": 0.036588086663230115,
        "yaml": 0.036588086663230115,
        "llm": 0.036588086663230115,
        "runner": 0.036588086663230115,
        "ollama": 0.036588086663230115,
        "llama3": 0.036588086663230115,
        "8b": 0.036588086663230115,
        "instruct": 0.036588086663230115,
        "temperature": 0.036588086663230115,
        "0": 0.036588086663230115,
        "15": 0.036588086663230115,
        "style": 0.036588086663230115,
        "comprehensive": 0.036588086663230115,
        "publish": 0.036588086663230115,
        "mode": 0.036588086663230115,
        "branch_prefix": 0.036588086663230115,
        "analyzers": 0.036588086663230115,
        "enabled": 0.036588086663230115,
        "language": 0.036588086663230115,
        "dependencies": 0.036588086663230115,
        "exclude_paths": 0.036588086663230115,
        "git": 0.036588086663230115,
        "node_modules": 0.036588086663230115,
        "dist": 0.036588086663230115,
        "target": 0.036588086663230115,
        "ci": 0.036588086663230115,
        "watched_globs": 0.036588086663230115,
        "21": 0.036588086663230115,
        "success": 0.036588086663230115,
        "criteria": 0.036588086663230115,
        "poc": 0.036588086663230115,
        "3": 0.036588086663230115,
        "diverse": 0.036588086663230115,
        "repos": 0.036588086663230115,
        "cli": 0.036588086663230115,
        "spring": 0.036588086663230115,
        "boot": 0.036588086663230115,
        "api": 0.036588086663230115,
        "node": 0.036588086663230115,
        "webapp": 0.036588086663230115,
        "init": 0.036588086663230115,
        "produces": 0.036588086663230115,
        "working": 0.036588086663230115,
        "linted": 0.036588086663230115,
        "with": 0.036588086663230115,
        "runnable": 0.036588086663230115,
        "on": 0.036588086663230115,
        "changing": 0.036588086663230115
      },
      "text": "ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick Start {{ quickstart }} ## Configuration {{ configuration }} ## Build & Test {{ build_and_test }} ## Deployment {{ deployment }} ## Troubleshooting {{ troubleshooting }} ## FAQ {{ faq }} ## License {{ license }} ``` --- ## 18) Minimal Python Snippets **Change impact heuristic** ```python SECTION_RULES = [ (\"build_and_test\", [\"pom.xml\",\"build.gradle\",\"requirements.txt\",\"pyproject.toml\",\"package.json\"]), (\"deployment\", [\"Dockerfile\",\"k8s/\"]), (\"architecture\", [\"src/\",\"app/\",\"cmd/\"]), (\"features\", [\"src/\",\"app/\",\"cmd/\"]), ] def sections_from_diff(paths: list[str]) -> set[str]: out = set() for section, patterns in SECTION_RULES: if any(p for p in paths for pat in patterns if p.startswith(pat)): out.add(section) return out or {\"intro\"} # fall back to intro if uncertain ``` **Managed markers (patch)** ```python def replace_block(md: str, key: str, new: str) -> str: start = f\"<!-- docgen:begin:{key} -->\" end = f\"<!-- docgen:end:{key} -->\" if start in md and end in md: pre, rest = md.split(start, 1) _, post = rest.split(end, 1) return f\"{pre}{start}\\n{new}\\n{end}{post}\" return md # or insert markers if missing ``` --- ## 19) Open Questions / Trade-offs * **Embeddings**: Use a tiny local model vs. rule-based retrieval for MVP? * **Tree-sitter**: Adds power but increases footprint\u2014gate behind a flag. * **PR author**: Bot account vs. developer token\u2014decide per environment. * **Markdown diffs**: Keep sections atomic to minimize noisy PRs. --- ## 20) Example `.docgen.yml` for a Mixed Repo ```yaml llm: runner: \"ollama\" model: \"llama3:8b-instruct\" temperature: 0.15 readme: style: \"comprehensive\" publish: mode: \"pr\" branch_prefix: \"docgen/\" analyzers: enabled: [language, build, dependencies, patterns] exclude_paths: [\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#8",
      "vector": {
        "git": 0.08838834764831843,
        "node_modules": 0.08838834764831843,
        "dist": 0.08838834764831843,
        "target": 0.08838834764831843,
        "ci": 0.08838834764831843,
        "watched_globs": 0.08838834764831843,
        "src": 0.08838834764831843,
        "app": 0.08838834764831843,
        "cmd": 0.08838834764831843,
        "pom": 0.17677669529663687,
        "xml": 0.17677669529663687,
        "build": 0.08838834764831843,
        "gradle": 0.08838834764831843,
        "package": 0.08838834764831843,
        "json": 0.08838834764831843,
        "requirements": 0.17677669529663687,
        "txt": 0.17677669529663687,
        "dockerfile": 0.08838834764831843,
        "21": 0.08838834764831843,
        "success": 0.08838834764831843,
        "criteria": 0.08838834764831843,
        "poc": 0.08838834764831843,
        "for": 0.08838834764831843,
        "3": 0.08838834764831843,
        "diverse": 0.08838834764831843,
        "repos": 0.08838834764831843,
        "python": 0.08838834764831843,
        "cli": 0.17677669529663687,
        "spring": 0.08838834764831843,
        "boot": 0.08838834764831843,
        "api": 0.08838834764831843,
        "node": 0.08838834764831843,
        "webapp": 0.08838834764831843,
        "docgen": 0.17677669529663687,
        "init": 0.17677669529663687,
        "produces": 0.08838834764831843,
        "a": 0.2651650429449553,
        "working": 0.08838834764831843,
        "linted": 0.08838834764831843,
        "readme": 0.08838834764831843,
        "with": 0.08838834764831843,
        "runnable": 0.08838834764831843,
        "quick": 0.08838834764831843,
        "start": 0.08838834764831843,
        "on": 0.08838834764831843,
        "changing": 0.08838834764831843,
        "or": 0.08838834764831843,
        "pr": 0.08838834764831843,
        "updates": 0.08838834764831843,
        "only": 0.08838834764831843,
        "relevant": 0.08838834764831843,
        "sections": 0.08838834764831843,
        "no": 0.08838834764831843,
        "hallucinated": 0.08838834764831843,
        "commands": 0.08838834764831843,
        "links": 0.08838834764831843,
        "and": 0.2651650429449553,
        "badges": 0.08838834764831843,
        "validate": 0.08838834764831843,
        "style": 0.08838834764831843,
        "consistent": 0.08838834764831843,
        "if": 0.08838834764831843,
        "you": 0.17677669529663687,
        "want": 0.08838834764831843,
        "i": 0.08838834764831843,
        "can": 0.17677669529663687,
        "spin": 0.08838834764831843,
        "up": 0.08838834764831843,
        "starter": 0.08838834764831843,
        "repo": 0.08838834764831843,
        "layout": 0.08838834764831843,
        "analyzers": 0.08838834764831843,
        "templates": 0.08838834764831843,
        "simple": 0.08838834764831843,
        "ollama": 0.08838834764831843,
        "adapter": 0.08838834764831843,
        "so": 0.08838834764831843,
        "drop": 0.08838834764831843,
        "it": 0.08838834764831843,
        "into": 0.08838834764831843,
        "your": 0.08838834764831843,
        "environment": 0.08838834764831843,
        "run": 0.08838834764831843,
        "right": 0.08838834764831843,
        "away": 0.08838834764831843
      },
      "text": "[\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR updates only relevant sections. * No hallucinated commands; links and badges validate; style consistent. --- If you want, I can spin up a **starter repo layout** (CLI, analyzers, templates, and a simple Ollama adapter) so you can drop it into your environment and run `docgen init` right away.",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    }
  ],
  "troubleshooting": [
    {
      "id": "AGENTS.md#0",
      "vector": {
        "repository": 0.06757373783994859,
        "guidelines": 0.1013606067599229,
        "project": 0.033786868919974296,
        "structure": 0.033786868919974296,
        "module": 0.06757373783994859,
        "organization": 0.033786868919974296,
        "spec": 0.06757373783994859,
        "md": 0.033786868919974296,
        "captures": 0.033786868919974296,
        "the": 0.27029495135979437,
        "end": 0.06757373783994859,
        "to": 0.1013606067599229,
        "architecture": 0.033786868919974296,
        "component": 0.06757373783994859,
        "contracts": 0.033786868919974296,
        "and": 0.43922929595966587,
        "must": 0.033786868919974296,
        "be": 0.033786868919974296,
        "updated": 0.033786868919974296,
        "whenever": 0.033786868919974296,
        "responsibilities": 0.033786868919974296,
        "shift": 0.033786868919974296,
        "place": 0.033786868919974296,
        "python": 0.2027212135198458,
        "source": 0.033786868919974296,
        "in": 0.16893434459987147,
        "a": 0.23650808243982008,
        "docgen": 0.16893434459987147,
        "package": 0.033786868919974296,
        "create": 0.033786868919974296,
        "it": 0.033786868919974296,
        "when": 0.06757373783994859,
        "implementation": 0.033786868919974296,
        "starts": 0.033786868919974296,
        "with": 0.16893434459987147,
        "clear": 0.033786868919974296,
        "submodules": 0.033786868919974296,
        "for": 0.1013606067599229,
        "orchestrator": 0.1013606067599229,
        "analyzers": 0.033786868919974296,
        "runners": 0.033786868919974296,
        "stores": 0.033786868919974296,
        "avoid": 0.06757373783994859,
        "leaving": 0.033786868919974296,
        "logic": 0.033786868919974296,
        "repo": 0.06757373783994859,
        "root": 0.033786868919974296,
        "mirror": 0.033786868919974296,
        "runtime": 0.033786868919974296,
        "modules": 0.06757373783994859,
        "under": 0.1013606067599229,
        "tests": 0.2027212135198458,
        "using": 0.033786868919974296,
        "test_": 0.033786868919974296,
        "py": 0.1013606067599229,
        "co": 0.033786868919974296,
        "locate": 0.033786868919974296,
        "fixtures": 0.06757373783994859,
        "_fixtures": 0.033786868919974296,
        "so": 0.13514747567989718,
        "imports": 0.06757373783994859,
        "stay": 0.06757373783994859,
        "clean": 0.033786868919974296,
        "reusable": 0.033786868919974296,
        "keep": 0.13514747567989718,
        "throwaway": 0.033786868919974296,
        "experiments": 0.033786868919974296,
        "inside": 0.033786868919974296,
        "an": 0.06757373783994859,
        "ignored": 0.033786868919974296,
        "sandbox": 0.033786868919974296,
        "directory": 0.033786868919974296,
        "scans": 0.033786868919974296,
        "remain": 0.033786868919974296,
        "focused": 0.033786868919974296,
        "on": 0.06757373783994859,
        "production": 0.033786868919974296,
        "code": 0.033786868919974296,
        "paths": 0.033786868919974296,
        "build": 0.033786868919974296,
        "test": 0.06757373783994859,
        "development": 0.033786868919974296,
        "commands": 0.033786868919974296,
        "m": 0.16893434459987147,
        "venv": 0.1013606067599229,
        "followed": 0.033786868919974296,
        "by": 0.033786868919974296,
        "scripts": 0.06757373783994859,
        "activate": 0.033786868919974296,
        "aligns": 0.033786868919974296,
        "local": 0.033786868919974296,
        "shells": 0.033786868919974296,
        "pycharm": 0.033786868919974296,
        "interpreter": 0.033786868919974296,
        "settings": 0.033786868919974296,
        "pip": 0.033786868919974296,
        "install": 0.033786868919974296,
        "e": 0.033786868919974296,
        "dev": 0.033786868919974296,
        "after": 0.06757373783994859,
        "pyproject": 0.033786868919974296,
        "toml": 0.033786868919974296,
        "is": 0.1013606067599229,
        "committed": 0.033786868919974296,
        "exposes": 0.033786868919974296,
        "cli": 0.033786868919974296,
        "plugins": 0.033786868919974296,
        "editable": 0.033786868919974296,
        "form": 0.033786868919974296,
        "without": 0.033786868919974296,
        "repeated": 0.033786868919974296,
        "reinstalls": 0.033786868919974296,
        "pytest": 0.06757373783994859,
        "runs": 0.033786868919974296,
        "full": 0.033786868919974296,
        "suite": 0.033786868919974296,
        "append": 0.033786868919974296,
        "k": 0.033786868919974296,
        "pattern": 0.033786868919974296,
        "iterate": 0.033786868919974296,
        "single": 0.06757373783994859,
        "analyzer": 0.06757373783994859,
        "or": 0.06757373783994859,
        "pipeline": 0.1013606067599229,
        "stage": 0.033786868919974296,
        "mypy": 0.033786868919974296,
        "ruff": 0.033786868919974296,
        "check": 0.033786868919974296,
        "catch": 0.033786868919974296,
        "type": 0.033786868919974296,
        "drift": 0.033786868919974296,
        "lint": 0.033786868919974296,
        "violations": 0.033786868919974296,
        "before": 0.06757373783994859,
        "readme": 0.06757373783994859,
        "generation": 0.06757373783994859,
        "attempted": 0.033786868919974296,
        "coding": 0.033786868919974296,
        "style": 0.033786868919974296,
        "naming": 0.033786868919974296,
        "conventions": 0.033786868919974296,
        "follow": 0.06757373783994859,
        "pep": 0.033786868919974296,
        "8": 0.033786868919974296,
        "4": 0.033786868919974296,
        "space": 0.033786868919974296,
        "indents": 0.033786868919974296,
        "explicit": 0.033786868919974296,
        "example": 0.033786868919974296,
        "from": 0.033786868919974296,
        "import": 0.033786868919974296,
        "static": 0.033786868919974296,
        "tooling": 0.033786868919974296,
        "can": 0.033786868919974296,
        "trace": 0.033786868919974296,
        "dependencies": 0.033786868919974296,
        "name": 0.033786868919974296,
        "their": 0.033786868919974296,
        "roles": 0.033786868919974296,
        "prompt_builder": 0.033786868919974296,
        "functions": 0.033786868919974296,
        "snake_case": 0.033786868919974296,
        "descriptive": 0.06757373783994859,
        "nouns": 0.033786868919974296,
        "first": 0.033786868919974296,
        "build_prompt_section": 0.033786868919974296,
        "run": 0.033786868919974296,
        "black": 0.033786868919974296,
        "commits": 0.06757373783994859,
        "manual": 0.033786868919974296,
        "reformatting": 0.033786868919974296,
        "unless": 0.033786868919974296,
        "formatter": 0.033786868919974296,
        "cannot": 0.033786868919974296,
        "resolve": 0.033786868919974296,
        "construct": 0.033786868919974296,
        "testing": 0.06757373783994859,
        "default": 0.033786868919974296,
        "harness": 0.033786868919974296,
        "every": 0.033786868919974296,
        "needs": 0.033786868919974296,
        "unit": 0.033786868919974296,
        "coverage": 0.033786868919974296,
        "plus": 0.033786868919974296,
        "integration": 0.06757373783994859,
        "case": 0.033786868919974296,
        "that": 0.06757373783994859,
        "walks": 0.033786868919974296,
        "snapshot": 0.033786868919974296,
        "through": 0.033786868919974296,
        "use": 0.033786868919974296,
        "names": 0.033786868919974296,
        "such": 0.033786868919974296,
        "as": 0.033786868919974296,
        "test_prompt_builder_handles_missing_signals": 0.033786868919974296,
        "arrange": 0.033786868919974296,
        "act": 0.033786868919974296,
        "assert": 0.033786868919974296,
        "comments": 0.033786868919974296,
        "minimal": 0.033786868919974296,
        "but": 0.033786868919974296,
        "intentional": 0.033786868919974296,
        "store": 0.033786868919974296,
        "regression": 0.033786868919974296,
        "generated": 0.033786868919974296,
        "slices": 0.033786868919974296,
        "data": 0.033786868919974296,
        "update": 0.033786868919974296,
        "them": 0.033786868919974296,
        "helper": 0.033786868919974296,
        "diffs": 0.033786868919974296,
        "reviewable": 0.033786868919974296,
        "commit": 0.033786868919974296,
        "pull": 0.033786868919974296,
        "request": 0.033786868919974296,
        "conventional": 0.033786868919974296,
        "feat": 0.033786868919974296,
        "fix": 0.033786868919974296,
        "docs": 0.033786868919974296,
        "subject": 0.033786868919974296,
        "lines": 0.033786868919974296,
        "72": 0.033786868919974296,
        "characters": 0.033786868919974296,
        "explain": 0.033786868919974296,
        "broader": 0.033786868919974296,
        "scope": 0.033786868919974296,
        "body": 0.033786868919974296,
        "multiple": 0.033786868919974296,
        "subsystems": 0.033786868919974296,
        "change": 0.033786868919974296,
        "bundle": 0.033786868919974296,
        "related": 0.033786868919974296,
        "work": 0.033786868919974296,
        "into": 0.033786868919974296,
        "pr": 0.033786868919974296,
        "includes": 0.033786868919974296,
        "summary": 0.033786868919974296,
        "notes": 0.033786868919974296,
        "links": 0.033786868919974296
      },
      "text": "# Repository Guidelines ## Project Structure & Module Organization - `spec/spec.md` captures the end-to-end architecture, component contracts, and must be updated whenever responsibilities shift. - Place Python source in a `docgen/` package (create it when implementation starts) with clear submodules for orchestrator, analyzers, runners, and stores; avoid leaving logic in the repo root. - Mirror runtime modules under `tests/` using `test_<module>.py`; co-locate fixtures in `tests/_fixtures/` so imports stay clean and reusable. - Keep throwaway experiments inside an ignored `sandbox/` directory so repository scans remain focused on production code paths. ## Build, Test, and Development Commands - `python -m venv .venv` followed by `.\\\\.venv\\\\Scripts\\\\activate` aligns local shells with the PyCharm interpreter settings. - `python -m pip install -e .[dev]` (after a `pyproject.toml` is committed) exposes the CLI and plugins in editable form without repeated reinstalls. - `python -m pytest` runs the full suite; append `-k <pattern>` to iterate on a single analyzer or pipeline stage. - `python -m mypy docgen` and `python -m ruff check docgen tests` catch type drift and lint violations before README generation is attempted. ## Coding Style & Naming Conventions - Follow PEP 8 with 4-space indents and explicit imports (for example, `from docgen.orchestrator import Pipeline`) so static tooling can trace dependencies. - Name modules after their roles (`orchestrator.py`, `prompt_builder.py`) and keep functions snake_case with descriptive nouns first (`build_prompt_section`). - Run `black docgen tests` before commits; avoid manual reformatting unless the formatter cannot resolve a construct. ## Testing Guidelines - Pytest is the default harness; every analyzer or pipeline component needs unit coverage plus an integration case under `tests/integration/` that walks a repo snapshot through generation. - Use descriptive test names such as `test_prompt_builder_handles_missing_signals` and keep Arrange-Act-Assert comments minimal but intentional. - Store regression fixtures for generated README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "AGENTS.md#1",
      "vector": {
        "readme": 0.1270001270001905,
        "slices": 0.06350006350009525,
        "under": 0.06350006350009525,
        "tests": 0.06350006350009525,
        "data": 0.06350006350009525,
        "and": 0.4445004445006667,
        "update": 0.06350006350009525,
        "them": 0.06350006350009525,
        "with": 0.06350006350009525,
        "helper": 0.06350006350009525,
        "scripts": 0.06350006350009525,
        "so": 0.06350006350009525,
        "diffs": 0.06350006350009525,
        "stay": 0.06350006350009525,
        "reviewable": 0.06350006350009525,
        "commit": 0.1270001270001905,
        "pull": 0.06350006350009525,
        "request": 0.06350006350009525,
        "guidelines": 0.06350006350009525,
        "follow": 0.06350006350009525,
        "conventional": 0.06350006350009525,
        "commits": 0.06350006350009525,
        "feat": 0.06350006350009525,
        "fix": 0.06350006350009525,
        "docs": 0.1270001270001905,
        "keep": 0.1270001270001905,
        "subject": 0.06350006350009525,
        "lines": 0.06350006350009525,
        "72": 0.06350006350009525,
        "characters": 0.06350006350009525,
        "explain": 0.06350006350009525,
        "broader": 0.06350006350009525,
        "scope": 0.06350006350009525,
        "in": 0.254000254000381,
        "the": 0.31750031750047625,
        "body": 0.06350006350009525,
        "when": 0.1270001270001905,
        "multiple": 0.06350006350009525,
        "subsystems": 0.06350006350009525,
        "change": 0.06350006350009525,
        "bundle": 0.06350006350009525,
        "related": 0.06350006350009525,
        "work": 0.1270001270001905,
        "into": 0.06350006350009525,
        "a": 0.254000254000381,
        "single": 0.06350006350009525,
        "pr": 0.1270001270001905,
        "that": 0.06350006350009525,
        "includes": 0.06350006350009525,
        "summary": 0.06350006350009525,
        "testing": 0.06350006350009525,
        "notes": 0.1270001270001905,
        "links": 0.06350006350009525,
        "to": 0.06350006350009525,
        "relevant": 0.06350006350009525,
        "issues": 0.06350006350009525,
        "or": 0.06350006350009525,
        "spec": 0.06350006350009525,
        "sections": 0.06350006350009525,
        "attach": 0.06350006350009525,
        "before": 0.1270001270001905,
        "after": 0.06350006350009525,
        "excerpts": 0.06350006350009525,
        "altering": 0.06350006350009525,
        "generation": 0.06350006350009525,
        "output": 0.06350006350009525,
        "run": 0.06350006350009525,
        "lint": 0.06350006350009525,
        "type": 0.06350006350009525,
        "check": 0.06350006350009525,
        "test": 0.06350006350009525,
        "commands": 0.06350006350009525,
        "opening": 0.06350006350009525,
        "paste": 0.06350006350009525,
        "condensed": 0.06350006350009525,
        "results": 0.06350006350009525,
        "description": 0.06350006350009525,
        "for": 0.06350006350009525,
        "quick": 0.06350006350009525,
        "verification": 0.06350006350009525,
        "environment": 0.1270001270001905,
        "tooling": 0.06350006350009525,
        "reuse": 0.06350006350009525,
        "local": 0.1270001270001905,
        "venv": 0.06350006350009525,
        "seeded": 0.06350006350009525,
        "by": 0.1270001270001905,
        "pycharm": 0.06350006350009525,
        "do": 0.06350006350009525,
        "not": 0.06350006350009525,
        "artifacts": 0.06350006350009525,
        "store": 0.06350006350009525,
        "secrets": 0.06350006350009525,
        "env": 0.06350006350009525,
        "consumed": 0.06350006350009525,
        "llm": 0.06350006350009525,
        "runner": 0.06350006350009525,
        "large": 0.06350006350009525,
        "model": 0.06350006350009525,
        "weights": 0.06350006350009525,
        "outside": 0.06350006350009525,
        "repository": 0.06350006350009525,
        "document": 0.06350006350009525,
        "their": 0.06350006350009525,
        "locations": 0.06350006350009525,
        "models": 0.06350006350009525,
        "md": 0.06350006350009525,
        "once": 0.06350006350009525,
        "integration": 0.06350006350009525,
        "begins": 0.06350006350009525
      },
      "text": "README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to relevant issues or spec sections; attach before/after README excerpts when altering generation output. - Run lint, type-check, and test commands before opening a PR and paste condensed results in the description for quick verification. ## Environment & Tooling Notes - Reuse the local `.venv` seeded by PyCharm; do not commit environment artifacts and store secrets in a `.env` consumed by the local LLM runner. - Keep large model weights outside the repository and document their locations in `docs/models.md` once integration work begins.",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "docs/ci/docgen-update.yml#0",
      "vector": {
        "name": 0.2773500981126145,
        "docgen": 0.1849000654084097,
        "update": 0.2311250817605121,
        "on": 0.09245003270420485,
        "push": 0.046225016352102424,
        "branches": 0.09245003270420485,
        "main": 0.13867504905630726,
        "pull_request": 0.13867504905630726,
        "jobs": 0.046225016352102424,
        "readme": 0.1849000654084097,
        "runs": 0.046225016352102424,
        "self": 0.046225016352102424,
        "hosted": 0.046225016352102424,
        "steps": 0.09245003270420485,
        "uses": 0.13867504905630726,
        "actions": 0.2311250817605121,
        "checkout": 0.046225016352102424,
        "v4": 0.09245003270420485,
        "with": 0.13867504905630726,
        "fetch": 0.046225016352102424,
        "depth": 0.046225016352102424,
        "0": 0.046225016352102424,
        "setup": 0.046225016352102424,
        "python": 0.2311250817605121,
        "v5": 0.046225016352102424,
        "version": 0.046225016352102424,
        "3": 0.046225016352102424,
        "11": 0.046225016352102424,
        "cache": 0.09245003270420485,
        "path": 0.046225016352102424,
        "pip": 0.2773500981126145,
        "key": 0.046225016352102424,
        "runner": 0.09245003270420485,
        "os": 0.09245003270420485,
        "hashfiles": 0.046225016352102424,
        "pyproject": 0.046225016352102424,
        "toml": 0.046225016352102424,
        "restore": 0.046225016352102424,
        "keys": 0.046225016352102424,
        "install": 0.13867504905630726,
        "dependencies": 0.046225016352102424,
        "run": 0.2311250817605121,
        "m": 0.13867504905630726,
        "upgrade": 0.046225016352102424,
        "e": 0.046225016352102424,
        "dev": 0.046225016352102424,
        "determine": 0.046225016352102424,
        "diff": 0.1849000654084097,
        "base": 0.2773500981126145,
        "id": 0.046225016352102424,
        "if": 0.09245003270420485,
        "github": 0.2311250817605121,
        "event_name": 0.046225016352102424,
        "then": 0.09245003270420485,
        "echo": 0.09245003270420485,
        "event": 0.046225016352102424,
        "sha": 0.046225016352102424,
        "github_output": 0.09245003270420485,
        "else": 0.046225016352102424,
        "origin": 0.046225016352102424,
        "fi": 0.09245003270420485,
        "env": 0.046225016352102424,
        "docgen_llm_base_url": 0.046225016352102424,
        "http": 0.046225016352102424,
        "localhost": 0.046225016352102424,
        "12434": 0.046225016352102424,
        "engines": 0.046225016352102424,
        "v1": 0.046225016352102424,
        "cli": 0.046225016352102424,
        "outputs": 0.046225016352102424,
        "commit": 0.09245003270420485,
        "md": 0.09245003270420485,
        "optional": 0.046225016352102424,
        "git": 0.1849000654084097,
        "status": 0.046225016352102424,
        "short": 0.046225016352102424,
        "grep": 0.046225016352102424,
        "q": 0.046225016352102424,
        "config": 0.09245003270420485,
        "user": 0.09245003270420485,
        "email": 0.046225016352102424,
        "users": 0.046225016352102424,
        "noreply": 0.046225016352102424,
        "com": 0.046225016352102424,
        "am": 0.046225016352102424,
        "docs": 0.046225016352102424,
        "via": 0.046225016352102424
      },
      "text": "name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted steps: - uses: actions/checkout@v4 with: fetch-depth: 0 - uses: actions/setup-python@v5 with: python-version: '3.11' - uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install dependencies run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README.md (optional) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi",
      "metadata": {
        "path": "docs/ci/docgen-update.yml",
        "tags": [
          "docs"
        ],
        "hash": "48bec2bc404707486fcb1661def194395cc581bf55cb2f610704d495663e6a14"
      }
    },
    {
      "id": "docs/ci/github-actions.md#0",
      "vector": {
        "github": 0.2528558164964056,
        "actions": 0.2212488394343549,
        "integration": 0.0316069770620507,
        "the": 0.18964186237230418,
        "workflow": 0.0632139541241014,
        "below": 0.0316069770620507,
        "runs": 0.0632139541241014,
        "docgen": 0.2212488394343549,
        "update": 0.18964186237230418,
        "on": 0.1264279082482028,
        "pushes": 0.0316069770620507,
        "and": 0.0316069770620507,
        "pull": 0.0316069770620507,
        "requests": 0.0316069770620507,
        "it": 0.0316069770620507,
        "assumes": 0.0316069770620507,
        "a": 0.0632139541241014,
        "self": 0.0632139541241014,
        "hosted": 0.1264279082482028,
        "runner": 0.15803488531025348,
        "or": 0.09482093118615209,
        "with": 0.18964186237230418,
        "network": 0.0632139541241014,
        "access": 0.0632139541241014,
        "to": 0.1264279082482028,
        "your": 0.0632139541241014,
        "local": 0.09482093118615209,
        "model": 0.0316069770620507,
        "runtime": 0.0316069770620507,
        "job": 0.0316069770620507,
        "skips": 0.0316069770620507,
        "early": 0.0316069770620507,
        "when": 0.0316069770620507,
        "no": 0.0316069770620507,
        "files": 0.0316069770620507,
        "match": 0.0316069770620507,
        "yml": 0.0316069770620507,
        "s": 0.0316069770620507,
        "ci": 0.0316069770620507,
        "watched_globs": 0.0316069770620507,
        "entries": 0.0316069770620507,
        "so": 0.0316069770620507,
        "that": 0.0316069770620507,
        "purely": 0.0316069770620507,
        "documentation": 0.0316069770620507,
        "only": 0.0316069770620507,
        "changes": 0.0316069770620507,
        "do": 0.0316069770620507,
        "not": 0.0316069770620507,
        "trigger": 0.0316069770620507,
        "generator": 0.0316069770620507,
        "yaml": 0.0316069770620507,
        "name": 0.3476767476825577,
        "push": 0.0316069770620507,
        "branches": 0.0632139541241014,
        "main": 0.09482093118615209,
        "pull_request": 0.09482093118615209,
        "jobs": 0.0316069770620507,
        "readme": 0.2212488394343549,
        "requires": 0.0316069770620507,
        "llm": 0.0316069770620507,
        "steps": 0.0632139541241014,
        "checkout": 0.0632139541241014,
        "repository": 0.0316069770620507,
        "uses": 0.1264279082482028,
        "v4": 0.09482093118615209,
        "fetch": 0.0316069770620507,
        "depth": 0.0316069770620507,
        "0": 0.0316069770620507,
        "set": 0.0316069770620507,
        "up": 0.0316069770620507,
        "python": 0.18964186237230418,
        "setup": 0.0316069770620507,
        "v5": 0.0316069770620507,
        "version": 0.0316069770620507,
        "3": 0.0316069770620507,
        "11": 0.0316069770620507,
        "cache": 0.09482093118615209,
        "pip": 0.2212488394343549,
        "dependencies": 0.0316069770620507,
        "path": 0.0632139541241014,
        "key": 0.0316069770620507,
        "os": 0.0632139541241014,
        "hashfiles": 0.0316069770620507,
        "pyproject": 0.0316069770620507,
        "toml": 0.0316069770620507,
        "restore": 0.0316069770620507,
        "keys": 0.0316069770620507,
        "install": 0.09482093118615209,
        "in": 0.0316069770620507,
        "editable": 0.0316069770620507,
        "mode": 0.0316069770620507,
        "run": 0.15803488531025348,
        "m": 0.09482093118615209,
        "upgrade": 0.0316069770620507,
        "e": 0.0316069770620507,
        "dev": 0.0316069770620507,
        "determine": 0.0316069770620507,
        "diff": 0.1264279082482028,
        "base": 0.18964186237230418,
        "id": 0.0316069770620507,
        "if": 0.1264279082482028,
        "event_name": 0.0316069770620507,
        "then": 0.0632139541241014,
        "echo": 0.0632139541241014,
        "event": 0.0316069770620507,
        "sha": 0.0316069770620507,
        "github_output": 0.0632139541241014,
        "else": 0.0316069770620507,
        "origin": 0.0316069770620507,
        "fi": 0.0632139541241014,
        "env": 0.0316069770620507,
        "docgen_llm_base_url": 0.0632139541241014,
        "http": 0.0316069770620507,
        "localhost": 0.0316069770620507,
        "12434": 0.0316069770620507,
        "engines": 0.0316069770620507,
        "v1": 0.0316069770620507,
        "cli": 0.0632139541241014,
        "outputs": 0.0316069770620507,
        "commit": 0.0632139541241014,
        "updates": 0.0316069770620507,
        "any": 0.0316069770620507,
        "git": 0.1264279082482028,
        "status": 0.0316069770620507,
        "short": 0.0316069770620507,
        "grep": 0.0316069770620507,
        "q": 0.0316069770620507,
        "md": 0.0632139541241014,
        "config": 0.0632139541241014,
        "user": 0.0632139541241014,
        "email": 0.0316069770620507,
        "users": 0.0316069770620507,
        "noreply": 0.0316069770620507,
        "com": 0.0316069770620507,
        "am": 0.0316069770620507,
        "docs": 0.0316069770620507,
        "via": 0.0316069770620507,
        "upload": 0.0632139541241014,
        "artifact": 0.0632139541241014,
        "success": 0.0316069770620507,
        "generated": 0.0316069770620507,
        "note": 0.0316069770620507,
        "relies": 0.0316069770620507,
        "pointing": 0.0316069770620507,
        "private": 0.0632139541241014,
        "inference": 0.0316069770620507,
        "endpoint": 0.0316069770620507,
        "for": 0.0316069770620507,
        "runners": 0.0316069770620507,
        "you": 0.0316069770620507,
        "will": 0.0316069770620507,
        "need": 0.0316069770620507,
        "expose": 0.0316069770620507,
        "within": 0.0316069770620507,
        "switch": 0.0316069770620507,
        "ollama": 0.0316069770620507,
        "appropriate": 0.0316069770620507,
        "caching": 0.0316069770620507
      },
      "text": "# GitHub Actions Integration The workflow below runs `docgen update` on pushes and pull requests. It assumes a self-hosted runner (or GitHub-hosted runner with network access to your local model runtime). The job skips early when no files match `.docgen.yml`'s `ci.watched_globs` entries so that purely documentation-only changes do not trigger the generator. ```yaml name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted # requires local LLM access steps: - name: Checkout repository uses: actions/checkout@v4 with: fetch-depth: 0 - name: Set up Python uses: actions/setup-python@v5 with: python-version: '3.11' - name: Cache pip dependencies uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install docgen in editable mode run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: | python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README updates (if any) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi - name: Upload README artifact if: success() uses: actions/upload-artifact@v4 with: name: generated-readme path: README.md ``` > **Note:** the workflow relies on `DOCGEN_LLM_BASE_URL` pointing to a local or > private inference endpoint. For GitHub-hosted runners you will need to expose > the runner within your private network or switch to the `ollama` CLI with > appropriate caching. ```",
      "metadata": {
        "path": "docs/ci/github-actions.md",
        "tags": [
          "docs"
        ],
        "hash": "178c6f25ecf7325348a9158158c6e6f36c29d520a922a6f0c2c739f4efe1b0d8"
      }
    },
    {
      "id": "spec/feature_checklist.md#0",
      "vector": {
        "intelligent": 0.028513297425610054,
        "readme": 0.08553989227683016,
        "generator": 0.028513297425610054,
        "feature": 0.028513297425610054,
        "checklist": 0.028513297425610054,
        "status": 0.028513297425610054,
        "legend": 0.028513297425610054,
        "not": 0.028513297425610054,
        "started": 0.028513297425610054,
        "in": 0.028513297425610054,
        "progress": 0.028513297425610054,
        "done": 0.028513297425610054,
        "scope": 0.028513297425610054,
        "tags": 0.028513297425610054,
        "mvp": 0.4847260562353709,
        "required": 0.028513297425610054,
        "for": 0.11405318970244022,
        "proof": 0.028513297425610054,
        "of": 0.08553989227683016,
        "concept": 0.028513297425610054,
        "next": 0.2851329742561005,
        "nice": 0.028513297425610054,
        "to": 0.08553989227683016,
        "have": 0.028513297425610054,
        "soon": 0.028513297425610054,
        "stretch": 0.11405318970244022,
        "later": 0.028513297425610054,
        "1": 0.05702659485122011,
        "core": 0.028513297425610054,
        "workflows": 0.028513297425610054,
        "x": 0.570265948512201,
        "docgen": 0.11405318970244022,
        "init": 0.028513297425610054,
        "initialize": 0.028513297425610054,
        "repos": 0.028513297425610054,
        "without": 0.05702659485122011,
        "docs": 0.11405318970244022,
        "update": 0.028513297425610054,
        "detect": 0.028513297425610054,
        "changes": 0.028513297425610054,
        "on": 0.028513297425610054,
        "commit": 0.028513297425610054,
        "pr": 0.028513297425610054,
        "and": 0.028513297425610054,
        "patch": 0.028513297425610054,
        "affected": 0.028513297425610054,
        "sections": 0.05702659485122011,
        "regenerate": 0.028513297425610054,
        "manual": 0.028513297425610054,
        "full": 0.028513297425610054,
        "partial": 0.028513297425610054,
        "regeneration": 0.028513297425610054,
        "dry": 0.05702659485122011,
        "run": 0.05702659485122011,
        "mode": 0.05702659485122011,
        "preview": 0.028513297425610054,
        "diffs": 0.028513297425610054,
        "writing": 0.028513297425610054,
        "service": 0.028513297425610054,
        "fastapi": 0.05702659485122011,
        "endpoints": 0.028513297425610054,
        "ci": 0.05702659485122011,
        "bots": 0.028513297425610054,
        "2": 0.028513297425610054,
        "repository": 0.028513297425610054,
        "scanning": 0.028513297425610054,
        "indexing": 0.028513297425610054,
        "walk": 0.028513297425610054,
        "filesystem": 0.028513297425610054,
        "with": 0.028513297425610054,
        "ignore": 0.028513297425610054,
        "rules": 0.028513297425610054,
        "gitignore": 0.028513297425610054,
        "yml": 0.028513297425610054,
        "build": 0.08553989227683016,
        "normalized": 0.028513297425610054,
        "manifest": 0.05702659485122011,
        "files": 0.05702659485122011,
        "roles": 0.028513297425610054,
        "src": 0.028513297425610054,
        "test": 0.05702659485122011,
        "config": 0.08553989227683016,
        "infra": 0.028513297425610054,
        "hash": 0.028513297425610054,
        "cache": 0.028513297425610054,
        "file": 0.028513297425610054,
        "metadata": 0.028513297425610054,
        "speed": 0.028513297425610054,
        "subsequent": 0.028513297425610054,
        "runs": 0.028513297425610054,
        "entrypoint": 0.05702659485122011,
        "detection": 0.05702659485122011,
        "e": 0.028513297425610054,
        "g": 0.028513297425610054,
        "main": 0.028513297425610054,
        "springbootapplication": 0.028513297425610054,
        "app": 0.028513297425610054,
        "monorepo": 0.05702659485122011,
        "module": 0.028513297425610054,
        "3": 0.028513297425610054,
        "analyzers": 0.14256648712805026,
        "plugin": 0.028513297425610054,
        "based": 0.028513297425610054,
        "language": 0.028513297425610054,
        "python": 0.028513297425610054,
        "java": 0.028513297425610054,
        "node": 0.028513297425610054,
        "js": 0.05702659485122011,
        "tier": 0.028513297425610054,
        "poetry": 0.028513297425610054,
        "setuptools": 0.028513297425610054,
        "maven": 0.028513297425610054,
        "gradle": 0.028513297425610054,
        "npm": 0.028513297425610054,
        "pnpm": 0.028513297425610054,
        "yarn": 0.028513297425610054,
        "dependency": 0.028513297425610054,
        "from": 0.028513297425610054,
        "pattern": 0.028513297425610054,
        "docker": 0.028513297425610054,
        "k8s": 0.028513297425610054,
        "layout": 0.028513297425610054,
        "tree": 0.028513297425610054,
        "sitter": 0.028513297425610054,
        "powered": 0.028513297425610054,
        "symbol": 0.028513297425610054,
        "extraction": 0.028513297425610054,
        "flagged": 0.028513297425610054,
        "4": 0.028513297425610054,
        "knowledge": 0.05702659485122011,
        "store": 0.028513297425610054,
        "rag": 0.028513297425610054,
        "local": 0.05702659485122011,
        "embedding": 0.028513297425610054,
        "model": 0.05702659485122011,
        "chunking": 0.028513297425610054,
        "strategy": 0.028513297425610054,
        "index": 0.028513297425610054,
        "top": 0.05702659485122011,
        "n": 0.028513297425610054,
        "source": 0.028513297425610054,
        "headers": 0.028513297425610054,
        "comments": 0.028513297425610054,
        "section": 0.14256648712805026,
        "scoped": 0.028513297425610054,
        "retrieval": 0.028513297425610054,
        "k": 0.028513297425610054,
        "per": 0.05702659485122011,
        "lightweight": 0.028513297425610054,
        "graph": 0.028513297425610054,
        "modules": 0.028513297425610054,
        "services": 0.028513297425610054,
        "signals": 0.028513297425610054,
        "5": 0.028513297425610054,
        "prompting": 0.028513297425610054,
        "templates": 0.08553989227683016,
        "jinja2": 0.028513297425610054,
        "intro": 0.028513297425610054,
        "features": 0.028513297425610054,
        "architecture": 0.05702659485122011,
        "quickstart": 0.028513297425610054,
        "deployment": 0.028513297425610054,
        "troubleshooting": 0.028513297425610054,
        "faq": 0.028513297425610054,
        "license": 0.028513297425610054,
        "guardrailed": 0.028513297425610054,
        "system": 0.028513297425610054,
        "prompt": 0.028513297425610054,
        "no": 0.028513297425610054,
        "speculation": 0.028513297425610054,
        "cite": 0.028513297425610054,
        "repo": 0.028513297425610054,
        "facts": 0.028513297425610054,
        "only": 0.028513297425610054,
        "token": 0.028513297425610054,
        "budgeting": 0.028513297425610054,
        "streaming": 0.028513297425610054,
        "by": 0.028513297425610054,
        "generation": 0.028513297425610054,
        "template": 0.028513297425610054,
        "override": 0.028513297425610054,
        "mechanism": 0.028513297425610054,
        "j2": 0.028513297425610054,
        "style": 0.028513297425610054,
        "presets": 0.028513297425610054,
        "concise": 0.028513297425610054,
        "vs": 0.028513297425610054,
        "comprehensive": 0.028513297425610054,
        "mermaid": 0.028513297425610054,
        "diagrams": 0.028513297425610054,
        "flow": 0.028513297425610054,
        "where": 0.028513297425610054,
        "appropriate": 0.028513297425610054,
        "6": 0.028513297425610054,
        "llm": 0.028513297425610054,
        "runner": 0.05702659485122011,
        "http": 0.028513297425610054,
        "adapter": 0.05702659485122011,
        "host": 0.028513297425610054,
        "container": 0.028513297425610054,
        "defaults": 0.028513297425610054,
        "env": 0.028513297425610054,
        "api": 0.028513297425610054,
        "key": 0.028513297425610054,
        "overrides": 0.028513297425610054,
        "llama": 0.028513297425610054,
        "cpp": 0.028513297425610054,
        "structured": 0.028513297425610054,
        "outputs": 0.028513297425610054,
        "tool": 0.028513297425610054,
        "use": 0.028513297425610054,
        "compatibility": 0.028513297425610054,
        "7": 0.028513297425610054,
        "post": 0.028513297425610054,
        "processing": 0.028513297425610054,
        "markdown": 0.028513297425610054,
        "lint": 0.028513297425610054,
        "heading": 0.028513297425610054,
        "hierarchy": 0.028513297425610054
      },
      "text": "# Intelligent README Generator \u2014 Feature Checklist > Status legend: \u2610 Not started \u00b7 \u25d0 In progress \u00b7 \u2714 Done > Scope tags: **[MVP]** required for proof\u2011of\u2011concept, **[NEXT]** nice\u2011to\u2011have soon, **[STRETCH]** later ## 1) Core Workflows - [x] **docgen init** \u2014 Initialize README for repos without docs **[MVP]** - [x] **docgen update** \u2014 Detect changes on commit/PR and patch affected sections **[MVP]** - [ ] **docgen regenerate** \u2014 Manual full/partial regeneration **[MVP]** - [x] Dry\u2011run mode (`--dry-run`) to preview diffs without writing **[NEXT]** - [ ] Service mode (FastAPI) endpoints for CI/bots **[STRETCH]** ## 2) Repository Scanning & Indexing - [x] Walk filesystem with ignore rules (`.gitignore`, `.docgen.yml`) **[MVP]** - [x] Build normalized manifest of files, roles (src/test/docs/config/infra) **[MVP]** - [x] Hash & cache file metadata to speed subsequent runs **[MVP]** - [x] Entrypoint detection (e.g., `main()`, `@SpringBootApplication`, FastAPI app) **[NEXT]** - [x] Monorepo module detection **[NEXT]** ## 3) Analyzers (Plugin\u2011based) - [x] Language analyzers: Python, Java, Node.js (Tier\u20111) **[MVP]** - [x] Build analyzers: Poetry/Setuptools, Maven/Gradle, npm/pnpm/yarn **[MVP]** - [x] Dependency analyzers from manifest files **[MVP]** - [x] Pattern analyzers: Docker/K8s, CI config, monorepo layout **[NEXT]** - [ ] Tree\u2011sitter powered symbol/entrypoint extraction (flagged) **[STRETCH]** ## 4) Knowledge Store (RAG) - [ ] Local embedding model + chunking strategy **[MVP]** - [ ] Index `README`, `/docs`, top N source headers & comments **[MVP]** - [ ] Section\u2011scoped retrieval (top\u2011k per section) **[MVP]** - [ ] Lightweight knowledge graph of modules/services/signals **[NEXT]** ## 5) Prompting & Templates - [x] Jinja2 templates per section (intro, features, architecture, quickstart, config, build/test, deployment, troubleshooting, FAQ, license) **[MVP]** - [x] Guardrailed system prompt (\u201cno speculation; cite repo facts only\u201d) **[MVP]** - [x] Token budgeting & streaming section-by-section generation **[MVP]** - [x] Template override mechanism (`docs/templates/*.j2`) **[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy,",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#1",
      "vector": {
        "next": 0.3907019005301633,
        "x": 0.5860528507952449,
        "style": 0.05581455721859476,
        "presets": 0.02790727860929738,
        "concise": 0.02790727860929738,
        "vs": 0.02790727860929738,
        "comprehensive": 0.02790727860929738,
        "mermaid": 0.02790727860929738,
        "js": 0.05581455721859476,
        "diagrams": 0.02790727860929738,
        "for": 0.11162911443718952,
        "architecture": 0.02790727860929738,
        "flow": 0.02790727860929738,
        "sections": 0.05581455721859476,
        "where": 0.02790727860929738,
        "appropriate": 0.02790727860929738,
        "6": 0.02790727860929738,
        "local": 0.05581455721859476,
        "llm": 0.05581455721859476,
        "runner": 0.05581455721859476,
        "model": 0.02790727860929738,
        "http": 0.02790727860929738,
        "adapter": 0.05581455721859476,
        "host": 0.02790727860929738,
        "container": 0.02790727860929738,
        "defaults": 0.05581455721859476,
        "env": 0.02790727860929738,
        "api": 0.02790727860929738,
        "key": 0.02790727860929738,
        "overrides": 0.02790727860929738,
        "mvp": 0.47442373635805546,
        "llama": 0.02790727860929738,
        "cpp": 0.02790727860929738,
        "structured": 0.02790727860929738,
        "outputs": 0.05581455721859476,
        "tool": 0.02790727860929738,
        "use": 0.02790727860929738,
        "compatibility": 0.02790727860929738,
        "stretch": 0.05581455721859476,
        "7": 0.02790727860929738,
        "post": 0.02790727860929738,
        "processing": 0.02790727860929738,
        "markdown": 0.02790727860929738,
        "lint": 0.05581455721859476,
        "heading": 0.02790727860929738,
        "hierarchy": 0.02790727860929738,
        "code": 0.05581455721859476,
        "fences": 0.02790727860929738,
        "line": 0.02790727860929738,
        "length": 0.02790727860929738,
        "auto": 0.05581455721859476,
        "toc": 0.02790727860929738,
        "level": 0.02790727860929738,
        "3": 0.02790727860929738,
        "badges": 0.02790727860929738,
        "build": 0.05581455721859476,
        "coverage": 0.05581455721859476,
        "license": 0.02790727860929738,
        "with": 0.05581455721859476,
        "safe": 0.05581455721859476,
        "link": 0.05581455721859476,
        "validator": 0.02790727860929738,
        "relative": 0.02790727860929738,
        "absolute": 0.02790727860929738,
        "managed": 0.02790727860929738,
        "markers": 0.02790727860929738,
        "idempotent": 0.02790727860929738,
        "patching": 0.02790727860929738,
        "docgen": 0.08372183582789214,
        "begin": 0.02790727860929738,
        "end": 0.02790727860929738,
        "8": 0.02790727860929738,
        "git": 0.02790727860929738,
        "integration": 0.05581455721859476,
        "diff": 0.05581455721859476,
        "detection": 0.02790727860929738,
        "map": 0.02790727860929738,
        "changed": 0.05581455721859476,
        "files": 0.05581455721859476,
        "impacted": 0.02790727860929738,
        "branch": 0.02790727860929738,
        "pr": 0.05581455721859476,
        "creation": 0.02790727860929738,
        "summary": 0.02790727860929738,
        "of": 0.02790727860929738,
        "readme": 0.11162911443718952,
        "deltas": 0.02790727860929738,
        "commit": 0.02790727860929738,
        "mode": 0.02790727860929738,
        "init": 0.02790727860929738,
        "or": 0.02790727860929738,
        "small": 0.02790727860929738,
        "changes": 0.05581455721859476,
        "configurable": 0.02790727860929738,
        "prevent": 0.02790727860929738,
        "loops": 0.02790727860929738,
        "on": 0.05581455721859476,
        "only": 0.08372183582789214,
        "9": 0.02790727860929738,
        "configuration": 0.02790727860929738,
        "parse": 0.02790727860929738,
        "yml": 0.02790727860929738,
        "analyzers": 0.02790727860929738,
        "publish": 0.02790727860929738,
        "path": 0.02790727860929738,
        "exclusions": 0.02790727860929738,
        "watched_globs": 0.02790727860929738,
        "ci": 0.08372183582789214,
        "triggers": 0.02790727860929738,
        "per": 0.05581455721859476,
        "section": 0.02790727860929738,
        "off": 0.02790727860929738,
        "toggles": 0.02790727860929738,
        "and": 0.08372183582789214,
        "titles": 0.02790727860929738,
        "10": 0.02790727860929738,
        "github": 0.02790727860929738,
        "actions": 0.02790727860929738,
        "example": 0.02790727860929738,
        "workflow": 0.02790727860929738,
        "gitlab": 0.02790727860929738,
        "bitbucket": 0.02790727860929738,
        "pipelines": 0.02790727860929738,
        "samples": 0.02790727860929738,
        "labeling": 0.02790727860929738,
        "docs": 0.02790727860929738,
        "update": 0.02790727860929738,
        "behavior": 0.02790727860929738,
        "11": 0.02790727860929738,
        "security": 0.02790727860929738,
        "privacy": 0.02790727860929738,
        "models": 0.02790727860929738,
        "never": 0.02790727860929738,
        "exfiltrate": 0.02790727860929738,
        "respect": 0.02790727860929738,
        "gitignore": 0.02790727860929738,
        "exclude": 0.02790727860929738,
        "large": 0.02790727860929738,
        "binaries": 0.02790727860929738,
        "secrets": 0.02790727860929738,
        "optional": 0.02790727860929738,
        "simple": 0.02790727860929738,
        "secret": 0.02790727860929738,
        "scanner": 0.02790727860929738,
        "gate": 0.02790727860929738,
        "12": 0.02790727860929738,
        "multi": 0.02790727860929738,
        "language": 0.02790727860929738,
        "project": 0.02790727860929738,
        "types": 0.02790727860929738,
        "tier": 0.05581455721859476,
        "1": 0.02790727860929738,
        "python": 0.02790727860929738,
        "poetry": 0.02790727860929738,
        "setuptools": 0.02790727860929738,
        "java": 0.02790727860929738,
        "maven": 0.02790727860929738,
        "gradle": 0.02790727860929738,
        "spring": 0.02790727860929738,
        "boot": 0.02790727860929738,
        "node": 0.02790727860929738,
        "npm": 0.02790727860929738,
        "pnpm": 0.02790727860929738,
        "express": 0.02790727860929738,
        "2": 0.02790727860929738,
        "go": 0.02790727860929738,
        "rust": 0.02790727860929738,
        "ruby": 0.02790727860929738,
        "php": 0.02790727860929738,
        "framework": 0.02790727860929738,
        "aware": 0.02790727860929738,
        "quickstart": 0.02790727860929738,
        "commands": 0.02790727860929738,
        "system": 0.02790727860929738,
        "13": 0.02790727860929738,
        "quality": 0.02790727860929738,
        "gates": 0.02790727860929738,
        "evaluation": 0.02790727860929738,
        "command": 0.02790727860929738,
        "validation": 0.02790727860929738,
        "existence": 0.02790727860929738,
        "checks": 0.05581455721859476,
        "no": 0.02790727860929738,
        "hallucination": 0.02790727860929738,
        "reject": 0.02790727860929738,
        "facts": 0.02790727860929738,
        "not": 0.02790727860929738,
        "in": 0.02790727860929738,
        "signals": 0.02790727860929738,
        "rag": 0.05581455721859476,
        "scorecard": 0.02790727860929738,
        "buildability": 0.02790727860929738,
        "validity": 0.02790727860929738,
        "alignment": 0.02790727860929738,
        "14": 0.02790727860929738,
        "performance": 0.02790727860929738,
        "caching": 0.02790727860929738,
        "persist": 0.02790727860929738,
        "analyzer": 0.02790727860929738,
        "embeddings": 0.02790727860929738,
        "under": 0.02790727860929738,
        "incremental": 0.02790727860929738,
        "refresh": 0.02790727860929738,
        "15": 0.02790727860929738,
        "error": 0.02790727860929738,
        "handling": 0.02790727860929738,
        "ux": 0.02790727860929738,
        "fail": 0.02790727860929738,
        "stub": 0.02790727860929738,
        "generation": 0.02790727860929738,
        "when": 0.02790727860929738,
        "evidence": 0.02790727860929738
      },
      "text": "**[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy, code fences, line length **[MVP]** - [x] Auto ToC (\u2264 level 3) **[MVP]** - [x] Badges (build, coverage, license) with safe defaults **[NEXT]** - [x] Link validator (relative/absolute) **[NEXT]** - [x] Managed markers for idempotent patching (`<!-- docgen:begin:end -->`) **[MVP]** ## 8) Git Integration - [x] Diff detection (map changed files \u2192 impacted sections) **[MVP]** - [x] Branch + PR creation with summary of README deltas **[MVP]** - [x] Commit mode for init or small changes (configurable) **[NEXT]** - [ ] Prevent loops on README\u2011only changes **[MVP]** ## 9) Configuration - [x] Parse `.docgen.yml` (LLM, readme style, analyzers, publish) **[MVP]** - [x] Path exclusions & `watched_globs` for CI triggers **[MVP]** - [ ] Per-section on/off toggles and titles **[NEXT]** ## 10) CI Integration - [x] GitHub Actions example workflow **[MVP]** - [ ] GitLab CI and Bitbucket Pipelines samples **[NEXT]** - [x] Labeling (`docs:auto`) and PR update behavior **[NEXT]** ## 11) Security & Privacy - [x] Local-only models; never exfiltrate code **[MVP]** - [ ] Respect `.gitignore`; exclude large binaries/secrets **[MVP]** - [ ] Optional simple secret scanner gate **[NEXT]** ## 12) Multi\u2011Language & Project Types - [ ] Tier\u20111: Python (Poetry/Setuptools), Java (Maven/Gradle/Spring Boot), Node.js (npm/pnpm/Express/Next) **[MVP]** - [ ] Tier\u20112: Go, Rust, Ruby, PHP **[STRETCH]** - [x] Framework\u2011aware quickstart commands per build system **[MVP]** ## 13) Quality Gates & Evaluation - [ ] Command validation (existence checks) **[MVP]** - [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#2",
      "vector": {
        "no": 0.07018624063435965,
        "hallucination": 0.07018624063435965,
        "checks": 0.07018624063435965,
        "reject": 0.07018624063435965,
        "facts": 0.07018624063435965,
        "not": 0.07018624063435965,
        "in": 0.07018624063435965,
        "signals": 0.07018624063435965,
        "rag": 0.1403724812687193,
        "mvp": 0.42111744380615784,
        "x": 0.49130368444051753,
        "readme": 0.1403724812687193,
        "scorecard": 0.07018624063435965,
        "coverage": 0.07018624063435965,
        "buildability": 0.07018624063435965,
        "link": 0.07018624063435965,
        "validity": 0.07018624063435965,
        "diff": 0.07018624063435965,
        "alignment": 0.07018624063435965,
        "lint": 0.1403724812687193,
        "next": 0.21055872190307892,
        "14": 0.07018624063435965,
        "performance": 0.07018624063435965,
        "caching": 0.07018624063435965,
        "persist": 0.07018624063435965,
        "analyzer": 0.1403724812687193,
        "outputs": 0.07018624063435965,
        "embeddings": 0.07018624063435965,
        "under": 0.07018624063435965,
        "docgen": 0.07018624063435965,
        "incremental": 0.07018624063435965,
        "refresh": 0.07018624063435965,
        "changed": 0.07018624063435965,
        "files": 0.07018624063435965,
        "only": 0.07018624063435965,
        "15": 0.07018624063435965,
        "error": 0.07018624063435965,
        "handling": 0.07018624063435965,
        "ux": 0.07018624063435965,
        "fail": 0.07018624063435965,
        "safe": 0.07018624063435965,
        "stub": 0.07018624063435965,
        "generation": 0.07018624063435965,
        "when": 0.07018624063435965,
        "evidence": 0.07018624063435965,
        "is": 0.07018624063435965,
        "insufficient": 0.07018624063435965,
        "clear": 0.07018624063435965,
        "run": 0.07018624063435965,
        "logs": 0.07018624063435965,
        "pr": 0.07018624063435965,
        "body": 0.07018624063435965,
        "with": 0.07018624063435965,
        "rationale": 0.07018624063435965,
        "sections": 0.07018624063435965,
        "updated": 0.07018624063435965,
        "because": 0.07018624063435965,
        "helpful": 0.07018624063435965,
        "cli": 0.07018624063435965,
        "errors": 0.07018624063435965,
        "and": 0.1403724812687193,
        "verbose": 0.07018624063435965,
        "flag": 0.07018624063435965,
        "works": 0.07018624063435965,
        "pre": 0.07018624063435965,
        "post": 0.07018624063435965,
        "subcommand": 0.07018624063435965,
        "16": 0.07018624063435965,
        "extensibility": 0.07018624063435965,
        "abc": 0.07018624063435965,
        "plugin": 0.07018624063435965,
        "discovery": 0.07018624063435965,
        "template": 0.07018624063435965,
        "packs": 0.07018624063435965,
        "org": 0.07018624063435965,
        "style": 0.1403724812687193,
        "definition": 0.07018624063435965,
        "of": 0.07018624063435965,
        "done": 0.07018624063435965,
        "per": 0.07018624063435965,
        "section": 0.07018624063435965,
        "passing": 0.07018624063435965,
        "unit": 0.07018624063435965,
        "integration": 0.07018624063435965,
        "tests": 0.07018624063435965,
        "for": 0.07018624063435965,
        "core": 0.07018624063435965,
        "logic": 0.07018624063435965,
        "golden": 0.07018624063435965,
        "regression": 0.07018624063435965,
        "test": 0.07018624063435965,
        "s": 0.07018624063435965,
        "meets": 0.07018624063435965,
        "requirements": 0.07018624063435965
      },
      "text": "- [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence is insufficient **[MVP]** - [ ] Clear run logs + PR body with rationale (\u201csections updated because\u2026\u201d) **[MVP]** - [x] Helpful CLI errors and `--verbose` flag (works pre/post subcommand) **[MVP]** ## 16) Extensibility - [x] Analyzer ABC and plugin discovery **[MVP]** - [x] Template packs (org\u2011style) **[NEXT]** --- ### Definition of Done (per section) - [ ] Passing unit & integration tests for core logic - [ ] Golden README regression test(s) - [ ] Meets lint/style requirements",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_order.md#0",
      "vector": {
        "docgen": 0.23979625973207228,
        "development": 0.029974532466509034,
        "roadmap": 0.029974532466509034,
        "phase": 0.20982172726556325,
        "0": 0.029974532466509034,
        "bootstrap": 0.029974532466509034,
        "the": 0.029974532466509034,
        "skeleton": 0.05994906493301807,
        "1": 0.3596943895981084,
        "project": 0.029974532466509034,
        "cli": 0.05994906493301807,
        "config": 0.11989812986603614,
        "loader": 0.029974532466509034,
        "yml": 0.029974532466509034,
        "models": 0.029974532466509034,
        "covers": 0.47959251946414455,
        "commands": 0.029974532466509034,
        "scaffolding": 0.029974532466509034,
        "9": 0.05994906493301807,
        "parse": 0.029974532466509034,
        "16": 0.05994906493301807,
        "analyzer": 0.05994906493301807,
        "abc": 0.05994906493301807,
        "2": 0.23979625973207228,
        "plugin": 0.05994906493301807,
        "discovery": 0.05994906493301807,
        "init": 0.11989812986603614,
        "happy": 0.029974532466509034,
        "path": 0.05994906493301807,
        "single": 0.029974532466509034,
        "repo": 0.11989812986603614,
        "local": 0.11989812986603614,
        "scanner": 0.029974532466509034,
        "manifest": 0.05994906493301807,
        "roles": 0.029974532466509034,
        "hashing": 0.029974532466509034,
        "ignores": 0.05994906493301807,
        "walk": 0.029974532466509034,
        "fs": 0.029974532466509034,
        "cache": 0.029974532466509034,
        "tier": 0.029974532466509034,
        "analyzers": 0.0899235973995271,
        "python": 0.029974532466509034,
        "java": 0.029974532466509034,
        "node": 0.029974532466509034,
        "build": 0.05994906493301807,
        "dependency": 0.029974532466509034,
        "3": 0.0899235973995271,
        "language": 0.05994906493301807,
        "deps": 0.029974532466509034,
        "templates": 0.05994906493301807,
        "prompt": 0.05994906493301807,
        "builder": 0.029974532466509034,
        "section": 0.14987266233254518,
        "by": 0.029974532466509034,
        "guardrailed": 0.029974532466509034,
        "system": 0.029974532466509034,
        "5": 0.11989812986603614,
        "jinja2": 0.029974532466509034,
        "guardrails": 0.029974532466509034,
        "token": 0.029974532466509034,
        "budget": 0.029974532466509034,
        "4": 0.0899235973995271,
        "llm": 0.029974532466509034,
        "runner": 0.029974532466509034,
        "ollama": 0.05994906493301807,
        "adapter": 0.029974532466509034,
        "6": 0.0899235973995271,
        "post": 0.029974532466509034,
        "processor": 0.029974532466509034,
        "managed": 0.029974532466509034,
        "markers": 0.0899235973995271,
        "toc": 0.05994906493301807,
        "markdown": 0.029974532466509034,
        "lint": 0.05994906493301807,
        "7": 0.029974532466509034,
        "git": 0.05994906493301807,
        "publisher": 0.05994906493301807,
        "commit": 0.05994906493301807,
        "mode": 0.05994906493301807,
        "for": 0.05994906493301807,
        "only": 0.0899235973995271,
        "8": 0.0899235973995271,
        "end": 0.05994906493301807,
        "to": 0.029974532466509034,
        "milestone": 0.0899235973995271,
        "generates": 0.029974532466509034,
        "a": 0.0899235973995271,
        "clean": 0.029974532466509034,
        "readme": 0.05994906493301807,
        "with": 0.0899235973995271,
        "no": 0.0899235973995271,
        "docs": 0.05994906493301807,
        "update": 0.11989812986603614,
        "on": 0.029974532466509034,
        "change": 0.05994906493301807,
        "pr": 0.14987266233254518,
        "workflow": 0.029974532466509034,
        "diff": 0.05994906493301807,
        "detection": 0.05994906493301807,
        "mapping": 0.05994906493301807,
        "patching": 0.029974532466509034,
        "inside": 0.029974532466509034,
        "prevent": 0.029974532466509034,
        "loops": 0.029974532466509034,
        "branch": 0.05994906493301807,
        "delta": 0.029974532466509034,
        "summary": 0.029974532466509034,
        "10": 0.05994906493301807,
        "labeling": 0.029974532466509034,
        "later": 0.029974532466509034,
        "opens": 0.029974532466509034,
        "updating": 0.029974532466509034,
        "impacted": 0.029974532466509034,
        "sections": 0.029974532466509034,
        "minimal": 0.029974532466509034,
        "rag": 0.05994906493301807,
        "accuracy": 0.029974532466509034,
        "lite": 0.029974532466509034,
        "embed": 0.029974532466509034,
        "top": 0.029974532466509034,
        "n": 0.029974532466509034,
        "source": 0.029974532466509034,
        "headers": 0.029974532466509034,
        "scoped": 0.029974532466509034,
        "retrieval": 0.05994906493301807,
        "embedding": 0.029974532466509034,
        "index": 0.029974532466509034,
        "sources": 0.029974532466509034,
        "per": 0.029974532466509034,
        "hallucination": 0.05994906493301807,
        "command": 0.05994906493301807,
        "existence": 0.029974532466509034,
        "checks": 0.029974532466509034,
        "13": 0.029974532466509034,
        "validation": 0.029974532466509034,
        "outputs": 0.029974532466509034,
        "grounded": 0.029974532466509034,
        "in": 0.029974532466509034,
        "facts": 0.029974532466509034,
        "targeted": 0.029974532466509034,
        "context": 0.029974532466509034,
        "hardening": 0.029974532466509034,
        "dx": 0.029974532466509034,
        "error": 0.029974532466509034,
        "handling": 0.029974532466509034,
        "clear": 0.029974532466509034,
        "logs": 0.05994906493301807,
        "verbose": 0.029974532466509034,
        "fail": 0.05994906493301807,
        "safe": 0.05994906493301807,
        "stubs": 0.029974532466509034,
        "15": 0.029974532466509034,
        "ux": 0.029974532466509034,
        "security": 0.029974532466509034,
        "gitignore": 0.029974532466509034,
        "respect": 0.029974532466509034,
        "excludes": 0.05994906493301807,
        "enforcement": 0.029974532466509034,
        "11": 0.029974532466509034,
        "privacy": 0.029974532466509034,
        "ci": 0.029974532466509034,
        "integration": 0.029974532466509034,
        "polish": 0.029974532466509034,
        "github": 0.029974532466509034,
        "actions": 0.05994906493301807,
        "sample": 0.029974532466509034,
        "push": 0.029974532466509034,
        "trigger": 0.029974532466509034,
        "calling": 0.029974532466509034,
        "gh": 0.029974532466509034,
        "refinements": 0.029974532466509034,
        "watched": 0.029974532466509034,
        "globs": 0.029974532466509034,
        "style": 0.05994906493301807,
        "preset": 0.029974532466509034,
        "concise": 0.029974532466509034,
        "comprehensive": 0.029974532466509034,
        "watched_globs": 0.029974532466509034,
        "presets": 0.029974532466509034,
        "multi": 0.029974532466509034,
        "breadth": 0.029974532466509034,
        "framework": 0.029974532466509034,
        "smarts": 0.029974532466509034,
        "entrypoint": 0.029974532466509034,
        "main": 0.029974532466509034,
        "spring": 0.029974532466509034,
        "boot": 0.029974532466509034,
        "fastapi": 0.029974532466509034
      },
      "text": "# DocGen Development Roadmap ## Phase 0 \u2014 Bootstrap the skeleton 1. **Project skeleton + CLI (`docgen`) + config loader (`.docgen.yml`) + models** * Covers: 1 (commands scaffolding), 9 (parse config), 16 (Analyzer ABC) 2. **Analyzer plugin ABC & discovery** * Covers: 16 (plugin discovery) ## Phase 1 \u2014 \"Init\" happy-path (single repo, local) 1. **Repo scanner & manifest (roles, hashing, ignores)** * Covers: 2 (walk FS, manifest, cache, ignores) 2. **Tier-1 analyzers (Python, Java, Node) + build analyzers + dependency analyzers** * Covers: 3 (language/build/deps) 3. **Templates + prompt builder (section-by-section) + guardrailed system prompt** * Covers: 5 (Jinja2 templates, guardrails, token budget) 4. **Local LLM runner (Ollama adapter)** * Covers: 6 (Ollama) 5. **Post-processor: managed markers, ToC, markdown lint** * Covers: 7 (markers, ToC, lint) 6. **Git publisher: commit mode (for init only)** * Covers: 8 (commit mode), 1 (`docgen init` end-to-end) \u2705 **Milestone**: `docgen init` generates a clean README for a repo with no docs. ## Phase 2 \u2014 Update-on-change (PR workflow) 1. **Diff detection + change\u2192section mapping + patching inside markers** * Covers: 8 (diff mapping, prevent loops), 1 (`docgen update`) 2. **Git publisher: branch + PR with delta summary** * Covers: 8 (branch/PR), 10 (labeling later) \u2705 **Milestone**: `docgen update` opens a PR updating only impacted sections. ## Phase 3 \u2014 Minimal RAG & accuracy 1. **RAG Lite: embed README/docs/top N source headers; section-scoped retrieval** * Covers: 4 (local embedding, index sources, per-section retrieval) 2. **No-hallucination & command existence checks** * Covers: 13 (command validation, no-hallucination) \u2705 **Milestone**: outputs grounded in repo facts with targeted context. ## Phase 4 \u2014 Hardening & DX 1. **Error handling, clear logs, `--verbose`, fail-safe stubs** * Covers: 15 (fail-safe, logs, CLI UX) 2. **Security: .gitignore respect, path excludes, local-only enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI)",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/feature_order.md#1",
      "vector": {
        "enforcement": 0.04252432555625623,
        "covers": 0.4252432555625623,
        "11": 0.04252432555625623,
        "privacy": 0.04252432555625623,
        "excludes": 0.04252432555625623,
        "phase": 0.17009730222502492,
        "5": 0.12757297666876868,
        "ci": 0.12757297666876868,
        "integration": 0.04252432555625623,
        "config": 0.12757297666876868,
        "polish": 0.08504865111251246,
        "1": 0.25514595333753737,
        "github": 0.04252432555625623,
        "actions": 0.08504865111251246,
        "sample": 0.04252432555625623,
        "push": 0.04252432555625623,
        "pr": 0.17009730222502492,
        "trigger": 0.04252432555625623,
        "calling": 0.04252432555625623,
        "docgen": 0.12757297666876868,
        "update": 0.04252432555625623,
        "10": 0.08504865111251246,
        "gh": 0.04252432555625623,
        "2": 0.21262162778128116,
        "refinements": 0.04252432555625623,
        "watched": 0.04252432555625623,
        "globs": 0.04252432555625623,
        "style": 0.08504865111251246,
        "preset": 0.04252432555625623,
        "concise": 0.04252432555625623,
        "comprehensive": 0.04252432555625623,
        "9": 0.04252432555625623,
        "watched_globs": 0.04252432555625623,
        "presets": 0.04252432555625623,
        "6": 0.08504865111251246,
        "multi": 0.04252432555625623,
        "language": 0.08504865111251246,
        "breadth": 0.08504865111251246,
        "framework": 0.17009730222502492,
        "smarts": 0.04252432555625623,
        "entrypoint": 0.04252432555625623,
        "detection": 0.04252432555625623,
        "main": 0.04252432555625623,
        "spring": 0.04252432555625623,
        "boot": 0.04252432555625623,
        "fastapi": 0.08504865111251246,
        "aware": 0.08504865111251246,
        "quick": 0.04252432555625623,
        "start": 0.04252432555625623,
        "entrypoints": 0.04252432555625623,
        "12": 0.04252432555625623,
        "commands": 0.04252432555625623,
        "pattern": 0.08504865111251246,
        "analyzers": 0.08504865111251246,
        "docker": 0.04252432555625623,
        "k8s": 0.04252432555625623,
        "monorepo": 0.04252432555625623,
        "layout": 0.04252432555625623,
        "3": 0.12757297666876868,
        "7": 0.12757297666876868,
        "quality": 0.08504865111251246,
        "gates": 0.08504865111251246,
        "performance": 0.08504865111251246,
        "readme": 0.08504865111251246,
        "scorecard": 0.08504865111251246,
        "link": 0.08504865111251246,
        "validator": 0.08504865111251246,
        "badges": 0.08504865111251246,
        "13": 0.04252432555625623,
        "artifact": 0.04252432555625623,
        "embedding": 0.04252432555625623,
        "caching": 0.08504865111251246,
        "in": 0.04252432555625623,
        "incremental": 0.08504865111251246,
        "rag": 0.12757297666876868,
        "refresh": 0.08504865111251246,
        "14": 0.04252432555625623,
        "persist": 0.04252432555625623,
        "outputs": 0.04252432555625623,
        "8": 0.04252432555625623,
        "nice": 0.04252432555625623,
        "to": 0.12757297666876868,
        "have": 0.04252432555625623,
        "stretch": 0.04252432555625623,
        "dry": 0.08504865111251246,
        "run": 0.08504865111251246,
        "mode": 0.12757297666876868,
        "labeling": 0.08504865111251246,
        "updates": 0.08504865111251246,
        "commit": 0.08504865111251246,
        "policy": 0.04252432555625623,
        "tuning": 0.04252432555625623,
        "template": 0.12757297666876868,
        "overrides": 0.04252432555625623,
        "docs": 0.04252432555625623,
        "templates": 0.04252432555625623,
        "j2": 0.04252432555625623,
        "org": 0.04252432555625623,
        "packs": 0.08504865111251246,
        "override": 0.04252432555625623,
        "16": 0.04252432555625623,
        "service": 0.08504865111251246,
        "llama": 0.08504865111251246,
        "cpp": 0.08504865111251246,
        "adapter": 0.04252432555625623,
        "tree": 0.08504865111251246,
        "sitter": 0.08504865111251246,
        "extraction": 0.04252432555625623,
        "why": 0.04252432555625623,
        "this": 0.04252432555625623,
        "order": 0.04252432555625623,
        "fastest": 0.04252432555625623,
        "path": 0.04252432555625623,
        "value": 0.04252432555625623,
        "get": 0.04252432555625623,
        "init": 0.04252432555625623,
        "producing": 0.04252432555625623,
        "a": 0.04252432555625623,
        "solid": 0.04252432555625623,
        "before": 0.04252432555625623,
        "adding": 0.04252432555625623,
        "diffing": 0.04252432555625623,
        "contain": 0.04252432555625623,
        "risk": 0.04252432555625623,
        "early": 0.04252432555625623,
        "section": 0.04252432555625623,
        "markers": 0.04252432555625623,
        "lint": 0.04252432555625623,
        "and": 0.12757297666876868,
        "publishing": 0.04252432555625623,
        "ensure": 0.04252432555625623,
        "safe": 0.04252432555625623,
        "idempotent": 0.04252432555625623,
        "edits": 0.04252432555625623,
        "accuracy": 0.04252432555625623,
        "next": 0.04252432555625623,
        "add": 0.04252432555625623,
        "validation": 0.04252432555625623,
        "avoid": 0.04252432555625623,
        "hallucinations": 0.04252432555625623,
        "once": 0.04252432555625623,
        "the": 0.08504865111251246,
        "pipeline": 0.04252432555625623,
        "works": 0.04252432555625623,
        "scale": 0.04252432555625623,
        "later": 0.04252432555625623,
        "only": 0.04252432555625623,
        "after": 0.04252432555625623,
        "core": 0.04252432555625623,
        "loop": 0.04252432555625623,
        "is": 0.04252432555625623,
        "robust": 0.04252432555625623,
        "do": 0.04252432555625623,
        "we": 0.04252432555625623,
        "widen": 0.04252432555625623,
        "coverage": 0.04252432555625623,
        "last": 0.04252432555625623,
        "refine": 0.04252432555625623,
        "dev": 0.04252432555625623,
        "experience": 0.04252432555625623
      },
      "text": "enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI) + framework-aware Quick Start** * Covers: 2 (entrypoints), 12 (framework-aware commands) 2. **Pattern analyzers (Docker/K8s, CI config, monorepo layout)** * Covers: 3 (pattern analyzers) ## Phase 7 \u2014 Quality gates & performance 1. **README scorecard + link validator + badges** * Covers: 13 (scorecard), 7 (link validator), 7 (badges) 2. **Artifact & embedding caching in `.docgen/` + incremental RAG refresh** * Covers: 14 (persist outputs, incremental refresh) ## Phase 8 \u2014 \"Nice to have\" & stretch 1. **Dry-run mode, PR labeling/updates, commit/PR policy tuning** * Covers: 1 (dry-run), 10 (labeling/PR updates) 2. **Template overrides (`docs/templates/*.j2`) & org template packs** * Covers: 5 (override), 16 (template packs) 3. **Service mode (FastAPI), llama.cpp adapter, tree-sitter extraction** * Covers: 1 (service mode), 6 (llama.cpp), 3 (tree-sitter) ## Why this order * **Fastest path to value**: get `docgen init` producing a solid README before adding diffing/RAG. * **Contain risk early**: section markers, lint, and commit publishing ensure safe/idempotent edits. * **Accuracy next**: add RAG + validation to avoid hallucinations once the pipeline works. * **Scale breadth later**: only after the core loop is robust do we widen language/framework coverage. * **Polish last**: CI, caching, and quality gates refine dev experience and performance.",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/spec.md#0",
      "vector": {
        "intelligent": 0.04393747751637468,
        "readme": 0.17574991006549873,
        "generator": 0.04393747751637468,
        "architecture": 0.08787495503274936,
        "spec": 0.04393747751637468,
        "python": 0.08787495503274936,
        "local": 0.13181243254912403,
        "llm": 0.13181243254912403,
        "1": 0.08787495503274936,
        "purpose": 0.04393747751637468,
        "scope": 0.04393747751637468,
        "build": 0.17574991006549873,
        "a": 0.26362486509824806,
        "based": 0.04393747751637468,
        "system": 0.04393747751637468,
        "that": 0.04393747751637468,
        "analyzes": 0.04393747751637468,
        "git": 0.26362486509824806,
        "repository": 0.04393747751637468,
        "structure": 0.04393747751637468,
        "code": 0.04393747751637468,
        "dependencies": 0.04393747751637468,
        "then": 0.04393747751637468,
        "generates": 0.04393747751637468,
        "and": 0.2196873875818734,
        "maintains": 0.04393747751637468,
        "high": 0.08787495503274936,
        "quality": 0.04393747751637468,
        "md": 0.04393747751637468,
        "using": 0.04393747751637468,
        "it": 0.04393747751637468,
        "initializes": 0.04393747751637468,
        "repos": 0.04393747751637468,
        "with": 0.08787495503274936,
        "no": 0.04393747751637468,
        "docs": 0.17574991006549873,
        "keeps": 0.04393747751637468,
        "up": 0.04393747751637468,
        "to": 0.2196873875818734,
        "date": 0.04393747751637468,
        "on": 0.04393747751637468,
        "commits": 0.04393747751637468,
        "prs": 0.04393747751637468,
        "supports": 0.08787495503274936,
        "multiple": 0.04393747751637468,
        "languages": 0.04393747751637468,
        "project": 0.04393747751637468,
        "types": 0.04393747751637468,
        "via": 0.04393747751637468,
        "analyzers": 0.08787495503274936,
        "non": 0.04393747751637468,
        "goals": 0.04393747751637468,
        "for": 0.08787495503274936,
        "the": 0.04393747751637468,
        "poc": 0.04393747751637468,
        "multi": 0.04393747751637468,
        "repo": 0.2196873875818734,
        "orchestration": 0.04393747751637468,
        "full": 0.08787495503274936,
        "website": 0.04393747751637468,
        "api": 0.04393747751637468,
        "reference": 0.04393747751637468,
        "extraction": 0.04393747751637468,
        "beyond": 0.04393747751637468,
        "summaries": 0.04393747751637468,
        "cloud": 0.04393747751637468,
        "llms": 0.04393747751637468,
        "2": 0.08787495503274936,
        "level": 0.04393747751637468,
        "at": 0.04393747751637468,
        "glance": 0.04393747751637468,
        "events": 0.04393747751637468,
        "event": 0.04393747751637468,
        "sources": 0.04393747751637468,
        "cli": 0.04393747751637468,
        "commands": 0.04393747751637468,
        "hooks": 0.04393747751637468,
        "webhooks": 0.04393747751637468,
        "ci": 0.08787495503274936,
        "commit": 0.08787495503274936,
        "pr": 0.08787495503274936,
        "orchestr": 0.04393747751637468,
        "async": 0.04393747751637468,
        "task": 0.04393747751637468,
        "graph": 0.08787495503274936,
        "scanner": 0.08787495503274936,
        "doc": 0.04393747751637468,
        "store": 0.04393747751637468,
        "indexer": 0.08787495503274936,
        "language": 0.08787495503274936,
        "artifacts": 0.08787495503274936,
        "fs": 0.04393747751637468,
        "deps": 0.04393747751637468,
        "cache": 0.04393747751637468,
        "versions": 0.04393747751637468,
        "knowledge": 0.04393747751637468,
        "embeddings": 0.04393747751637468,
        "prompt": 0.04393747751637468,
        "builder": 0.04393747751637468,
        "templates": 0.04393747751637468,
        "rag": 0.04393747751637468,
        "runner": 0.04393747751637468,
        "llama": 0.04393747751637468,
        "cpp": 0.04393747751637468,
        "ollama": 0.04393747751637468,
        "post": 0.04393747751637468,
        "processor": 0.04393747751637468,
        "lint": 0.04393747751637468,
        "toc": 0.04393747751637468,
        "badges": 0.04393747751637468,
        "links": 0.04393747751637468,
        "publisher": 0.04393747751637468,
        "branch": 0.04393747751637468,
        "3": 0.13181243254912403,
        "components": 0.04393747751637468,
        "responsibilities": 0.04393747751637468,
        "orchestrator": 0.04393747751637468,
        "coordinates": 0.04393747751637468,
        "end": 0.08787495503274936,
        "pipelines": 0.04393747751637468,
        "init": 0.04393747751637468,
        "update": 0.08787495503274936,
        "regenerate": 0.08787495503274936,
        "computes": 0.04393747751637468,
        "change": 0.04393747751637468,
        "impact": 0.04393747751637468,
        "from": 0.04393747751637468,
        "diff": 0.04393747751637468,
        "decides": 0.04393747751637468,
        "whether": 0.04393747751637468,
        "or": 0.04393747751637468,
        "patch": 0.04393747751637468,
        "sections": 0.04393747751637468,
        "schedules": 0.04393747751637468,
        "tasks": 0.04393747751637468,
        "caches": 0.04393747751637468,
        "intermediate": 0.04393747751637468,
        "results": 0.04393747751637468,
        "emits": 0.04393747751637468,
        "structured": 0.04393747751637468,
        "logs": 0.04393747751637468,
        "info": 0.04393747751637468,
        "by": 0.04393747751637468,
        "default": 0.04393747751637468,
        "debug": 0.04393747751637468,
        "verbose": 0.04393747751637468,
        "respects": 0.04393747751637468,
        "docgen": 0.13181243254912403,
        "yml": 0.04393747751637468,
        "watched_globs": 0.04393747751637468,
        "skip": 0.04393747751637468,
        "unrelated": 0.04393747751637468,
        "diffs": 0.04393747751637468,
        "substitutes": 0.04393747751637468,
        "fail": 0.04393747751637468,
        "safe": 0.04393747751637468,
        "stubs": 0.04393747751637468,
        "when": 0.04393747751637468,
        "generation": 0.04393747751637468,
        "fails": 0.04393747751637468,
        "dry": 0.08787495503274936,
        "run": 0.13181243254912403,
        "previews": 0.04393747751637468,
        "records": 0.04393747751637468,
        "scorecards": 0.04393747751637468,
        "each": 0.04393747751637468,
        "under": 0.04393747751637468,
        "walks": 0.04393747751637468,
        "builds": 0.04393747751637468,
        "normalized": 0.04393747751637468,
        "manifest": 0.04393747751637468,
        "files": 0.08787495503274936,
        "sizes": 0.04393747751637468,
        "tags": 0.04393747751637468,
        "path": 0.04393747751637468,
        "roles": 0.04393747751637468,
        "src": 0.04393747751637468,
        "test": 0.08787495503274936,
        "examples": 0.04393747751637468,
        "dependency": 0.04393747751637468,
        "manifests": 0.04393747751637468,
        "e": 0.04393747751637468,
        "g": 0.04393747751637468,
        "pom": 0.04393747751637468,
        "xml": 0.04393747751637468,
        "gradle": 0.04393747751637468,
        "package": 0.04393747751637468,
        "json": 0.13181243254912403,
        "requirements": 0.04393747751637468,
        "txt": 0.04393747751637468,
        "pyproject": 0.04393747751637468,
        "toml": 0.08787495503274936,
        "go": 0.04393747751637468,
        "mod": 0.04393747751637468,
        "cargo": 0.04393747751637468,
        "gemfile": 0.04393747751637468,
        "composer": 0.04393747751637468,
        "entrypoints": 0.04393747751637468,
        "clis": 0.04393747751637468,
        "services": 0.04393747751637468,
        "coverage": 0.04393747751637468,
        "if": 0.04393747751637468,
        "available": 0.04393747751637468,
        "stores": 0.04393747751637468,
        "per": 0.04393747751637468,
        "index": 0.04393747751637468,
        "speed": 0.04393747751637468,
        "future": 0.04393747751637468
      },
      "text": "# Intelligent README Generator \u2014 Architecture & Spec (Python, Local LLM) ## 1) Purpose & Scope Build a Python-based system that **analyzes a Git repository** (structure, code, dependencies), then **generates and maintains a high-quality README.md** using a **local LLM**. It initializes repos with no docs and **keeps docs up to date** on commits/PRs. Supports **multiple languages/project types** via analyzers. Non-goals (for the POC): multi-repo orchestration, full website docs, API reference extraction (beyond README summaries), cloud LLMs. --- ## 2) High-Level Architecture (at a glance) ``` \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 Git Events \u2502 Event Sources \u2502 CLI commands, Git hooks, Webhooks/CI (commit/PR) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Orchestr \u2502 (Async task graph) \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Repo Scanner\u2502 \u2502 Analyzers \u2502 \u2502 Doc Store \u2502 \u2502 + Indexer \u2502 \u2502 (Language, \u2502 \u2502 (Artifacts, \u2502 \u2502 (Git, FS) \u2502 \u2502 Build, Deps) \u2502 \u2502 Cache, \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 Versions) \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 Knowledge Graph \u2502 \u2502 \u2502 \u2502 & Embeddings \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Prompt Builder \u2502 (Templates + RAG) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Local LLM Runner \u2502 (llama.cpp/Ollama) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 Post-Processor \u2502 (lint, ToC, badges, links) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Git Publisher \u2502 (branch/PR/commit) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 ``` --- ## 3) Components & Responsibilities ### 3.1 Orchestrator * Coordinates end-to-end pipelines (init, update, regenerate). * Computes *change impact* from Git diff; decides whether to regenerate full README or patch sections. * Schedules tasks and caches intermediate results. * Emits structured logs (info by default, debug with `--verbose`), respects `.docgen.yml` `ci.watched_globs` to skip unrelated diffs, and substitutes fail-safe stubs when generation fails. * Supports dry-run previews (`docgen update --dry-run`) and records scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#1",
      "vector": {
        "scorecards": 0.03721614637823934,
        "for": 0.18608073189119673,
        "each": 0.07443229275647868,
        "run": 0.07443229275647868,
        "under": 0.07443229275647868,
        "docgen": 0.11164843913471803,
        "3": 0.22329687826943606,
        "2": 0.03721614637823934,
        "repo": 0.18608073189119673,
        "scanner": 0.03721614637823934,
        "indexer": 0.03721614637823934,
        "walks": 0.03721614637823934,
        "builds": 0.03721614637823934,
        "normalized": 0.03721614637823934,
        "manifest": 0.03721614637823934,
        "files": 0.11164843913471803,
        "sizes": 0.03721614637823934,
        "language": 0.07443229275647868,
        "tags": 0.03721614637823934,
        "path": 0.03721614637823934,
        "roles": 0.03721614637823934,
        "src": 0.03721614637823934,
        "test": 0.11164843913471803,
        "docs": 0.11164843913471803,
        "examples": 0.03721614637823934,
        "build": 0.14886458551295736,
        "dependency": 0.07443229275647868,
        "manifests": 0.03721614637823934,
        "e": 0.11164843913471803,
        "g": 0.11164843913471803,
        "pom": 0.03721614637823934,
        "xml": 0.03721614637823934,
        "gradle": 0.07443229275647868,
        "package": 0.03721614637823934,
        "json": 0.11164843913471803,
        "requirements": 0.03721614637823934,
        "txt": 0.03721614637823934,
        "pyproject": 0.03721614637823934,
        "toml": 0.07443229275647868,
        "go": 0.11164843913471803,
        "mod": 0.03721614637823934,
        "cargo": 0.07443229275647868,
        "gemfile": 0.03721614637823934,
        "composer": 0.03721614637823934,
        "entrypoints": 0.11164843913471803,
        "clis": 0.03721614637823934,
        "services": 0.11164843913471803,
        "coverage": 0.03721614637823934,
        "artifacts": 0.03721614637823934,
        "if": 0.03721614637823934,
        "available": 0.03721614637823934,
        "stores": 0.03721614637823934,
        "a": 0.03721614637823934,
        "per": 0.07443229275647868,
        "index": 0.03721614637823934,
        "to": 0.11164843913471803,
        "speed": 0.03721614637823934,
        "future": 0.03721614637823934,
        "runs": 0.03721614637823934,
        "analyzers": 0.22329687826943606,
        "plugin": 0.03721614637823934,
        "based": 0.03721614637823934,
        "detect": 0.03721614637823934,
        "idioms": 0.03721614637823934,
        "frameworks": 0.03721614637823934,
        "spring": 0.07443229275647868,
        "boot": 0.07443229275647868,
        "fastapi": 0.07443229275647868,
        "node": 0.07443229275647868,
        "express": 0.03721614637823934,
        "react": 0.03721614637823934,
        "next": 0.03721614637823934,
        "js": 0.03721614637823934,
        "http": 0.14886458551295736,
        "rust": 0.03721614637823934,
        "bin": 0.03721614637823934,
        "lib": 0.03721614637823934,
        "maven": 0.03721614637823934,
        "setuptools": 0.03721614637823934,
        "poetry": 0.03721614637823934,
        "npm": 0.03721614637823934,
        "pnpm": 0.03721614637823934,
        "yarn": 0.03721614637823934,
        "extract": 0.03721614637823934,
        "top": 0.07443229275647868,
        "level": 0.03721614637823934,
        "libs": 0.03721614637823934,
        "notable": 0.03721614637823934,
        "transitive": 0.03721614637823934,
        "categories": 0.03721614637823934,
        "entrypoint": 0.03721614637823934,
        "infer": 0.03721614637823934,
        "commands": 0.03721614637823934,
        "django": 0.03721614637823934,
        "scripts": 0.07443229275647868,
        "pattern": 0.03721614637823934,
        "monorepo": 0.03721614637823934,
        "layout": 0.03721614637823934,
        "ci": 0.03721614637823934,
        "cd": 0.03721614637823934,
        "containerization": 0.03721614637823934,
        "k8s": 0.03721614637823934,
        "heuristics": 0.03721614637823934,
        "structure": 0.03721614637823934,
        "analyzer": 0.07443229275647868,
        "module": 0.03721614637823934,
        "topology": 0.03721614637823934,
        "detected": 0.11164843913471803,
        "entities": 0.07443229275647868,
        "dtos": 0.03721614637823934,
        "api": 0.11164843913471803,
        "endpoint": 0.07443229275647868,
        "sequences": 0.03721614637823934,
        "service": 0.03721614637823934,
        "interactions": 0.03721614637823934,
        "returns": 0.03721614637823934,
        "signals": 0.07443229275647868,
        "key": 0.07443229275647868,
        "facts": 0.03721614637823934,
        "the": 0.11164843913471803,
        "knowledge": 0.07443229275647868,
        "graph": 0.11164843913471803,
        "4": 0.03721614637823934,
        "embeddings": 0.07443229275647868,
        "rag": 0.03721614637823934,
        "of": 0.07443229275647868,
        "modules": 0.03721614637823934,
        "packages": 0.03721614637823934,
        "configs": 0.03721614637823934,
        "tests": 0.03721614637823934,
        "lightweight": 0.03721614637823934,
        "embedding": 0.03721614637823934,
        "store": 0.03721614637823934,
        "faiss": 0.03721614637823934,
        "in": 0.03721614637823934,
        "memory": 0.03721614637823934,
        "chunks": 0.03721614637823934,
        "code": 0.03721614637823934,
        "comments": 0.03721614637823934,
        "readme": 0.07443229275647868,
        "fragments": 0.03721614637823934,
        "changelog": 0.03721614637823934,
        "issues": 0.03721614637823934,
        "optional": 0.03721614637823934,
        "commit": 0.03721614637823934,
        "messages": 0.07443229275647868,
        "provides": 0.03721614637823934,
        "context": 0.07443229275647868,
        "retrieval": 0.03721614637823934,
        "prompt": 0.07443229275647868,
        "building": 0.03721614637823934,
        "k": 0.03721614637823934,
        "by": 0.03721614637823934,
        "section": 0.11164843913471803,
        "and": 0.2605130246476754,
        "persists": 0.03721614637823934,
        "refreshing": 0.03721614637823934,
        "only": 0.03721614637823934,
        "whose": 0.03721614637823934,
        "hashes": 0.03721614637823934,
        "changed": 0.03721614637823934,
        "5": 0.03721614637823934,
        "builder": 0.03721614637823934,
        "aware": 0.03721614637823934,
        "jinja2": 0.03721614637823934,
        "templates": 0.03721614637823934,
        "with": 0.11164843913471803,
        "guardrails": 0.03721614637823934,
        "project": 0.03721614637823934,
        "intro": 0.03721614637823934,
        "features": 0.03721614637823934,
        "architecture": 0.03721614637823934,
        "overview": 0.03721614637823934,
        "quick": 0.07443229275647868,
        "start": 0.07443229275647868,
        "configuration": 0.03721614637823934,
        "deployment": 0.03721614637823934,
        "troubleshooting": 0.03721614637823934,
        "faq": 0.03721614637823934,
        "roadmap": 0.03721614637823934,
        "contribution": 0.03721614637823934,
        "license": 0.03721614637823934,
        "badges": 0.03721614637823934,
        "dynamically": 0.03721614637823934,
        "injects": 0.07443229275647868,
        "retrieved": 0.03721614637823934,
        "produces": 0.03721614637823934,
        "llm": 0.07443229275647868,
        "ready": 0.03721614637823934,
        "structured": 0.07443229275647868,
        "prompts": 0.03721614637823934,
        "system": 0.03721614637823934,
        "user": 0.03721614637823934,
        "token": 0.03721614637823934,
        "budgets": 0.03721614637823934,
        "honours": 0.03721614637823934,
        "style": 0.07443229275647868,
        "presets": 0.03721614637823934,
        "concise": 0.03721614637823934,
        "trims": 0.03721614637823934,
        "list": 0.03721614637823934,
        "heavy": 0.03721614637823934,
        "sections": 0.03721614637823934,
        "comprehensive": 0.03721614637823934,
        "keeps": 0.03721614637823934,
        "full": 0.03721614637823934,
        "detail": 0.03721614637823934,
        "infrastructure": 0.03721614637823934,
        "patterns": 0.03721614637823934,
        "into": 0.03721614637823934,
        "guidance": 0.03721614637823934,
        "uvicorn": 0.03721614637823934,
        "docker": 0.11164843913471803,
        "compose": 0.03721614637823934,
        "up": 0.03721614637823934,
        "generates": 0.03721614637823934,
        "mermaid": 0.03721614637823934,
        "sequence": 0.03721614637823934,
        "diagrams": 0.03721614637823934,
        "highlighting": 0.03721614637823934,
        "request": 0.03721614637823934,
        "flow": 0.03721614637823934,
        "across": 0.03721614637823934,
        "when": 0.03721614637823934,
        "endpoints": 0.03721614637823934,
        "are": 0.03721614637823934,
        "6": 0.03721614637823934,
        "local": 0.03721614637823934,
        "runner": 0.11164843913471803,
        "pluggable": 0.03721614637823934,
        "runtime": 0.03721614637823934,
        "that": 0.03721614637823934,
        "prefers": 0.03721614637823934,
        "model": 0.07443229275647868,
        "host": 0.03721614637823934,
        "localhost": 0.03721614637823934,
        "12434": 0.03721614637823934,
        "engines": 0.07443229275647868,
        "v1": 0.07443229275647868,
        "container": 0.03721614637823934,
        "internal": 0.03721614637823934,
        "environment": 0.03721614637823934,
        "overrides": 0.03721614637823934,
        "an": 0.03721614637823934,
        "ollama": 0.03721614637823934,
        "cli": 0.03721614637823934,
        "fallback": 0.03721614637823934,
        "defaults": 0.03721614637823934,
        "ai": 0.03721614637823934,
        "smollm2": 0.03721614637823934,
        "360m": 0.03721614637823934,
        "q4_k_m": 0.03721614637823934,
        "but": 0.03721614637823934,
        "respects": 0.03721614637823934,
        "yml": 0.03721614637823934,
        "openai": 0.03721614637823934,
        "compatible": 0.03721614637823934,
        "env": 0.03721614637823934,
        "vars": 0.03721614637823934,
        "alternate": 0.03721614637823934,
        "weights": 0.03721614637823934,
        "keys": 0.03721614637823934,
        "supports": 0.03721614637823934,
        "function": 0.03721614637823934,
        "calling": 0.03721614637823934,
        "outputs": 0.03721614637823934
      },
      "text": "scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future runs. ### 3.3 Analyzers (Plugin-based) * **Language analyzers** (detect idioms, entrypoints, frameworks: Spring Boot, FastAPI, Node/Express, React, Next.js, Go HTTP, Rust bin/lib). * **Build analyzers** (Maven/Gradle, setuptools/Poetry, npm/pnpm/yarn, Go, Cargo). * **Dependency analyzers** (extract top-level libs & notable transitive categories). * **Entrypoint analyzers** (infer run commands for FastAPI, Django, Spring Boot, Node scripts). * **Pattern analyzers** (monorepo layout, CI/CD, containerization/K8s heuristics). * **Structure analyzer** (module topology, detected entities/DTOs, API endpoint sequences, service interactions). * Each analyzer returns **Signals** (key facts) to the knowledge graph. ### 3.4 Knowledge Graph & Embeddings (RAG) * Graph of Repo entities: modules, packages, services, scripts, configs, tests, docs. * Lightweight embedding store (e.g., `faiss`/in-memory) of **chunks**: code comments, README fragments, `docs/`, `CHANGELOG`, issues (optional), commit messages. * Provides **context retrieval** for prompt building (top-k by section) and persists embeddings under `.docgen/`, refreshing only the files whose hashes changed. ### 3.5 Prompt Builder * **Section-aware** Jinja2 templates with **guardrails**: * Project intro, key features, architecture overview, quick start, configuration, build/test, deployment, troubleshooting, FAQ, roadmap, contribution, license, badges. * Dynamically injects repo signals and retrieved context per section. * Produces **LLM-ready structured prompts** (system + user messages) with token budgets and honours `readme.style` presets (`concise` trims list-heavy sections, `comprehensive` keeps full detail). * Injects detected entrypoints and infrastructure patterns into Quick Start guidance (e.g., `uvicorn ...`, `docker compose up`). * Generates Mermaid sequence diagrams highlighting request flow across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#2",
      "vector": {
        "across": 0.028060676663315687,
        "services": 0.028060676663315687,
        "when": 0.08418202998994706,
        "api": 0.056121353326631374,
        "endpoints": 0.028060676663315687,
        "are": 0.056121353326631374,
        "detected": 0.056121353326631374,
        "3": 0.11224270665326275,
        "6": 0.028060676663315687,
        "local": 0.056121353326631374,
        "llm": 0.028060676663315687,
        "runner": 0.08418202998994706,
        "pluggable": 0.028060676663315687,
        "runtime": 0.028060676663315687,
        "that": 0.028060676663315687,
        "prefers": 0.028060676663315687,
        "the": 0.028060676663315687,
        "docker": 0.056121353326631374,
        "model": 0.08418202998994706,
        "http": 0.08418202998994706,
        "endpoint": 0.028060676663315687,
        "host": 0.028060676663315687,
        "localhost": 0.028060676663315687,
        "12434": 0.028060676663315687,
        "engines": 0.056121353326631374,
        "v1": 0.056121353326631374,
        "container": 0.028060676663315687,
        "internal": 0.08418202998994706,
        "with": 0.08418202998994706,
        "environment": 0.028060676663315687,
        "overrides": 0.028060676663315687,
        "and": 0.36478879662310393,
        "an": 0.028060676663315687,
        "ollama": 0.028060676663315687,
        "cli": 0.056121353326631374,
        "fallback": 0.028060676663315687,
        "defaults": 0.056121353326631374,
        "to": 0.08418202998994706,
        "ai": 0.028060676663315687,
        "smollm2": 0.028060676663315687,
        "360m": 0.028060676663315687,
        "q4_k_m": 0.028060676663315687,
        "but": 0.028060676663315687,
        "respects": 0.028060676663315687,
        "docgen": 0.11224270665326275,
        "yml": 0.028060676663315687,
        "openai": 0.028060676663315687,
        "compatible": 0.028060676663315687,
        "env": 0.028060676663315687,
        "vars": 0.028060676663315687,
        "for": 0.08418202998994706,
        "alternate": 0.028060676663315687,
        "weights": 0.028060676663315687,
        "keys": 0.028060676663315687,
        "supports": 0.056121353326631374,
        "function": 0.028060676663315687,
        "calling": 0.028060676663315687,
        "style": 0.056121353326631374,
        "structured": 0.028060676663315687,
        "outputs": 0.056121353326631374,
        "available": 0.028060676663315687,
        "streaming": 0.028060676663315687,
        "decode": 0.028060676663315687,
        "stop": 0.028060676663315687,
        "tokens": 0.028060676663315687,
        "section": 0.056121353326631374,
        "by": 0.056121353326631374,
        "generation": 0.028060676663315687,
        "stay": 0.056121353326631374,
        "within": 0.028060676663315687,
        "context": 0.028060676663315687,
        "limits": 0.028060676663315687,
        "validates": 0.056121353326631374,
        "configuration": 0.028060676663315687,
        "ensure": 0.028060676663315687,
        "runners": 0.028060676663315687,
        "loopback": 0.028060676663315687,
        "hosts": 0.028060676663315687,
        "only": 0.056121353326631374,
        "7": 0.028060676663315687,
        "post": 0.056121353326631374,
        "processor": 0.028060676663315687,
        "lints": 0.028060676663315687,
        "markdown": 0.028060676663315687,
        "builds": 0.028060676663315687,
        "toc": 0.028060676663315687,
        "adds": 0.056121353326631374,
        "shields": 0.028060676663315687,
        "badges": 0.056121353326631374,
        "normalizes": 0.028060676663315687,
        "heading": 0.028060676663315687,
        "hierarchy": 0.028060676663315687,
        "enforces": 0.028060676663315687,
        "guide": 0.028060676663315687,
        "readme": 0.08418202998994706,
        "contract": 0.028060676663315687,
        "required": 0.056121353326631374,
        "sections": 0.11224270665326275,
        "links": 0.028060676663315687,
        "relative": 0.028060676663315687,
        "absolute": 0.028060676663315687,
        "code": 0.028060676663315687,
        "block": 0.028060676663315687,
        "languages": 0.028060676663315687,
        "line": 0.028060676663315687,
        "length": 0.028060676663315687,
        "computes": 0.028060676663315687,
        "diff": 0.028060676663315687,
        "aware": 0.028060676663315687,
        "updates": 0.056121353326631374,
        "modifies": 0.028060676663315687,
        "impacted": 0.028060676663315687,
        "changes": 0.056121353326631374,
        "persists": 0.028060676663315687,
        "a": 0.08418202998994706,
        "scorecard": 0.056121353326631374,
        "json": 0.056121353326631374,
        "capturing": 0.028060676663315687,
        "coverage": 0.056121353326631374,
        "quick": 0.028060676663315687,
        "start": 0.028060676663315687,
        "health": 0.028060676663315687,
        "link": 0.056121353326631374,
        "results": 0.028060676663315687,
        "build": 0.056121353326631374,
        "license": 0.028060676663315687,
        "safe": 0.028060676663315687,
        "reports": 0.028060676663315687,
        "warnings": 0.028060676663315687,
        "during": 0.028060676663315687,
        "processing": 0.028060676663315687,
        "8": 0.028060676663315687,
        "doc": 0.028060676663315687,
        "store": 0.028060676663315687,
        "artifacts": 0.028060676663315687,
        "versions": 0.028060676663315687,
        "keeps": 0.028060676663315687,
        "generated": 0.028060676663315687,
        "drafts": 0.028060676663315687,
        "logs": 0.028060676663315687,
        "prompts": 0.028060676663315687,
        "inputs": 0.028060676663315687,
        "diffs": 0.028060676663315687,
        "under": 0.028060676663315687,
        "per": 0.028060676663315687,
        "repo": 0.028060676663315687,
        "rollback": 0.028060676663315687,
        "regression": 0.028060676663315687,
        "testing": 0.028060676663315687,
        "via": 0.028060676663315687,
        "golden": 0.028060676663315687,
        "readmes": 0.028060676663315687,
        "stores": 0.028060676663315687,
        "embedding": 0.028060676663315687,
        "cache": 0.028060676663315687,
        "embeddings": 0.028060676663315687,
        "scorecards": 0.028060676663315687,
        "so": 0.028060676663315687,
        "subsequent": 0.028060676663315687,
        "runs": 0.028060676663315687,
        "incremental": 0.028060676663315687,
        "9": 0.028060676663315687,
        "git": 0.028060676663315687,
        "publisher": 0.028060676663315687,
        "creates": 0.028060676663315687,
        "branch": 0.028060676663315687,
        "e": 0.056121353326631374,
        "g": 0.056121353326631374,
        "update": 0.028060676663315687,
        "yyyymmdd": 0.028060676663315687,
        "pr": 0.056121353326631374,
        "body": 0.028060676663315687,
        "explains": 0.028060676663315687,
        "what": 0.028060676663315687,
        "were": 0.028060676663315687,
        "updated": 0.028060676663315687,
        "can": 0.028060676663315687,
        "commit": 0.028060676663315687,
        "directly": 0.028060676663315687,
        "configurable": 0.028060676663315687,
        "on": 0.028060676663315687,
        "init": 0.028060676663315687,
        "empty": 0.028060676663315687,
        "repos": 0.028060676663315687,
        "applies": 0.028060676663315687,
        "labels": 0.028060676663315687,
        "docs": 0.056121353326631374,
        "auto": 0.028060676663315687,
        "existing": 0.028060676663315687,
        "prs": 0.028060676663315687,
        "configured": 0.028060676663315687,
        "4": 0.028060676663315687,
        "data": 0.028060676663315687,
        "python": 0.056121353326631374,
        "pydantic": 0.028060676663315687,
        "dataclasses": 0.056121353326631374,
        "from": 0.056121353326631374,
        "import": 0.056121353326631374,
        "dataclass": 0.2244854133065255,
        "typing": 0.028060676663315687,
        "list": 0.11224270665326275,
        "dict": 0.14030338331657843,
        "optional": 0.056121353326631374,
        "class": 0.1964247366432098,
        "filemeta": 0.056121353326631374,
        "path": 0.028060676663315687,
        "str": 0.5892742099296294,
        "size": 0.028060676663315687,
        "int": 0.028060676663315687,
        "language": 0.028060676663315687,
        "role": 0.028060676663315687,
        "src": 0.028060676663315687,
        "test": 0.056121353326631374,
        "config": 0.028060676663315687,
        "script": 0.028060676663315687,
        "infra": 0.028060676663315687,
        "other": 0.028060676663315687,
        "hash": 0.028060676663315687,
        "repomanifest": 0.056121353326631374,
        "root": 0.028060676663315687,
        "files": 0.028060676663315687,
        "detectors": 0.028060676663315687,
        "build_system": 0.028060676663315687,
        "maven": 0.028060676663315687,
        "framework": 0.056121353326631374,
        "spring": 0.028060676663315687,
        "boot": 0.028060676663315687,
        "dependency_files": 0.028060676663315687,
        "pom": 0.028060676663315687,
        "xml": 0.028060676663315687,
        "requirements": 0.028060676663315687,
        "txt": 0.028060676663315687,
        "signal": 0.056121353326631374,
        "kind": 0.028060676663315687,
        "service": 0.028060676663315687,
        "db": 0.028060676663315687,
        "queue": 0.028060676663315687,
        "dep": 0.028060676663315687,
        "entrypoint": 0.028060676663315687,
        "name": 0.028060676663315687,
        "detail": 0.028060676663315687,
        "analysisresult": 0.028060676663315687,
        "manifest": 0.028060676663315687,
        "signals": 0.028060676663315687,
        "embedding_index_path": 0.028060676663315687,
        "sectionspec": 0.028060676663315687,
        "key": 0.028060676663315687,
        "intro": 0.028060676663315687,
        "features": 0.028060676663315687,
        "arch": 0.028060676663315687,
        "quickstart": 0.028060676663315687,
        "bool": 0.028060676663315687,
        "sources": 0.028060676663315687,
        "preferred": 0.028060676663315687,
        "retrieval": 0.028060676663315687,
        "tags": 0.028060676663315687,
        "template_name": 0.028060676663315687,
        "readmedraft": 0.028060676663315687,
        "full_markdown": 0.028060676663315687,
        "updateplan": 0.028060676663315687,
        "strategy": 0.028060676663315687
      },
      "text": "across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs when available. * Streaming decode with stop tokens; **section-by-section** generation to stay within context limits. * Validates configuration to ensure runners stay local (loopback/`*.internal` hosts only). ### 3.7 Post-Processor * Lints Markdown, builds ToC, adds shields/badges, normalizes heading hierarchy. * Enforces internal style guide and **README contract** (required sections). * Validates links (relative/absolute), code block languages, and line length. * Computes **diff-aware updates**: only modifies sections impacted by changes. * Persists a README scorecard (`.docgen/scorecard.json`) capturing coverage, quick start health, and link results. * Adds build/coverage/license badges with safe defaults and reports link warnings during post-processing. ### 3.8 Doc Store (Artifacts & Versions) * Keeps generated drafts, logs, prompts, inputs/outputs, and diffs under `.docgen/` per repo. * Supports rollback and regression testing via \u201cgolden\u201d READMEs. * Stores embedding cache (`embeddings.json`) and scorecards so subsequent runs are incremental. ### 3.9 Git Publisher * Creates a branch (e.g., `docgen/readme-update-YYYYMMDD`) and a PR. * PR body explains detected changes and what sections were updated. * Can commit directly (configurable) on init for empty repos. * Applies labels (e.g., `docs:auto`) and updates existing PRs when configured. --- ## 4) Data Model (Python `pydantic`/`dataclasses`) ```python from dataclasses import dataclass from typing import List, Dict, Optional @dataclass class FileMeta: path: str size: int language: Optional[str] role: str # src|test|docs|config|build|script|infra|other hash: str @dataclass class RepoManifest: root: str files: List[FileMeta] detectors: Dict[str, str] # {\"build_system\": \"maven\", \"framework\":\"spring-boot\", ...} dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str #",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#3",
      "vector": {
        "dependency_files": 0.03280893574623933,
        "dict": 0.13123574298495733,
        "str": 0.5577519076860686,
        "pom": 0.098426807238718,
        "xml": 0.098426807238718,
        "requirements": 0.06561787149247866,
        "txt": 0.06561787149247866,
        "dataclass": 0.16404467873119666,
        "class": 0.16404467873119666,
        "signal": 0.06561787149247866,
        "kind": 0.03280893574623933,
        "framework": 0.03280893574623933,
        "service": 0.03280893574623933,
        "cli": 0.03280893574623933,
        "db": 0.03280893574623933,
        "queue": 0.03280893574623933,
        "dep": 0.03280893574623933,
        "entrypoint": 0.03280893574623933,
        "test": 0.06561787149247866,
        "name": 0.03280893574623933,
        "detail": 0.03280893574623933,
        "analysisresult": 0.03280893574623933,
        "manifest": 0.06561787149247866,
        "repomanifest": 0.03280893574623933,
        "signals": 0.06561787149247866,
        "list": 0.098426807238718,
        "embedding_index_path": 0.03280893574623933,
        "sectionspec": 0.03280893574623933,
        "key": 0.03280893574623933,
        "intro": 0.06561787149247866,
        "features": 0.098426807238718,
        "arch": 0.03280893574623933,
        "quickstart": 0.06561787149247866,
        "required": 0.03280893574623933,
        "bool": 0.03280893574623933,
        "sources": 0.03280893574623933,
        "preferred": 0.03280893574623933,
        "retrieval": 0.06561787149247866,
        "tags": 0.03280893574623933,
        "template_name": 0.03280893574623933,
        "readmedraft": 0.03280893574623933,
        "sections": 0.13123574298495733,
        "full_markdown": 0.03280893574623933,
        "updateplan": 0.06561787149247866,
        "strategy": 0.03280893574623933,
        "full": 0.03280893574623933,
        "patch": 0.06561787149247866,
        "changed_sections": 0.03280893574623933,
        "reasons": 0.03280893574623933,
        "section": 0.06561787149247866,
        "why": 0.03280893574623933,
        "5": 0.098426807238718,
        "configuration": 0.06561787149247866,
        "docgen": 0.196853614477436,
        "yml": 0.06561787149247866,
        "at": 0.03280893574623933,
        "repo": 0.06561787149247866,
        "root": 0.06561787149247866,
        "yaml": 0.03280893574623933,
        "llm": 0.03280893574623933,
        "runner": 0.03280893574623933,
        "ollama": 0.03280893574623933,
        "or": 0.06561787149247866,
        "llama": 0.03280893574623933,
        "cpp": 0.03280893574623933,
        "model": 0.03280893574623933,
        "llama3": 0.03280893574623933,
        "8b": 0.03280893574623933,
        "instruct": 0.03280893574623933,
        "example": 0.03280893574623933,
        "local": 0.03280893574623933,
        "only": 0.098426807238718,
        "max_tokens": 0.03280893574623933,
        "2048": 0.03280893574623933,
        "temperature": 0.03280893574623933,
        "0": 0.03280893574623933,
        "2": 0.13123574298495733,
        "readme": 0.196853614477436,
        "style": 0.03280893574623933,
        "concise": 0.03280893574623933,
        "comprehensive": 0.03280893574623933,
        "template_pack": 0.06561787149247866,
        "enterprise": 0.03280893574623933,
        "optional": 0.03280893574623933,
        "bundle": 0.03280893574623933,
        "shipped": 0.03280893574623933,
        "with": 0.06561787149247866,
        "required_sections": 0.03280893574623933,
        "architecture": 0.06561787149247866,
        "build_and_test": 0.03280893574623933,
        "deployment": 0.06561787149247866,
        "troubleshooting": 0.03280893574623933,
        "faq": 0.03280893574623933,
        "license": 0.03280893574623933,
        "publish": 0.06561787149247866,
        "mode": 0.03280893574623933,
        "pr": 0.13123574298495733,
        "commit": 0.098426807238718,
        "dry": 0.03280893574623933,
        "run": 0.03280893574623933,
        "branch_prefix": 0.03280893574623933,
        "labels": 0.03280893574623933,
        "docs": 0.06561787149247866,
        "auto": 0.03280893574623933,
        "update_existing": 0.03280893574623933,
        "true": 0.03280893574623933,
        "refresh": 0.03280893574623933,
        "an": 0.03280893574623933,
        "existing": 0.03280893574623933,
        "instead": 0.03280893574623933,
        "of": 0.03280893574623933,
        "opening": 0.03280893574623933,
        "a": 0.06561787149247866,
        "new": 0.03280893574623933,
        "one": 0.03280893574623933,
        "analyzers": 0.03280893574623933,
        "enabled": 0.03280893574623933,
        "language": 0.03280893574623933,
        "build": 0.196853614477436,
        "dependencies": 0.03280893574623933,
        "patterns": 0.03280893574623933,
        "exclude_paths": 0.03280893574623933,
        "git": 0.06561787149247866,
        "node_modules": 0.03280893574623933,
        "dist": 0.03280893574623933,
        "ci": 0.098426807238718,
        "update": 0.06561787149247866,
        "if": 0.098426807238718,
        "these": 0.03280893574623933,
        "paths": 0.03280893574623933,
        "change": 0.03280893574623933,
        "watched_globs": 0.06561787149247866,
        "src": 0.06561787149247866,
        "app": 0.03280893574623933,
        "cmd": 0.03280893574623933,
        "gradle": 0.06561787149247866,
        "package": 0.03280893574623933,
        "json": 0.03280893574623933,
        "pyproject": 0.03280893574623933,
        "toml": 0.03280893574623933,
        "dockerfile": 0.06561787149247866,
        "no": 0.06561787149247866,
        "templates_dir": 0.03280893574623933,
        "is": 0.03280893574623933,
        "provided": 0.03280893574623933,
        "automatically": 0.03280893574623933,
        "picks": 0.03280893574623933,
        "up": 0.03280893574623933,
        "templates": 0.06561787149247866,
        "bundles": 0.03280893574623933,
        "in": 0.06561787149247866,
        "the": 0.03280893574623933,
        "repository": 0.03280893574623933,
        "and": 0.03280893574623933,
        "supports": 0.03280893574623933,
        "built": 0.03280893574623933,
        "template": 0.03280893574623933,
        "packs": 0.03280893574623933,
        "via": 0.06561787149247866,
        "6": 0.098426807238718,
        "workflows": 0.03280893574623933,
        "1": 0.098426807238718,
        "initialization": 0.03280893574623933,
        "without": 0.03280893574623933,
        "scan": 0.03280893574623933,
        "analyze": 0.03280893574623933,
        "embeddings": 0.03280893574623933,
        "prompt": 0.03280893574623933,
        "default": 0.03280893574623933,
        "include": 0.03280893574623933,
        "getting": 0.03280893574623933,
        "started": 0.03280893574623933,
        "suggestions": 0.03280893574623933,
        "3": 0.06561787149247866,
        "generate": 0.06561787149247866,
        "sequentially": 0.03280893574623933,
        "streaming": 0.03280893574623933,
        "4": 0.06561787149247866,
        "post": 0.03280893574623933,
        "process": 0.03280893574623933,
        "toc": 0.03280893574623933,
        "badges": 0.03280893574623933,
        "status": 0.03280893574623933,
        "placeholder": 0.03280893574623933,
        "lint": 0.03280893574623933,
        "direct": 0.03280893574623933,
        "md": 0.03280893574623933,
        "artifacts": 0.03280893574623933,
        "on": 0.03280893574623933,
        "detect": 0.03280893574623933,
        "changes": 0.03280893574623933,
        "diff": 0.03280893574623933,
        "map": 0.03280893574623933,
        "files": 0.03280893574623933,
        "to": 0.098426807238718,
        "using": 0.03280893574623933,
        "rules": 0.03280893574623933,
        "matrix": 0.03280893574623933,
        "quick": 0.03280893574623933,
        "start": 0.03280893574623933,
        "k8s": 0.03280893574623933,
        "entrypoints": 0.03280893574623933,
        "decide": 0.03280893574623933,
        "impacted": 0.03280893574623933,
        "regenerate": 0.03280893574623933,
        "those": 0.03280893574623933,
        "skip": 0.03280893574623933,
        "changed": 0.03280893574623933,
        "file": 0.03280893574623933,
        "matches": 0.03280893574623933,
        "allows": 0.03280893574623933,
        "avoid": 0.03280893574623933,
        "unnecessary": 0.03280893574623933,
        "runs": 0.03280893574623933,
        "rag": 0.03280893574623933,
        "fetch": 0.03280893574623933,
        "top": 0.03280893574623933,
        "k": 0.03280893574623933,
        "chunks": 0.03280893574623933,
        "relevant": 0.03280893574623933,
        "each": 0.03280893574623933
      },
      "text": "dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str # \"full\"|\"patch\" changed_sections: List[str] reasons: Dict[str, str] # section->why ``` --- ## 5) Configuration (`.docgen.yml` at repo root) ```yaml llm: runner: \"ollama\" # or \"llama.cpp\" model: \"llama3:8b-instruct\" # example; local only max_tokens: 2048 temperature: 0.2 readme: style: \"concise\" # or \"comprehensive\" template_pack: \"enterprise\" # optional bundle shipped with docgen required_sections: - intro - features - architecture - quickstart - configuration - build_and_test - deployment - troubleshooting - faq - license publish: mode: \"pr\" # \"commit\" | \"pr\" | \"dry-run\" branch_prefix: \"docgen/\" labels: - \"docs:auto\" update_existing: true # refresh an existing PR instead of opening a new one analyzers: enabled: - language - build - dependencies - patterns exclude_paths: - \".git/\" - \"node_modules/\" - \"dist/\" ci: # Only update README if these paths change watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"pyproject.toml\" - \"Dockerfile\" ``` > If no `readme.templates_dir` is provided, docgen automatically picks up `docs/templates/` bundles in the repository root and supports built-in template packs via `readme.template_pack`. --- ## 6) Workflows ### 6.1 Initialization (Repo without README) 1. **Scan & Analyze** \u2192 Manifest + Signals + Embeddings. 2. **Prompt Build** with default templates, include \u201cgetting started\u201d suggestions. 3. **Generate Sections** sequentially (streaming). 4. **Post-process** \u2192 ToC, badges (build status placeholder), lint. 5. **Publish**: direct commit `README.md` + `.docgen/` artifacts. ### 6.2 Update on Commit/PR 1. **Detect changes** via Git diff; map files to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate**",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#4",
      "vector": {
        "to": 0.146943671674129,
        "sections": 0.11020775375559676,
        "using": 0.03673591791853225,
        "a": 0.11020775375559676,
        "rules": 0.03673591791853225,
        "matrix": 0.03673591791853225,
        "pom": 0.03673591791853225,
        "xml": 0.03673591791853225,
        "build": 0.18367958959266126,
        "gradle": 0.0734718358370645,
        "test": 0.0734718358370645,
        "quick": 0.0734718358370645,
        "start": 0.0734718358370645,
        "dockerfile": 0.03673591791853225,
        "k8s": 0.0734718358370645,
        "deployment": 0.0734718358370645,
        "src": 0.03673591791853225,
        "entrypoints": 0.0734718358370645,
        "architecture": 0.0734718358370645,
        "features": 0.0734718358370645,
        "2": 0.0734718358370645,
        "decide": 0.03673591791853225,
        "updateplan": 0.03673591791853225,
        "patch": 0.03673591791853225,
        "impacted": 0.03673591791853225,
        "regenerate": 0.11020775375559676,
        "only": 0.0734718358370645,
        "those": 0.03673591791853225,
        "3": 0.0734718358370645,
        "skip": 0.03673591791853225,
        "if": 0.146943671674129,
        "no": 0.0734718358370645,
        "changed": 0.03673591791853225,
        "file": 0.0734718358370645,
        "matches": 0.03673591791853225,
        "docgen": 0.146943671674129,
        "yml": 0.03673591791853225,
        "ci": 0.0734718358370645,
        "watched_globs": 0.03673591791853225,
        "allows": 0.03673591791853225,
        "avoid": 0.03673591791853225,
        "unnecessary": 0.03673591791853225,
        "runs": 0.03673591791853225,
        "4": 0.03673591791853225,
        "rag": 0.11020775375559676,
        "retrieval": 0.03673591791853225,
        "fetch": 0.03673591791853225,
        "top": 0.0734718358370645,
        "k": 0.0734718358370645,
        "chunks": 0.0734718358370645,
        "relevant": 0.03673591791853225,
        "each": 0.0734718358370645,
        "section": 0.18367958959266126,
        "5": 0.0734718358370645,
        "generate": 0.03673591791853225,
        "post": 0.0734718358370645,
        "process": 0.03673591791853225,
        "open": 0.03673591791853225,
        "pr": 0.03673591791853225,
        "with": 0.03673591791853225,
        "summary": 0.03673591791853225,
        "of": 0.03673591791853225,
        "deltas": 0.03673591791853225,
        "6": 0.0734718358370645,
        "dry": 0.0734718358370645,
        "run": 0.0734718358370645,
        "support": 0.0734718358370645,
        "update": 0.03673591791853225,
        "computes": 0.03673591791853225,
        "diffs": 0.03673591791853225,
        "and": 0.0734718358370645,
        "scorecards": 0.03673591791853225,
        "without": 0.03673591791853225,
        "writing": 0.03673591791853225,
        "or": 0.11020775375559676,
        "publishing": 0.03673591791853225,
        "manual": 0.03673591791853225,
        "full": 0.03673591791853225,
        "intro": 0.0734718358370645,
        "arch": 0.03673591791853225,
        "7": 0.03673591791853225,
        "contract": 0.03673591791853225,
        "readme": 0.0734718358370645,
        "what": 0.03673591791853225,
        "why": 0.03673591791853225,
        "who": 0.03673591791853225,
        "it": 0.03673591791853225,
        "s": 0.03673591791853225,
        "for": 0.0734718358370645,
        "key": 0.03673591791853225,
        "bullets": 0.03673591791853225,
        "grounded": 0.03673591791853225,
        "in": 0.03673591791853225,
        "real": 0.03673591791853225,
        "repo": 0.0734718358370645,
        "signals": 0.0734718358370645,
        "overview": 0.03673591791853225,
        "diagram": 0.03673591791853225,
        "ascii": 0.03673591791853225,
        "components": 0.03673591791853225,
        "minimal": 0.03673591791853225,
        "commands": 0.146943671674129,
        "per": 0.0734718358370645,
        "system": 0.0734718358370645,
        "configuration": 0.0734718358370645,
        "env": 0.03673591791853225,
        "vars": 0.03673591791853225,
        "files": 0.03673591791853225,
        "examples": 0.03673591791853225,
        "coverage": 0.03673591791853225,
        "hint": 0.03673591791853225,
        "container": 0.03673591791853225,
        "instructions": 0.03673591791853225,
        "detected": 0.11020775375559676,
        "troubleshooting": 0.03673591791853225,
        "common": 0.03673591791853225,
        "failures": 0.03673591791853225,
        "faq": 0.03673591791853225,
        "10": 0.0734718358370645,
        "concise": 0.03673591791853225,
        "q": 0.03673591791853225,
        "contributing": 0.0734718358370645,
        "md": 0.03673591791853225,
        "absent": 0.03673591791853225,
        "license": 0.03673591791853225,
        "templated": 0.03673591791853225,
        "must": 0.03673591791853225,
        "be": 0.0734718358370645,
        "independently": 0.03673591791853225,
        "regenerable": 0.03673591791853225,
        "self": 0.03673591791853225,
        "contained": 0.03673591791853225,
        "8": 0.03673591791853225,
        "prompting": 0.03673591791853225,
        "strategy": 0.03673591791853225,
        "local": 0.0734718358370645,
        "llm": 0.03673591791853225,
        "message": 0.0734718358370645,
        "fixed": 0.03673591791853225,
        "guardrails": 0.03673591791853225,
        "you": 0.03673591791853225,
        "are": 0.03673591791853225,
        "senior": 0.03673591791853225,
        "dev": 0.03673591791853225,
        "doc": 0.03673591791853225,
        "writer": 0.03673591791853225,
        "precise": 0.03673591791853225,
        "cite": 0.03673591791853225,
        "facts": 0.03673591791853225,
        "speculation": 0.03673591791853225,
        "never": 0.03673591791853225,
        "invent": 0.03673591791853225,
        "prefer": 0.03673591791853225,
        "by": 0.03673591791853225,
        "analyzers": 0.0734718358370645,
        "user": 0.03673591791853225,
        "objective": 0.03673591791853225,
        "constraints": 0.03673591791853225,
        "tone": 0.03673591791853225,
        "length": 0.03673591791853225,
        "inject": 0.03673591791853225,
        "provide": 0.03673591791853225,
        "style": 0.03673591791853225,
        "tokens": 0.03673591791853225,
        "headings": 0.03673591791853225,
        "code": 0.0734718358370645,
        "blocks": 0.03673591791853225,
        "tables": 0.03673591791853225,
        "filters": 0.03673591791853225,
        "refuse": 0.03673591791853225,
        "insufficient": 0.03673591791853225,
        "evidence": 0.03673591791853225,
        "fall": 0.03673591791853225,
        "back": 0.03673591791853225,
        "template": 0.03673591791853225,
        "stubs": 0.0734718358370645,
        "9": 0.03673591791853225,
        "language": 0.0734718358370645,
        "project": 0.03673591791853225,
        "poc": 0.0734718358370645,
        "targets": 0.03673591791853225,
        "tier": 0.0734718358370645,
        "1": 0.03673591791853225,
        "python": 0.03673591791853225,
        "poetry": 0.03673591791853225,
        "setuptools": 0.03673591791853225,
        "java": 0.03673591791853225,
        "maven": 0.03673591791853225,
        "spring": 0.0734718358370645,
        "boot": 0.03673591791853225,
        "node": 0.03673591791853225,
        "js": 0.03673591791853225,
        "npm": 0.03673591791853225,
        "pnpm": 0.03673591791853225,
        "express": 0.03673591791853225,
        "next": 0.03673591791853225,
        "soon": 0.03673591791853225,
        "go": 0.03673591791853225,
        "modules": 0.03673591791853225,
        "rust": 0.03673591791853225,
        "cargo": 0.03673591791853225,
        "ruby": 0.03673591791853225,
        "bundler": 0.03673591791853225,
        "php": 0.03673591791853225,
        "composer": 0.03673591791853225,
        "detection": 0.03673591791853225,
        "via": 0.03673591791853225,
        "heuristics": 0.03673591791853225,
        "optional": 0.03673591791853225,
        "tree": 0.03673591791853225,
        "sitter": 0.03673591791853225,
        "function": 0.03673591791853225,
        "class": 0.03673591791853225,
        "extraction": 0.03673591791853225,
        "pluggable": 0.03673591791853225,
        "entry": 0.03673591791853225,
        "points": 0.03673591791853225,
        "main": 0.03673591791853225,
        "springbootapplication": 0.03673591791853225,
        "fastapi": 0.03673591791853225,
        "app": 0.03673591791853225,
        "bin": 0.03673591791853225,
        "cmd": 0.03673591791853225,
        "interfaces": 0.03673591791853225,
        "skeleton": 0.03673591791853225,
        "__init__": 0.03673591791853225,
        "py": 0.5143028508594515,
        "cli": 0.0734718358370645,
        "click": 0.03673591791853225,
        "typer": 0.03673591791853225,
        "failsafe": 0.03673591791853225,
        "fail": 0.03673591791853225,
        "safe": 0.03673591791853225,
        "logging": 0.0734718358370645,
        "helpers": 0.03673591791853225,
        "orchestrator": 0.03673591791853225,
        "repo_scanner": 0.03673591791853225,
        "base": 0.03673591791853225,
        "analyzer": 0.03673591791853225,
        "abc": 0.03673591791853225,
        "dependencies": 0.03673591791853225,
        "patterns": 0.03673591791853225,
        "embedder": 0.03673591791853225,
        "embedding": 0.03673591791853225,
        "model": 0.03673591791853225,
        "store": 0.03673591791853225
      },
      "text": "to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate** \u2192 **Post-process** \u2192 **Open PR** with summary of deltas. 6. Dry-run support: `docgen update --dry-run` computes diffs and scorecards without writing or publishing. ### 6.3 Regenerate (Manual) * `docgen regenerate --full` or `--sections intro,arch`. --- ## 7) Section Contract (README) * **Intro**: what, why, who it\u2019s for * **Key Features**: bullets grounded in real repo signals * **Architecture**: overview diagram (ASCII) + components * **Quick Start**: minimal commands (per build system) * **Configuration**: env vars, files, examples * **Build & Test**: commands, coverage hint * **Deployment**: container/K8s instructions if detected * **Troubleshooting**: common failures * **FAQ**: 5\u201310 concise Q\\&A * **Contributing** (if `CONTRIBUTING.md` absent) * **License** (detected or templated) > Each section must be independently regenerable and self-contained. --- ## 8) Prompting Strategy (Local LLM) * **System message (fixed guardrails)**: * \u201cYou are a senior dev doc writer. Be precise. Cite repo facts only. No speculation.\u201d * \u201cNever invent commands. Prefer commands detected by analyzers.\u201d * **User message per section**: * Section objective + constraints (tone, length). * Inject **Signals** + **Top-k chunks** (RAG). * Provide **style tokens** (headings, code blocks, tables). * **Post-filters**: refuse if insufficient evidence; fall back to template stubs. --- ## 9) Language & Project Support (POC targets) * **Tier-1 (POC)**: Python (Poetry/Setuptools), Java (Maven/Gradle, Spring Boot), Node.js (npm/pnpm, Express/Next). * **Tier-2 (soon)**: Go (modules), Rust (Cargo), Ruby (Bundler), PHP (Composer). * Detection via: * File heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#5",
      "vector": {
        "heuristics": 0.028665182485640765,
        "optional": 0.0859955474569223,
        "tree": 0.028665182485640765,
        "sitter": 0.028665182485640765,
        "for": 0.11466072994256306,
        "function": 0.028665182485640765,
        "class": 0.05733036497128153,
        "extraction": 0.028665182485640765,
        "pluggable": 0.028665182485640765,
        "entry": 0.028665182485640765,
        "points": 0.028665182485640765,
        "main": 0.05733036497128153,
        "spring": 0.028665182485640765,
        "springbootapplication": 0.028665182485640765,
        "fastapi": 0.05733036497128153,
        "app": 0.14332591242820383,
        "bin": 0.028665182485640765,
        "cmd": 0.05733036497128153,
        "10": 0.028665182485640765,
        "interfaces": 0.028665182485640765,
        "code": 0.05733036497128153,
        "skeleton": 0.028665182485640765,
        "docgen": 0.0859955474569223,
        "__init__": 0.028665182485640765,
        "py": 0.7166295621410191,
        "cli": 0.0859955474569223,
        "click": 0.028665182485640765,
        "typer": 0.05733036497128153,
        "failsafe": 0.028665182485640765,
        "fail": 0.028665182485640765,
        "safe": 0.028665182485640765,
        "readme": 0.0859955474569223,
        "stubs": 0.028665182485640765,
        "logging": 0.05733036497128153,
        "configuration": 0.028665182485640765,
        "helpers": 0.028665182485640765,
        "orchestrator": 0.028665182485640765,
        "repo_scanner": 0.028665182485640765,
        "analyzers": 0.028665182485640765,
        "base": 0.028665182485640765,
        "analyzer": 0.0859955474569223,
        "abc": 0.14332591242820383,
        "language": 0.028665182485640765,
        "build": 0.14332591242820383,
        "dependencies": 0.028665182485640765,
        "entrypoints": 0.028665182485640765,
        "patterns": 0.028665182485640765,
        "rag": 0.028665182485640765,
        "embedder": 0.028665182485640765,
        "local": 0.05733036497128153,
        "embedding": 0.028665182485640765,
        "model": 0.028665182485640765,
        "store": 0.028665182485640765,
        "prompting": 0.028665182485640765,
        "builder": 0.028665182485640765,
        "jinja2": 0.028665182485640765,
        "templates": 0.05733036497128153,
        "token": 0.028665182485640765,
        "mgmt": 0.028665182485640765,
        "constants": 0.028665182485640765,
        "j2": 0.028665182485640765,
        "per": 0.028665182485640765,
        "section": 0.028665182485640765,
        "llm": 0.028665182485640765,
        "runner": 0.028665182485640765,
        "adapter": 0.028665182485640765,
        "ollama": 0.028665182485640765,
        "llama": 0.028665182485640765,
        "cpp": 0.028665182485640765,
        "postproc": 0.028665182485640765,
        "lint": 0.028665182485640765,
        "links": 0.05733036497128153,
        "markers": 0.0859955474569223,
        "toc": 0.05733036497128153,
        "git": 0.05733036497128153,
        "diff": 0.028665182485640765,
        "publisher": 0.028665182485640765,
        "config": 0.028665182485640765,
        "models": 0.05733036497128153,
        "python": 0.0859955474569223,
        "from": 0.05733036497128153,
        "import": 0.05733036497128153,
        "abstractmethod": 0.0859955474569223,
        "repomanifest": 0.0859955474569223,
        "signal": 0.05733036497128153,
        "def": 0.14332591242820383,
        "supports": 0.028665182485640765,
        "self": 0.05733036497128153,
        "manifest": 0.05733036497128153,
        "bool": 0.0859955474569223,
        "analyze": 0.05733036497128153,
        "list": 0.028665182485640765,
        "command": 0.0859955474569223,
        "init": 0.028665182485640765,
        "path": 0.0859955474569223,
        "str": 0.14332591242820383,
        "publish": 0.0859955474569223,
        "true": 0.028665182485640765,
        "update": 0.0859955474569223,
        "event": 0.028665182485640765,
        "commit": 0.05733036497128153,
        "diff_base": 0.028665182485640765,
        "origin": 0.028665182485640765,
        "regenerate": 0.028665182485640765,
        "sections": 0.11466072994256306,
        "full": 0.028665182485640765,
        "false": 0.028665182485640765,
        "service": 0.028665182485640765,
        "mode": 0.028665182485640765,
        "post": 0.1719910949138446,
        "generate": 0.028665182485640765,
        "arch": 0.028665182485640765,
        "quickstart": 0.0859955474569223,
        "get": 0.028665182485640765,
        "status": 0.028665182485640765,
        "run_id": 0.028665182485640765,
        "11": 0.028665182485640765,
        "change": 0.028665182485640765,
        "impact": 0.028665182485640765,
        "matrix": 0.028665182485640765,
        "examples": 0.028665182485640765,
        "changed": 0.05733036497128153,
        "pattern": 0.028665182485640765,
        "to": 0.0859955474569223,
        "rebuild": 0.028665182485640765,
        "notes": 0.028665182485640765,
        "pom": 0.028665182485640765,
        "xml": 0.028665182485640765,
        "gradle": 0.028665182485640765,
        "_and": 0.05733036497128153,
        "_test": 0.05733036497128153,
        "recompute": 0.028665182485640765,
        "commands": 0.028665182485640765,
        "requirements": 0.028665182485640765,
        "txt": 0.028665182485640765,
        "pyproject": 0.028665182485640765,
        "toml": 0.028665182485640765,
        "install": 0.028665182485640765,
        "steps": 0.028665182485640765,
        "dockerfile": 0.028665182485640765,
        "k8s": 0.028665182485640765,
        "deployment": 0.028665182485640765,
        "container": 0.028665182485640765,
        "changes": 0.028665182485640765,
        "src": 0.028665182485640765,
        "features": 0.028665182485640765,
        "architecture": 0.0859955474569223,
        "if": 0.028665182485640765,
        "entrypoint": 0.028665182485640765,
        "intro": 0.028665182485640765,
        "too": 0.028665182485640765,
        "docs": 0.028665182485640765,
        "all": 0.028665182485640765,
        "patch": 0.028665182485640765,
        "prefer": 0.028665182485640765,
        "doc": 0.028665182485640765,
        "driven": 0.028665182485640765,
        "md": 0.028665182485640765,
        "none": 0.028665182485640765,
        "unless": 0.028665182485640765,
        "empty": 0.028665182485640765,
        "prevent": 0.028665182485640765,
        "loops": 0.028665182485640765,
        "12": 0.028665182485640765,
        "processing": 0.028665182485640765,
        "rules": 0.028665182485640765,
        "headings": 0.028665182485640765,
        "start": 0.028665182485640765,
        "at": 0.028665182485640765,
        "title": 0.028665182485640765,
        "then": 0.028665182485640765,
        "add": 0.028665182485640765,
        "auto": 0.028665182485640765,
        "level": 0.028665182485640765,
        "3": 0.028665182485640765,
        "validate": 0.028665182485640765,
        "blocks": 0.028665182485640765,
        "bash": 0.028665182485640765,
        "convert": 0.028665182485640765,
        "absolute": 0.028665182485640765,
        "github": 0.028665182485640765,
        "relative": 0.028665182485640765,
        "where": 0.028665182485640765,
        "possible": 0.028665182485640765,
        "ensure": 0.028665182485640765,
        "idempotency": 0.028665182485640765,
        "only": 0.028665182485640765,
        "edit": 0.028665182485640765,
        "between": 0.028665182485640765,
        "managed": 0.028665182485640765,
        "begin": 0.028665182485640765,
        "end": 0.028665182485640765,
        "13": 0.028665182485640765,
        "ci": 0.028665182485640765,
        "integration": 0.028665182485640765,
        "pre": 0.028665182485640765,
        "forbid": 0.028665182485640765,
        "direct": 0.028665182485640765,
        "edits": 0.028665182485640765,
        "outside": 0.028665182485640765,
        "merge": 0.028665182485640765,
        "checkout": 0.028665182485640765,
        "remind": 0.028665182485640765
      },
      "text": "heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py prompting/ builder.py # Jinja2 templates, token mgmt constants.py templates/ # *.j2 per section llm/ runner.py # adapter for ollama/llama.cpp postproc/ lint.py links.py markers.py toc.py git/ diff.py publisher.py config.py models.py ``` **Analyzer ABC** ```python from abc import ABC, abstractmethod from .models import RepoManifest, Signal class Analyzer(ABC): @abstractmethod def supports(self, manifest: RepoManifest) -> bool: ... @abstractmethod def analyze(self, manifest: RepoManifest) -> list[Signal]: ... ``` **CLI (Typer)** ```python @app.command() def init(path: str = \".\", publish: bool = True): ... @app.command() def update(path: str = \".\", event: str = \"commit\", diff_base: str = \"origin/main\"): ... @app.command() def regenerate(sections: str = \"\", full: bool = False): ... ``` **FastAPI (optional service mode)** * `POST /analyze` * `POST /generate?sections=arch,quickstart` * `POST /publish` * `GET /status/{run_id}` --- ## 11) Change Impact Matrix (examples) | Changed Path Pattern | Sections to Rebuild | Notes | | ------------------------------------ | ---------------------------- | --------------------------------------- | | `pom.xml`, `build.gradle*` | build\\_and\\_test, quickstart | Recompute build commands | | `requirements.txt`, `pyproject.toml` | build\\_and\\_test, quickstart | Update install steps | | `Dockerfile`, `k8s/**` | deployment | Publish container changes | | `src/**`, `app/**`, `cmd/**` | features, architecture | If entrypoint changed, update intro too | | `docs/**` | all (patch) | Prefer doc-driven | | `README.md` | none (unless empty) | Prevent loops | --- ## 12) Post-Processing Rules * Headings start at `#` for title then `##` for sections. * Add **auto ToC** (<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#6",
      "vector": {
        "level": 0.04267895997763199,
        "3": 0.12803687993289598,
        "validate": 0.04267895997763199,
        "code": 0.04267895997763199,
        "blocks": 0.04267895997763199,
        "bash": 0.04267895997763199,
        "python": 0.08535791995526398,
        "convert": 0.04267895997763199,
        "absolute": 0.04267895997763199,
        "github": 0.12803687993289598,
        "links": 0.04267895997763199,
        "to": 0.08535791995526398,
        "relative": 0.04267895997763199,
        "where": 0.04267895997763199,
        "possible": 0.08535791995526398,
        "ensure": 0.04267895997763199,
        "idempotency": 0.04267895997763199,
        "only": 0.12803687993289598,
        "edit": 0.04267895997763199,
        "between": 0.04267895997763199,
        "managed": 0.08535791995526398,
        "markers": 0.12803687993289598,
        "docgen": 0.21339479988815996,
        "begin": 0.04267895997763199,
        "architecture": 0.21339479988815996,
        "end": 0.04267895997763199,
        "13": 0.04267895997763199,
        "git": 0.08535791995526398,
        "ci": 0.08535791995526398,
        "integration": 0.04267895997763199,
        "local": 0.12803687993289598,
        "pre": 0.04267895997763199,
        "commit": 0.08535791995526398,
        "forbid": 0.04267895997763199,
        "direct": 0.04267895997763199,
        "readme": 0.12803687993289598,
        "edits": 0.04267895997763199,
        "outside": 0.04267895997763199,
        "optional": 0.12803687993289598,
        "post": 0.12803687993289598,
        "merge": 0.04267895997763199,
        "checkout": 0.08535791995526398,
        "remind": 0.04267895997763199,
        "run": 0.04267895997763199,
        "update": 0.12803687993289598,
        "gitlab": 0.04267895997763199,
        "bitbucket": 0.04267895997763199,
        "on": 0.04267895997763199,
        "push": 0.04267895997763199,
        "pr": 0.25607375986579195,
        "1": 0.12803687993289598,
        "repo": 0.08535791995526398,
        "2": 0.17071583991052797,
        "event": 0.04267895997763199,
        "diff": 0.08535791995526398,
        "base": 0.04267895997763199,
        "base_sha": 0.04267895997763199,
        "if": 0.12803687993289598,
        "changes": 0.04267895997763199,
        "open": 0.04267895997763199,
        "with": 0.04267895997763199,
        "labeled": 0.04267895997763199,
        "docs": 0.08535791995526398,
        "auto": 0.04267895997763199,
        "tokenless": 0.04267895997763199,
        "mode": 0.12803687993289598,
        "created": 0.04267895997763199,
        "from": 0.08535791995526398,
        "a": 0.04267895997763199,
        "app": 0.04267895997763199,
        "bot": 0.04267895997763199,
        "account": 0.04267895997763199,
        "14": 0.04267895997763199,
        "quality": 0.04267895997763199,
        "gates": 0.04267895997763199,
        "evaluation": 0.04267895997763199,
        "consistency": 0.04267895997763199,
        "checks": 0.04267895997763199,
        "commands": 0.08535791995526398,
        "exist": 0.04267895997763199,
        "in": 0.12803687993289598,
        "ports": 0.04267895997763199,
        "env": 0.04267895997763199,
        "vars": 0.04267895997763199,
        "match": 0.04267895997763199,
        "configs": 0.04267895997763199,
        "no": 0.08535791995526398,
        "hallucinations": 0.04267895997763199,
        "reject": 0.04267895997763199,
        "new": 0.04267895997763199,
        "facts": 0.04267895997763199,
        "not": 0.04267895997763199,
        "found": 0.08535791995526398,
        "signals": 0.08535791995526398,
        "rag": 0.08535791995526398,
        "style": 0.04267895997763199,
        "concise": 0.04267895997763199,
        "paragraphs": 0.04267895997763199,
        "actionable": 0.04267895997763199,
        "filler": 0.04267895997763199,
        "marketing": 0.04267895997763199,
        "scorecard": 0.04267895997763199,
        "0": 0.04267895997763199,
        "100": 0.04267895997763199,
        "coverage": 0.04267895997763199,
        "of": 0.08535791995526398,
        "required": 0.04267895997763199,
        "sections": 0.08535791995526398,
        "30": 0.04267895997763199,
        "buildability": 0.04267895997763199,
        "quick": 0.08535791995526398,
        "start": 0.04267895997763199,
        "20": 0.12803687993289598,
        "link": 0.04267895997763199,
        "validity": 0.04267895997763199,
        "10": 0.12803687993289598,
        "alignment": 0.04267895997763199,
        "w": 0.04267895997763199,
        "change": 0.04267895997763199,
        "set": 0.04267895997763199,
        "lint": 0.04267895997763199,
        "reviewer": 0.04267895997763199,
        "feedback": 0.04267895997763199,
        "loop": 0.04267895997763199,
        "15": 0.04267895997763199,
        "security": 0.04267895997763199,
        "privacy": 0.04267895997763199,
        "llm": 0.08535791995526398,
        "and": 0.04267895997763199,
        "embedding": 0.04267895997763199,
        "models": 0.04267895997763199,
        "respect": 0.04267895997763199,
        "gitignore": 0.04267895997763199,
        "configurable": 0.04267895997763199,
        "exclude_paths": 0.04267895997763199,
        "never": 0.04267895997763199,
        "index": 0.04267895997763199,
        "large": 0.04267895997763199,
        "binaries": 0.04267895997763199,
        "secret": 0.08535791995526398,
        "files": 0.08535791995526398,
        "simple": 0.04267895997763199,
        "scan": 0.04267895997763199,
        "block": 0.04267895997763199,
        "16": 0.04267895997763199,
        "mvp": 0.04267895997763199,
        "plan": 0.04267895997763199,
        "weeks": 0.04267895997763199,
        "suggested": 0.04267895997763199,
        "breakdown": 0.04267895997763199,
        "core": 0.04267895997763199,
        "path": 0.04267895997763199,
        "cli": 0.04267895997763199,
        "scanner": 0.04267895997763199,
        "language": 0.04267895997763199,
        "build": 0.04267895997763199,
        "analyzers": 0.04267895997763199,
        "java": 0.04267895997763199,
        "node": 0.04267895997763199,
        "prompt": 0.04267895997763199,
        "builder": 0.04267895997763199,
        "runner": 0.04267895997763199,
        "ollama": 0.04267895997763199,
        "adapter": 0.04267895997763199,
        "processor": 0.04267895997763199,
        "publisher": 0.04267895997763199,
        "lite": 0.04267895997763199,
        "embed": 0.04267895997763199,
        "existing": 0.04267895997763199,
        "top": 0.04267895997763199,
        "largest": 0.04267895997763199,
        "source": 0.04267895997763199,
        "heads": 0.04267895997763199,
        "triggers": 0.04267895997763199,
        "single": 0.04267895997763199,
        "as": 0.08535791995526398,
        "stretch": 0.04267895997763199,
        "4": 0.04267895997763199,
        "templates": 0.08535791995526398,
        "8": 0.04267895997763199,
        "jinja2": 0.17071583991052797,
        "5": 0.04267895997763199,
        "config": 0.04267895997763199,
        "yml": 0.04267895997763199,
        "minimal": 0.04267895997763199,
        "17": 0.12803687993289598,
        "example": 0.04267895997763199,
        "section": 0.04267895997763199,
        "template": 0.04267895997763199,
        "j2": 0.08535791995526398,
        "project_name": 0.08535791995526398,
        "is": 0.04267895997763199,
        "structured": 0.04267895997763199,
        "ascii": 0.04267895997763199,
        "_architecture": 0.04267895997763199,
        "key": 0.04267895997763199,
        "components": 0.08535791995526398,
        "for": 0.04267895997763199,
        "comp": 0.12803687993289598,
        "name": 0.04267895997763199,
        "summary": 0.04267895997763199,
        "endfor": 0.04267895997763199,
        "data": 0.04267895997763199,
        "flow": 0.04267895997763199,
        "data_flow": 0.04267895997763199,
        "generated": 0.04267895997763199,
        "detected": 0.04267895997763199,
        "signals_summary": 0.04267895997763199,
        "frame": 0.04267895997763199,
        "composed": 0.04267895997763199,
        "intro": 0.04267895997763199,
        "features": 0.08535791995526398,
        "include": 0.04267895997763199
      },
      "text": "(<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to run `docgen update` (optional). ### CI (GitHub/GitLab/Bitbucket) * On push/PR: 1. Checkout repo. 2. `docgen update --event pr --diff-base $BASE_SHA` 3. If changes \u2192 open/update PR with labeled `docs:auto`. * Tokenless mode possible if PR created from a GitHub App/bot account. --- ## 14) Quality Gates & Evaluation * **Consistency checks**: commands exist in repo; ports/env vars match configs. * **No hallucinations**: reject new facts not found in signals/RAG. * **Style**: concise paragraphs, actionable commands, no filler marketing. * **Scorecard** (0\u2013100): * Coverage of required sections (30) * Buildability of quick start (20) * Link validity (10) * Diff alignment w/ change set (20) * Lint (10) * Reviewer feedback loop (10) --- ## 15) Security & Privacy * **Local only** LLM and embedding models. * Respect `.gitignore` + configurable `exclude_paths`. * Never index large binaries/secret files. * Optional simple **secret scan**; block if found. --- ## 16) MVP Plan (2 weeks suggested breakdown) 1. **Core path**: CLI, Scanner, Language+Build analyzers (Python/Java/Node), Prompt Builder, Local LLM runner (Ollama adapter), Post-processor, Git Publisher (PR). 2. **RAG Lite**: embed only `/docs`, existing `README`, top 20 largest source files\u2019 heads. 3. **Triggers**: single \u201ccommit\u201d mode; PR mode as stretch. 4. **Templates**: 8 sections, Jinja2; managed markers. 5. **Config**: `.docgen.yml` minimal. --- ## 17) Example Templates ### 17.1 Section Template (Jinja2 \u2014 architecture.j2) ```jinja2 ## Architecture {{ project_name }} is structured as: ``` {{ ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#7",
      "vector": {
        "ascii": 0.036588086663230115,
        "_architecture": 0.036588086663230115,
        "key": 0.14635234665292046,
        "components": 0.07317617332646023,
        "for": 0.2561166066426108,
        "comp": 0.10976425998969035,
        "in": 0.2195285199793807,
        "name": 0.036588086663230115,
        "summary": 0.036588086663230115,
        "endfor": 0.036588086663230115,
        "data": 0.036588086663230115,
        "flow": 0.036588086663230115,
        "data_flow": 0.036588086663230115,
        "generated": 0.036588086663230115,
        "from": 0.036588086663230115,
        "detected": 0.036588086663230115,
        "signals": 0.036588086663230115,
        "signals_summary": 0.036588086663230115,
        "17": 0.036588086663230115,
        "2": 0.036588086663230115,
        "readme": 0.10976425998969035,
        "frame": 0.036588086663230115,
        "composed": 0.036588086663230115,
        "jinja2": 0.036588086663230115,
        "project_name": 0.036588086663230115,
        "intro": 0.10976425998969035,
        "features": 0.10976425998969035,
        "include": 0.036588086663230115,
        "architecture": 0.07317617332646023,
        "j2": 0.036588086663230115,
        "quick": 0.07317617332646023,
        "start": 0.2195285199793807,
        "quickstart": 0.036588086663230115,
        "configuration": 0.07317617332646023,
        "build": 0.14635234665292046,
        "test": 0.036588086663230115,
        "build_and_test": 0.07317617332646023,
        "deployment": 0.10976425998969035,
        "troubleshooting": 0.07317617332646023,
        "faq": 0.07317617332646023,
        "license": 0.07317617332646023,
        "18": 0.036588086663230115,
        "minimal": 0.036588086663230115,
        "python": 0.14635234665292046,
        "snippets": 0.036588086663230115,
        "change": 0.036588086663230115,
        "impact": 0.036588086663230115,
        "heuristic": 0.036588086663230115,
        "section_rules": 0.07317617332646023,
        "pom": 0.10976425998969035,
        "xml": 0.10976425998969035,
        "gradle": 0.07317617332646023,
        "requirements": 0.10976425998969035,
        "txt": 0.10976425998969035,
        "pyproject": 0.036588086663230115,
        "toml": 0.036588086663230115,
        "package": 0.07317617332646023,
        "json": 0.07317617332646023,
        "dockerfile": 0.07317617332646023,
        "k8s": 0.036588086663230115,
        "src": 0.10976425998969035,
        "app": 0.10976425998969035,
        "cmd": 0.10976425998969035,
        "def": 0.07317617332646023,
        "sections_from_diff": 0.036588086663230115,
        "paths": 0.07317617332646023,
        "list": 0.036588086663230115,
        "str": 0.2195285199793807,
        "set": 0.07317617332646023,
        "out": 0.10976425998969035,
        "section": 0.07317617332646023,
        "patterns": 0.10976425998969035,
        "if": 0.18294043331615056,
        "any": 0.036588086663230115,
        "p": 0.10976425998969035,
        "pat": 0.07317617332646023,
        "startswith": 0.036588086663230115,
        "add": 0.036588086663230115,
        "return": 0.10976425998969035,
        "or": 0.10976425998969035,
        "fall": 0.036588086663230115,
        "back": 0.036588086663230115,
        "to": 0.07317617332646023,
        "uncertain": 0.036588086663230115,
        "managed": 0.036588086663230115,
        "markers": 0.07317617332646023,
        "patch": 0.036588086663230115,
        "replace_block": 0.036588086663230115,
        "md": 0.18294043331615056,
        "new": 0.07317617332646023,
        "f": 0.10976425998969035,
        "docgen": 0.18294043331615056,
        "begin": 0.036588086663230115,
        "end": 0.18294043331615056,
        "and": 0.036588086663230115,
        "pre": 0.07317617332646023,
        "rest": 0.07317617332646023,
        "split": 0.07317617332646023,
        "1": 0.07317617332646023,
        "_": 0.036588086663230115,
        "post": 0.07317617332646023,
        "n": 0.07317617332646023,
        "insert": 0.036588086663230115,
        "missing": 0.036588086663230115,
        "19": 0.036588086663230115,
        "open": 0.036588086663230115,
        "questions": 0.036588086663230115,
        "trade": 0.036588086663230115,
        "offs": 0.036588086663230115,
        "embeddings": 0.036588086663230115,
        "use": 0.036588086663230115,
        "a": 0.14635234665292046,
        "tiny": 0.036588086663230115,
        "local": 0.036588086663230115,
        "model": 0.07317617332646023,
        "vs": 0.07317617332646023,
        "rule": 0.036588086663230115,
        "based": 0.036588086663230115,
        "retrieval": 0.036588086663230115,
        "mvp": 0.036588086663230115,
        "tree": 0.036588086663230115,
        "sitter": 0.036588086663230115,
        "adds": 0.036588086663230115,
        "power": 0.036588086663230115,
        "but": 0.036588086663230115,
        "increases": 0.036588086663230115,
        "footprint": 0.036588086663230115,
        "gate": 0.036588086663230115,
        "behind": 0.036588086663230115,
        "flag": 0.036588086663230115,
        "pr": 0.10976425998969035,
        "author": 0.036588086663230115,
        "bot": 0.036588086663230115,
        "account": 0.036588086663230115,
        "developer": 0.036588086663230115,
        "token": 0.036588086663230115,
        "decide": 0.036588086663230115,
        "per": 0.036588086663230115,
        "environment": 0.036588086663230115,
        "markdown": 0.036588086663230115,
        "diffs": 0.036588086663230115,
        "keep": 0.036588086663230115,
        "sections": 0.036588086663230115,
        "atomic": 0.036588086663230115,
        "minimize": 0.036588086663230115,
        "noisy": 0.036588086663230115,
        "prs": 0.036588086663230115,
        "20": 0.036588086663230115,
        "example": 0.036588086663230115,
        "yml": 0.036588086663230115,
        "mixed": 0.036588086663230115,
        "repo": 0.036588086663230115,
        "yaml": 0.036588086663230115,
        "llm": 0.036588086663230115,
        "runner": 0.036588086663230115,
        "ollama": 0.036588086663230115,
        "llama3": 0.036588086663230115,
        "8b": 0.036588086663230115,
        "instruct": 0.036588086663230115,
        "temperature": 0.036588086663230115,
        "0": 0.036588086663230115,
        "15": 0.036588086663230115,
        "style": 0.036588086663230115,
        "comprehensive": 0.036588086663230115,
        "publish": 0.036588086663230115,
        "mode": 0.036588086663230115,
        "branch_prefix": 0.036588086663230115,
        "analyzers": 0.036588086663230115,
        "enabled": 0.036588086663230115,
        "language": 0.036588086663230115,
        "dependencies": 0.036588086663230115,
        "exclude_paths": 0.036588086663230115,
        "git": 0.036588086663230115,
        "node_modules": 0.036588086663230115,
        "dist": 0.036588086663230115,
        "target": 0.036588086663230115,
        "ci": 0.036588086663230115,
        "watched_globs": 0.036588086663230115,
        "21": 0.036588086663230115,
        "success": 0.036588086663230115,
        "criteria": 0.036588086663230115,
        "poc": 0.036588086663230115,
        "3": 0.036588086663230115,
        "diverse": 0.036588086663230115,
        "repos": 0.036588086663230115,
        "cli": 0.036588086663230115,
        "spring": 0.036588086663230115,
        "boot": 0.036588086663230115,
        "api": 0.036588086663230115,
        "node": 0.036588086663230115,
        "webapp": 0.036588086663230115,
        "init": 0.036588086663230115,
        "produces": 0.036588086663230115,
        "working": 0.036588086663230115,
        "linted": 0.036588086663230115,
        "with": 0.036588086663230115,
        "runnable": 0.036588086663230115,
        "on": 0.036588086663230115,
        "changing": 0.036588086663230115
      },
      "text": "ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick Start {{ quickstart }} ## Configuration {{ configuration }} ## Build & Test {{ build_and_test }} ## Deployment {{ deployment }} ## Troubleshooting {{ troubleshooting }} ## FAQ {{ faq }} ## License {{ license }} ``` --- ## 18) Minimal Python Snippets **Change impact heuristic** ```python SECTION_RULES = [ (\"build_and_test\", [\"pom.xml\",\"build.gradle\",\"requirements.txt\",\"pyproject.toml\",\"package.json\"]), (\"deployment\", [\"Dockerfile\",\"k8s/\"]), (\"architecture\", [\"src/\",\"app/\",\"cmd/\"]), (\"features\", [\"src/\",\"app/\",\"cmd/\"]), ] def sections_from_diff(paths: list[str]) -> set[str]: out = set() for section, patterns in SECTION_RULES: if any(p for p in paths for pat in patterns if p.startswith(pat)): out.add(section) return out or {\"intro\"} # fall back to intro if uncertain ``` **Managed markers (patch)** ```python def replace_block(md: str, key: str, new: str) -> str: start = f\"<!-- docgen:begin:{key} -->\" end = f\"<!-- docgen:end:{key} -->\" if start in md and end in md: pre, rest = md.split(start, 1) _, post = rest.split(end, 1) return f\"{pre}{start}\\n{new}\\n{end}{post}\" return md # or insert markers if missing ``` --- ## 19) Open Questions / Trade-offs * **Embeddings**: Use a tiny local model vs. rule-based retrieval for MVP? * **Tree-sitter**: Adds power but increases footprint\u2014gate behind a flag. * **PR author**: Bot account vs. developer token\u2014decide per environment. * **Markdown diffs**: Keep sections atomic to minimize noisy PRs. --- ## 20) Example `.docgen.yml` for a Mixed Repo ```yaml llm: runner: \"ollama\" model: \"llama3:8b-instruct\" temperature: 0.15 readme: style: \"comprehensive\" publish: mode: \"pr\" branch_prefix: \"docgen/\" analyzers: enabled: [language, build, dependencies, patterns] exclude_paths: [\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#8",
      "vector": {
        "git": 0.08838834764831843,
        "node_modules": 0.08838834764831843,
        "dist": 0.08838834764831843,
        "target": 0.08838834764831843,
        "ci": 0.08838834764831843,
        "watched_globs": 0.08838834764831843,
        "src": 0.08838834764831843,
        "app": 0.08838834764831843,
        "cmd": 0.08838834764831843,
        "pom": 0.17677669529663687,
        "xml": 0.17677669529663687,
        "build": 0.08838834764831843,
        "gradle": 0.08838834764831843,
        "package": 0.08838834764831843,
        "json": 0.08838834764831843,
        "requirements": 0.17677669529663687,
        "txt": 0.17677669529663687,
        "dockerfile": 0.08838834764831843,
        "21": 0.08838834764831843,
        "success": 0.08838834764831843,
        "criteria": 0.08838834764831843,
        "poc": 0.08838834764831843,
        "for": 0.08838834764831843,
        "3": 0.08838834764831843,
        "diverse": 0.08838834764831843,
        "repos": 0.08838834764831843,
        "python": 0.08838834764831843,
        "cli": 0.17677669529663687,
        "spring": 0.08838834764831843,
        "boot": 0.08838834764831843,
        "api": 0.08838834764831843,
        "node": 0.08838834764831843,
        "webapp": 0.08838834764831843,
        "docgen": 0.17677669529663687,
        "init": 0.17677669529663687,
        "produces": 0.08838834764831843,
        "a": 0.2651650429449553,
        "working": 0.08838834764831843,
        "linted": 0.08838834764831843,
        "readme": 0.08838834764831843,
        "with": 0.08838834764831843,
        "runnable": 0.08838834764831843,
        "quick": 0.08838834764831843,
        "start": 0.08838834764831843,
        "on": 0.08838834764831843,
        "changing": 0.08838834764831843,
        "or": 0.08838834764831843,
        "pr": 0.08838834764831843,
        "updates": 0.08838834764831843,
        "only": 0.08838834764831843,
        "relevant": 0.08838834764831843,
        "sections": 0.08838834764831843,
        "no": 0.08838834764831843,
        "hallucinated": 0.08838834764831843,
        "commands": 0.08838834764831843,
        "links": 0.08838834764831843,
        "and": 0.2651650429449553,
        "badges": 0.08838834764831843,
        "validate": 0.08838834764831843,
        "style": 0.08838834764831843,
        "consistent": 0.08838834764831843,
        "if": 0.08838834764831843,
        "you": 0.17677669529663687,
        "want": 0.08838834764831843,
        "i": 0.08838834764831843,
        "can": 0.17677669529663687,
        "spin": 0.08838834764831843,
        "up": 0.08838834764831843,
        "starter": 0.08838834764831843,
        "repo": 0.08838834764831843,
        "layout": 0.08838834764831843,
        "analyzers": 0.08838834764831843,
        "templates": 0.08838834764831843,
        "simple": 0.08838834764831843,
        "ollama": 0.08838834764831843,
        "adapter": 0.08838834764831843,
        "so": 0.08838834764831843,
        "drop": 0.08838834764831843,
        "it": 0.08838834764831843,
        "into": 0.08838834764831843,
        "your": 0.08838834764831843,
        "environment": 0.08838834764831843,
        "run": 0.08838834764831843,
        "right": 0.08838834764831843,
        "away": 0.08838834764831843
      },
      "text": "[\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR updates only relevant sections. * No hallucinated commands; links and badges validate; style consistent. --- If you want, I can spin up a **starter repo layout** (CLI, analyzers, templates, and a simple Ollama adapter) so you can drop it into your environment and run `docgen init` right away.",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    }
  ],
  "faq": [
    {
      "id": "AGENTS.md#0",
      "vector": {
        "repository": 0.06757373783994859,
        "guidelines": 0.1013606067599229,
        "project": 0.033786868919974296,
        "structure": 0.033786868919974296,
        "module": 0.06757373783994859,
        "organization": 0.033786868919974296,
        "spec": 0.06757373783994859,
        "md": 0.033786868919974296,
        "captures": 0.033786868919974296,
        "the": 0.27029495135979437,
        "end": 0.06757373783994859,
        "to": 0.1013606067599229,
        "architecture": 0.033786868919974296,
        "component": 0.06757373783994859,
        "contracts": 0.033786868919974296,
        "and": 0.43922929595966587,
        "must": 0.033786868919974296,
        "be": 0.033786868919974296,
        "updated": 0.033786868919974296,
        "whenever": 0.033786868919974296,
        "responsibilities": 0.033786868919974296,
        "shift": 0.033786868919974296,
        "place": 0.033786868919974296,
        "python": 0.2027212135198458,
        "source": 0.033786868919974296,
        "in": 0.16893434459987147,
        "a": 0.23650808243982008,
        "docgen": 0.16893434459987147,
        "package": 0.033786868919974296,
        "create": 0.033786868919974296,
        "it": 0.033786868919974296,
        "when": 0.06757373783994859,
        "implementation": 0.033786868919974296,
        "starts": 0.033786868919974296,
        "with": 0.16893434459987147,
        "clear": 0.033786868919974296,
        "submodules": 0.033786868919974296,
        "for": 0.1013606067599229,
        "orchestrator": 0.1013606067599229,
        "analyzers": 0.033786868919974296,
        "runners": 0.033786868919974296,
        "stores": 0.033786868919974296,
        "avoid": 0.06757373783994859,
        "leaving": 0.033786868919974296,
        "logic": 0.033786868919974296,
        "repo": 0.06757373783994859,
        "root": 0.033786868919974296,
        "mirror": 0.033786868919974296,
        "runtime": 0.033786868919974296,
        "modules": 0.06757373783994859,
        "under": 0.1013606067599229,
        "tests": 0.2027212135198458,
        "using": 0.033786868919974296,
        "test_": 0.033786868919974296,
        "py": 0.1013606067599229,
        "co": 0.033786868919974296,
        "locate": 0.033786868919974296,
        "fixtures": 0.06757373783994859,
        "_fixtures": 0.033786868919974296,
        "so": 0.13514747567989718,
        "imports": 0.06757373783994859,
        "stay": 0.06757373783994859,
        "clean": 0.033786868919974296,
        "reusable": 0.033786868919974296,
        "keep": 0.13514747567989718,
        "throwaway": 0.033786868919974296,
        "experiments": 0.033786868919974296,
        "inside": 0.033786868919974296,
        "an": 0.06757373783994859,
        "ignored": 0.033786868919974296,
        "sandbox": 0.033786868919974296,
        "directory": 0.033786868919974296,
        "scans": 0.033786868919974296,
        "remain": 0.033786868919974296,
        "focused": 0.033786868919974296,
        "on": 0.06757373783994859,
        "production": 0.033786868919974296,
        "code": 0.033786868919974296,
        "paths": 0.033786868919974296,
        "build": 0.033786868919974296,
        "test": 0.06757373783994859,
        "development": 0.033786868919974296,
        "commands": 0.033786868919974296,
        "m": 0.16893434459987147,
        "venv": 0.1013606067599229,
        "followed": 0.033786868919974296,
        "by": 0.033786868919974296,
        "scripts": 0.06757373783994859,
        "activate": 0.033786868919974296,
        "aligns": 0.033786868919974296,
        "local": 0.033786868919974296,
        "shells": 0.033786868919974296,
        "pycharm": 0.033786868919974296,
        "interpreter": 0.033786868919974296,
        "settings": 0.033786868919974296,
        "pip": 0.033786868919974296,
        "install": 0.033786868919974296,
        "e": 0.033786868919974296,
        "dev": 0.033786868919974296,
        "after": 0.06757373783994859,
        "pyproject": 0.033786868919974296,
        "toml": 0.033786868919974296,
        "is": 0.1013606067599229,
        "committed": 0.033786868919974296,
        "exposes": 0.033786868919974296,
        "cli": 0.033786868919974296,
        "plugins": 0.033786868919974296,
        "editable": 0.033786868919974296,
        "form": 0.033786868919974296,
        "without": 0.033786868919974296,
        "repeated": 0.033786868919974296,
        "reinstalls": 0.033786868919974296,
        "pytest": 0.06757373783994859,
        "runs": 0.033786868919974296,
        "full": 0.033786868919974296,
        "suite": 0.033786868919974296,
        "append": 0.033786868919974296,
        "k": 0.033786868919974296,
        "pattern": 0.033786868919974296,
        "iterate": 0.033786868919974296,
        "single": 0.06757373783994859,
        "analyzer": 0.06757373783994859,
        "or": 0.06757373783994859,
        "pipeline": 0.1013606067599229,
        "stage": 0.033786868919974296,
        "mypy": 0.033786868919974296,
        "ruff": 0.033786868919974296,
        "check": 0.033786868919974296,
        "catch": 0.033786868919974296,
        "type": 0.033786868919974296,
        "drift": 0.033786868919974296,
        "lint": 0.033786868919974296,
        "violations": 0.033786868919974296,
        "before": 0.06757373783994859,
        "readme": 0.06757373783994859,
        "generation": 0.06757373783994859,
        "attempted": 0.033786868919974296,
        "coding": 0.033786868919974296,
        "style": 0.033786868919974296,
        "naming": 0.033786868919974296,
        "conventions": 0.033786868919974296,
        "follow": 0.06757373783994859,
        "pep": 0.033786868919974296,
        "8": 0.033786868919974296,
        "4": 0.033786868919974296,
        "space": 0.033786868919974296,
        "indents": 0.033786868919974296,
        "explicit": 0.033786868919974296,
        "example": 0.033786868919974296,
        "from": 0.033786868919974296,
        "import": 0.033786868919974296,
        "static": 0.033786868919974296,
        "tooling": 0.033786868919974296,
        "can": 0.033786868919974296,
        "trace": 0.033786868919974296,
        "dependencies": 0.033786868919974296,
        "name": 0.033786868919974296,
        "their": 0.033786868919974296,
        "roles": 0.033786868919974296,
        "prompt_builder": 0.033786868919974296,
        "functions": 0.033786868919974296,
        "snake_case": 0.033786868919974296,
        "descriptive": 0.06757373783994859,
        "nouns": 0.033786868919974296,
        "first": 0.033786868919974296,
        "build_prompt_section": 0.033786868919974296,
        "run": 0.033786868919974296,
        "black": 0.033786868919974296,
        "commits": 0.06757373783994859,
        "manual": 0.033786868919974296,
        "reformatting": 0.033786868919974296,
        "unless": 0.033786868919974296,
        "formatter": 0.033786868919974296,
        "cannot": 0.033786868919974296,
        "resolve": 0.033786868919974296,
        "construct": 0.033786868919974296,
        "testing": 0.06757373783994859,
        "default": 0.033786868919974296,
        "harness": 0.033786868919974296,
        "every": 0.033786868919974296,
        "needs": 0.033786868919974296,
        "unit": 0.033786868919974296,
        "coverage": 0.033786868919974296,
        "plus": 0.033786868919974296,
        "integration": 0.06757373783994859,
        "case": 0.033786868919974296,
        "that": 0.06757373783994859,
        "walks": 0.033786868919974296,
        "snapshot": 0.033786868919974296,
        "through": 0.033786868919974296,
        "use": 0.033786868919974296,
        "names": 0.033786868919974296,
        "such": 0.033786868919974296,
        "as": 0.033786868919974296,
        "test_prompt_builder_handles_missing_signals": 0.033786868919974296,
        "arrange": 0.033786868919974296,
        "act": 0.033786868919974296,
        "assert": 0.033786868919974296,
        "comments": 0.033786868919974296,
        "minimal": 0.033786868919974296,
        "but": 0.033786868919974296,
        "intentional": 0.033786868919974296,
        "store": 0.033786868919974296,
        "regression": 0.033786868919974296,
        "generated": 0.033786868919974296,
        "slices": 0.033786868919974296,
        "data": 0.033786868919974296,
        "update": 0.033786868919974296,
        "them": 0.033786868919974296,
        "helper": 0.033786868919974296,
        "diffs": 0.033786868919974296,
        "reviewable": 0.033786868919974296,
        "commit": 0.033786868919974296,
        "pull": 0.033786868919974296,
        "request": 0.033786868919974296,
        "conventional": 0.033786868919974296,
        "feat": 0.033786868919974296,
        "fix": 0.033786868919974296,
        "docs": 0.033786868919974296,
        "subject": 0.033786868919974296,
        "lines": 0.033786868919974296,
        "72": 0.033786868919974296,
        "characters": 0.033786868919974296,
        "explain": 0.033786868919974296,
        "broader": 0.033786868919974296,
        "scope": 0.033786868919974296,
        "body": 0.033786868919974296,
        "multiple": 0.033786868919974296,
        "subsystems": 0.033786868919974296,
        "change": 0.033786868919974296,
        "bundle": 0.033786868919974296,
        "related": 0.033786868919974296,
        "work": 0.033786868919974296,
        "into": 0.033786868919974296,
        "pr": 0.033786868919974296,
        "includes": 0.033786868919974296,
        "summary": 0.033786868919974296,
        "notes": 0.033786868919974296,
        "links": 0.033786868919974296
      },
      "text": "# Repository Guidelines ## Project Structure & Module Organization - `spec/spec.md` captures the end-to-end architecture, component contracts, and must be updated whenever responsibilities shift. - Place Python source in a `docgen/` package (create it when implementation starts) with clear submodules for orchestrator, analyzers, runners, and stores; avoid leaving logic in the repo root. - Mirror runtime modules under `tests/` using `test_<module>.py`; co-locate fixtures in `tests/_fixtures/` so imports stay clean and reusable. - Keep throwaway experiments inside an ignored `sandbox/` directory so repository scans remain focused on production code paths. ## Build, Test, and Development Commands - `python -m venv .venv` followed by `.\\\\.venv\\\\Scripts\\\\activate` aligns local shells with the PyCharm interpreter settings. - `python -m pip install -e .[dev]` (after a `pyproject.toml` is committed) exposes the CLI and plugins in editable form without repeated reinstalls. - `python -m pytest` runs the full suite; append `-k <pattern>` to iterate on a single analyzer or pipeline stage. - `python -m mypy docgen` and `python -m ruff check docgen tests` catch type drift and lint violations before README generation is attempted. ## Coding Style & Naming Conventions - Follow PEP 8 with 4-space indents and explicit imports (for example, `from docgen.orchestrator import Pipeline`) so static tooling can trace dependencies. - Name modules after their roles (`orchestrator.py`, `prompt_builder.py`) and keep functions snake_case with descriptive nouns first (`build_prompt_section`). - Run `black docgen tests` before commits; avoid manual reformatting unless the formatter cannot resolve a construct. ## Testing Guidelines - Pytest is the default harness; every analyzer or pipeline component needs unit coverage plus an integration case under `tests/integration/` that walks a repo snapshot through generation. - Use descriptive test names such as `test_prompt_builder_handles_missing_signals` and keep Arrange-Act-Assert comments minimal but intentional. - Store regression fixtures for generated README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "AGENTS.md#1",
      "vector": {
        "readme": 0.1270001270001905,
        "slices": 0.06350006350009525,
        "under": 0.06350006350009525,
        "tests": 0.06350006350009525,
        "data": 0.06350006350009525,
        "and": 0.4445004445006667,
        "update": 0.06350006350009525,
        "them": 0.06350006350009525,
        "with": 0.06350006350009525,
        "helper": 0.06350006350009525,
        "scripts": 0.06350006350009525,
        "so": 0.06350006350009525,
        "diffs": 0.06350006350009525,
        "stay": 0.06350006350009525,
        "reviewable": 0.06350006350009525,
        "commit": 0.1270001270001905,
        "pull": 0.06350006350009525,
        "request": 0.06350006350009525,
        "guidelines": 0.06350006350009525,
        "follow": 0.06350006350009525,
        "conventional": 0.06350006350009525,
        "commits": 0.06350006350009525,
        "feat": 0.06350006350009525,
        "fix": 0.06350006350009525,
        "docs": 0.1270001270001905,
        "keep": 0.1270001270001905,
        "subject": 0.06350006350009525,
        "lines": 0.06350006350009525,
        "72": 0.06350006350009525,
        "characters": 0.06350006350009525,
        "explain": 0.06350006350009525,
        "broader": 0.06350006350009525,
        "scope": 0.06350006350009525,
        "in": 0.254000254000381,
        "the": 0.31750031750047625,
        "body": 0.06350006350009525,
        "when": 0.1270001270001905,
        "multiple": 0.06350006350009525,
        "subsystems": 0.06350006350009525,
        "change": 0.06350006350009525,
        "bundle": 0.06350006350009525,
        "related": 0.06350006350009525,
        "work": 0.1270001270001905,
        "into": 0.06350006350009525,
        "a": 0.254000254000381,
        "single": 0.06350006350009525,
        "pr": 0.1270001270001905,
        "that": 0.06350006350009525,
        "includes": 0.06350006350009525,
        "summary": 0.06350006350009525,
        "testing": 0.06350006350009525,
        "notes": 0.1270001270001905,
        "links": 0.06350006350009525,
        "to": 0.06350006350009525,
        "relevant": 0.06350006350009525,
        "issues": 0.06350006350009525,
        "or": 0.06350006350009525,
        "spec": 0.06350006350009525,
        "sections": 0.06350006350009525,
        "attach": 0.06350006350009525,
        "before": 0.1270001270001905,
        "after": 0.06350006350009525,
        "excerpts": 0.06350006350009525,
        "altering": 0.06350006350009525,
        "generation": 0.06350006350009525,
        "output": 0.06350006350009525,
        "run": 0.06350006350009525,
        "lint": 0.06350006350009525,
        "type": 0.06350006350009525,
        "check": 0.06350006350009525,
        "test": 0.06350006350009525,
        "commands": 0.06350006350009525,
        "opening": 0.06350006350009525,
        "paste": 0.06350006350009525,
        "condensed": 0.06350006350009525,
        "results": 0.06350006350009525,
        "description": 0.06350006350009525,
        "for": 0.06350006350009525,
        "quick": 0.06350006350009525,
        "verification": 0.06350006350009525,
        "environment": 0.1270001270001905,
        "tooling": 0.06350006350009525,
        "reuse": 0.06350006350009525,
        "local": 0.1270001270001905,
        "venv": 0.06350006350009525,
        "seeded": 0.06350006350009525,
        "by": 0.1270001270001905,
        "pycharm": 0.06350006350009525,
        "do": 0.06350006350009525,
        "not": 0.06350006350009525,
        "artifacts": 0.06350006350009525,
        "store": 0.06350006350009525,
        "secrets": 0.06350006350009525,
        "env": 0.06350006350009525,
        "consumed": 0.06350006350009525,
        "llm": 0.06350006350009525,
        "runner": 0.06350006350009525,
        "large": 0.06350006350009525,
        "model": 0.06350006350009525,
        "weights": 0.06350006350009525,
        "outside": 0.06350006350009525,
        "repository": 0.06350006350009525,
        "document": 0.06350006350009525,
        "their": 0.06350006350009525,
        "locations": 0.06350006350009525,
        "models": 0.06350006350009525,
        "md": 0.06350006350009525,
        "once": 0.06350006350009525,
        "integration": 0.06350006350009525,
        "begins": 0.06350006350009525
      },
      "text": "README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to relevant issues or spec sections; attach before/after README excerpts when altering generation output. - Run lint, type-check, and test commands before opening a PR and paste condensed results in the description for quick verification. ## Environment & Tooling Notes - Reuse the local `.venv` seeded by PyCharm; do not commit environment artifacts and store secrets in a `.env` consumed by the local LLM runner. - Keep large model weights outside the repository and document their locations in `docs/models.md` once integration work begins.",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "docs/ci/docgen-update.yml#0",
      "vector": {
        "name": 0.2773500981126145,
        "docgen": 0.1849000654084097,
        "update": 0.2311250817605121,
        "on": 0.09245003270420485,
        "push": 0.046225016352102424,
        "branches": 0.09245003270420485,
        "main": 0.13867504905630726,
        "pull_request": 0.13867504905630726,
        "jobs": 0.046225016352102424,
        "readme": 0.1849000654084097,
        "runs": 0.046225016352102424,
        "self": 0.046225016352102424,
        "hosted": 0.046225016352102424,
        "steps": 0.09245003270420485,
        "uses": 0.13867504905630726,
        "actions": 0.2311250817605121,
        "checkout": 0.046225016352102424,
        "v4": 0.09245003270420485,
        "with": 0.13867504905630726,
        "fetch": 0.046225016352102424,
        "depth": 0.046225016352102424,
        "0": 0.046225016352102424,
        "setup": 0.046225016352102424,
        "python": 0.2311250817605121,
        "v5": 0.046225016352102424,
        "version": 0.046225016352102424,
        "3": 0.046225016352102424,
        "11": 0.046225016352102424,
        "cache": 0.09245003270420485,
        "path": 0.046225016352102424,
        "pip": 0.2773500981126145,
        "key": 0.046225016352102424,
        "runner": 0.09245003270420485,
        "os": 0.09245003270420485,
        "hashfiles": 0.046225016352102424,
        "pyproject": 0.046225016352102424,
        "toml": 0.046225016352102424,
        "restore": 0.046225016352102424,
        "keys": 0.046225016352102424,
        "install": 0.13867504905630726,
        "dependencies": 0.046225016352102424,
        "run": 0.2311250817605121,
        "m": 0.13867504905630726,
        "upgrade": 0.046225016352102424,
        "e": 0.046225016352102424,
        "dev": 0.046225016352102424,
        "determine": 0.046225016352102424,
        "diff": 0.1849000654084097,
        "base": 0.2773500981126145,
        "id": 0.046225016352102424,
        "if": 0.09245003270420485,
        "github": 0.2311250817605121,
        "event_name": 0.046225016352102424,
        "then": 0.09245003270420485,
        "echo": 0.09245003270420485,
        "event": 0.046225016352102424,
        "sha": 0.046225016352102424,
        "github_output": 0.09245003270420485,
        "else": 0.046225016352102424,
        "origin": 0.046225016352102424,
        "fi": 0.09245003270420485,
        "env": 0.046225016352102424,
        "docgen_llm_base_url": 0.046225016352102424,
        "http": 0.046225016352102424,
        "localhost": 0.046225016352102424,
        "12434": 0.046225016352102424,
        "engines": 0.046225016352102424,
        "v1": 0.046225016352102424,
        "cli": 0.046225016352102424,
        "outputs": 0.046225016352102424,
        "commit": 0.09245003270420485,
        "md": 0.09245003270420485,
        "optional": 0.046225016352102424,
        "git": 0.1849000654084097,
        "status": 0.046225016352102424,
        "short": 0.046225016352102424,
        "grep": 0.046225016352102424,
        "q": 0.046225016352102424,
        "config": 0.09245003270420485,
        "user": 0.09245003270420485,
        "email": 0.046225016352102424,
        "users": 0.046225016352102424,
        "noreply": 0.046225016352102424,
        "com": 0.046225016352102424,
        "am": 0.046225016352102424,
        "docs": 0.046225016352102424,
        "via": 0.046225016352102424
      },
      "text": "name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted steps: - uses: actions/checkout@v4 with: fetch-depth: 0 - uses: actions/setup-python@v5 with: python-version: '3.11' - uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install dependencies run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README.md (optional) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi",
      "metadata": {
        "path": "docs/ci/docgen-update.yml",
        "tags": [
          "docs"
        ],
        "hash": "48bec2bc404707486fcb1661def194395cc581bf55cb2f610704d495663e6a14"
      }
    },
    {
      "id": "docs/ci/github-actions.md#0",
      "vector": {
        "github": 0.2528558164964056,
        "actions": 0.2212488394343549,
        "integration": 0.0316069770620507,
        "the": 0.18964186237230418,
        "workflow": 0.0632139541241014,
        "below": 0.0316069770620507,
        "runs": 0.0632139541241014,
        "docgen": 0.2212488394343549,
        "update": 0.18964186237230418,
        "on": 0.1264279082482028,
        "pushes": 0.0316069770620507,
        "and": 0.0316069770620507,
        "pull": 0.0316069770620507,
        "requests": 0.0316069770620507,
        "it": 0.0316069770620507,
        "assumes": 0.0316069770620507,
        "a": 0.0632139541241014,
        "self": 0.0632139541241014,
        "hosted": 0.1264279082482028,
        "runner": 0.15803488531025348,
        "or": 0.09482093118615209,
        "with": 0.18964186237230418,
        "network": 0.0632139541241014,
        "access": 0.0632139541241014,
        "to": 0.1264279082482028,
        "your": 0.0632139541241014,
        "local": 0.09482093118615209,
        "model": 0.0316069770620507,
        "runtime": 0.0316069770620507,
        "job": 0.0316069770620507,
        "skips": 0.0316069770620507,
        "early": 0.0316069770620507,
        "when": 0.0316069770620507,
        "no": 0.0316069770620507,
        "files": 0.0316069770620507,
        "match": 0.0316069770620507,
        "yml": 0.0316069770620507,
        "s": 0.0316069770620507,
        "ci": 0.0316069770620507,
        "watched_globs": 0.0316069770620507,
        "entries": 0.0316069770620507,
        "so": 0.0316069770620507,
        "that": 0.0316069770620507,
        "purely": 0.0316069770620507,
        "documentation": 0.0316069770620507,
        "only": 0.0316069770620507,
        "changes": 0.0316069770620507,
        "do": 0.0316069770620507,
        "not": 0.0316069770620507,
        "trigger": 0.0316069770620507,
        "generator": 0.0316069770620507,
        "yaml": 0.0316069770620507,
        "name": 0.3476767476825577,
        "push": 0.0316069770620507,
        "branches": 0.0632139541241014,
        "main": 0.09482093118615209,
        "pull_request": 0.09482093118615209,
        "jobs": 0.0316069770620507,
        "readme": 0.2212488394343549,
        "requires": 0.0316069770620507,
        "llm": 0.0316069770620507,
        "steps": 0.0632139541241014,
        "checkout": 0.0632139541241014,
        "repository": 0.0316069770620507,
        "uses": 0.1264279082482028,
        "v4": 0.09482093118615209,
        "fetch": 0.0316069770620507,
        "depth": 0.0316069770620507,
        "0": 0.0316069770620507,
        "set": 0.0316069770620507,
        "up": 0.0316069770620507,
        "python": 0.18964186237230418,
        "setup": 0.0316069770620507,
        "v5": 0.0316069770620507,
        "version": 0.0316069770620507,
        "3": 0.0316069770620507,
        "11": 0.0316069770620507,
        "cache": 0.09482093118615209,
        "pip": 0.2212488394343549,
        "dependencies": 0.0316069770620507,
        "path": 0.0632139541241014,
        "key": 0.0316069770620507,
        "os": 0.0632139541241014,
        "hashfiles": 0.0316069770620507,
        "pyproject": 0.0316069770620507,
        "toml": 0.0316069770620507,
        "restore": 0.0316069770620507,
        "keys": 0.0316069770620507,
        "install": 0.09482093118615209,
        "in": 0.0316069770620507,
        "editable": 0.0316069770620507,
        "mode": 0.0316069770620507,
        "run": 0.15803488531025348,
        "m": 0.09482093118615209,
        "upgrade": 0.0316069770620507,
        "e": 0.0316069770620507,
        "dev": 0.0316069770620507,
        "determine": 0.0316069770620507,
        "diff": 0.1264279082482028,
        "base": 0.18964186237230418,
        "id": 0.0316069770620507,
        "if": 0.1264279082482028,
        "event_name": 0.0316069770620507,
        "then": 0.0632139541241014,
        "echo": 0.0632139541241014,
        "event": 0.0316069770620507,
        "sha": 0.0316069770620507,
        "github_output": 0.0632139541241014,
        "else": 0.0316069770620507,
        "origin": 0.0316069770620507,
        "fi": 0.0632139541241014,
        "env": 0.0316069770620507,
        "docgen_llm_base_url": 0.0632139541241014,
        "http": 0.0316069770620507,
        "localhost": 0.0316069770620507,
        "12434": 0.0316069770620507,
        "engines": 0.0316069770620507,
        "v1": 0.0316069770620507,
        "cli": 0.0632139541241014,
        "outputs": 0.0316069770620507,
        "commit": 0.0632139541241014,
        "updates": 0.0316069770620507,
        "any": 0.0316069770620507,
        "git": 0.1264279082482028,
        "status": 0.0316069770620507,
        "short": 0.0316069770620507,
        "grep": 0.0316069770620507,
        "q": 0.0316069770620507,
        "md": 0.0632139541241014,
        "config": 0.0632139541241014,
        "user": 0.0632139541241014,
        "email": 0.0316069770620507,
        "users": 0.0316069770620507,
        "noreply": 0.0316069770620507,
        "com": 0.0316069770620507,
        "am": 0.0316069770620507,
        "docs": 0.0316069770620507,
        "via": 0.0316069770620507,
        "upload": 0.0632139541241014,
        "artifact": 0.0632139541241014,
        "success": 0.0316069770620507,
        "generated": 0.0316069770620507,
        "note": 0.0316069770620507,
        "relies": 0.0316069770620507,
        "pointing": 0.0316069770620507,
        "private": 0.0632139541241014,
        "inference": 0.0316069770620507,
        "endpoint": 0.0316069770620507,
        "for": 0.0316069770620507,
        "runners": 0.0316069770620507,
        "you": 0.0316069770620507,
        "will": 0.0316069770620507,
        "need": 0.0316069770620507,
        "expose": 0.0316069770620507,
        "within": 0.0316069770620507,
        "switch": 0.0316069770620507,
        "ollama": 0.0316069770620507,
        "appropriate": 0.0316069770620507,
        "caching": 0.0316069770620507
      },
      "text": "# GitHub Actions Integration The workflow below runs `docgen update` on pushes and pull requests. It assumes a self-hosted runner (or GitHub-hosted runner with network access to your local model runtime). The job skips early when no files match `.docgen.yml`'s `ci.watched_globs` entries so that purely documentation-only changes do not trigger the generator. ```yaml name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted # requires local LLM access steps: - name: Checkout repository uses: actions/checkout@v4 with: fetch-depth: 0 - name: Set up Python uses: actions/setup-python@v5 with: python-version: '3.11' - name: Cache pip dependencies uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install docgen in editable mode run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: | python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README updates (if any) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi - name: Upload README artifact if: success() uses: actions/upload-artifact@v4 with: name: generated-readme path: README.md ``` > **Note:** the workflow relies on `DOCGEN_LLM_BASE_URL` pointing to a local or > private inference endpoint. For GitHub-hosted runners you will need to expose > the runner within your private network or switch to the `ollama` CLI with > appropriate caching. ```",
      "metadata": {
        "path": "docs/ci/github-actions.md",
        "tags": [
          "docs"
        ],
        "hash": "178c6f25ecf7325348a9158158c6e6f36c29d520a922a6f0c2c739f4efe1b0d8"
      }
    },
    {
      "id": "spec/feature_checklist.md#0",
      "vector": {
        "intelligent": 0.028513297425610054,
        "readme": 0.08553989227683016,
        "generator": 0.028513297425610054,
        "feature": 0.028513297425610054,
        "checklist": 0.028513297425610054,
        "status": 0.028513297425610054,
        "legend": 0.028513297425610054,
        "not": 0.028513297425610054,
        "started": 0.028513297425610054,
        "in": 0.028513297425610054,
        "progress": 0.028513297425610054,
        "done": 0.028513297425610054,
        "scope": 0.028513297425610054,
        "tags": 0.028513297425610054,
        "mvp": 0.4847260562353709,
        "required": 0.028513297425610054,
        "for": 0.11405318970244022,
        "proof": 0.028513297425610054,
        "of": 0.08553989227683016,
        "concept": 0.028513297425610054,
        "next": 0.2851329742561005,
        "nice": 0.028513297425610054,
        "to": 0.08553989227683016,
        "have": 0.028513297425610054,
        "soon": 0.028513297425610054,
        "stretch": 0.11405318970244022,
        "later": 0.028513297425610054,
        "1": 0.05702659485122011,
        "core": 0.028513297425610054,
        "workflows": 0.028513297425610054,
        "x": 0.570265948512201,
        "docgen": 0.11405318970244022,
        "init": 0.028513297425610054,
        "initialize": 0.028513297425610054,
        "repos": 0.028513297425610054,
        "without": 0.05702659485122011,
        "docs": 0.11405318970244022,
        "update": 0.028513297425610054,
        "detect": 0.028513297425610054,
        "changes": 0.028513297425610054,
        "on": 0.028513297425610054,
        "commit": 0.028513297425610054,
        "pr": 0.028513297425610054,
        "and": 0.028513297425610054,
        "patch": 0.028513297425610054,
        "affected": 0.028513297425610054,
        "sections": 0.05702659485122011,
        "regenerate": 0.028513297425610054,
        "manual": 0.028513297425610054,
        "full": 0.028513297425610054,
        "partial": 0.028513297425610054,
        "regeneration": 0.028513297425610054,
        "dry": 0.05702659485122011,
        "run": 0.05702659485122011,
        "mode": 0.05702659485122011,
        "preview": 0.028513297425610054,
        "diffs": 0.028513297425610054,
        "writing": 0.028513297425610054,
        "service": 0.028513297425610054,
        "fastapi": 0.05702659485122011,
        "endpoints": 0.028513297425610054,
        "ci": 0.05702659485122011,
        "bots": 0.028513297425610054,
        "2": 0.028513297425610054,
        "repository": 0.028513297425610054,
        "scanning": 0.028513297425610054,
        "indexing": 0.028513297425610054,
        "walk": 0.028513297425610054,
        "filesystem": 0.028513297425610054,
        "with": 0.028513297425610054,
        "ignore": 0.028513297425610054,
        "rules": 0.028513297425610054,
        "gitignore": 0.028513297425610054,
        "yml": 0.028513297425610054,
        "build": 0.08553989227683016,
        "normalized": 0.028513297425610054,
        "manifest": 0.05702659485122011,
        "files": 0.05702659485122011,
        "roles": 0.028513297425610054,
        "src": 0.028513297425610054,
        "test": 0.05702659485122011,
        "config": 0.08553989227683016,
        "infra": 0.028513297425610054,
        "hash": 0.028513297425610054,
        "cache": 0.028513297425610054,
        "file": 0.028513297425610054,
        "metadata": 0.028513297425610054,
        "speed": 0.028513297425610054,
        "subsequent": 0.028513297425610054,
        "runs": 0.028513297425610054,
        "entrypoint": 0.05702659485122011,
        "detection": 0.05702659485122011,
        "e": 0.028513297425610054,
        "g": 0.028513297425610054,
        "main": 0.028513297425610054,
        "springbootapplication": 0.028513297425610054,
        "app": 0.028513297425610054,
        "monorepo": 0.05702659485122011,
        "module": 0.028513297425610054,
        "3": 0.028513297425610054,
        "analyzers": 0.14256648712805026,
        "plugin": 0.028513297425610054,
        "based": 0.028513297425610054,
        "language": 0.028513297425610054,
        "python": 0.028513297425610054,
        "java": 0.028513297425610054,
        "node": 0.028513297425610054,
        "js": 0.05702659485122011,
        "tier": 0.028513297425610054,
        "poetry": 0.028513297425610054,
        "setuptools": 0.028513297425610054,
        "maven": 0.028513297425610054,
        "gradle": 0.028513297425610054,
        "npm": 0.028513297425610054,
        "pnpm": 0.028513297425610054,
        "yarn": 0.028513297425610054,
        "dependency": 0.028513297425610054,
        "from": 0.028513297425610054,
        "pattern": 0.028513297425610054,
        "docker": 0.028513297425610054,
        "k8s": 0.028513297425610054,
        "layout": 0.028513297425610054,
        "tree": 0.028513297425610054,
        "sitter": 0.028513297425610054,
        "powered": 0.028513297425610054,
        "symbol": 0.028513297425610054,
        "extraction": 0.028513297425610054,
        "flagged": 0.028513297425610054,
        "4": 0.028513297425610054,
        "knowledge": 0.05702659485122011,
        "store": 0.028513297425610054,
        "rag": 0.028513297425610054,
        "local": 0.05702659485122011,
        "embedding": 0.028513297425610054,
        "model": 0.05702659485122011,
        "chunking": 0.028513297425610054,
        "strategy": 0.028513297425610054,
        "index": 0.028513297425610054,
        "top": 0.05702659485122011,
        "n": 0.028513297425610054,
        "source": 0.028513297425610054,
        "headers": 0.028513297425610054,
        "comments": 0.028513297425610054,
        "section": 0.14256648712805026,
        "scoped": 0.028513297425610054,
        "retrieval": 0.028513297425610054,
        "k": 0.028513297425610054,
        "per": 0.05702659485122011,
        "lightweight": 0.028513297425610054,
        "graph": 0.028513297425610054,
        "modules": 0.028513297425610054,
        "services": 0.028513297425610054,
        "signals": 0.028513297425610054,
        "5": 0.028513297425610054,
        "prompting": 0.028513297425610054,
        "templates": 0.08553989227683016,
        "jinja2": 0.028513297425610054,
        "intro": 0.028513297425610054,
        "features": 0.028513297425610054,
        "architecture": 0.05702659485122011,
        "quickstart": 0.028513297425610054,
        "deployment": 0.028513297425610054,
        "troubleshooting": 0.028513297425610054,
        "faq": 0.028513297425610054,
        "license": 0.028513297425610054,
        "guardrailed": 0.028513297425610054,
        "system": 0.028513297425610054,
        "prompt": 0.028513297425610054,
        "no": 0.028513297425610054,
        "speculation": 0.028513297425610054,
        "cite": 0.028513297425610054,
        "repo": 0.028513297425610054,
        "facts": 0.028513297425610054,
        "only": 0.028513297425610054,
        "token": 0.028513297425610054,
        "budgeting": 0.028513297425610054,
        "streaming": 0.028513297425610054,
        "by": 0.028513297425610054,
        "generation": 0.028513297425610054,
        "template": 0.028513297425610054,
        "override": 0.028513297425610054,
        "mechanism": 0.028513297425610054,
        "j2": 0.028513297425610054,
        "style": 0.028513297425610054,
        "presets": 0.028513297425610054,
        "concise": 0.028513297425610054,
        "vs": 0.028513297425610054,
        "comprehensive": 0.028513297425610054,
        "mermaid": 0.028513297425610054,
        "diagrams": 0.028513297425610054,
        "flow": 0.028513297425610054,
        "where": 0.028513297425610054,
        "appropriate": 0.028513297425610054,
        "6": 0.028513297425610054,
        "llm": 0.028513297425610054,
        "runner": 0.05702659485122011,
        "http": 0.028513297425610054,
        "adapter": 0.05702659485122011,
        "host": 0.028513297425610054,
        "container": 0.028513297425610054,
        "defaults": 0.028513297425610054,
        "env": 0.028513297425610054,
        "api": 0.028513297425610054,
        "key": 0.028513297425610054,
        "overrides": 0.028513297425610054,
        "llama": 0.028513297425610054,
        "cpp": 0.028513297425610054,
        "structured": 0.028513297425610054,
        "outputs": 0.028513297425610054,
        "tool": 0.028513297425610054,
        "use": 0.028513297425610054,
        "compatibility": 0.028513297425610054,
        "7": 0.028513297425610054,
        "post": 0.028513297425610054,
        "processing": 0.028513297425610054,
        "markdown": 0.028513297425610054,
        "lint": 0.028513297425610054,
        "heading": 0.028513297425610054,
        "hierarchy": 0.028513297425610054
      },
      "text": "# Intelligent README Generator \u2014 Feature Checklist > Status legend: \u2610 Not started \u00b7 \u25d0 In progress \u00b7 \u2714 Done > Scope tags: **[MVP]** required for proof\u2011of\u2011concept, **[NEXT]** nice\u2011to\u2011have soon, **[STRETCH]** later ## 1) Core Workflows - [x] **docgen init** \u2014 Initialize README for repos without docs **[MVP]** - [x] **docgen update** \u2014 Detect changes on commit/PR and patch affected sections **[MVP]** - [ ] **docgen regenerate** \u2014 Manual full/partial regeneration **[MVP]** - [x] Dry\u2011run mode (`--dry-run`) to preview diffs without writing **[NEXT]** - [ ] Service mode (FastAPI) endpoints for CI/bots **[STRETCH]** ## 2) Repository Scanning & Indexing - [x] Walk filesystem with ignore rules (`.gitignore`, `.docgen.yml`) **[MVP]** - [x] Build normalized manifest of files, roles (src/test/docs/config/infra) **[MVP]** - [x] Hash & cache file metadata to speed subsequent runs **[MVP]** - [x] Entrypoint detection (e.g., `main()`, `@SpringBootApplication`, FastAPI app) **[NEXT]** - [x] Monorepo module detection **[NEXT]** ## 3) Analyzers (Plugin\u2011based) - [x] Language analyzers: Python, Java, Node.js (Tier\u20111) **[MVP]** - [x] Build analyzers: Poetry/Setuptools, Maven/Gradle, npm/pnpm/yarn **[MVP]** - [x] Dependency analyzers from manifest files **[MVP]** - [x] Pattern analyzers: Docker/K8s, CI config, monorepo layout **[NEXT]** - [ ] Tree\u2011sitter powered symbol/entrypoint extraction (flagged) **[STRETCH]** ## 4) Knowledge Store (RAG) - [ ] Local embedding model + chunking strategy **[MVP]** - [ ] Index `README`, `/docs`, top N source headers & comments **[MVP]** - [ ] Section\u2011scoped retrieval (top\u2011k per section) **[MVP]** - [ ] Lightweight knowledge graph of modules/services/signals **[NEXT]** ## 5) Prompting & Templates - [x] Jinja2 templates per section (intro, features, architecture, quickstart, config, build/test, deployment, troubleshooting, FAQ, license) **[MVP]** - [x] Guardrailed system prompt (\u201cno speculation; cite repo facts only\u201d) **[MVP]** - [x] Token budgeting & streaming section-by-section generation **[MVP]** - [x] Template override mechanism (`docs/templates/*.j2`) **[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy,",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#1",
      "vector": {
        "next": 0.3907019005301633,
        "x": 0.5860528507952449,
        "style": 0.05581455721859476,
        "presets": 0.02790727860929738,
        "concise": 0.02790727860929738,
        "vs": 0.02790727860929738,
        "comprehensive": 0.02790727860929738,
        "mermaid": 0.02790727860929738,
        "js": 0.05581455721859476,
        "diagrams": 0.02790727860929738,
        "for": 0.11162911443718952,
        "architecture": 0.02790727860929738,
        "flow": 0.02790727860929738,
        "sections": 0.05581455721859476,
        "where": 0.02790727860929738,
        "appropriate": 0.02790727860929738,
        "6": 0.02790727860929738,
        "local": 0.05581455721859476,
        "llm": 0.05581455721859476,
        "runner": 0.05581455721859476,
        "model": 0.02790727860929738,
        "http": 0.02790727860929738,
        "adapter": 0.05581455721859476,
        "host": 0.02790727860929738,
        "container": 0.02790727860929738,
        "defaults": 0.05581455721859476,
        "env": 0.02790727860929738,
        "api": 0.02790727860929738,
        "key": 0.02790727860929738,
        "overrides": 0.02790727860929738,
        "mvp": 0.47442373635805546,
        "llama": 0.02790727860929738,
        "cpp": 0.02790727860929738,
        "structured": 0.02790727860929738,
        "outputs": 0.05581455721859476,
        "tool": 0.02790727860929738,
        "use": 0.02790727860929738,
        "compatibility": 0.02790727860929738,
        "stretch": 0.05581455721859476,
        "7": 0.02790727860929738,
        "post": 0.02790727860929738,
        "processing": 0.02790727860929738,
        "markdown": 0.02790727860929738,
        "lint": 0.05581455721859476,
        "heading": 0.02790727860929738,
        "hierarchy": 0.02790727860929738,
        "code": 0.05581455721859476,
        "fences": 0.02790727860929738,
        "line": 0.02790727860929738,
        "length": 0.02790727860929738,
        "auto": 0.05581455721859476,
        "toc": 0.02790727860929738,
        "level": 0.02790727860929738,
        "3": 0.02790727860929738,
        "badges": 0.02790727860929738,
        "build": 0.05581455721859476,
        "coverage": 0.05581455721859476,
        "license": 0.02790727860929738,
        "with": 0.05581455721859476,
        "safe": 0.05581455721859476,
        "link": 0.05581455721859476,
        "validator": 0.02790727860929738,
        "relative": 0.02790727860929738,
        "absolute": 0.02790727860929738,
        "managed": 0.02790727860929738,
        "markers": 0.02790727860929738,
        "idempotent": 0.02790727860929738,
        "patching": 0.02790727860929738,
        "docgen": 0.08372183582789214,
        "begin": 0.02790727860929738,
        "end": 0.02790727860929738,
        "8": 0.02790727860929738,
        "git": 0.02790727860929738,
        "integration": 0.05581455721859476,
        "diff": 0.05581455721859476,
        "detection": 0.02790727860929738,
        "map": 0.02790727860929738,
        "changed": 0.05581455721859476,
        "files": 0.05581455721859476,
        "impacted": 0.02790727860929738,
        "branch": 0.02790727860929738,
        "pr": 0.05581455721859476,
        "creation": 0.02790727860929738,
        "summary": 0.02790727860929738,
        "of": 0.02790727860929738,
        "readme": 0.11162911443718952,
        "deltas": 0.02790727860929738,
        "commit": 0.02790727860929738,
        "mode": 0.02790727860929738,
        "init": 0.02790727860929738,
        "or": 0.02790727860929738,
        "small": 0.02790727860929738,
        "changes": 0.05581455721859476,
        "configurable": 0.02790727860929738,
        "prevent": 0.02790727860929738,
        "loops": 0.02790727860929738,
        "on": 0.05581455721859476,
        "only": 0.08372183582789214,
        "9": 0.02790727860929738,
        "configuration": 0.02790727860929738,
        "parse": 0.02790727860929738,
        "yml": 0.02790727860929738,
        "analyzers": 0.02790727860929738,
        "publish": 0.02790727860929738,
        "path": 0.02790727860929738,
        "exclusions": 0.02790727860929738,
        "watched_globs": 0.02790727860929738,
        "ci": 0.08372183582789214,
        "triggers": 0.02790727860929738,
        "per": 0.05581455721859476,
        "section": 0.02790727860929738,
        "off": 0.02790727860929738,
        "toggles": 0.02790727860929738,
        "and": 0.08372183582789214,
        "titles": 0.02790727860929738,
        "10": 0.02790727860929738,
        "github": 0.02790727860929738,
        "actions": 0.02790727860929738,
        "example": 0.02790727860929738,
        "workflow": 0.02790727860929738,
        "gitlab": 0.02790727860929738,
        "bitbucket": 0.02790727860929738,
        "pipelines": 0.02790727860929738,
        "samples": 0.02790727860929738,
        "labeling": 0.02790727860929738,
        "docs": 0.02790727860929738,
        "update": 0.02790727860929738,
        "behavior": 0.02790727860929738,
        "11": 0.02790727860929738,
        "security": 0.02790727860929738,
        "privacy": 0.02790727860929738,
        "models": 0.02790727860929738,
        "never": 0.02790727860929738,
        "exfiltrate": 0.02790727860929738,
        "respect": 0.02790727860929738,
        "gitignore": 0.02790727860929738,
        "exclude": 0.02790727860929738,
        "large": 0.02790727860929738,
        "binaries": 0.02790727860929738,
        "secrets": 0.02790727860929738,
        "optional": 0.02790727860929738,
        "simple": 0.02790727860929738,
        "secret": 0.02790727860929738,
        "scanner": 0.02790727860929738,
        "gate": 0.02790727860929738,
        "12": 0.02790727860929738,
        "multi": 0.02790727860929738,
        "language": 0.02790727860929738,
        "project": 0.02790727860929738,
        "types": 0.02790727860929738,
        "tier": 0.05581455721859476,
        "1": 0.02790727860929738,
        "python": 0.02790727860929738,
        "poetry": 0.02790727860929738,
        "setuptools": 0.02790727860929738,
        "java": 0.02790727860929738,
        "maven": 0.02790727860929738,
        "gradle": 0.02790727860929738,
        "spring": 0.02790727860929738,
        "boot": 0.02790727860929738,
        "node": 0.02790727860929738,
        "npm": 0.02790727860929738,
        "pnpm": 0.02790727860929738,
        "express": 0.02790727860929738,
        "2": 0.02790727860929738,
        "go": 0.02790727860929738,
        "rust": 0.02790727860929738,
        "ruby": 0.02790727860929738,
        "php": 0.02790727860929738,
        "framework": 0.02790727860929738,
        "aware": 0.02790727860929738,
        "quickstart": 0.02790727860929738,
        "commands": 0.02790727860929738,
        "system": 0.02790727860929738,
        "13": 0.02790727860929738,
        "quality": 0.02790727860929738,
        "gates": 0.02790727860929738,
        "evaluation": 0.02790727860929738,
        "command": 0.02790727860929738,
        "validation": 0.02790727860929738,
        "existence": 0.02790727860929738,
        "checks": 0.05581455721859476,
        "no": 0.02790727860929738,
        "hallucination": 0.02790727860929738,
        "reject": 0.02790727860929738,
        "facts": 0.02790727860929738,
        "not": 0.02790727860929738,
        "in": 0.02790727860929738,
        "signals": 0.02790727860929738,
        "rag": 0.05581455721859476,
        "scorecard": 0.02790727860929738,
        "buildability": 0.02790727860929738,
        "validity": 0.02790727860929738,
        "alignment": 0.02790727860929738,
        "14": 0.02790727860929738,
        "performance": 0.02790727860929738,
        "caching": 0.02790727860929738,
        "persist": 0.02790727860929738,
        "analyzer": 0.02790727860929738,
        "embeddings": 0.02790727860929738,
        "under": 0.02790727860929738,
        "incremental": 0.02790727860929738,
        "refresh": 0.02790727860929738,
        "15": 0.02790727860929738,
        "error": 0.02790727860929738,
        "handling": 0.02790727860929738,
        "ux": 0.02790727860929738,
        "fail": 0.02790727860929738,
        "stub": 0.02790727860929738,
        "generation": 0.02790727860929738,
        "when": 0.02790727860929738,
        "evidence": 0.02790727860929738
      },
      "text": "**[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy, code fences, line length **[MVP]** - [x] Auto ToC (\u2264 level 3) **[MVP]** - [x] Badges (build, coverage, license) with safe defaults **[NEXT]** - [x] Link validator (relative/absolute) **[NEXT]** - [x] Managed markers for idempotent patching (`<!-- docgen:begin:end -->`) **[MVP]** ## 8) Git Integration - [x] Diff detection (map changed files \u2192 impacted sections) **[MVP]** - [x] Branch + PR creation with summary of README deltas **[MVP]** - [x] Commit mode for init or small changes (configurable) **[NEXT]** - [ ] Prevent loops on README\u2011only changes **[MVP]** ## 9) Configuration - [x] Parse `.docgen.yml` (LLM, readme style, analyzers, publish) **[MVP]** - [x] Path exclusions & `watched_globs` for CI triggers **[MVP]** - [ ] Per-section on/off toggles and titles **[NEXT]** ## 10) CI Integration - [x] GitHub Actions example workflow **[MVP]** - [ ] GitLab CI and Bitbucket Pipelines samples **[NEXT]** - [x] Labeling (`docs:auto`) and PR update behavior **[NEXT]** ## 11) Security & Privacy - [x] Local-only models; never exfiltrate code **[MVP]** - [ ] Respect `.gitignore`; exclude large binaries/secrets **[MVP]** - [ ] Optional simple secret scanner gate **[NEXT]** ## 12) Multi\u2011Language & Project Types - [ ] Tier\u20111: Python (Poetry/Setuptools), Java (Maven/Gradle/Spring Boot), Node.js (npm/pnpm/Express/Next) **[MVP]** - [ ] Tier\u20112: Go, Rust, Ruby, PHP **[STRETCH]** - [x] Framework\u2011aware quickstart commands per build system **[MVP]** ## 13) Quality Gates & Evaluation - [ ] Command validation (existence checks) **[MVP]** - [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#2",
      "vector": {
        "no": 0.07018624063435965,
        "hallucination": 0.07018624063435965,
        "checks": 0.07018624063435965,
        "reject": 0.07018624063435965,
        "facts": 0.07018624063435965,
        "not": 0.07018624063435965,
        "in": 0.07018624063435965,
        "signals": 0.07018624063435965,
        "rag": 0.1403724812687193,
        "mvp": 0.42111744380615784,
        "x": 0.49130368444051753,
        "readme": 0.1403724812687193,
        "scorecard": 0.07018624063435965,
        "coverage": 0.07018624063435965,
        "buildability": 0.07018624063435965,
        "link": 0.07018624063435965,
        "validity": 0.07018624063435965,
        "diff": 0.07018624063435965,
        "alignment": 0.07018624063435965,
        "lint": 0.1403724812687193,
        "next": 0.21055872190307892,
        "14": 0.07018624063435965,
        "performance": 0.07018624063435965,
        "caching": 0.07018624063435965,
        "persist": 0.07018624063435965,
        "analyzer": 0.1403724812687193,
        "outputs": 0.07018624063435965,
        "embeddings": 0.07018624063435965,
        "under": 0.07018624063435965,
        "docgen": 0.07018624063435965,
        "incremental": 0.07018624063435965,
        "refresh": 0.07018624063435965,
        "changed": 0.07018624063435965,
        "files": 0.07018624063435965,
        "only": 0.07018624063435965,
        "15": 0.07018624063435965,
        "error": 0.07018624063435965,
        "handling": 0.07018624063435965,
        "ux": 0.07018624063435965,
        "fail": 0.07018624063435965,
        "safe": 0.07018624063435965,
        "stub": 0.07018624063435965,
        "generation": 0.07018624063435965,
        "when": 0.07018624063435965,
        "evidence": 0.07018624063435965,
        "is": 0.07018624063435965,
        "insufficient": 0.07018624063435965,
        "clear": 0.07018624063435965,
        "run": 0.07018624063435965,
        "logs": 0.07018624063435965,
        "pr": 0.07018624063435965,
        "body": 0.07018624063435965,
        "with": 0.07018624063435965,
        "rationale": 0.07018624063435965,
        "sections": 0.07018624063435965,
        "updated": 0.07018624063435965,
        "because": 0.07018624063435965,
        "helpful": 0.07018624063435965,
        "cli": 0.07018624063435965,
        "errors": 0.07018624063435965,
        "and": 0.1403724812687193,
        "verbose": 0.07018624063435965,
        "flag": 0.07018624063435965,
        "works": 0.07018624063435965,
        "pre": 0.07018624063435965,
        "post": 0.07018624063435965,
        "subcommand": 0.07018624063435965,
        "16": 0.07018624063435965,
        "extensibility": 0.07018624063435965,
        "abc": 0.07018624063435965,
        "plugin": 0.07018624063435965,
        "discovery": 0.07018624063435965,
        "template": 0.07018624063435965,
        "packs": 0.07018624063435965,
        "org": 0.07018624063435965,
        "style": 0.1403724812687193,
        "definition": 0.07018624063435965,
        "of": 0.07018624063435965,
        "done": 0.07018624063435965,
        "per": 0.07018624063435965,
        "section": 0.07018624063435965,
        "passing": 0.07018624063435965,
        "unit": 0.07018624063435965,
        "integration": 0.07018624063435965,
        "tests": 0.07018624063435965,
        "for": 0.07018624063435965,
        "core": 0.07018624063435965,
        "logic": 0.07018624063435965,
        "golden": 0.07018624063435965,
        "regression": 0.07018624063435965,
        "test": 0.07018624063435965,
        "s": 0.07018624063435965,
        "meets": 0.07018624063435965,
        "requirements": 0.07018624063435965
      },
      "text": "- [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence is insufficient **[MVP]** - [ ] Clear run logs + PR body with rationale (\u201csections updated because\u2026\u201d) **[MVP]** - [x] Helpful CLI errors and `--verbose` flag (works pre/post subcommand) **[MVP]** ## 16) Extensibility - [x] Analyzer ABC and plugin discovery **[MVP]** - [x] Template packs (org\u2011style) **[NEXT]** --- ### Definition of Done (per section) - [ ] Passing unit & integration tests for core logic - [ ] Golden README regression test(s) - [ ] Meets lint/style requirements",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_order.md#0",
      "vector": {
        "docgen": 0.23979625973207228,
        "development": 0.029974532466509034,
        "roadmap": 0.029974532466509034,
        "phase": 0.20982172726556325,
        "0": 0.029974532466509034,
        "bootstrap": 0.029974532466509034,
        "the": 0.029974532466509034,
        "skeleton": 0.05994906493301807,
        "1": 0.3596943895981084,
        "project": 0.029974532466509034,
        "cli": 0.05994906493301807,
        "config": 0.11989812986603614,
        "loader": 0.029974532466509034,
        "yml": 0.029974532466509034,
        "models": 0.029974532466509034,
        "covers": 0.47959251946414455,
        "commands": 0.029974532466509034,
        "scaffolding": 0.029974532466509034,
        "9": 0.05994906493301807,
        "parse": 0.029974532466509034,
        "16": 0.05994906493301807,
        "analyzer": 0.05994906493301807,
        "abc": 0.05994906493301807,
        "2": 0.23979625973207228,
        "plugin": 0.05994906493301807,
        "discovery": 0.05994906493301807,
        "init": 0.11989812986603614,
        "happy": 0.029974532466509034,
        "path": 0.05994906493301807,
        "single": 0.029974532466509034,
        "repo": 0.11989812986603614,
        "local": 0.11989812986603614,
        "scanner": 0.029974532466509034,
        "manifest": 0.05994906493301807,
        "roles": 0.029974532466509034,
        "hashing": 0.029974532466509034,
        "ignores": 0.05994906493301807,
        "walk": 0.029974532466509034,
        "fs": 0.029974532466509034,
        "cache": 0.029974532466509034,
        "tier": 0.029974532466509034,
        "analyzers": 0.0899235973995271,
        "python": 0.029974532466509034,
        "java": 0.029974532466509034,
        "node": 0.029974532466509034,
        "build": 0.05994906493301807,
        "dependency": 0.029974532466509034,
        "3": 0.0899235973995271,
        "language": 0.05994906493301807,
        "deps": 0.029974532466509034,
        "templates": 0.05994906493301807,
        "prompt": 0.05994906493301807,
        "builder": 0.029974532466509034,
        "section": 0.14987266233254518,
        "by": 0.029974532466509034,
        "guardrailed": 0.029974532466509034,
        "system": 0.029974532466509034,
        "5": 0.11989812986603614,
        "jinja2": 0.029974532466509034,
        "guardrails": 0.029974532466509034,
        "token": 0.029974532466509034,
        "budget": 0.029974532466509034,
        "4": 0.0899235973995271,
        "llm": 0.029974532466509034,
        "runner": 0.029974532466509034,
        "ollama": 0.05994906493301807,
        "adapter": 0.029974532466509034,
        "6": 0.0899235973995271,
        "post": 0.029974532466509034,
        "processor": 0.029974532466509034,
        "managed": 0.029974532466509034,
        "markers": 0.0899235973995271,
        "toc": 0.05994906493301807,
        "markdown": 0.029974532466509034,
        "lint": 0.05994906493301807,
        "7": 0.029974532466509034,
        "git": 0.05994906493301807,
        "publisher": 0.05994906493301807,
        "commit": 0.05994906493301807,
        "mode": 0.05994906493301807,
        "for": 0.05994906493301807,
        "only": 0.0899235973995271,
        "8": 0.0899235973995271,
        "end": 0.05994906493301807,
        "to": 0.029974532466509034,
        "milestone": 0.0899235973995271,
        "generates": 0.029974532466509034,
        "a": 0.0899235973995271,
        "clean": 0.029974532466509034,
        "readme": 0.05994906493301807,
        "with": 0.0899235973995271,
        "no": 0.0899235973995271,
        "docs": 0.05994906493301807,
        "update": 0.11989812986603614,
        "on": 0.029974532466509034,
        "change": 0.05994906493301807,
        "pr": 0.14987266233254518,
        "workflow": 0.029974532466509034,
        "diff": 0.05994906493301807,
        "detection": 0.05994906493301807,
        "mapping": 0.05994906493301807,
        "patching": 0.029974532466509034,
        "inside": 0.029974532466509034,
        "prevent": 0.029974532466509034,
        "loops": 0.029974532466509034,
        "branch": 0.05994906493301807,
        "delta": 0.029974532466509034,
        "summary": 0.029974532466509034,
        "10": 0.05994906493301807,
        "labeling": 0.029974532466509034,
        "later": 0.029974532466509034,
        "opens": 0.029974532466509034,
        "updating": 0.029974532466509034,
        "impacted": 0.029974532466509034,
        "sections": 0.029974532466509034,
        "minimal": 0.029974532466509034,
        "rag": 0.05994906493301807,
        "accuracy": 0.029974532466509034,
        "lite": 0.029974532466509034,
        "embed": 0.029974532466509034,
        "top": 0.029974532466509034,
        "n": 0.029974532466509034,
        "source": 0.029974532466509034,
        "headers": 0.029974532466509034,
        "scoped": 0.029974532466509034,
        "retrieval": 0.05994906493301807,
        "embedding": 0.029974532466509034,
        "index": 0.029974532466509034,
        "sources": 0.029974532466509034,
        "per": 0.029974532466509034,
        "hallucination": 0.05994906493301807,
        "command": 0.05994906493301807,
        "existence": 0.029974532466509034,
        "checks": 0.029974532466509034,
        "13": 0.029974532466509034,
        "validation": 0.029974532466509034,
        "outputs": 0.029974532466509034,
        "grounded": 0.029974532466509034,
        "in": 0.029974532466509034,
        "facts": 0.029974532466509034,
        "targeted": 0.029974532466509034,
        "context": 0.029974532466509034,
        "hardening": 0.029974532466509034,
        "dx": 0.029974532466509034,
        "error": 0.029974532466509034,
        "handling": 0.029974532466509034,
        "clear": 0.029974532466509034,
        "logs": 0.05994906493301807,
        "verbose": 0.029974532466509034,
        "fail": 0.05994906493301807,
        "safe": 0.05994906493301807,
        "stubs": 0.029974532466509034,
        "15": 0.029974532466509034,
        "ux": 0.029974532466509034,
        "security": 0.029974532466509034,
        "gitignore": 0.029974532466509034,
        "respect": 0.029974532466509034,
        "excludes": 0.05994906493301807,
        "enforcement": 0.029974532466509034,
        "11": 0.029974532466509034,
        "privacy": 0.029974532466509034,
        "ci": 0.029974532466509034,
        "integration": 0.029974532466509034,
        "polish": 0.029974532466509034,
        "github": 0.029974532466509034,
        "actions": 0.05994906493301807,
        "sample": 0.029974532466509034,
        "push": 0.029974532466509034,
        "trigger": 0.029974532466509034,
        "calling": 0.029974532466509034,
        "gh": 0.029974532466509034,
        "refinements": 0.029974532466509034,
        "watched": 0.029974532466509034,
        "globs": 0.029974532466509034,
        "style": 0.05994906493301807,
        "preset": 0.029974532466509034,
        "concise": 0.029974532466509034,
        "comprehensive": 0.029974532466509034,
        "watched_globs": 0.029974532466509034,
        "presets": 0.029974532466509034,
        "multi": 0.029974532466509034,
        "breadth": 0.029974532466509034,
        "framework": 0.029974532466509034,
        "smarts": 0.029974532466509034,
        "entrypoint": 0.029974532466509034,
        "main": 0.029974532466509034,
        "spring": 0.029974532466509034,
        "boot": 0.029974532466509034,
        "fastapi": 0.029974532466509034
      },
      "text": "# DocGen Development Roadmap ## Phase 0 \u2014 Bootstrap the skeleton 1. **Project skeleton + CLI (`docgen`) + config loader (`.docgen.yml`) + models** * Covers: 1 (commands scaffolding), 9 (parse config), 16 (Analyzer ABC) 2. **Analyzer plugin ABC & discovery** * Covers: 16 (plugin discovery) ## Phase 1 \u2014 \"Init\" happy-path (single repo, local) 1. **Repo scanner & manifest (roles, hashing, ignores)** * Covers: 2 (walk FS, manifest, cache, ignores) 2. **Tier-1 analyzers (Python, Java, Node) + build analyzers + dependency analyzers** * Covers: 3 (language/build/deps) 3. **Templates + prompt builder (section-by-section) + guardrailed system prompt** * Covers: 5 (Jinja2 templates, guardrails, token budget) 4. **Local LLM runner (Ollama adapter)** * Covers: 6 (Ollama) 5. **Post-processor: managed markers, ToC, markdown lint** * Covers: 7 (markers, ToC, lint) 6. **Git publisher: commit mode (for init only)** * Covers: 8 (commit mode), 1 (`docgen init` end-to-end) \u2705 **Milestone**: `docgen init` generates a clean README for a repo with no docs. ## Phase 2 \u2014 Update-on-change (PR workflow) 1. **Diff detection + change\u2192section mapping + patching inside markers** * Covers: 8 (diff mapping, prevent loops), 1 (`docgen update`) 2. **Git publisher: branch + PR with delta summary** * Covers: 8 (branch/PR), 10 (labeling later) \u2705 **Milestone**: `docgen update` opens a PR updating only impacted sections. ## Phase 3 \u2014 Minimal RAG & accuracy 1. **RAG Lite: embed README/docs/top N source headers; section-scoped retrieval** * Covers: 4 (local embedding, index sources, per-section retrieval) 2. **No-hallucination & command existence checks** * Covers: 13 (command validation, no-hallucination) \u2705 **Milestone**: outputs grounded in repo facts with targeted context. ## Phase 4 \u2014 Hardening & DX 1. **Error handling, clear logs, `--verbose`, fail-safe stubs** * Covers: 15 (fail-safe, logs, CLI UX) 2. **Security: .gitignore respect, path excludes, local-only enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI)",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/feature_order.md#1",
      "vector": {
        "enforcement": 0.04252432555625623,
        "covers": 0.4252432555625623,
        "11": 0.04252432555625623,
        "privacy": 0.04252432555625623,
        "excludes": 0.04252432555625623,
        "phase": 0.17009730222502492,
        "5": 0.12757297666876868,
        "ci": 0.12757297666876868,
        "integration": 0.04252432555625623,
        "config": 0.12757297666876868,
        "polish": 0.08504865111251246,
        "1": 0.25514595333753737,
        "github": 0.04252432555625623,
        "actions": 0.08504865111251246,
        "sample": 0.04252432555625623,
        "push": 0.04252432555625623,
        "pr": 0.17009730222502492,
        "trigger": 0.04252432555625623,
        "calling": 0.04252432555625623,
        "docgen": 0.12757297666876868,
        "update": 0.04252432555625623,
        "10": 0.08504865111251246,
        "gh": 0.04252432555625623,
        "2": 0.21262162778128116,
        "refinements": 0.04252432555625623,
        "watched": 0.04252432555625623,
        "globs": 0.04252432555625623,
        "style": 0.08504865111251246,
        "preset": 0.04252432555625623,
        "concise": 0.04252432555625623,
        "comprehensive": 0.04252432555625623,
        "9": 0.04252432555625623,
        "watched_globs": 0.04252432555625623,
        "presets": 0.04252432555625623,
        "6": 0.08504865111251246,
        "multi": 0.04252432555625623,
        "language": 0.08504865111251246,
        "breadth": 0.08504865111251246,
        "framework": 0.17009730222502492,
        "smarts": 0.04252432555625623,
        "entrypoint": 0.04252432555625623,
        "detection": 0.04252432555625623,
        "main": 0.04252432555625623,
        "spring": 0.04252432555625623,
        "boot": 0.04252432555625623,
        "fastapi": 0.08504865111251246,
        "aware": 0.08504865111251246,
        "quick": 0.04252432555625623,
        "start": 0.04252432555625623,
        "entrypoints": 0.04252432555625623,
        "12": 0.04252432555625623,
        "commands": 0.04252432555625623,
        "pattern": 0.08504865111251246,
        "analyzers": 0.08504865111251246,
        "docker": 0.04252432555625623,
        "k8s": 0.04252432555625623,
        "monorepo": 0.04252432555625623,
        "layout": 0.04252432555625623,
        "3": 0.12757297666876868,
        "7": 0.12757297666876868,
        "quality": 0.08504865111251246,
        "gates": 0.08504865111251246,
        "performance": 0.08504865111251246,
        "readme": 0.08504865111251246,
        "scorecard": 0.08504865111251246,
        "link": 0.08504865111251246,
        "validator": 0.08504865111251246,
        "badges": 0.08504865111251246,
        "13": 0.04252432555625623,
        "artifact": 0.04252432555625623,
        "embedding": 0.04252432555625623,
        "caching": 0.08504865111251246,
        "in": 0.04252432555625623,
        "incremental": 0.08504865111251246,
        "rag": 0.12757297666876868,
        "refresh": 0.08504865111251246,
        "14": 0.04252432555625623,
        "persist": 0.04252432555625623,
        "outputs": 0.04252432555625623,
        "8": 0.04252432555625623,
        "nice": 0.04252432555625623,
        "to": 0.12757297666876868,
        "have": 0.04252432555625623,
        "stretch": 0.04252432555625623,
        "dry": 0.08504865111251246,
        "run": 0.08504865111251246,
        "mode": 0.12757297666876868,
        "labeling": 0.08504865111251246,
        "updates": 0.08504865111251246,
        "commit": 0.08504865111251246,
        "policy": 0.04252432555625623,
        "tuning": 0.04252432555625623,
        "template": 0.12757297666876868,
        "overrides": 0.04252432555625623,
        "docs": 0.04252432555625623,
        "templates": 0.04252432555625623,
        "j2": 0.04252432555625623,
        "org": 0.04252432555625623,
        "packs": 0.08504865111251246,
        "override": 0.04252432555625623,
        "16": 0.04252432555625623,
        "service": 0.08504865111251246,
        "llama": 0.08504865111251246,
        "cpp": 0.08504865111251246,
        "adapter": 0.04252432555625623,
        "tree": 0.08504865111251246,
        "sitter": 0.08504865111251246,
        "extraction": 0.04252432555625623,
        "why": 0.04252432555625623,
        "this": 0.04252432555625623,
        "order": 0.04252432555625623,
        "fastest": 0.04252432555625623,
        "path": 0.04252432555625623,
        "value": 0.04252432555625623,
        "get": 0.04252432555625623,
        "init": 0.04252432555625623,
        "producing": 0.04252432555625623,
        "a": 0.04252432555625623,
        "solid": 0.04252432555625623,
        "before": 0.04252432555625623,
        "adding": 0.04252432555625623,
        "diffing": 0.04252432555625623,
        "contain": 0.04252432555625623,
        "risk": 0.04252432555625623,
        "early": 0.04252432555625623,
        "section": 0.04252432555625623,
        "markers": 0.04252432555625623,
        "lint": 0.04252432555625623,
        "and": 0.12757297666876868,
        "publishing": 0.04252432555625623,
        "ensure": 0.04252432555625623,
        "safe": 0.04252432555625623,
        "idempotent": 0.04252432555625623,
        "edits": 0.04252432555625623,
        "accuracy": 0.04252432555625623,
        "next": 0.04252432555625623,
        "add": 0.04252432555625623,
        "validation": 0.04252432555625623,
        "avoid": 0.04252432555625623,
        "hallucinations": 0.04252432555625623,
        "once": 0.04252432555625623,
        "the": 0.08504865111251246,
        "pipeline": 0.04252432555625623,
        "works": 0.04252432555625623,
        "scale": 0.04252432555625623,
        "later": 0.04252432555625623,
        "only": 0.04252432555625623,
        "after": 0.04252432555625623,
        "core": 0.04252432555625623,
        "loop": 0.04252432555625623,
        "is": 0.04252432555625623,
        "robust": 0.04252432555625623,
        "do": 0.04252432555625623,
        "we": 0.04252432555625623,
        "widen": 0.04252432555625623,
        "coverage": 0.04252432555625623,
        "last": 0.04252432555625623,
        "refine": 0.04252432555625623,
        "dev": 0.04252432555625623,
        "experience": 0.04252432555625623
      },
      "text": "enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI) + framework-aware Quick Start** * Covers: 2 (entrypoints), 12 (framework-aware commands) 2. **Pattern analyzers (Docker/K8s, CI config, monorepo layout)** * Covers: 3 (pattern analyzers) ## Phase 7 \u2014 Quality gates & performance 1. **README scorecard + link validator + badges** * Covers: 13 (scorecard), 7 (link validator), 7 (badges) 2. **Artifact & embedding caching in `.docgen/` + incremental RAG refresh** * Covers: 14 (persist outputs, incremental refresh) ## Phase 8 \u2014 \"Nice to have\" & stretch 1. **Dry-run mode, PR labeling/updates, commit/PR policy tuning** * Covers: 1 (dry-run), 10 (labeling/PR updates) 2. **Template overrides (`docs/templates/*.j2`) & org template packs** * Covers: 5 (override), 16 (template packs) 3. **Service mode (FastAPI), llama.cpp adapter, tree-sitter extraction** * Covers: 1 (service mode), 6 (llama.cpp), 3 (tree-sitter) ## Why this order * **Fastest path to value**: get `docgen init` producing a solid README before adding diffing/RAG. * **Contain risk early**: section markers, lint, and commit publishing ensure safe/idempotent edits. * **Accuracy next**: add RAG + validation to avoid hallucinations once the pipeline works. * **Scale breadth later**: only after the core loop is robust do we widen language/framework coverage. * **Polish last**: CI, caching, and quality gates refine dev experience and performance.",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/spec.md#0",
      "vector": {
        "intelligent": 0.04393747751637468,
        "readme": 0.17574991006549873,
        "generator": 0.04393747751637468,
        "architecture": 0.08787495503274936,
        "spec": 0.04393747751637468,
        "python": 0.08787495503274936,
        "local": 0.13181243254912403,
        "llm": 0.13181243254912403,
        "1": 0.08787495503274936,
        "purpose": 0.04393747751637468,
        "scope": 0.04393747751637468,
        "build": 0.17574991006549873,
        "a": 0.26362486509824806,
        "based": 0.04393747751637468,
        "system": 0.04393747751637468,
        "that": 0.04393747751637468,
        "analyzes": 0.04393747751637468,
        "git": 0.26362486509824806,
        "repository": 0.04393747751637468,
        "structure": 0.04393747751637468,
        "code": 0.04393747751637468,
        "dependencies": 0.04393747751637468,
        "then": 0.04393747751637468,
        "generates": 0.04393747751637468,
        "and": 0.2196873875818734,
        "maintains": 0.04393747751637468,
        "high": 0.08787495503274936,
        "quality": 0.04393747751637468,
        "md": 0.04393747751637468,
        "using": 0.04393747751637468,
        "it": 0.04393747751637468,
        "initializes": 0.04393747751637468,
        "repos": 0.04393747751637468,
        "with": 0.08787495503274936,
        "no": 0.04393747751637468,
        "docs": 0.17574991006549873,
        "keeps": 0.04393747751637468,
        "up": 0.04393747751637468,
        "to": 0.2196873875818734,
        "date": 0.04393747751637468,
        "on": 0.04393747751637468,
        "commits": 0.04393747751637468,
        "prs": 0.04393747751637468,
        "supports": 0.08787495503274936,
        "multiple": 0.04393747751637468,
        "languages": 0.04393747751637468,
        "project": 0.04393747751637468,
        "types": 0.04393747751637468,
        "via": 0.04393747751637468,
        "analyzers": 0.08787495503274936,
        "non": 0.04393747751637468,
        "goals": 0.04393747751637468,
        "for": 0.08787495503274936,
        "the": 0.04393747751637468,
        "poc": 0.04393747751637468,
        "multi": 0.04393747751637468,
        "repo": 0.2196873875818734,
        "orchestration": 0.04393747751637468,
        "full": 0.08787495503274936,
        "website": 0.04393747751637468,
        "api": 0.04393747751637468,
        "reference": 0.04393747751637468,
        "extraction": 0.04393747751637468,
        "beyond": 0.04393747751637468,
        "summaries": 0.04393747751637468,
        "cloud": 0.04393747751637468,
        "llms": 0.04393747751637468,
        "2": 0.08787495503274936,
        "level": 0.04393747751637468,
        "at": 0.04393747751637468,
        "glance": 0.04393747751637468,
        "events": 0.04393747751637468,
        "event": 0.04393747751637468,
        "sources": 0.04393747751637468,
        "cli": 0.04393747751637468,
        "commands": 0.04393747751637468,
        "hooks": 0.04393747751637468,
        "webhooks": 0.04393747751637468,
        "ci": 0.08787495503274936,
        "commit": 0.08787495503274936,
        "pr": 0.08787495503274936,
        "orchestr": 0.04393747751637468,
        "async": 0.04393747751637468,
        "task": 0.04393747751637468,
        "graph": 0.08787495503274936,
        "scanner": 0.08787495503274936,
        "doc": 0.04393747751637468,
        "store": 0.04393747751637468,
        "indexer": 0.08787495503274936,
        "language": 0.08787495503274936,
        "artifacts": 0.08787495503274936,
        "fs": 0.04393747751637468,
        "deps": 0.04393747751637468,
        "cache": 0.04393747751637468,
        "versions": 0.04393747751637468,
        "knowledge": 0.04393747751637468,
        "embeddings": 0.04393747751637468,
        "prompt": 0.04393747751637468,
        "builder": 0.04393747751637468,
        "templates": 0.04393747751637468,
        "rag": 0.04393747751637468,
        "runner": 0.04393747751637468,
        "llama": 0.04393747751637468,
        "cpp": 0.04393747751637468,
        "ollama": 0.04393747751637468,
        "post": 0.04393747751637468,
        "processor": 0.04393747751637468,
        "lint": 0.04393747751637468,
        "toc": 0.04393747751637468,
        "badges": 0.04393747751637468,
        "links": 0.04393747751637468,
        "publisher": 0.04393747751637468,
        "branch": 0.04393747751637468,
        "3": 0.13181243254912403,
        "components": 0.04393747751637468,
        "responsibilities": 0.04393747751637468,
        "orchestrator": 0.04393747751637468,
        "coordinates": 0.04393747751637468,
        "end": 0.08787495503274936,
        "pipelines": 0.04393747751637468,
        "init": 0.04393747751637468,
        "update": 0.08787495503274936,
        "regenerate": 0.08787495503274936,
        "computes": 0.04393747751637468,
        "change": 0.04393747751637468,
        "impact": 0.04393747751637468,
        "from": 0.04393747751637468,
        "diff": 0.04393747751637468,
        "decides": 0.04393747751637468,
        "whether": 0.04393747751637468,
        "or": 0.04393747751637468,
        "patch": 0.04393747751637468,
        "sections": 0.04393747751637468,
        "schedules": 0.04393747751637468,
        "tasks": 0.04393747751637468,
        "caches": 0.04393747751637468,
        "intermediate": 0.04393747751637468,
        "results": 0.04393747751637468,
        "emits": 0.04393747751637468,
        "structured": 0.04393747751637468,
        "logs": 0.04393747751637468,
        "info": 0.04393747751637468,
        "by": 0.04393747751637468,
        "default": 0.04393747751637468,
        "debug": 0.04393747751637468,
        "verbose": 0.04393747751637468,
        "respects": 0.04393747751637468,
        "docgen": 0.13181243254912403,
        "yml": 0.04393747751637468,
        "watched_globs": 0.04393747751637468,
        "skip": 0.04393747751637468,
        "unrelated": 0.04393747751637468,
        "diffs": 0.04393747751637468,
        "substitutes": 0.04393747751637468,
        "fail": 0.04393747751637468,
        "safe": 0.04393747751637468,
        "stubs": 0.04393747751637468,
        "when": 0.04393747751637468,
        "generation": 0.04393747751637468,
        "fails": 0.04393747751637468,
        "dry": 0.08787495503274936,
        "run": 0.13181243254912403,
        "previews": 0.04393747751637468,
        "records": 0.04393747751637468,
        "scorecards": 0.04393747751637468,
        "each": 0.04393747751637468,
        "under": 0.04393747751637468,
        "walks": 0.04393747751637468,
        "builds": 0.04393747751637468,
        "normalized": 0.04393747751637468,
        "manifest": 0.04393747751637468,
        "files": 0.08787495503274936,
        "sizes": 0.04393747751637468,
        "tags": 0.04393747751637468,
        "path": 0.04393747751637468,
        "roles": 0.04393747751637468,
        "src": 0.04393747751637468,
        "test": 0.08787495503274936,
        "examples": 0.04393747751637468,
        "dependency": 0.04393747751637468,
        "manifests": 0.04393747751637468,
        "e": 0.04393747751637468,
        "g": 0.04393747751637468,
        "pom": 0.04393747751637468,
        "xml": 0.04393747751637468,
        "gradle": 0.04393747751637468,
        "package": 0.04393747751637468,
        "json": 0.13181243254912403,
        "requirements": 0.04393747751637468,
        "txt": 0.04393747751637468,
        "pyproject": 0.04393747751637468,
        "toml": 0.08787495503274936,
        "go": 0.04393747751637468,
        "mod": 0.04393747751637468,
        "cargo": 0.04393747751637468,
        "gemfile": 0.04393747751637468,
        "composer": 0.04393747751637468,
        "entrypoints": 0.04393747751637468,
        "clis": 0.04393747751637468,
        "services": 0.04393747751637468,
        "coverage": 0.04393747751637468,
        "if": 0.04393747751637468,
        "available": 0.04393747751637468,
        "stores": 0.04393747751637468,
        "per": 0.04393747751637468,
        "index": 0.04393747751637468,
        "speed": 0.04393747751637468,
        "future": 0.04393747751637468
      },
      "text": "# Intelligent README Generator \u2014 Architecture & Spec (Python, Local LLM) ## 1) Purpose & Scope Build a Python-based system that **analyzes a Git repository** (structure, code, dependencies), then **generates and maintains a high-quality README.md** using a **local LLM**. It initializes repos with no docs and **keeps docs up to date** on commits/PRs. Supports **multiple languages/project types** via analyzers. Non-goals (for the POC): multi-repo orchestration, full website docs, API reference extraction (beyond README summaries), cloud LLMs. --- ## 2) High-Level Architecture (at a glance) ``` \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 Git Events \u2502 Event Sources \u2502 CLI commands, Git hooks, Webhooks/CI (commit/PR) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Orchestr \u2502 (Async task graph) \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Repo Scanner\u2502 \u2502 Analyzers \u2502 \u2502 Doc Store \u2502 \u2502 + Indexer \u2502 \u2502 (Language, \u2502 \u2502 (Artifacts, \u2502 \u2502 (Git, FS) \u2502 \u2502 Build, Deps) \u2502 \u2502 Cache, \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 Versions) \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 Knowledge Graph \u2502 \u2502 \u2502 \u2502 & Embeddings \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Prompt Builder \u2502 (Templates + RAG) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Local LLM Runner \u2502 (llama.cpp/Ollama) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 Post-Processor \u2502 (lint, ToC, badges, links) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Git Publisher \u2502 (branch/PR/commit) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 ``` --- ## 3) Components & Responsibilities ### 3.1 Orchestrator * Coordinates end-to-end pipelines (init, update, regenerate). * Computes *change impact* from Git diff; decides whether to regenerate full README or patch sections. * Schedules tasks and caches intermediate results. * Emits structured logs (info by default, debug with `--verbose`), respects `.docgen.yml` `ci.watched_globs` to skip unrelated diffs, and substitutes fail-safe stubs when generation fails. * Supports dry-run previews (`docgen update --dry-run`) and records scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#1",
      "vector": {
        "scorecards": 0.03721614637823934,
        "for": 0.18608073189119673,
        "each": 0.07443229275647868,
        "run": 0.07443229275647868,
        "under": 0.07443229275647868,
        "docgen": 0.11164843913471803,
        "3": 0.22329687826943606,
        "2": 0.03721614637823934,
        "repo": 0.18608073189119673,
        "scanner": 0.03721614637823934,
        "indexer": 0.03721614637823934,
        "walks": 0.03721614637823934,
        "builds": 0.03721614637823934,
        "normalized": 0.03721614637823934,
        "manifest": 0.03721614637823934,
        "files": 0.11164843913471803,
        "sizes": 0.03721614637823934,
        "language": 0.07443229275647868,
        "tags": 0.03721614637823934,
        "path": 0.03721614637823934,
        "roles": 0.03721614637823934,
        "src": 0.03721614637823934,
        "test": 0.11164843913471803,
        "docs": 0.11164843913471803,
        "examples": 0.03721614637823934,
        "build": 0.14886458551295736,
        "dependency": 0.07443229275647868,
        "manifests": 0.03721614637823934,
        "e": 0.11164843913471803,
        "g": 0.11164843913471803,
        "pom": 0.03721614637823934,
        "xml": 0.03721614637823934,
        "gradle": 0.07443229275647868,
        "package": 0.03721614637823934,
        "json": 0.11164843913471803,
        "requirements": 0.03721614637823934,
        "txt": 0.03721614637823934,
        "pyproject": 0.03721614637823934,
        "toml": 0.07443229275647868,
        "go": 0.11164843913471803,
        "mod": 0.03721614637823934,
        "cargo": 0.07443229275647868,
        "gemfile": 0.03721614637823934,
        "composer": 0.03721614637823934,
        "entrypoints": 0.11164843913471803,
        "clis": 0.03721614637823934,
        "services": 0.11164843913471803,
        "coverage": 0.03721614637823934,
        "artifacts": 0.03721614637823934,
        "if": 0.03721614637823934,
        "available": 0.03721614637823934,
        "stores": 0.03721614637823934,
        "a": 0.03721614637823934,
        "per": 0.07443229275647868,
        "index": 0.03721614637823934,
        "to": 0.11164843913471803,
        "speed": 0.03721614637823934,
        "future": 0.03721614637823934,
        "runs": 0.03721614637823934,
        "analyzers": 0.22329687826943606,
        "plugin": 0.03721614637823934,
        "based": 0.03721614637823934,
        "detect": 0.03721614637823934,
        "idioms": 0.03721614637823934,
        "frameworks": 0.03721614637823934,
        "spring": 0.07443229275647868,
        "boot": 0.07443229275647868,
        "fastapi": 0.07443229275647868,
        "node": 0.07443229275647868,
        "express": 0.03721614637823934,
        "react": 0.03721614637823934,
        "next": 0.03721614637823934,
        "js": 0.03721614637823934,
        "http": 0.14886458551295736,
        "rust": 0.03721614637823934,
        "bin": 0.03721614637823934,
        "lib": 0.03721614637823934,
        "maven": 0.03721614637823934,
        "setuptools": 0.03721614637823934,
        "poetry": 0.03721614637823934,
        "npm": 0.03721614637823934,
        "pnpm": 0.03721614637823934,
        "yarn": 0.03721614637823934,
        "extract": 0.03721614637823934,
        "top": 0.07443229275647868,
        "level": 0.03721614637823934,
        "libs": 0.03721614637823934,
        "notable": 0.03721614637823934,
        "transitive": 0.03721614637823934,
        "categories": 0.03721614637823934,
        "entrypoint": 0.03721614637823934,
        "infer": 0.03721614637823934,
        "commands": 0.03721614637823934,
        "django": 0.03721614637823934,
        "scripts": 0.07443229275647868,
        "pattern": 0.03721614637823934,
        "monorepo": 0.03721614637823934,
        "layout": 0.03721614637823934,
        "ci": 0.03721614637823934,
        "cd": 0.03721614637823934,
        "containerization": 0.03721614637823934,
        "k8s": 0.03721614637823934,
        "heuristics": 0.03721614637823934,
        "structure": 0.03721614637823934,
        "analyzer": 0.07443229275647868,
        "module": 0.03721614637823934,
        "topology": 0.03721614637823934,
        "detected": 0.11164843913471803,
        "entities": 0.07443229275647868,
        "dtos": 0.03721614637823934,
        "api": 0.11164843913471803,
        "endpoint": 0.07443229275647868,
        "sequences": 0.03721614637823934,
        "service": 0.03721614637823934,
        "interactions": 0.03721614637823934,
        "returns": 0.03721614637823934,
        "signals": 0.07443229275647868,
        "key": 0.07443229275647868,
        "facts": 0.03721614637823934,
        "the": 0.11164843913471803,
        "knowledge": 0.07443229275647868,
        "graph": 0.11164843913471803,
        "4": 0.03721614637823934,
        "embeddings": 0.07443229275647868,
        "rag": 0.03721614637823934,
        "of": 0.07443229275647868,
        "modules": 0.03721614637823934,
        "packages": 0.03721614637823934,
        "configs": 0.03721614637823934,
        "tests": 0.03721614637823934,
        "lightweight": 0.03721614637823934,
        "embedding": 0.03721614637823934,
        "store": 0.03721614637823934,
        "faiss": 0.03721614637823934,
        "in": 0.03721614637823934,
        "memory": 0.03721614637823934,
        "chunks": 0.03721614637823934,
        "code": 0.03721614637823934,
        "comments": 0.03721614637823934,
        "readme": 0.07443229275647868,
        "fragments": 0.03721614637823934,
        "changelog": 0.03721614637823934,
        "issues": 0.03721614637823934,
        "optional": 0.03721614637823934,
        "commit": 0.03721614637823934,
        "messages": 0.07443229275647868,
        "provides": 0.03721614637823934,
        "context": 0.07443229275647868,
        "retrieval": 0.03721614637823934,
        "prompt": 0.07443229275647868,
        "building": 0.03721614637823934,
        "k": 0.03721614637823934,
        "by": 0.03721614637823934,
        "section": 0.11164843913471803,
        "and": 0.2605130246476754,
        "persists": 0.03721614637823934,
        "refreshing": 0.03721614637823934,
        "only": 0.03721614637823934,
        "whose": 0.03721614637823934,
        "hashes": 0.03721614637823934,
        "changed": 0.03721614637823934,
        "5": 0.03721614637823934,
        "builder": 0.03721614637823934,
        "aware": 0.03721614637823934,
        "jinja2": 0.03721614637823934,
        "templates": 0.03721614637823934,
        "with": 0.11164843913471803,
        "guardrails": 0.03721614637823934,
        "project": 0.03721614637823934,
        "intro": 0.03721614637823934,
        "features": 0.03721614637823934,
        "architecture": 0.03721614637823934,
        "overview": 0.03721614637823934,
        "quick": 0.07443229275647868,
        "start": 0.07443229275647868,
        "configuration": 0.03721614637823934,
        "deployment": 0.03721614637823934,
        "troubleshooting": 0.03721614637823934,
        "faq": 0.03721614637823934,
        "roadmap": 0.03721614637823934,
        "contribution": 0.03721614637823934,
        "license": 0.03721614637823934,
        "badges": 0.03721614637823934,
        "dynamically": 0.03721614637823934,
        "injects": 0.07443229275647868,
        "retrieved": 0.03721614637823934,
        "produces": 0.03721614637823934,
        "llm": 0.07443229275647868,
        "ready": 0.03721614637823934,
        "structured": 0.07443229275647868,
        "prompts": 0.03721614637823934,
        "system": 0.03721614637823934,
        "user": 0.03721614637823934,
        "token": 0.03721614637823934,
        "budgets": 0.03721614637823934,
        "honours": 0.03721614637823934,
        "style": 0.07443229275647868,
        "presets": 0.03721614637823934,
        "concise": 0.03721614637823934,
        "trims": 0.03721614637823934,
        "list": 0.03721614637823934,
        "heavy": 0.03721614637823934,
        "sections": 0.03721614637823934,
        "comprehensive": 0.03721614637823934,
        "keeps": 0.03721614637823934,
        "full": 0.03721614637823934,
        "detail": 0.03721614637823934,
        "infrastructure": 0.03721614637823934,
        "patterns": 0.03721614637823934,
        "into": 0.03721614637823934,
        "guidance": 0.03721614637823934,
        "uvicorn": 0.03721614637823934,
        "docker": 0.11164843913471803,
        "compose": 0.03721614637823934,
        "up": 0.03721614637823934,
        "generates": 0.03721614637823934,
        "mermaid": 0.03721614637823934,
        "sequence": 0.03721614637823934,
        "diagrams": 0.03721614637823934,
        "highlighting": 0.03721614637823934,
        "request": 0.03721614637823934,
        "flow": 0.03721614637823934,
        "across": 0.03721614637823934,
        "when": 0.03721614637823934,
        "endpoints": 0.03721614637823934,
        "are": 0.03721614637823934,
        "6": 0.03721614637823934,
        "local": 0.03721614637823934,
        "runner": 0.11164843913471803,
        "pluggable": 0.03721614637823934,
        "runtime": 0.03721614637823934,
        "that": 0.03721614637823934,
        "prefers": 0.03721614637823934,
        "model": 0.07443229275647868,
        "host": 0.03721614637823934,
        "localhost": 0.03721614637823934,
        "12434": 0.03721614637823934,
        "engines": 0.07443229275647868,
        "v1": 0.07443229275647868,
        "container": 0.03721614637823934,
        "internal": 0.03721614637823934,
        "environment": 0.03721614637823934,
        "overrides": 0.03721614637823934,
        "an": 0.03721614637823934,
        "ollama": 0.03721614637823934,
        "cli": 0.03721614637823934,
        "fallback": 0.03721614637823934,
        "defaults": 0.03721614637823934,
        "ai": 0.03721614637823934,
        "smollm2": 0.03721614637823934,
        "360m": 0.03721614637823934,
        "q4_k_m": 0.03721614637823934,
        "but": 0.03721614637823934,
        "respects": 0.03721614637823934,
        "yml": 0.03721614637823934,
        "openai": 0.03721614637823934,
        "compatible": 0.03721614637823934,
        "env": 0.03721614637823934,
        "vars": 0.03721614637823934,
        "alternate": 0.03721614637823934,
        "weights": 0.03721614637823934,
        "keys": 0.03721614637823934,
        "supports": 0.03721614637823934,
        "function": 0.03721614637823934,
        "calling": 0.03721614637823934,
        "outputs": 0.03721614637823934
      },
      "text": "scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future runs. ### 3.3 Analyzers (Plugin-based) * **Language analyzers** (detect idioms, entrypoints, frameworks: Spring Boot, FastAPI, Node/Express, React, Next.js, Go HTTP, Rust bin/lib). * **Build analyzers** (Maven/Gradle, setuptools/Poetry, npm/pnpm/yarn, Go, Cargo). * **Dependency analyzers** (extract top-level libs & notable transitive categories). * **Entrypoint analyzers** (infer run commands for FastAPI, Django, Spring Boot, Node scripts). * **Pattern analyzers** (monorepo layout, CI/CD, containerization/K8s heuristics). * **Structure analyzer** (module topology, detected entities/DTOs, API endpoint sequences, service interactions). * Each analyzer returns **Signals** (key facts) to the knowledge graph. ### 3.4 Knowledge Graph & Embeddings (RAG) * Graph of Repo entities: modules, packages, services, scripts, configs, tests, docs. * Lightweight embedding store (e.g., `faiss`/in-memory) of **chunks**: code comments, README fragments, `docs/`, `CHANGELOG`, issues (optional), commit messages. * Provides **context retrieval** for prompt building (top-k by section) and persists embeddings under `.docgen/`, refreshing only the files whose hashes changed. ### 3.5 Prompt Builder * **Section-aware** Jinja2 templates with **guardrails**: * Project intro, key features, architecture overview, quick start, configuration, build/test, deployment, troubleshooting, FAQ, roadmap, contribution, license, badges. * Dynamically injects repo signals and retrieved context per section. * Produces **LLM-ready structured prompts** (system + user messages) with token budgets and honours `readme.style` presets (`concise` trims list-heavy sections, `comprehensive` keeps full detail). * Injects detected entrypoints and infrastructure patterns into Quick Start guidance (e.g., `uvicorn ...`, `docker compose up`). * Generates Mermaid sequence diagrams highlighting request flow across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#2",
      "vector": {
        "across": 0.028060676663315687,
        "services": 0.028060676663315687,
        "when": 0.08418202998994706,
        "api": 0.056121353326631374,
        "endpoints": 0.028060676663315687,
        "are": 0.056121353326631374,
        "detected": 0.056121353326631374,
        "3": 0.11224270665326275,
        "6": 0.028060676663315687,
        "local": 0.056121353326631374,
        "llm": 0.028060676663315687,
        "runner": 0.08418202998994706,
        "pluggable": 0.028060676663315687,
        "runtime": 0.028060676663315687,
        "that": 0.028060676663315687,
        "prefers": 0.028060676663315687,
        "the": 0.028060676663315687,
        "docker": 0.056121353326631374,
        "model": 0.08418202998994706,
        "http": 0.08418202998994706,
        "endpoint": 0.028060676663315687,
        "host": 0.028060676663315687,
        "localhost": 0.028060676663315687,
        "12434": 0.028060676663315687,
        "engines": 0.056121353326631374,
        "v1": 0.056121353326631374,
        "container": 0.028060676663315687,
        "internal": 0.08418202998994706,
        "with": 0.08418202998994706,
        "environment": 0.028060676663315687,
        "overrides": 0.028060676663315687,
        "and": 0.36478879662310393,
        "an": 0.028060676663315687,
        "ollama": 0.028060676663315687,
        "cli": 0.056121353326631374,
        "fallback": 0.028060676663315687,
        "defaults": 0.056121353326631374,
        "to": 0.08418202998994706,
        "ai": 0.028060676663315687,
        "smollm2": 0.028060676663315687,
        "360m": 0.028060676663315687,
        "q4_k_m": 0.028060676663315687,
        "but": 0.028060676663315687,
        "respects": 0.028060676663315687,
        "docgen": 0.11224270665326275,
        "yml": 0.028060676663315687,
        "openai": 0.028060676663315687,
        "compatible": 0.028060676663315687,
        "env": 0.028060676663315687,
        "vars": 0.028060676663315687,
        "for": 0.08418202998994706,
        "alternate": 0.028060676663315687,
        "weights": 0.028060676663315687,
        "keys": 0.028060676663315687,
        "supports": 0.056121353326631374,
        "function": 0.028060676663315687,
        "calling": 0.028060676663315687,
        "style": 0.056121353326631374,
        "structured": 0.028060676663315687,
        "outputs": 0.056121353326631374,
        "available": 0.028060676663315687,
        "streaming": 0.028060676663315687,
        "decode": 0.028060676663315687,
        "stop": 0.028060676663315687,
        "tokens": 0.028060676663315687,
        "section": 0.056121353326631374,
        "by": 0.056121353326631374,
        "generation": 0.028060676663315687,
        "stay": 0.056121353326631374,
        "within": 0.028060676663315687,
        "context": 0.028060676663315687,
        "limits": 0.028060676663315687,
        "validates": 0.056121353326631374,
        "configuration": 0.028060676663315687,
        "ensure": 0.028060676663315687,
        "runners": 0.028060676663315687,
        "loopback": 0.028060676663315687,
        "hosts": 0.028060676663315687,
        "only": 0.056121353326631374,
        "7": 0.028060676663315687,
        "post": 0.056121353326631374,
        "processor": 0.028060676663315687,
        "lints": 0.028060676663315687,
        "markdown": 0.028060676663315687,
        "builds": 0.028060676663315687,
        "toc": 0.028060676663315687,
        "adds": 0.056121353326631374,
        "shields": 0.028060676663315687,
        "badges": 0.056121353326631374,
        "normalizes": 0.028060676663315687,
        "heading": 0.028060676663315687,
        "hierarchy": 0.028060676663315687,
        "enforces": 0.028060676663315687,
        "guide": 0.028060676663315687,
        "readme": 0.08418202998994706,
        "contract": 0.028060676663315687,
        "required": 0.056121353326631374,
        "sections": 0.11224270665326275,
        "links": 0.028060676663315687,
        "relative": 0.028060676663315687,
        "absolute": 0.028060676663315687,
        "code": 0.028060676663315687,
        "block": 0.028060676663315687,
        "languages": 0.028060676663315687,
        "line": 0.028060676663315687,
        "length": 0.028060676663315687,
        "computes": 0.028060676663315687,
        "diff": 0.028060676663315687,
        "aware": 0.028060676663315687,
        "updates": 0.056121353326631374,
        "modifies": 0.028060676663315687,
        "impacted": 0.028060676663315687,
        "changes": 0.056121353326631374,
        "persists": 0.028060676663315687,
        "a": 0.08418202998994706,
        "scorecard": 0.056121353326631374,
        "json": 0.056121353326631374,
        "capturing": 0.028060676663315687,
        "coverage": 0.056121353326631374,
        "quick": 0.028060676663315687,
        "start": 0.028060676663315687,
        "health": 0.028060676663315687,
        "link": 0.056121353326631374,
        "results": 0.028060676663315687,
        "build": 0.056121353326631374,
        "license": 0.028060676663315687,
        "safe": 0.028060676663315687,
        "reports": 0.028060676663315687,
        "warnings": 0.028060676663315687,
        "during": 0.028060676663315687,
        "processing": 0.028060676663315687,
        "8": 0.028060676663315687,
        "doc": 0.028060676663315687,
        "store": 0.028060676663315687,
        "artifacts": 0.028060676663315687,
        "versions": 0.028060676663315687,
        "keeps": 0.028060676663315687,
        "generated": 0.028060676663315687,
        "drafts": 0.028060676663315687,
        "logs": 0.028060676663315687,
        "prompts": 0.028060676663315687,
        "inputs": 0.028060676663315687,
        "diffs": 0.028060676663315687,
        "under": 0.028060676663315687,
        "per": 0.028060676663315687,
        "repo": 0.028060676663315687,
        "rollback": 0.028060676663315687,
        "regression": 0.028060676663315687,
        "testing": 0.028060676663315687,
        "via": 0.028060676663315687,
        "golden": 0.028060676663315687,
        "readmes": 0.028060676663315687,
        "stores": 0.028060676663315687,
        "embedding": 0.028060676663315687,
        "cache": 0.028060676663315687,
        "embeddings": 0.028060676663315687,
        "scorecards": 0.028060676663315687,
        "so": 0.028060676663315687,
        "subsequent": 0.028060676663315687,
        "runs": 0.028060676663315687,
        "incremental": 0.028060676663315687,
        "9": 0.028060676663315687,
        "git": 0.028060676663315687,
        "publisher": 0.028060676663315687,
        "creates": 0.028060676663315687,
        "branch": 0.028060676663315687,
        "e": 0.056121353326631374,
        "g": 0.056121353326631374,
        "update": 0.028060676663315687,
        "yyyymmdd": 0.028060676663315687,
        "pr": 0.056121353326631374,
        "body": 0.028060676663315687,
        "explains": 0.028060676663315687,
        "what": 0.028060676663315687,
        "were": 0.028060676663315687,
        "updated": 0.028060676663315687,
        "can": 0.028060676663315687,
        "commit": 0.028060676663315687,
        "directly": 0.028060676663315687,
        "configurable": 0.028060676663315687,
        "on": 0.028060676663315687,
        "init": 0.028060676663315687,
        "empty": 0.028060676663315687,
        "repos": 0.028060676663315687,
        "applies": 0.028060676663315687,
        "labels": 0.028060676663315687,
        "docs": 0.056121353326631374,
        "auto": 0.028060676663315687,
        "existing": 0.028060676663315687,
        "prs": 0.028060676663315687,
        "configured": 0.028060676663315687,
        "4": 0.028060676663315687,
        "data": 0.028060676663315687,
        "python": 0.056121353326631374,
        "pydantic": 0.028060676663315687,
        "dataclasses": 0.056121353326631374,
        "from": 0.056121353326631374,
        "import": 0.056121353326631374,
        "dataclass": 0.2244854133065255,
        "typing": 0.028060676663315687,
        "list": 0.11224270665326275,
        "dict": 0.14030338331657843,
        "optional": 0.056121353326631374,
        "class": 0.1964247366432098,
        "filemeta": 0.056121353326631374,
        "path": 0.028060676663315687,
        "str": 0.5892742099296294,
        "size": 0.028060676663315687,
        "int": 0.028060676663315687,
        "language": 0.028060676663315687,
        "role": 0.028060676663315687,
        "src": 0.028060676663315687,
        "test": 0.056121353326631374,
        "config": 0.028060676663315687,
        "script": 0.028060676663315687,
        "infra": 0.028060676663315687,
        "other": 0.028060676663315687,
        "hash": 0.028060676663315687,
        "repomanifest": 0.056121353326631374,
        "root": 0.028060676663315687,
        "files": 0.028060676663315687,
        "detectors": 0.028060676663315687,
        "build_system": 0.028060676663315687,
        "maven": 0.028060676663315687,
        "framework": 0.056121353326631374,
        "spring": 0.028060676663315687,
        "boot": 0.028060676663315687,
        "dependency_files": 0.028060676663315687,
        "pom": 0.028060676663315687,
        "xml": 0.028060676663315687,
        "requirements": 0.028060676663315687,
        "txt": 0.028060676663315687,
        "signal": 0.056121353326631374,
        "kind": 0.028060676663315687,
        "service": 0.028060676663315687,
        "db": 0.028060676663315687,
        "queue": 0.028060676663315687,
        "dep": 0.028060676663315687,
        "entrypoint": 0.028060676663315687,
        "name": 0.028060676663315687,
        "detail": 0.028060676663315687,
        "analysisresult": 0.028060676663315687,
        "manifest": 0.028060676663315687,
        "signals": 0.028060676663315687,
        "embedding_index_path": 0.028060676663315687,
        "sectionspec": 0.028060676663315687,
        "key": 0.028060676663315687,
        "intro": 0.028060676663315687,
        "features": 0.028060676663315687,
        "arch": 0.028060676663315687,
        "quickstart": 0.028060676663315687,
        "bool": 0.028060676663315687,
        "sources": 0.028060676663315687,
        "preferred": 0.028060676663315687,
        "retrieval": 0.028060676663315687,
        "tags": 0.028060676663315687,
        "template_name": 0.028060676663315687,
        "readmedraft": 0.028060676663315687,
        "full_markdown": 0.028060676663315687,
        "updateplan": 0.028060676663315687,
        "strategy": 0.028060676663315687
      },
      "text": "across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs when available. * Streaming decode with stop tokens; **section-by-section** generation to stay within context limits. * Validates configuration to ensure runners stay local (loopback/`*.internal` hosts only). ### 3.7 Post-Processor * Lints Markdown, builds ToC, adds shields/badges, normalizes heading hierarchy. * Enforces internal style guide and **README contract** (required sections). * Validates links (relative/absolute), code block languages, and line length. * Computes **diff-aware updates**: only modifies sections impacted by changes. * Persists a README scorecard (`.docgen/scorecard.json`) capturing coverage, quick start health, and link results. * Adds build/coverage/license badges with safe defaults and reports link warnings during post-processing. ### 3.8 Doc Store (Artifacts & Versions) * Keeps generated drafts, logs, prompts, inputs/outputs, and diffs under `.docgen/` per repo. * Supports rollback and regression testing via \u201cgolden\u201d READMEs. * Stores embedding cache (`embeddings.json`) and scorecards so subsequent runs are incremental. ### 3.9 Git Publisher * Creates a branch (e.g., `docgen/readme-update-YYYYMMDD`) and a PR. * PR body explains detected changes and what sections were updated. * Can commit directly (configurable) on init for empty repos. * Applies labels (e.g., `docs:auto`) and updates existing PRs when configured. --- ## 4) Data Model (Python `pydantic`/`dataclasses`) ```python from dataclasses import dataclass from typing import List, Dict, Optional @dataclass class FileMeta: path: str size: int language: Optional[str] role: str # src|test|docs|config|build|script|infra|other hash: str @dataclass class RepoManifest: root: str files: List[FileMeta] detectors: Dict[str, str] # {\"build_system\": \"maven\", \"framework\":\"spring-boot\", ...} dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str #",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#3",
      "vector": {
        "dependency_files": 0.03280893574623933,
        "dict": 0.13123574298495733,
        "str": 0.5577519076860686,
        "pom": 0.098426807238718,
        "xml": 0.098426807238718,
        "requirements": 0.06561787149247866,
        "txt": 0.06561787149247866,
        "dataclass": 0.16404467873119666,
        "class": 0.16404467873119666,
        "signal": 0.06561787149247866,
        "kind": 0.03280893574623933,
        "framework": 0.03280893574623933,
        "service": 0.03280893574623933,
        "cli": 0.03280893574623933,
        "db": 0.03280893574623933,
        "queue": 0.03280893574623933,
        "dep": 0.03280893574623933,
        "entrypoint": 0.03280893574623933,
        "test": 0.06561787149247866,
        "name": 0.03280893574623933,
        "detail": 0.03280893574623933,
        "analysisresult": 0.03280893574623933,
        "manifest": 0.06561787149247866,
        "repomanifest": 0.03280893574623933,
        "signals": 0.06561787149247866,
        "list": 0.098426807238718,
        "embedding_index_path": 0.03280893574623933,
        "sectionspec": 0.03280893574623933,
        "key": 0.03280893574623933,
        "intro": 0.06561787149247866,
        "features": 0.098426807238718,
        "arch": 0.03280893574623933,
        "quickstart": 0.06561787149247866,
        "required": 0.03280893574623933,
        "bool": 0.03280893574623933,
        "sources": 0.03280893574623933,
        "preferred": 0.03280893574623933,
        "retrieval": 0.06561787149247866,
        "tags": 0.03280893574623933,
        "template_name": 0.03280893574623933,
        "readmedraft": 0.03280893574623933,
        "sections": 0.13123574298495733,
        "full_markdown": 0.03280893574623933,
        "updateplan": 0.06561787149247866,
        "strategy": 0.03280893574623933,
        "full": 0.03280893574623933,
        "patch": 0.06561787149247866,
        "changed_sections": 0.03280893574623933,
        "reasons": 0.03280893574623933,
        "section": 0.06561787149247866,
        "why": 0.03280893574623933,
        "5": 0.098426807238718,
        "configuration": 0.06561787149247866,
        "docgen": 0.196853614477436,
        "yml": 0.06561787149247866,
        "at": 0.03280893574623933,
        "repo": 0.06561787149247866,
        "root": 0.06561787149247866,
        "yaml": 0.03280893574623933,
        "llm": 0.03280893574623933,
        "runner": 0.03280893574623933,
        "ollama": 0.03280893574623933,
        "or": 0.06561787149247866,
        "llama": 0.03280893574623933,
        "cpp": 0.03280893574623933,
        "model": 0.03280893574623933,
        "llama3": 0.03280893574623933,
        "8b": 0.03280893574623933,
        "instruct": 0.03280893574623933,
        "example": 0.03280893574623933,
        "local": 0.03280893574623933,
        "only": 0.098426807238718,
        "max_tokens": 0.03280893574623933,
        "2048": 0.03280893574623933,
        "temperature": 0.03280893574623933,
        "0": 0.03280893574623933,
        "2": 0.13123574298495733,
        "readme": 0.196853614477436,
        "style": 0.03280893574623933,
        "concise": 0.03280893574623933,
        "comprehensive": 0.03280893574623933,
        "template_pack": 0.06561787149247866,
        "enterprise": 0.03280893574623933,
        "optional": 0.03280893574623933,
        "bundle": 0.03280893574623933,
        "shipped": 0.03280893574623933,
        "with": 0.06561787149247866,
        "required_sections": 0.03280893574623933,
        "architecture": 0.06561787149247866,
        "build_and_test": 0.03280893574623933,
        "deployment": 0.06561787149247866,
        "troubleshooting": 0.03280893574623933,
        "faq": 0.03280893574623933,
        "license": 0.03280893574623933,
        "publish": 0.06561787149247866,
        "mode": 0.03280893574623933,
        "pr": 0.13123574298495733,
        "commit": 0.098426807238718,
        "dry": 0.03280893574623933,
        "run": 0.03280893574623933,
        "branch_prefix": 0.03280893574623933,
        "labels": 0.03280893574623933,
        "docs": 0.06561787149247866,
        "auto": 0.03280893574623933,
        "update_existing": 0.03280893574623933,
        "true": 0.03280893574623933,
        "refresh": 0.03280893574623933,
        "an": 0.03280893574623933,
        "existing": 0.03280893574623933,
        "instead": 0.03280893574623933,
        "of": 0.03280893574623933,
        "opening": 0.03280893574623933,
        "a": 0.06561787149247866,
        "new": 0.03280893574623933,
        "one": 0.03280893574623933,
        "analyzers": 0.03280893574623933,
        "enabled": 0.03280893574623933,
        "language": 0.03280893574623933,
        "build": 0.196853614477436,
        "dependencies": 0.03280893574623933,
        "patterns": 0.03280893574623933,
        "exclude_paths": 0.03280893574623933,
        "git": 0.06561787149247866,
        "node_modules": 0.03280893574623933,
        "dist": 0.03280893574623933,
        "ci": 0.098426807238718,
        "update": 0.06561787149247866,
        "if": 0.098426807238718,
        "these": 0.03280893574623933,
        "paths": 0.03280893574623933,
        "change": 0.03280893574623933,
        "watched_globs": 0.06561787149247866,
        "src": 0.06561787149247866,
        "app": 0.03280893574623933,
        "cmd": 0.03280893574623933,
        "gradle": 0.06561787149247866,
        "package": 0.03280893574623933,
        "json": 0.03280893574623933,
        "pyproject": 0.03280893574623933,
        "toml": 0.03280893574623933,
        "dockerfile": 0.06561787149247866,
        "no": 0.06561787149247866,
        "templates_dir": 0.03280893574623933,
        "is": 0.03280893574623933,
        "provided": 0.03280893574623933,
        "automatically": 0.03280893574623933,
        "picks": 0.03280893574623933,
        "up": 0.03280893574623933,
        "templates": 0.06561787149247866,
        "bundles": 0.03280893574623933,
        "in": 0.06561787149247866,
        "the": 0.03280893574623933,
        "repository": 0.03280893574623933,
        "and": 0.03280893574623933,
        "supports": 0.03280893574623933,
        "built": 0.03280893574623933,
        "template": 0.03280893574623933,
        "packs": 0.03280893574623933,
        "via": 0.06561787149247866,
        "6": 0.098426807238718,
        "workflows": 0.03280893574623933,
        "1": 0.098426807238718,
        "initialization": 0.03280893574623933,
        "without": 0.03280893574623933,
        "scan": 0.03280893574623933,
        "analyze": 0.03280893574623933,
        "embeddings": 0.03280893574623933,
        "prompt": 0.03280893574623933,
        "default": 0.03280893574623933,
        "include": 0.03280893574623933,
        "getting": 0.03280893574623933,
        "started": 0.03280893574623933,
        "suggestions": 0.03280893574623933,
        "3": 0.06561787149247866,
        "generate": 0.06561787149247866,
        "sequentially": 0.03280893574623933,
        "streaming": 0.03280893574623933,
        "4": 0.06561787149247866,
        "post": 0.03280893574623933,
        "process": 0.03280893574623933,
        "toc": 0.03280893574623933,
        "badges": 0.03280893574623933,
        "status": 0.03280893574623933,
        "placeholder": 0.03280893574623933,
        "lint": 0.03280893574623933,
        "direct": 0.03280893574623933,
        "md": 0.03280893574623933,
        "artifacts": 0.03280893574623933,
        "on": 0.03280893574623933,
        "detect": 0.03280893574623933,
        "changes": 0.03280893574623933,
        "diff": 0.03280893574623933,
        "map": 0.03280893574623933,
        "files": 0.03280893574623933,
        "to": 0.098426807238718,
        "using": 0.03280893574623933,
        "rules": 0.03280893574623933,
        "matrix": 0.03280893574623933,
        "quick": 0.03280893574623933,
        "start": 0.03280893574623933,
        "k8s": 0.03280893574623933,
        "entrypoints": 0.03280893574623933,
        "decide": 0.03280893574623933,
        "impacted": 0.03280893574623933,
        "regenerate": 0.03280893574623933,
        "those": 0.03280893574623933,
        "skip": 0.03280893574623933,
        "changed": 0.03280893574623933,
        "file": 0.03280893574623933,
        "matches": 0.03280893574623933,
        "allows": 0.03280893574623933,
        "avoid": 0.03280893574623933,
        "unnecessary": 0.03280893574623933,
        "runs": 0.03280893574623933,
        "rag": 0.03280893574623933,
        "fetch": 0.03280893574623933,
        "top": 0.03280893574623933,
        "k": 0.03280893574623933,
        "chunks": 0.03280893574623933,
        "relevant": 0.03280893574623933,
        "each": 0.03280893574623933
      },
      "text": "dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str # \"full\"|\"patch\" changed_sections: List[str] reasons: Dict[str, str] # section->why ``` --- ## 5) Configuration (`.docgen.yml` at repo root) ```yaml llm: runner: \"ollama\" # or \"llama.cpp\" model: \"llama3:8b-instruct\" # example; local only max_tokens: 2048 temperature: 0.2 readme: style: \"concise\" # or \"comprehensive\" template_pack: \"enterprise\" # optional bundle shipped with docgen required_sections: - intro - features - architecture - quickstart - configuration - build_and_test - deployment - troubleshooting - faq - license publish: mode: \"pr\" # \"commit\" | \"pr\" | \"dry-run\" branch_prefix: \"docgen/\" labels: - \"docs:auto\" update_existing: true # refresh an existing PR instead of opening a new one analyzers: enabled: - language - build - dependencies - patterns exclude_paths: - \".git/\" - \"node_modules/\" - \"dist/\" ci: # Only update README if these paths change watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"pyproject.toml\" - \"Dockerfile\" ``` > If no `readme.templates_dir` is provided, docgen automatically picks up `docs/templates/` bundles in the repository root and supports built-in template packs via `readme.template_pack`. --- ## 6) Workflows ### 6.1 Initialization (Repo without README) 1. **Scan & Analyze** \u2192 Manifest + Signals + Embeddings. 2. **Prompt Build** with default templates, include \u201cgetting started\u201d suggestions. 3. **Generate Sections** sequentially (streaming). 4. **Post-process** \u2192 ToC, badges (build status placeholder), lint. 5. **Publish**: direct commit `README.md` + `.docgen/` artifacts. ### 6.2 Update on Commit/PR 1. **Detect changes** via Git diff; map files to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate**",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#4",
      "vector": {
        "to": 0.146943671674129,
        "sections": 0.11020775375559676,
        "using": 0.03673591791853225,
        "a": 0.11020775375559676,
        "rules": 0.03673591791853225,
        "matrix": 0.03673591791853225,
        "pom": 0.03673591791853225,
        "xml": 0.03673591791853225,
        "build": 0.18367958959266126,
        "gradle": 0.0734718358370645,
        "test": 0.0734718358370645,
        "quick": 0.0734718358370645,
        "start": 0.0734718358370645,
        "dockerfile": 0.03673591791853225,
        "k8s": 0.0734718358370645,
        "deployment": 0.0734718358370645,
        "src": 0.03673591791853225,
        "entrypoints": 0.0734718358370645,
        "architecture": 0.0734718358370645,
        "features": 0.0734718358370645,
        "2": 0.0734718358370645,
        "decide": 0.03673591791853225,
        "updateplan": 0.03673591791853225,
        "patch": 0.03673591791853225,
        "impacted": 0.03673591791853225,
        "regenerate": 0.11020775375559676,
        "only": 0.0734718358370645,
        "those": 0.03673591791853225,
        "3": 0.0734718358370645,
        "skip": 0.03673591791853225,
        "if": 0.146943671674129,
        "no": 0.0734718358370645,
        "changed": 0.03673591791853225,
        "file": 0.0734718358370645,
        "matches": 0.03673591791853225,
        "docgen": 0.146943671674129,
        "yml": 0.03673591791853225,
        "ci": 0.0734718358370645,
        "watched_globs": 0.03673591791853225,
        "allows": 0.03673591791853225,
        "avoid": 0.03673591791853225,
        "unnecessary": 0.03673591791853225,
        "runs": 0.03673591791853225,
        "4": 0.03673591791853225,
        "rag": 0.11020775375559676,
        "retrieval": 0.03673591791853225,
        "fetch": 0.03673591791853225,
        "top": 0.0734718358370645,
        "k": 0.0734718358370645,
        "chunks": 0.0734718358370645,
        "relevant": 0.03673591791853225,
        "each": 0.0734718358370645,
        "section": 0.18367958959266126,
        "5": 0.0734718358370645,
        "generate": 0.03673591791853225,
        "post": 0.0734718358370645,
        "process": 0.03673591791853225,
        "open": 0.03673591791853225,
        "pr": 0.03673591791853225,
        "with": 0.03673591791853225,
        "summary": 0.03673591791853225,
        "of": 0.03673591791853225,
        "deltas": 0.03673591791853225,
        "6": 0.0734718358370645,
        "dry": 0.0734718358370645,
        "run": 0.0734718358370645,
        "support": 0.0734718358370645,
        "update": 0.03673591791853225,
        "computes": 0.03673591791853225,
        "diffs": 0.03673591791853225,
        "and": 0.0734718358370645,
        "scorecards": 0.03673591791853225,
        "without": 0.03673591791853225,
        "writing": 0.03673591791853225,
        "or": 0.11020775375559676,
        "publishing": 0.03673591791853225,
        "manual": 0.03673591791853225,
        "full": 0.03673591791853225,
        "intro": 0.0734718358370645,
        "arch": 0.03673591791853225,
        "7": 0.03673591791853225,
        "contract": 0.03673591791853225,
        "readme": 0.0734718358370645,
        "what": 0.03673591791853225,
        "why": 0.03673591791853225,
        "who": 0.03673591791853225,
        "it": 0.03673591791853225,
        "s": 0.03673591791853225,
        "for": 0.0734718358370645,
        "key": 0.03673591791853225,
        "bullets": 0.03673591791853225,
        "grounded": 0.03673591791853225,
        "in": 0.03673591791853225,
        "real": 0.03673591791853225,
        "repo": 0.0734718358370645,
        "signals": 0.0734718358370645,
        "overview": 0.03673591791853225,
        "diagram": 0.03673591791853225,
        "ascii": 0.03673591791853225,
        "components": 0.03673591791853225,
        "minimal": 0.03673591791853225,
        "commands": 0.146943671674129,
        "per": 0.0734718358370645,
        "system": 0.0734718358370645,
        "configuration": 0.0734718358370645,
        "env": 0.03673591791853225,
        "vars": 0.03673591791853225,
        "files": 0.03673591791853225,
        "examples": 0.03673591791853225,
        "coverage": 0.03673591791853225,
        "hint": 0.03673591791853225,
        "container": 0.03673591791853225,
        "instructions": 0.03673591791853225,
        "detected": 0.11020775375559676,
        "troubleshooting": 0.03673591791853225,
        "common": 0.03673591791853225,
        "failures": 0.03673591791853225,
        "faq": 0.03673591791853225,
        "10": 0.0734718358370645,
        "concise": 0.03673591791853225,
        "q": 0.03673591791853225,
        "contributing": 0.0734718358370645,
        "md": 0.03673591791853225,
        "absent": 0.03673591791853225,
        "license": 0.03673591791853225,
        "templated": 0.03673591791853225,
        "must": 0.03673591791853225,
        "be": 0.0734718358370645,
        "independently": 0.03673591791853225,
        "regenerable": 0.03673591791853225,
        "self": 0.03673591791853225,
        "contained": 0.03673591791853225,
        "8": 0.03673591791853225,
        "prompting": 0.03673591791853225,
        "strategy": 0.03673591791853225,
        "local": 0.0734718358370645,
        "llm": 0.03673591791853225,
        "message": 0.0734718358370645,
        "fixed": 0.03673591791853225,
        "guardrails": 0.03673591791853225,
        "you": 0.03673591791853225,
        "are": 0.03673591791853225,
        "senior": 0.03673591791853225,
        "dev": 0.03673591791853225,
        "doc": 0.03673591791853225,
        "writer": 0.03673591791853225,
        "precise": 0.03673591791853225,
        "cite": 0.03673591791853225,
        "facts": 0.03673591791853225,
        "speculation": 0.03673591791853225,
        "never": 0.03673591791853225,
        "invent": 0.03673591791853225,
        "prefer": 0.03673591791853225,
        "by": 0.03673591791853225,
        "analyzers": 0.0734718358370645,
        "user": 0.03673591791853225,
        "objective": 0.03673591791853225,
        "constraints": 0.03673591791853225,
        "tone": 0.03673591791853225,
        "length": 0.03673591791853225,
        "inject": 0.03673591791853225,
        "provide": 0.03673591791853225,
        "style": 0.03673591791853225,
        "tokens": 0.03673591791853225,
        "headings": 0.03673591791853225,
        "code": 0.0734718358370645,
        "blocks": 0.03673591791853225,
        "tables": 0.03673591791853225,
        "filters": 0.03673591791853225,
        "refuse": 0.03673591791853225,
        "insufficient": 0.03673591791853225,
        "evidence": 0.03673591791853225,
        "fall": 0.03673591791853225,
        "back": 0.03673591791853225,
        "template": 0.03673591791853225,
        "stubs": 0.0734718358370645,
        "9": 0.03673591791853225,
        "language": 0.0734718358370645,
        "project": 0.03673591791853225,
        "poc": 0.0734718358370645,
        "targets": 0.03673591791853225,
        "tier": 0.0734718358370645,
        "1": 0.03673591791853225,
        "python": 0.03673591791853225,
        "poetry": 0.03673591791853225,
        "setuptools": 0.03673591791853225,
        "java": 0.03673591791853225,
        "maven": 0.03673591791853225,
        "spring": 0.0734718358370645,
        "boot": 0.03673591791853225,
        "node": 0.03673591791853225,
        "js": 0.03673591791853225,
        "npm": 0.03673591791853225,
        "pnpm": 0.03673591791853225,
        "express": 0.03673591791853225,
        "next": 0.03673591791853225,
        "soon": 0.03673591791853225,
        "go": 0.03673591791853225,
        "modules": 0.03673591791853225,
        "rust": 0.03673591791853225,
        "cargo": 0.03673591791853225,
        "ruby": 0.03673591791853225,
        "bundler": 0.03673591791853225,
        "php": 0.03673591791853225,
        "composer": 0.03673591791853225,
        "detection": 0.03673591791853225,
        "via": 0.03673591791853225,
        "heuristics": 0.03673591791853225,
        "optional": 0.03673591791853225,
        "tree": 0.03673591791853225,
        "sitter": 0.03673591791853225,
        "function": 0.03673591791853225,
        "class": 0.03673591791853225,
        "extraction": 0.03673591791853225,
        "pluggable": 0.03673591791853225,
        "entry": 0.03673591791853225,
        "points": 0.03673591791853225,
        "main": 0.03673591791853225,
        "springbootapplication": 0.03673591791853225,
        "fastapi": 0.03673591791853225,
        "app": 0.03673591791853225,
        "bin": 0.03673591791853225,
        "cmd": 0.03673591791853225,
        "interfaces": 0.03673591791853225,
        "skeleton": 0.03673591791853225,
        "__init__": 0.03673591791853225,
        "py": 0.5143028508594515,
        "cli": 0.0734718358370645,
        "click": 0.03673591791853225,
        "typer": 0.03673591791853225,
        "failsafe": 0.03673591791853225,
        "fail": 0.03673591791853225,
        "safe": 0.03673591791853225,
        "logging": 0.0734718358370645,
        "helpers": 0.03673591791853225,
        "orchestrator": 0.03673591791853225,
        "repo_scanner": 0.03673591791853225,
        "base": 0.03673591791853225,
        "analyzer": 0.03673591791853225,
        "abc": 0.03673591791853225,
        "dependencies": 0.03673591791853225,
        "patterns": 0.03673591791853225,
        "embedder": 0.03673591791853225,
        "embedding": 0.03673591791853225,
        "model": 0.03673591791853225,
        "store": 0.03673591791853225
      },
      "text": "to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate** \u2192 **Post-process** \u2192 **Open PR** with summary of deltas. 6. Dry-run support: `docgen update --dry-run` computes diffs and scorecards without writing or publishing. ### 6.3 Regenerate (Manual) * `docgen regenerate --full` or `--sections intro,arch`. --- ## 7) Section Contract (README) * **Intro**: what, why, who it\u2019s for * **Key Features**: bullets grounded in real repo signals * **Architecture**: overview diagram (ASCII) + components * **Quick Start**: minimal commands (per build system) * **Configuration**: env vars, files, examples * **Build & Test**: commands, coverage hint * **Deployment**: container/K8s instructions if detected * **Troubleshooting**: common failures * **FAQ**: 5\u201310 concise Q\\&A * **Contributing** (if `CONTRIBUTING.md` absent) * **License** (detected or templated) > Each section must be independently regenerable and self-contained. --- ## 8) Prompting Strategy (Local LLM) * **System message (fixed guardrails)**: * \u201cYou are a senior dev doc writer. Be precise. Cite repo facts only. No speculation.\u201d * \u201cNever invent commands. Prefer commands detected by analyzers.\u201d * **User message per section**: * Section objective + constraints (tone, length). * Inject **Signals** + **Top-k chunks** (RAG). * Provide **style tokens** (headings, code blocks, tables). * **Post-filters**: refuse if insufficient evidence; fall back to template stubs. --- ## 9) Language & Project Support (POC targets) * **Tier-1 (POC)**: Python (Poetry/Setuptools), Java (Maven/Gradle, Spring Boot), Node.js (npm/pnpm, Express/Next). * **Tier-2 (soon)**: Go (modules), Rust (Cargo), Ruby (Bundler), PHP (Composer). * Detection via: * File heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#5",
      "vector": {
        "heuristics": 0.028665182485640765,
        "optional": 0.0859955474569223,
        "tree": 0.028665182485640765,
        "sitter": 0.028665182485640765,
        "for": 0.11466072994256306,
        "function": 0.028665182485640765,
        "class": 0.05733036497128153,
        "extraction": 0.028665182485640765,
        "pluggable": 0.028665182485640765,
        "entry": 0.028665182485640765,
        "points": 0.028665182485640765,
        "main": 0.05733036497128153,
        "spring": 0.028665182485640765,
        "springbootapplication": 0.028665182485640765,
        "fastapi": 0.05733036497128153,
        "app": 0.14332591242820383,
        "bin": 0.028665182485640765,
        "cmd": 0.05733036497128153,
        "10": 0.028665182485640765,
        "interfaces": 0.028665182485640765,
        "code": 0.05733036497128153,
        "skeleton": 0.028665182485640765,
        "docgen": 0.0859955474569223,
        "__init__": 0.028665182485640765,
        "py": 0.7166295621410191,
        "cli": 0.0859955474569223,
        "click": 0.028665182485640765,
        "typer": 0.05733036497128153,
        "failsafe": 0.028665182485640765,
        "fail": 0.028665182485640765,
        "safe": 0.028665182485640765,
        "readme": 0.0859955474569223,
        "stubs": 0.028665182485640765,
        "logging": 0.05733036497128153,
        "configuration": 0.028665182485640765,
        "helpers": 0.028665182485640765,
        "orchestrator": 0.028665182485640765,
        "repo_scanner": 0.028665182485640765,
        "analyzers": 0.028665182485640765,
        "base": 0.028665182485640765,
        "analyzer": 0.0859955474569223,
        "abc": 0.14332591242820383,
        "language": 0.028665182485640765,
        "build": 0.14332591242820383,
        "dependencies": 0.028665182485640765,
        "entrypoints": 0.028665182485640765,
        "patterns": 0.028665182485640765,
        "rag": 0.028665182485640765,
        "embedder": 0.028665182485640765,
        "local": 0.05733036497128153,
        "embedding": 0.028665182485640765,
        "model": 0.028665182485640765,
        "store": 0.028665182485640765,
        "prompting": 0.028665182485640765,
        "builder": 0.028665182485640765,
        "jinja2": 0.028665182485640765,
        "templates": 0.05733036497128153,
        "token": 0.028665182485640765,
        "mgmt": 0.028665182485640765,
        "constants": 0.028665182485640765,
        "j2": 0.028665182485640765,
        "per": 0.028665182485640765,
        "section": 0.028665182485640765,
        "llm": 0.028665182485640765,
        "runner": 0.028665182485640765,
        "adapter": 0.028665182485640765,
        "ollama": 0.028665182485640765,
        "llama": 0.028665182485640765,
        "cpp": 0.028665182485640765,
        "postproc": 0.028665182485640765,
        "lint": 0.028665182485640765,
        "links": 0.05733036497128153,
        "markers": 0.0859955474569223,
        "toc": 0.05733036497128153,
        "git": 0.05733036497128153,
        "diff": 0.028665182485640765,
        "publisher": 0.028665182485640765,
        "config": 0.028665182485640765,
        "models": 0.05733036497128153,
        "python": 0.0859955474569223,
        "from": 0.05733036497128153,
        "import": 0.05733036497128153,
        "abstractmethod": 0.0859955474569223,
        "repomanifest": 0.0859955474569223,
        "signal": 0.05733036497128153,
        "def": 0.14332591242820383,
        "supports": 0.028665182485640765,
        "self": 0.05733036497128153,
        "manifest": 0.05733036497128153,
        "bool": 0.0859955474569223,
        "analyze": 0.05733036497128153,
        "list": 0.028665182485640765,
        "command": 0.0859955474569223,
        "init": 0.028665182485640765,
        "path": 0.0859955474569223,
        "str": 0.14332591242820383,
        "publish": 0.0859955474569223,
        "true": 0.028665182485640765,
        "update": 0.0859955474569223,
        "event": 0.028665182485640765,
        "commit": 0.05733036497128153,
        "diff_base": 0.028665182485640765,
        "origin": 0.028665182485640765,
        "regenerate": 0.028665182485640765,
        "sections": 0.11466072994256306,
        "full": 0.028665182485640765,
        "false": 0.028665182485640765,
        "service": 0.028665182485640765,
        "mode": 0.028665182485640765,
        "post": 0.1719910949138446,
        "generate": 0.028665182485640765,
        "arch": 0.028665182485640765,
        "quickstart": 0.0859955474569223,
        "get": 0.028665182485640765,
        "status": 0.028665182485640765,
        "run_id": 0.028665182485640765,
        "11": 0.028665182485640765,
        "change": 0.028665182485640765,
        "impact": 0.028665182485640765,
        "matrix": 0.028665182485640765,
        "examples": 0.028665182485640765,
        "changed": 0.05733036497128153,
        "pattern": 0.028665182485640765,
        "to": 0.0859955474569223,
        "rebuild": 0.028665182485640765,
        "notes": 0.028665182485640765,
        "pom": 0.028665182485640765,
        "xml": 0.028665182485640765,
        "gradle": 0.028665182485640765,
        "_and": 0.05733036497128153,
        "_test": 0.05733036497128153,
        "recompute": 0.028665182485640765,
        "commands": 0.028665182485640765,
        "requirements": 0.028665182485640765,
        "txt": 0.028665182485640765,
        "pyproject": 0.028665182485640765,
        "toml": 0.028665182485640765,
        "install": 0.028665182485640765,
        "steps": 0.028665182485640765,
        "dockerfile": 0.028665182485640765,
        "k8s": 0.028665182485640765,
        "deployment": 0.028665182485640765,
        "container": 0.028665182485640765,
        "changes": 0.028665182485640765,
        "src": 0.028665182485640765,
        "features": 0.028665182485640765,
        "architecture": 0.0859955474569223,
        "if": 0.028665182485640765,
        "entrypoint": 0.028665182485640765,
        "intro": 0.028665182485640765,
        "too": 0.028665182485640765,
        "docs": 0.028665182485640765,
        "all": 0.028665182485640765,
        "patch": 0.028665182485640765,
        "prefer": 0.028665182485640765,
        "doc": 0.028665182485640765,
        "driven": 0.028665182485640765,
        "md": 0.028665182485640765,
        "none": 0.028665182485640765,
        "unless": 0.028665182485640765,
        "empty": 0.028665182485640765,
        "prevent": 0.028665182485640765,
        "loops": 0.028665182485640765,
        "12": 0.028665182485640765,
        "processing": 0.028665182485640765,
        "rules": 0.028665182485640765,
        "headings": 0.028665182485640765,
        "start": 0.028665182485640765,
        "at": 0.028665182485640765,
        "title": 0.028665182485640765,
        "then": 0.028665182485640765,
        "add": 0.028665182485640765,
        "auto": 0.028665182485640765,
        "level": 0.028665182485640765,
        "3": 0.028665182485640765,
        "validate": 0.028665182485640765,
        "blocks": 0.028665182485640765,
        "bash": 0.028665182485640765,
        "convert": 0.028665182485640765,
        "absolute": 0.028665182485640765,
        "github": 0.028665182485640765,
        "relative": 0.028665182485640765,
        "where": 0.028665182485640765,
        "possible": 0.028665182485640765,
        "ensure": 0.028665182485640765,
        "idempotency": 0.028665182485640765,
        "only": 0.028665182485640765,
        "edit": 0.028665182485640765,
        "between": 0.028665182485640765,
        "managed": 0.028665182485640765,
        "begin": 0.028665182485640765,
        "end": 0.028665182485640765,
        "13": 0.028665182485640765,
        "ci": 0.028665182485640765,
        "integration": 0.028665182485640765,
        "pre": 0.028665182485640765,
        "forbid": 0.028665182485640765,
        "direct": 0.028665182485640765,
        "edits": 0.028665182485640765,
        "outside": 0.028665182485640765,
        "merge": 0.028665182485640765,
        "checkout": 0.028665182485640765,
        "remind": 0.028665182485640765
      },
      "text": "heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py prompting/ builder.py # Jinja2 templates, token mgmt constants.py templates/ # *.j2 per section llm/ runner.py # adapter for ollama/llama.cpp postproc/ lint.py links.py markers.py toc.py git/ diff.py publisher.py config.py models.py ``` **Analyzer ABC** ```python from abc import ABC, abstractmethod from .models import RepoManifest, Signal class Analyzer(ABC): @abstractmethod def supports(self, manifest: RepoManifest) -> bool: ... @abstractmethod def analyze(self, manifest: RepoManifest) -> list[Signal]: ... ``` **CLI (Typer)** ```python @app.command() def init(path: str = \".\", publish: bool = True): ... @app.command() def update(path: str = \".\", event: str = \"commit\", diff_base: str = \"origin/main\"): ... @app.command() def regenerate(sections: str = \"\", full: bool = False): ... ``` **FastAPI (optional service mode)** * `POST /analyze` * `POST /generate?sections=arch,quickstart` * `POST /publish` * `GET /status/{run_id}` --- ## 11) Change Impact Matrix (examples) | Changed Path Pattern | Sections to Rebuild | Notes | | ------------------------------------ | ---------------------------- | --------------------------------------- | | `pom.xml`, `build.gradle*` | build\\_and\\_test, quickstart | Recompute build commands | | `requirements.txt`, `pyproject.toml` | build\\_and\\_test, quickstart | Update install steps | | `Dockerfile`, `k8s/**` | deployment | Publish container changes | | `src/**`, `app/**`, `cmd/**` | features, architecture | If entrypoint changed, update intro too | | `docs/**` | all (patch) | Prefer doc-driven | | `README.md` | none (unless empty) | Prevent loops | --- ## 12) Post-Processing Rules * Headings start at `#` for title then `##` for sections. * Add **auto ToC** (<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#6",
      "vector": {
        "level": 0.04267895997763199,
        "3": 0.12803687993289598,
        "validate": 0.04267895997763199,
        "code": 0.04267895997763199,
        "blocks": 0.04267895997763199,
        "bash": 0.04267895997763199,
        "python": 0.08535791995526398,
        "convert": 0.04267895997763199,
        "absolute": 0.04267895997763199,
        "github": 0.12803687993289598,
        "links": 0.04267895997763199,
        "to": 0.08535791995526398,
        "relative": 0.04267895997763199,
        "where": 0.04267895997763199,
        "possible": 0.08535791995526398,
        "ensure": 0.04267895997763199,
        "idempotency": 0.04267895997763199,
        "only": 0.12803687993289598,
        "edit": 0.04267895997763199,
        "between": 0.04267895997763199,
        "managed": 0.08535791995526398,
        "markers": 0.12803687993289598,
        "docgen": 0.21339479988815996,
        "begin": 0.04267895997763199,
        "architecture": 0.21339479988815996,
        "end": 0.04267895997763199,
        "13": 0.04267895997763199,
        "git": 0.08535791995526398,
        "ci": 0.08535791995526398,
        "integration": 0.04267895997763199,
        "local": 0.12803687993289598,
        "pre": 0.04267895997763199,
        "commit": 0.08535791995526398,
        "forbid": 0.04267895997763199,
        "direct": 0.04267895997763199,
        "readme": 0.12803687993289598,
        "edits": 0.04267895997763199,
        "outside": 0.04267895997763199,
        "optional": 0.12803687993289598,
        "post": 0.12803687993289598,
        "merge": 0.04267895997763199,
        "checkout": 0.08535791995526398,
        "remind": 0.04267895997763199,
        "run": 0.04267895997763199,
        "update": 0.12803687993289598,
        "gitlab": 0.04267895997763199,
        "bitbucket": 0.04267895997763199,
        "on": 0.04267895997763199,
        "push": 0.04267895997763199,
        "pr": 0.25607375986579195,
        "1": 0.12803687993289598,
        "repo": 0.08535791995526398,
        "2": 0.17071583991052797,
        "event": 0.04267895997763199,
        "diff": 0.08535791995526398,
        "base": 0.04267895997763199,
        "base_sha": 0.04267895997763199,
        "if": 0.12803687993289598,
        "changes": 0.04267895997763199,
        "open": 0.04267895997763199,
        "with": 0.04267895997763199,
        "labeled": 0.04267895997763199,
        "docs": 0.08535791995526398,
        "auto": 0.04267895997763199,
        "tokenless": 0.04267895997763199,
        "mode": 0.12803687993289598,
        "created": 0.04267895997763199,
        "from": 0.08535791995526398,
        "a": 0.04267895997763199,
        "app": 0.04267895997763199,
        "bot": 0.04267895997763199,
        "account": 0.04267895997763199,
        "14": 0.04267895997763199,
        "quality": 0.04267895997763199,
        "gates": 0.04267895997763199,
        "evaluation": 0.04267895997763199,
        "consistency": 0.04267895997763199,
        "checks": 0.04267895997763199,
        "commands": 0.08535791995526398,
        "exist": 0.04267895997763199,
        "in": 0.12803687993289598,
        "ports": 0.04267895997763199,
        "env": 0.04267895997763199,
        "vars": 0.04267895997763199,
        "match": 0.04267895997763199,
        "configs": 0.04267895997763199,
        "no": 0.08535791995526398,
        "hallucinations": 0.04267895997763199,
        "reject": 0.04267895997763199,
        "new": 0.04267895997763199,
        "facts": 0.04267895997763199,
        "not": 0.04267895997763199,
        "found": 0.08535791995526398,
        "signals": 0.08535791995526398,
        "rag": 0.08535791995526398,
        "style": 0.04267895997763199,
        "concise": 0.04267895997763199,
        "paragraphs": 0.04267895997763199,
        "actionable": 0.04267895997763199,
        "filler": 0.04267895997763199,
        "marketing": 0.04267895997763199,
        "scorecard": 0.04267895997763199,
        "0": 0.04267895997763199,
        "100": 0.04267895997763199,
        "coverage": 0.04267895997763199,
        "of": 0.08535791995526398,
        "required": 0.04267895997763199,
        "sections": 0.08535791995526398,
        "30": 0.04267895997763199,
        "buildability": 0.04267895997763199,
        "quick": 0.08535791995526398,
        "start": 0.04267895997763199,
        "20": 0.12803687993289598,
        "link": 0.04267895997763199,
        "validity": 0.04267895997763199,
        "10": 0.12803687993289598,
        "alignment": 0.04267895997763199,
        "w": 0.04267895997763199,
        "change": 0.04267895997763199,
        "set": 0.04267895997763199,
        "lint": 0.04267895997763199,
        "reviewer": 0.04267895997763199,
        "feedback": 0.04267895997763199,
        "loop": 0.04267895997763199,
        "15": 0.04267895997763199,
        "security": 0.04267895997763199,
        "privacy": 0.04267895997763199,
        "llm": 0.08535791995526398,
        "and": 0.04267895997763199,
        "embedding": 0.04267895997763199,
        "models": 0.04267895997763199,
        "respect": 0.04267895997763199,
        "gitignore": 0.04267895997763199,
        "configurable": 0.04267895997763199,
        "exclude_paths": 0.04267895997763199,
        "never": 0.04267895997763199,
        "index": 0.04267895997763199,
        "large": 0.04267895997763199,
        "binaries": 0.04267895997763199,
        "secret": 0.08535791995526398,
        "files": 0.08535791995526398,
        "simple": 0.04267895997763199,
        "scan": 0.04267895997763199,
        "block": 0.04267895997763199,
        "16": 0.04267895997763199,
        "mvp": 0.04267895997763199,
        "plan": 0.04267895997763199,
        "weeks": 0.04267895997763199,
        "suggested": 0.04267895997763199,
        "breakdown": 0.04267895997763199,
        "core": 0.04267895997763199,
        "path": 0.04267895997763199,
        "cli": 0.04267895997763199,
        "scanner": 0.04267895997763199,
        "language": 0.04267895997763199,
        "build": 0.04267895997763199,
        "analyzers": 0.04267895997763199,
        "java": 0.04267895997763199,
        "node": 0.04267895997763199,
        "prompt": 0.04267895997763199,
        "builder": 0.04267895997763199,
        "runner": 0.04267895997763199,
        "ollama": 0.04267895997763199,
        "adapter": 0.04267895997763199,
        "processor": 0.04267895997763199,
        "publisher": 0.04267895997763199,
        "lite": 0.04267895997763199,
        "embed": 0.04267895997763199,
        "existing": 0.04267895997763199,
        "top": 0.04267895997763199,
        "largest": 0.04267895997763199,
        "source": 0.04267895997763199,
        "heads": 0.04267895997763199,
        "triggers": 0.04267895997763199,
        "single": 0.04267895997763199,
        "as": 0.08535791995526398,
        "stretch": 0.04267895997763199,
        "4": 0.04267895997763199,
        "templates": 0.08535791995526398,
        "8": 0.04267895997763199,
        "jinja2": 0.17071583991052797,
        "5": 0.04267895997763199,
        "config": 0.04267895997763199,
        "yml": 0.04267895997763199,
        "minimal": 0.04267895997763199,
        "17": 0.12803687993289598,
        "example": 0.04267895997763199,
        "section": 0.04267895997763199,
        "template": 0.04267895997763199,
        "j2": 0.08535791995526398,
        "project_name": 0.08535791995526398,
        "is": 0.04267895997763199,
        "structured": 0.04267895997763199,
        "ascii": 0.04267895997763199,
        "_architecture": 0.04267895997763199,
        "key": 0.04267895997763199,
        "components": 0.08535791995526398,
        "for": 0.04267895997763199,
        "comp": 0.12803687993289598,
        "name": 0.04267895997763199,
        "summary": 0.04267895997763199,
        "endfor": 0.04267895997763199,
        "data": 0.04267895997763199,
        "flow": 0.04267895997763199,
        "data_flow": 0.04267895997763199,
        "generated": 0.04267895997763199,
        "detected": 0.04267895997763199,
        "signals_summary": 0.04267895997763199,
        "frame": 0.04267895997763199,
        "composed": 0.04267895997763199,
        "intro": 0.04267895997763199,
        "features": 0.08535791995526398,
        "include": 0.04267895997763199
      },
      "text": "(<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to run `docgen update` (optional). ### CI (GitHub/GitLab/Bitbucket) * On push/PR: 1. Checkout repo. 2. `docgen update --event pr --diff-base $BASE_SHA` 3. If changes \u2192 open/update PR with labeled `docs:auto`. * Tokenless mode possible if PR created from a GitHub App/bot account. --- ## 14) Quality Gates & Evaluation * **Consistency checks**: commands exist in repo; ports/env vars match configs. * **No hallucinations**: reject new facts not found in signals/RAG. * **Style**: concise paragraphs, actionable commands, no filler marketing. * **Scorecard** (0\u2013100): * Coverage of required sections (30) * Buildability of quick start (20) * Link validity (10) * Diff alignment w/ change set (20) * Lint (10) * Reviewer feedback loop (10) --- ## 15) Security & Privacy * **Local only** LLM and embedding models. * Respect `.gitignore` + configurable `exclude_paths`. * Never index large binaries/secret files. * Optional simple **secret scan**; block if found. --- ## 16) MVP Plan (2 weeks suggested breakdown) 1. **Core path**: CLI, Scanner, Language+Build analyzers (Python/Java/Node), Prompt Builder, Local LLM runner (Ollama adapter), Post-processor, Git Publisher (PR). 2. **RAG Lite**: embed only `/docs`, existing `README`, top 20 largest source files\u2019 heads. 3. **Triggers**: single \u201ccommit\u201d mode; PR mode as stretch. 4. **Templates**: 8 sections, Jinja2; managed markers. 5. **Config**: `.docgen.yml` minimal. --- ## 17) Example Templates ### 17.1 Section Template (Jinja2 \u2014 architecture.j2) ```jinja2 ## Architecture {{ project_name }} is structured as: ``` {{ ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#7",
      "vector": {
        "ascii": 0.036588086663230115,
        "_architecture": 0.036588086663230115,
        "key": 0.14635234665292046,
        "components": 0.07317617332646023,
        "for": 0.2561166066426108,
        "comp": 0.10976425998969035,
        "in": 0.2195285199793807,
        "name": 0.036588086663230115,
        "summary": 0.036588086663230115,
        "endfor": 0.036588086663230115,
        "data": 0.036588086663230115,
        "flow": 0.036588086663230115,
        "data_flow": 0.036588086663230115,
        "generated": 0.036588086663230115,
        "from": 0.036588086663230115,
        "detected": 0.036588086663230115,
        "signals": 0.036588086663230115,
        "signals_summary": 0.036588086663230115,
        "17": 0.036588086663230115,
        "2": 0.036588086663230115,
        "readme": 0.10976425998969035,
        "frame": 0.036588086663230115,
        "composed": 0.036588086663230115,
        "jinja2": 0.036588086663230115,
        "project_name": 0.036588086663230115,
        "intro": 0.10976425998969035,
        "features": 0.10976425998969035,
        "include": 0.036588086663230115,
        "architecture": 0.07317617332646023,
        "j2": 0.036588086663230115,
        "quick": 0.07317617332646023,
        "start": 0.2195285199793807,
        "quickstart": 0.036588086663230115,
        "configuration": 0.07317617332646023,
        "build": 0.14635234665292046,
        "test": 0.036588086663230115,
        "build_and_test": 0.07317617332646023,
        "deployment": 0.10976425998969035,
        "troubleshooting": 0.07317617332646023,
        "faq": 0.07317617332646023,
        "license": 0.07317617332646023,
        "18": 0.036588086663230115,
        "minimal": 0.036588086663230115,
        "python": 0.14635234665292046,
        "snippets": 0.036588086663230115,
        "change": 0.036588086663230115,
        "impact": 0.036588086663230115,
        "heuristic": 0.036588086663230115,
        "section_rules": 0.07317617332646023,
        "pom": 0.10976425998969035,
        "xml": 0.10976425998969035,
        "gradle": 0.07317617332646023,
        "requirements": 0.10976425998969035,
        "txt": 0.10976425998969035,
        "pyproject": 0.036588086663230115,
        "toml": 0.036588086663230115,
        "package": 0.07317617332646023,
        "json": 0.07317617332646023,
        "dockerfile": 0.07317617332646023,
        "k8s": 0.036588086663230115,
        "src": 0.10976425998969035,
        "app": 0.10976425998969035,
        "cmd": 0.10976425998969035,
        "def": 0.07317617332646023,
        "sections_from_diff": 0.036588086663230115,
        "paths": 0.07317617332646023,
        "list": 0.036588086663230115,
        "str": 0.2195285199793807,
        "set": 0.07317617332646023,
        "out": 0.10976425998969035,
        "section": 0.07317617332646023,
        "patterns": 0.10976425998969035,
        "if": 0.18294043331615056,
        "any": 0.036588086663230115,
        "p": 0.10976425998969035,
        "pat": 0.07317617332646023,
        "startswith": 0.036588086663230115,
        "add": 0.036588086663230115,
        "return": 0.10976425998969035,
        "or": 0.10976425998969035,
        "fall": 0.036588086663230115,
        "back": 0.036588086663230115,
        "to": 0.07317617332646023,
        "uncertain": 0.036588086663230115,
        "managed": 0.036588086663230115,
        "markers": 0.07317617332646023,
        "patch": 0.036588086663230115,
        "replace_block": 0.036588086663230115,
        "md": 0.18294043331615056,
        "new": 0.07317617332646023,
        "f": 0.10976425998969035,
        "docgen": 0.18294043331615056,
        "begin": 0.036588086663230115,
        "end": 0.18294043331615056,
        "and": 0.036588086663230115,
        "pre": 0.07317617332646023,
        "rest": 0.07317617332646023,
        "split": 0.07317617332646023,
        "1": 0.07317617332646023,
        "_": 0.036588086663230115,
        "post": 0.07317617332646023,
        "n": 0.07317617332646023,
        "insert": 0.036588086663230115,
        "missing": 0.036588086663230115,
        "19": 0.036588086663230115,
        "open": 0.036588086663230115,
        "questions": 0.036588086663230115,
        "trade": 0.036588086663230115,
        "offs": 0.036588086663230115,
        "embeddings": 0.036588086663230115,
        "use": 0.036588086663230115,
        "a": 0.14635234665292046,
        "tiny": 0.036588086663230115,
        "local": 0.036588086663230115,
        "model": 0.07317617332646023,
        "vs": 0.07317617332646023,
        "rule": 0.036588086663230115,
        "based": 0.036588086663230115,
        "retrieval": 0.036588086663230115,
        "mvp": 0.036588086663230115,
        "tree": 0.036588086663230115,
        "sitter": 0.036588086663230115,
        "adds": 0.036588086663230115,
        "power": 0.036588086663230115,
        "but": 0.036588086663230115,
        "increases": 0.036588086663230115,
        "footprint": 0.036588086663230115,
        "gate": 0.036588086663230115,
        "behind": 0.036588086663230115,
        "flag": 0.036588086663230115,
        "pr": 0.10976425998969035,
        "author": 0.036588086663230115,
        "bot": 0.036588086663230115,
        "account": 0.036588086663230115,
        "developer": 0.036588086663230115,
        "token": 0.036588086663230115,
        "decide": 0.036588086663230115,
        "per": 0.036588086663230115,
        "environment": 0.036588086663230115,
        "markdown": 0.036588086663230115,
        "diffs": 0.036588086663230115,
        "keep": 0.036588086663230115,
        "sections": 0.036588086663230115,
        "atomic": 0.036588086663230115,
        "minimize": 0.036588086663230115,
        "noisy": 0.036588086663230115,
        "prs": 0.036588086663230115,
        "20": 0.036588086663230115,
        "example": 0.036588086663230115,
        "yml": 0.036588086663230115,
        "mixed": 0.036588086663230115,
        "repo": 0.036588086663230115,
        "yaml": 0.036588086663230115,
        "llm": 0.036588086663230115,
        "runner": 0.036588086663230115,
        "ollama": 0.036588086663230115,
        "llama3": 0.036588086663230115,
        "8b": 0.036588086663230115,
        "instruct": 0.036588086663230115,
        "temperature": 0.036588086663230115,
        "0": 0.036588086663230115,
        "15": 0.036588086663230115,
        "style": 0.036588086663230115,
        "comprehensive": 0.036588086663230115,
        "publish": 0.036588086663230115,
        "mode": 0.036588086663230115,
        "branch_prefix": 0.036588086663230115,
        "analyzers": 0.036588086663230115,
        "enabled": 0.036588086663230115,
        "language": 0.036588086663230115,
        "dependencies": 0.036588086663230115,
        "exclude_paths": 0.036588086663230115,
        "git": 0.036588086663230115,
        "node_modules": 0.036588086663230115,
        "dist": 0.036588086663230115,
        "target": 0.036588086663230115,
        "ci": 0.036588086663230115,
        "watched_globs": 0.036588086663230115,
        "21": 0.036588086663230115,
        "success": 0.036588086663230115,
        "criteria": 0.036588086663230115,
        "poc": 0.036588086663230115,
        "3": 0.036588086663230115,
        "diverse": 0.036588086663230115,
        "repos": 0.036588086663230115,
        "cli": 0.036588086663230115,
        "spring": 0.036588086663230115,
        "boot": 0.036588086663230115,
        "api": 0.036588086663230115,
        "node": 0.036588086663230115,
        "webapp": 0.036588086663230115,
        "init": 0.036588086663230115,
        "produces": 0.036588086663230115,
        "working": 0.036588086663230115,
        "linted": 0.036588086663230115,
        "with": 0.036588086663230115,
        "runnable": 0.036588086663230115,
        "on": 0.036588086663230115,
        "changing": 0.036588086663230115
      },
      "text": "ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick Start {{ quickstart }} ## Configuration {{ configuration }} ## Build & Test {{ build_and_test }} ## Deployment {{ deployment }} ## Troubleshooting {{ troubleshooting }} ## FAQ {{ faq }} ## License {{ license }} ``` --- ## 18) Minimal Python Snippets **Change impact heuristic** ```python SECTION_RULES = [ (\"build_and_test\", [\"pom.xml\",\"build.gradle\",\"requirements.txt\",\"pyproject.toml\",\"package.json\"]), (\"deployment\", [\"Dockerfile\",\"k8s/\"]), (\"architecture\", [\"src/\",\"app/\",\"cmd/\"]), (\"features\", [\"src/\",\"app/\",\"cmd/\"]), ] def sections_from_diff(paths: list[str]) -> set[str]: out = set() for section, patterns in SECTION_RULES: if any(p for p in paths for pat in patterns if p.startswith(pat)): out.add(section) return out or {\"intro\"} # fall back to intro if uncertain ``` **Managed markers (patch)** ```python def replace_block(md: str, key: str, new: str) -> str: start = f\"<!-- docgen:begin:{key} -->\" end = f\"<!-- docgen:end:{key} -->\" if start in md and end in md: pre, rest = md.split(start, 1) _, post = rest.split(end, 1) return f\"{pre}{start}\\n{new}\\n{end}{post}\" return md # or insert markers if missing ``` --- ## 19) Open Questions / Trade-offs * **Embeddings**: Use a tiny local model vs. rule-based retrieval for MVP? * **Tree-sitter**: Adds power but increases footprint\u2014gate behind a flag. * **PR author**: Bot account vs. developer token\u2014decide per environment. * **Markdown diffs**: Keep sections atomic to minimize noisy PRs. --- ## 20) Example `.docgen.yml` for a Mixed Repo ```yaml llm: runner: \"ollama\" model: \"llama3:8b-instruct\" temperature: 0.15 readme: style: \"comprehensive\" publish: mode: \"pr\" branch_prefix: \"docgen/\" analyzers: enabled: [language, build, dependencies, patterns] exclude_paths: [\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#8",
      "vector": {
        "git": 0.08838834764831843,
        "node_modules": 0.08838834764831843,
        "dist": 0.08838834764831843,
        "target": 0.08838834764831843,
        "ci": 0.08838834764831843,
        "watched_globs": 0.08838834764831843,
        "src": 0.08838834764831843,
        "app": 0.08838834764831843,
        "cmd": 0.08838834764831843,
        "pom": 0.17677669529663687,
        "xml": 0.17677669529663687,
        "build": 0.08838834764831843,
        "gradle": 0.08838834764831843,
        "package": 0.08838834764831843,
        "json": 0.08838834764831843,
        "requirements": 0.17677669529663687,
        "txt": 0.17677669529663687,
        "dockerfile": 0.08838834764831843,
        "21": 0.08838834764831843,
        "success": 0.08838834764831843,
        "criteria": 0.08838834764831843,
        "poc": 0.08838834764831843,
        "for": 0.08838834764831843,
        "3": 0.08838834764831843,
        "diverse": 0.08838834764831843,
        "repos": 0.08838834764831843,
        "python": 0.08838834764831843,
        "cli": 0.17677669529663687,
        "spring": 0.08838834764831843,
        "boot": 0.08838834764831843,
        "api": 0.08838834764831843,
        "node": 0.08838834764831843,
        "webapp": 0.08838834764831843,
        "docgen": 0.17677669529663687,
        "init": 0.17677669529663687,
        "produces": 0.08838834764831843,
        "a": 0.2651650429449553,
        "working": 0.08838834764831843,
        "linted": 0.08838834764831843,
        "readme": 0.08838834764831843,
        "with": 0.08838834764831843,
        "runnable": 0.08838834764831843,
        "quick": 0.08838834764831843,
        "start": 0.08838834764831843,
        "on": 0.08838834764831843,
        "changing": 0.08838834764831843,
        "or": 0.08838834764831843,
        "pr": 0.08838834764831843,
        "updates": 0.08838834764831843,
        "only": 0.08838834764831843,
        "relevant": 0.08838834764831843,
        "sections": 0.08838834764831843,
        "no": 0.08838834764831843,
        "hallucinated": 0.08838834764831843,
        "commands": 0.08838834764831843,
        "links": 0.08838834764831843,
        "and": 0.2651650429449553,
        "badges": 0.08838834764831843,
        "validate": 0.08838834764831843,
        "style": 0.08838834764831843,
        "consistent": 0.08838834764831843,
        "if": 0.08838834764831843,
        "you": 0.17677669529663687,
        "want": 0.08838834764831843,
        "i": 0.08838834764831843,
        "can": 0.17677669529663687,
        "spin": 0.08838834764831843,
        "up": 0.08838834764831843,
        "starter": 0.08838834764831843,
        "repo": 0.08838834764831843,
        "layout": 0.08838834764831843,
        "analyzers": 0.08838834764831843,
        "templates": 0.08838834764831843,
        "simple": 0.08838834764831843,
        "ollama": 0.08838834764831843,
        "adapter": 0.08838834764831843,
        "so": 0.08838834764831843,
        "drop": 0.08838834764831843,
        "it": 0.08838834764831843,
        "into": 0.08838834764831843,
        "your": 0.08838834764831843,
        "environment": 0.08838834764831843,
        "run": 0.08838834764831843,
        "right": 0.08838834764831843,
        "away": 0.08838834764831843
      },
      "text": "[\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR updates only relevant sections. * No hallucinated commands; links and badges validate; style consistent. --- If you want, I can spin up a **starter repo layout** (CLI, analyzers, templates, and a simple Ollama adapter) so you can drop it into your environment and run `docgen init` right away.",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    }
  ],
  "license": [
    {
      "id": "AGENTS.md#0",
      "vector": {
        "repository": 0.06757373783994859,
        "guidelines": 0.1013606067599229,
        "project": 0.033786868919974296,
        "structure": 0.033786868919974296,
        "module": 0.06757373783994859,
        "organization": 0.033786868919974296,
        "spec": 0.06757373783994859,
        "md": 0.033786868919974296,
        "captures": 0.033786868919974296,
        "the": 0.27029495135979437,
        "end": 0.06757373783994859,
        "to": 0.1013606067599229,
        "architecture": 0.033786868919974296,
        "component": 0.06757373783994859,
        "contracts": 0.033786868919974296,
        "and": 0.43922929595966587,
        "must": 0.033786868919974296,
        "be": 0.033786868919974296,
        "updated": 0.033786868919974296,
        "whenever": 0.033786868919974296,
        "responsibilities": 0.033786868919974296,
        "shift": 0.033786868919974296,
        "place": 0.033786868919974296,
        "python": 0.2027212135198458,
        "source": 0.033786868919974296,
        "in": 0.16893434459987147,
        "a": 0.23650808243982008,
        "docgen": 0.16893434459987147,
        "package": 0.033786868919974296,
        "create": 0.033786868919974296,
        "it": 0.033786868919974296,
        "when": 0.06757373783994859,
        "implementation": 0.033786868919974296,
        "starts": 0.033786868919974296,
        "with": 0.16893434459987147,
        "clear": 0.033786868919974296,
        "submodules": 0.033786868919974296,
        "for": 0.1013606067599229,
        "orchestrator": 0.1013606067599229,
        "analyzers": 0.033786868919974296,
        "runners": 0.033786868919974296,
        "stores": 0.033786868919974296,
        "avoid": 0.06757373783994859,
        "leaving": 0.033786868919974296,
        "logic": 0.033786868919974296,
        "repo": 0.06757373783994859,
        "root": 0.033786868919974296,
        "mirror": 0.033786868919974296,
        "runtime": 0.033786868919974296,
        "modules": 0.06757373783994859,
        "under": 0.1013606067599229,
        "tests": 0.2027212135198458,
        "using": 0.033786868919974296,
        "test_": 0.033786868919974296,
        "py": 0.1013606067599229,
        "co": 0.033786868919974296,
        "locate": 0.033786868919974296,
        "fixtures": 0.06757373783994859,
        "_fixtures": 0.033786868919974296,
        "so": 0.13514747567989718,
        "imports": 0.06757373783994859,
        "stay": 0.06757373783994859,
        "clean": 0.033786868919974296,
        "reusable": 0.033786868919974296,
        "keep": 0.13514747567989718,
        "throwaway": 0.033786868919974296,
        "experiments": 0.033786868919974296,
        "inside": 0.033786868919974296,
        "an": 0.06757373783994859,
        "ignored": 0.033786868919974296,
        "sandbox": 0.033786868919974296,
        "directory": 0.033786868919974296,
        "scans": 0.033786868919974296,
        "remain": 0.033786868919974296,
        "focused": 0.033786868919974296,
        "on": 0.06757373783994859,
        "production": 0.033786868919974296,
        "code": 0.033786868919974296,
        "paths": 0.033786868919974296,
        "build": 0.033786868919974296,
        "test": 0.06757373783994859,
        "development": 0.033786868919974296,
        "commands": 0.033786868919974296,
        "m": 0.16893434459987147,
        "venv": 0.1013606067599229,
        "followed": 0.033786868919974296,
        "by": 0.033786868919974296,
        "scripts": 0.06757373783994859,
        "activate": 0.033786868919974296,
        "aligns": 0.033786868919974296,
        "local": 0.033786868919974296,
        "shells": 0.033786868919974296,
        "pycharm": 0.033786868919974296,
        "interpreter": 0.033786868919974296,
        "settings": 0.033786868919974296,
        "pip": 0.033786868919974296,
        "install": 0.033786868919974296,
        "e": 0.033786868919974296,
        "dev": 0.033786868919974296,
        "after": 0.06757373783994859,
        "pyproject": 0.033786868919974296,
        "toml": 0.033786868919974296,
        "is": 0.1013606067599229,
        "committed": 0.033786868919974296,
        "exposes": 0.033786868919974296,
        "cli": 0.033786868919974296,
        "plugins": 0.033786868919974296,
        "editable": 0.033786868919974296,
        "form": 0.033786868919974296,
        "without": 0.033786868919974296,
        "repeated": 0.033786868919974296,
        "reinstalls": 0.033786868919974296,
        "pytest": 0.06757373783994859,
        "runs": 0.033786868919974296,
        "full": 0.033786868919974296,
        "suite": 0.033786868919974296,
        "append": 0.033786868919974296,
        "k": 0.033786868919974296,
        "pattern": 0.033786868919974296,
        "iterate": 0.033786868919974296,
        "single": 0.06757373783994859,
        "analyzer": 0.06757373783994859,
        "or": 0.06757373783994859,
        "pipeline": 0.1013606067599229,
        "stage": 0.033786868919974296,
        "mypy": 0.033786868919974296,
        "ruff": 0.033786868919974296,
        "check": 0.033786868919974296,
        "catch": 0.033786868919974296,
        "type": 0.033786868919974296,
        "drift": 0.033786868919974296,
        "lint": 0.033786868919974296,
        "violations": 0.033786868919974296,
        "before": 0.06757373783994859,
        "readme": 0.06757373783994859,
        "generation": 0.06757373783994859,
        "attempted": 0.033786868919974296,
        "coding": 0.033786868919974296,
        "style": 0.033786868919974296,
        "naming": 0.033786868919974296,
        "conventions": 0.033786868919974296,
        "follow": 0.06757373783994859,
        "pep": 0.033786868919974296,
        "8": 0.033786868919974296,
        "4": 0.033786868919974296,
        "space": 0.033786868919974296,
        "indents": 0.033786868919974296,
        "explicit": 0.033786868919974296,
        "example": 0.033786868919974296,
        "from": 0.033786868919974296,
        "import": 0.033786868919974296,
        "static": 0.033786868919974296,
        "tooling": 0.033786868919974296,
        "can": 0.033786868919974296,
        "trace": 0.033786868919974296,
        "dependencies": 0.033786868919974296,
        "name": 0.033786868919974296,
        "their": 0.033786868919974296,
        "roles": 0.033786868919974296,
        "prompt_builder": 0.033786868919974296,
        "functions": 0.033786868919974296,
        "snake_case": 0.033786868919974296,
        "descriptive": 0.06757373783994859,
        "nouns": 0.033786868919974296,
        "first": 0.033786868919974296,
        "build_prompt_section": 0.033786868919974296,
        "run": 0.033786868919974296,
        "black": 0.033786868919974296,
        "commits": 0.06757373783994859,
        "manual": 0.033786868919974296,
        "reformatting": 0.033786868919974296,
        "unless": 0.033786868919974296,
        "formatter": 0.033786868919974296,
        "cannot": 0.033786868919974296,
        "resolve": 0.033786868919974296,
        "construct": 0.033786868919974296,
        "testing": 0.06757373783994859,
        "default": 0.033786868919974296,
        "harness": 0.033786868919974296,
        "every": 0.033786868919974296,
        "needs": 0.033786868919974296,
        "unit": 0.033786868919974296,
        "coverage": 0.033786868919974296,
        "plus": 0.033786868919974296,
        "integration": 0.06757373783994859,
        "case": 0.033786868919974296,
        "that": 0.06757373783994859,
        "walks": 0.033786868919974296,
        "snapshot": 0.033786868919974296,
        "through": 0.033786868919974296,
        "use": 0.033786868919974296,
        "names": 0.033786868919974296,
        "such": 0.033786868919974296,
        "as": 0.033786868919974296,
        "test_prompt_builder_handles_missing_signals": 0.033786868919974296,
        "arrange": 0.033786868919974296,
        "act": 0.033786868919974296,
        "assert": 0.033786868919974296,
        "comments": 0.033786868919974296,
        "minimal": 0.033786868919974296,
        "but": 0.033786868919974296,
        "intentional": 0.033786868919974296,
        "store": 0.033786868919974296,
        "regression": 0.033786868919974296,
        "generated": 0.033786868919974296,
        "slices": 0.033786868919974296,
        "data": 0.033786868919974296,
        "update": 0.033786868919974296,
        "them": 0.033786868919974296,
        "helper": 0.033786868919974296,
        "diffs": 0.033786868919974296,
        "reviewable": 0.033786868919974296,
        "commit": 0.033786868919974296,
        "pull": 0.033786868919974296,
        "request": 0.033786868919974296,
        "conventional": 0.033786868919974296,
        "feat": 0.033786868919974296,
        "fix": 0.033786868919974296,
        "docs": 0.033786868919974296,
        "subject": 0.033786868919974296,
        "lines": 0.033786868919974296,
        "72": 0.033786868919974296,
        "characters": 0.033786868919974296,
        "explain": 0.033786868919974296,
        "broader": 0.033786868919974296,
        "scope": 0.033786868919974296,
        "body": 0.033786868919974296,
        "multiple": 0.033786868919974296,
        "subsystems": 0.033786868919974296,
        "change": 0.033786868919974296,
        "bundle": 0.033786868919974296,
        "related": 0.033786868919974296,
        "work": 0.033786868919974296,
        "into": 0.033786868919974296,
        "pr": 0.033786868919974296,
        "includes": 0.033786868919974296,
        "summary": 0.033786868919974296,
        "notes": 0.033786868919974296,
        "links": 0.033786868919974296
      },
      "text": "# Repository Guidelines ## Project Structure & Module Organization - `spec/spec.md` captures the end-to-end architecture, component contracts, and must be updated whenever responsibilities shift. - Place Python source in a `docgen/` package (create it when implementation starts) with clear submodules for orchestrator, analyzers, runners, and stores; avoid leaving logic in the repo root. - Mirror runtime modules under `tests/` using `test_<module>.py`; co-locate fixtures in `tests/_fixtures/` so imports stay clean and reusable. - Keep throwaway experiments inside an ignored `sandbox/` directory so repository scans remain focused on production code paths. ## Build, Test, and Development Commands - `python -m venv .venv` followed by `.\\\\.venv\\\\Scripts\\\\activate` aligns local shells with the PyCharm interpreter settings. - `python -m pip install -e .[dev]` (after a `pyproject.toml` is committed) exposes the CLI and plugins in editable form without repeated reinstalls. - `python -m pytest` runs the full suite; append `-k <pattern>` to iterate on a single analyzer or pipeline stage. - `python -m mypy docgen` and `python -m ruff check docgen tests` catch type drift and lint violations before README generation is attempted. ## Coding Style & Naming Conventions - Follow PEP 8 with 4-space indents and explicit imports (for example, `from docgen.orchestrator import Pipeline`) so static tooling can trace dependencies. - Name modules after their roles (`orchestrator.py`, `prompt_builder.py`) and keep functions snake_case with descriptive nouns first (`build_prompt_section`). - Run `black docgen tests` before commits; avoid manual reformatting unless the formatter cannot resolve a construct. ## Testing Guidelines - Pytest is the default harness; every analyzer or pipeline component needs unit coverage plus an integration case under `tests/integration/` that walks a repo snapshot through generation. - Use descriptive test names such as `test_prompt_builder_handles_missing_signals` and keep Arrange-Act-Assert comments minimal but intentional. - Store regression fixtures for generated README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "AGENTS.md#1",
      "vector": {
        "readme": 0.1270001270001905,
        "slices": 0.06350006350009525,
        "under": 0.06350006350009525,
        "tests": 0.06350006350009525,
        "data": 0.06350006350009525,
        "and": 0.4445004445006667,
        "update": 0.06350006350009525,
        "them": 0.06350006350009525,
        "with": 0.06350006350009525,
        "helper": 0.06350006350009525,
        "scripts": 0.06350006350009525,
        "so": 0.06350006350009525,
        "diffs": 0.06350006350009525,
        "stay": 0.06350006350009525,
        "reviewable": 0.06350006350009525,
        "commit": 0.1270001270001905,
        "pull": 0.06350006350009525,
        "request": 0.06350006350009525,
        "guidelines": 0.06350006350009525,
        "follow": 0.06350006350009525,
        "conventional": 0.06350006350009525,
        "commits": 0.06350006350009525,
        "feat": 0.06350006350009525,
        "fix": 0.06350006350009525,
        "docs": 0.1270001270001905,
        "keep": 0.1270001270001905,
        "subject": 0.06350006350009525,
        "lines": 0.06350006350009525,
        "72": 0.06350006350009525,
        "characters": 0.06350006350009525,
        "explain": 0.06350006350009525,
        "broader": 0.06350006350009525,
        "scope": 0.06350006350009525,
        "in": 0.254000254000381,
        "the": 0.31750031750047625,
        "body": 0.06350006350009525,
        "when": 0.1270001270001905,
        "multiple": 0.06350006350009525,
        "subsystems": 0.06350006350009525,
        "change": 0.06350006350009525,
        "bundle": 0.06350006350009525,
        "related": 0.06350006350009525,
        "work": 0.1270001270001905,
        "into": 0.06350006350009525,
        "a": 0.254000254000381,
        "single": 0.06350006350009525,
        "pr": 0.1270001270001905,
        "that": 0.06350006350009525,
        "includes": 0.06350006350009525,
        "summary": 0.06350006350009525,
        "testing": 0.06350006350009525,
        "notes": 0.1270001270001905,
        "links": 0.06350006350009525,
        "to": 0.06350006350009525,
        "relevant": 0.06350006350009525,
        "issues": 0.06350006350009525,
        "or": 0.06350006350009525,
        "spec": 0.06350006350009525,
        "sections": 0.06350006350009525,
        "attach": 0.06350006350009525,
        "before": 0.1270001270001905,
        "after": 0.06350006350009525,
        "excerpts": 0.06350006350009525,
        "altering": 0.06350006350009525,
        "generation": 0.06350006350009525,
        "output": 0.06350006350009525,
        "run": 0.06350006350009525,
        "lint": 0.06350006350009525,
        "type": 0.06350006350009525,
        "check": 0.06350006350009525,
        "test": 0.06350006350009525,
        "commands": 0.06350006350009525,
        "opening": 0.06350006350009525,
        "paste": 0.06350006350009525,
        "condensed": 0.06350006350009525,
        "results": 0.06350006350009525,
        "description": 0.06350006350009525,
        "for": 0.06350006350009525,
        "quick": 0.06350006350009525,
        "verification": 0.06350006350009525,
        "environment": 0.1270001270001905,
        "tooling": 0.06350006350009525,
        "reuse": 0.06350006350009525,
        "local": 0.1270001270001905,
        "venv": 0.06350006350009525,
        "seeded": 0.06350006350009525,
        "by": 0.1270001270001905,
        "pycharm": 0.06350006350009525,
        "do": 0.06350006350009525,
        "not": 0.06350006350009525,
        "artifacts": 0.06350006350009525,
        "store": 0.06350006350009525,
        "secrets": 0.06350006350009525,
        "env": 0.06350006350009525,
        "consumed": 0.06350006350009525,
        "llm": 0.06350006350009525,
        "runner": 0.06350006350009525,
        "large": 0.06350006350009525,
        "model": 0.06350006350009525,
        "weights": 0.06350006350009525,
        "outside": 0.06350006350009525,
        "repository": 0.06350006350009525,
        "document": 0.06350006350009525,
        "their": 0.06350006350009525,
        "locations": 0.06350006350009525,
        "models": 0.06350006350009525,
        "md": 0.06350006350009525,
        "once": 0.06350006350009525,
        "integration": 0.06350006350009525,
        "begins": 0.06350006350009525
      },
      "text": "README slices under `tests/data/` and update them with helper scripts so diffs stay reviewable. ## Commit & Pull Request Guidelines - Follow Conventional Commits (`feat:`, `fix:`, `docs:`); keep subject lines <=72 characters and explain broader scope in the body when multiple subsystems change. - Bundle related work into a single PR that includes a summary, testing notes, and links to relevant issues or spec sections; attach before/after README excerpts when altering generation output. - Run lint, type-check, and test commands before opening a PR and paste condensed results in the description for quick verification. ## Environment & Tooling Notes - Reuse the local `.venv` seeded by PyCharm; do not commit environment artifacts and store secrets in a `.env` consumed by the local LLM runner. - Keep large model weights outside the repository and document their locations in `docs/models.md` once integration work begins.",
      "metadata": {
        "path": "AGENTS.md",
        "tags": [
          "docs"
        ],
        "hash": "dfeeea63c97ae7cb3036fbb0312edaee5f377b31178db6fbde6c843da7ceb8d2"
      }
    },
    {
      "id": "docs/ci/docgen-update.yml#0",
      "vector": {
        "name": 0.2773500981126145,
        "docgen": 0.1849000654084097,
        "update": 0.2311250817605121,
        "on": 0.09245003270420485,
        "push": 0.046225016352102424,
        "branches": 0.09245003270420485,
        "main": 0.13867504905630726,
        "pull_request": 0.13867504905630726,
        "jobs": 0.046225016352102424,
        "readme": 0.1849000654084097,
        "runs": 0.046225016352102424,
        "self": 0.046225016352102424,
        "hosted": 0.046225016352102424,
        "steps": 0.09245003270420485,
        "uses": 0.13867504905630726,
        "actions": 0.2311250817605121,
        "checkout": 0.046225016352102424,
        "v4": 0.09245003270420485,
        "with": 0.13867504905630726,
        "fetch": 0.046225016352102424,
        "depth": 0.046225016352102424,
        "0": 0.046225016352102424,
        "setup": 0.046225016352102424,
        "python": 0.2311250817605121,
        "v5": 0.046225016352102424,
        "version": 0.046225016352102424,
        "3": 0.046225016352102424,
        "11": 0.046225016352102424,
        "cache": 0.09245003270420485,
        "path": 0.046225016352102424,
        "pip": 0.2773500981126145,
        "key": 0.046225016352102424,
        "runner": 0.09245003270420485,
        "os": 0.09245003270420485,
        "hashfiles": 0.046225016352102424,
        "pyproject": 0.046225016352102424,
        "toml": 0.046225016352102424,
        "restore": 0.046225016352102424,
        "keys": 0.046225016352102424,
        "install": 0.13867504905630726,
        "dependencies": 0.046225016352102424,
        "run": 0.2311250817605121,
        "m": 0.13867504905630726,
        "upgrade": 0.046225016352102424,
        "e": 0.046225016352102424,
        "dev": 0.046225016352102424,
        "determine": 0.046225016352102424,
        "diff": 0.1849000654084097,
        "base": 0.2773500981126145,
        "id": 0.046225016352102424,
        "if": 0.09245003270420485,
        "github": 0.2311250817605121,
        "event_name": 0.046225016352102424,
        "then": 0.09245003270420485,
        "echo": 0.09245003270420485,
        "event": 0.046225016352102424,
        "sha": 0.046225016352102424,
        "github_output": 0.09245003270420485,
        "else": 0.046225016352102424,
        "origin": 0.046225016352102424,
        "fi": 0.09245003270420485,
        "env": 0.046225016352102424,
        "docgen_llm_base_url": 0.046225016352102424,
        "http": 0.046225016352102424,
        "localhost": 0.046225016352102424,
        "12434": 0.046225016352102424,
        "engines": 0.046225016352102424,
        "v1": 0.046225016352102424,
        "cli": 0.046225016352102424,
        "outputs": 0.046225016352102424,
        "commit": 0.09245003270420485,
        "md": 0.09245003270420485,
        "optional": 0.046225016352102424,
        "git": 0.1849000654084097,
        "status": 0.046225016352102424,
        "short": 0.046225016352102424,
        "grep": 0.046225016352102424,
        "q": 0.046225016352102424,
        "config": 0.09245003270420485,
        "user": 0.09245003270420485,
        "email": 0.046225016352102424,
        "users": 0.046225016352102424,
        "noreply": 0.046225016352102424,
        "com": 0.046225016352102424,
        "am": 0.046225016352102424,
        "docs": 0.046225016352102424,
        "via": 0.046225016352102424
      },
      "text": "name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted steps: - uses: actions/checkout@v4 with: fetch-depth: 0 - uses: actions/setup-python@v5 with: python-version: '3.11' - uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install dependencies run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README.md (optional) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi",
      "metadata": {
        "path": "docs/ci/docgen-update.yml",
        "tags": [
          "docs"
        ],
        "hash": "48bec2bc404707486fcb1661def194395cc581bf55cb2f610704d495663e6a14"
      }
    },
    {
      "id": "docs/ci/github-actions.md#0",
      "vector": {
        "github": 0.2528558164964056,
        "actions": 0.2212488394343549,
        "integration": 0.0316069770620507,
        "the": 0.18964186237230418,
        "workflow": 0.0632139541241014,
        "below": 0.0316069770620507,
        "runs": 0.0632139541241014,
        "docgen": 0.2212488394343549,
        "update": 0.18964186237230418,
        "on": 0.1264279082482028,
        "pushes": 0.0316069770620507,
        "and": 0.0316069770620507,
        "pull": 0.0316069770620507,
        "requests": 0.0316069770620507,
        "it": 0.0316069770620507,
        "assumes": 0.0316069770620507,
        "a": 0.0632139541241014,
        "self": 0.0632139541241014,
        "hosted": 0.1264279082482028,
        "runner": 0.15803488531025348,
        "or": 0.09482093118615209,
        "with": 0.18964186237230418,
        "network": 0.0632139541241014,
        "access": 0.0632139541241014,
        "to": 0.1264279082482028,
        "your": 0.0632139541241014,
        "local": 0.09482093118615209,
        "model": 0.0316069770620507,
        "runtime": 0.0316069770620507,
        "job": 0.0316069770620507,
        "skips": 0.0316069770620507,
        "early": 0.0316069770620507,
        "when": 0.0316069770620507,
        "no": 0.0316069770620507,
        "files": 0.0316069770620507,
        "match": 0.0316069770620507,
        "yml": 0.0316069770620507,
        "s": 0.0316069770620507,
        "ci": 0.0316069770620507,
        "watched_globs": 0.0316069770620507,
        "entries": 0.0316069770620507,
        "so": 0.0316069770620507,
        "that": 0.0316069770620507,
        "purely": 0.0316069770620507,
        "documentation": 0.0316069770620507,
        "only": 0.0316069770620507,
        "changes": 0.0316069770620507,
        "do": 0.0316069770620507,
        "not": 0.0316069770620507,
        "trigger": 0.0316069770620507,
        "generator": 0.0316069770620507,
        "yaml": 0.0316069770620507,
        "name": 0.3476767476825577,
        "push": 0.0316069770620507,
        "branches": 0.0632139541241014,
        "main": 0.09482093118615209,
        "pull_request": 0.09482093118615209,
        "jobs": 0.0316069770620507,
        "readme": 0.2212488394343549,
        "requires": 0.0316069770620507,
        "llm": 0.0316069770620507,
        "steps": 0.0632139541241014,
        "checkout": 0.0632139541241014,
        "repository": 0.0316069770620507,
        "uses": 0.1264279082482028,
        "v4": 0.09482093118615209,
        "fetch": 0.0316069770620507,
        "depth": 0.0316069770620507,
        "0": 0.0316069770620507,
        "set": 0.0316069770620507,
        "up": 0.0316069770620507,
        "python": 0.18964186237230418,
        "setup": 0.0316069770620507,
        "v5": 0.0316069770620507,
        "version": 0.0316069770620507,
        "3": 0.0316069770620507,
        "11": 0.0316069770620507,
        "cache": 0.09482093118615209,
        "pip": 0.2212488394343549,
        "dependencies": 0.0316069770620507,
        "path": 0.0632139541241014,
        "key": 0.0316069770620507,
        "os": 0.0632139541241014,
        "hashfiles": 0.0316069770620507,
        "pyproject": 0.0316069770620507,
        "toml": 0.0316069770620507,
        "restore": 0.0316069770620507,
        "keys": 0.0316069770620507,
        "install": 0.09482093118615209,
        "in": 0.0316069770620507,
        "editable": 0.0316069770620507,
        "mode": 0.0316069770620507,
        "run": 0.15803488531025348,
        "m": 0.09482093118615209,
        "upgrade": 0.0316069770620507,
        "e": 0.0316069770620507,
        "dev": 0.0316069770620507,
        "determine": 0.0316069770620507,
        "diff": 0.1264279082482028,
        "base": 0.18964186237230418,
        "id": 0.0316069770620507,
        "if": 0.1264279082482028,
        "event_name": 0.0316069770620507,
        "then": 0.0632139541241014,
        "echo": 0.0632139541241014,
        "event": 0.0316069770620507,
        "sha": 0.0316069770620507,
        "github_output": 0.0632139541241014,
        "else": 0.0316069770620507,
        "origin": 0.0316069770620507,
        "fi": 0.0632139541241014,
        "env": 0.0316069770620507,
        "docgen_llm_base_url": 0.0632139541241014,
        "http": 0.0316069770620507,
        "localhost": 0.0316069770620507,
        "12434": 0.0316069770620507,
        "engines": 0.0316069770620507,
        "v1": 0.0316069770620507,
        "cli": 0.0632139541241014,
        "outputs": 0.0316069770620507,
        "commit": 0.0632139541241014,
        "updates": 0.0316069770620507,
        "any": 0.0316069770620507,
        "git": 0.1264279082482028,
        "status": 0.0316069770620507,
        "short": 0.0316069770620507,
        "grep": 0.0316069770620507,
        "q": 0.0316069770620507,
        "md": 0.0632139541241014,
        "config": 0.0632139541241014,
        "user": 0.0632139541241014,
        "email": 0.0316069770620507,
        "users": 0.0316069770620507,
        "noreply": 0.0316069770620507,
        "com": 0.0316069770620507,
        "am": 0.0316069770620507,
        "docs": 0.0316069770620507,
        "via": 0.0316069770620507,
        "upload": 0.0632139541241014,
        "artifact": 0.0632139541241014,
        "success": 0.0316069770620507,
        "generated": 0.0316069770620507,
        "note": 0.0316069770620507,
        "relies": 0.0316069770620507,
        "pointing": 0.0316069770620507,
        "private": 0.0632139541241014,
        "inference": 0.0316069770620507,
        "endpoint": 0.0316069770620507,
        "for": 0.0316069770620507,
        "runners": 0.0316069770620507,
        "you": 0.0316069770620507,
        "will": 0.0316069770620507,
        "need": 0.0316069770620507,
        "expose": 0.0316069770620507,
        "within": 0.0316069770620507,
        "switch": 0.0316069770620507,
        "ollama": 0.0316069770620507,
        "appropriate": 0.0316069770620507,
        "caching": 0.0316069770620507
      },
      "text": "# GitHub Actions Integration The workflow below runs `docgen update` on pushes and pull requests. It assumes a self-hosted runner (or GitHub-hosted runner with network access to your local model runtime). The job skips early when no files match `.docgen.yml`'s `ci.watched_globs` entries so that purely documentation-only changes do not trigger the generator. ```yaml name: docgen-update on: push: branches: [ main ] pull_request: branches: [ main ] jobs: update-readme: runs-on: self-hosted # requires local LLM access steps: - name: Checkout repository uses: actions/checkout@v4 with: fetch-depth: 0 - name: Set up Python uses: actions/setup-python@v5 with: python-version: '3.11' - name: Cache pip dependencies uses: actions/cache@v4 with: path: ~/.cache/pip key: ${{ runner.os }}-pip-${{ hashFiles('pyproject.toml') }} restore-keys: ${{ runner.os }}-pip- - name: Install docgen in editable mode run: | python -m pip install --upgrade pip python -m pip install -e .[dev] - name: Determine diff base id: diff run: | if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then echo \"base=${{ github.event.pull_request.base.sha }}\" >> \"$GITHUB_OUTPUT\" else echo \"base=origin/main\" >> \"$GITHUB_OUTPUT\" fi - name: Run docgen update env: DOCGEN_LLM_BASE_URL: http://localhost:12434/engines/v1 run: | python -m docgen.cli update --diff-base ${{ steps.diff.outputs.base }} - name: Commit README updates (if any) run: | if git status --short | grep -q README.md; then git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git commit -am \"docs: update README via docgen\" fi - name: Upload README artifact if: success() uses: actions/upload-artifact@v4 with: name: generated-readme path: README.md ``` > **Note:** the workflow relies on `DOCGEN_LLM_BASE_URL` pointing to a local or > private inference endpoint. For GitHub-hosted runners you will need to expose > the runner within your private network or switch to the `ollama` CLI with > appropriate caching. ```",
      "metadata": {
        "path": "docs/ci/github-actions.md",
        "tags": [
          "docs"
        ],
        "hash": "178c6f25ecf7325348a9158158c6e6f36c29d520a922a6f0c2c739f4efe1b0d8"
      }
    },
    {
      "id": "spec/feature_checklist.md#0",
      "vector": {
        "intelligent": 0.028513297425610054,
        "readme": 0.08553989227683016,
        "generator": 0.028513297425610054,
        "feature": 0.028513297425610054,
        "checklist": 0.028513297425610054,
        "status": 0.028513297425610054,
        "legend": 0.028513297425610054,
        "not": 0.028513297425610054,
        "started": 0.028513297425610054,
        "in": 0.028513297425610054,
        "progress": 0.028513297425610054,
        "done": 0.028513297425610054,
        "scope": 0.028513297425610054,
        "tags": 0.028513297425610054,
        "mvp": 0.4847260562353709,
        "required": 0.028513297425610054,
        "for": 0.11405318970244022,
        "proof": 0.028513297425610054,
        "of": 0.08553989227683016,
        "concept": 0.028513297425610054,
        "next": 0.2851329742561005,
        "nice": 0.028513297425610054,
        "to": 0.08553989227683016,
        "have": 0.028513297425610054,
        "soon": 0.028513297425610054,
        "stretch": 0.11405318970244022,
        "later": 0.028513297425610054,
        "1": 0.05702659485122011,
        "core": 0.028513297425610054,
        "workflows": 0.028513297425610054,
        "x": 0.570265948512201,
        "docgen": 0.11405318970244022,
        "init": 0.028513297425610054,
        "initialize": 0.028513297425610054,
        "repos": 0.028513297425610054,
        "without": 0.05702659485122011,
        "docs": 0.11405318970244022,
        "update": 0.028513297425610054,
        "detect": 0.028513297425610054,
        "changes": 0.028513297425610054,
        "on": 0.028513297425610054,
        "commit": 0.028513297425610054,
        "pr": 0.028513297425610054,
        "and": 0.028513297425610054,
        "patch": 0.028513297425610054,
        "affected": 0.028513297425610054,
        "sections": 0.05702659485122011,
        "regenerate": 0.028513297425610054,
        "manual": 0.028513297425610054,
        "full": 0.028513297425610054,
        "partial": 0.028513297425610054,
        "regeneration": 0.028513297425610054,
        "dry": 0.05702659485122011,
        "run": 0.05702659485122011,
        "mode": 0.05702659485122011,
        "preview": 0.028513297425610054,
        "diffs": 0.028513297425610054,
        "writing": 0.028513297425610054,
        "service": 0.028513297425610054,
        "fastapi": 0.05702659485122011,
        "endpoints": 0.028513297425610054,
        "ci": 0.05702659485122011,
        "bots": 0.028513297425610054,
        "2": 0.028513297425610054,
        "repository": 0.028513297425610054,
        "scanning": 0.028513297425610054,
        "indexing": 0.028513297425610054,
        "walk": 0.028513297425610054,
        "filesystem": 0.028513297425610054,
        "with": 0.028513297425610054,
        "ignore": 0.028513297425610054,
        "rules": 0.028513297425610054,
        "gitignore": 0.028513297425610054,
        "yml": 0.028513297425610054,
        "build": 0.08553989227683016,
        "normalized": 0.028513297425610054,
        "manifest": 0.05702659485122011,
        "files": 0.05702659485122011,
        "roles": 0.028513297425610054,
        "src": 0.028513297425610054,
        "test": 0.05702659485122011,
        "config": 0.08553989227683016,
        "infra": 0.028513297425610054,
        "hash": 0.028513297425610054,
        "cache": 0.028513297425610054,
        "file": 0.028513297425610054,
        "metadata": 0.028513297425610054,
        "speed": 0.028513297425610054,
        "subsequent": 0.028513297425610054,
        "runs": 0.028513297425610054,
        "entrypoint": 0.05702659485122011,
        "detection": 0.05702659485122011,
        "e": 0.028513297425610054,
        "g": 0.028513297425610054,
        "main": 0.028513297425610054,
        "springbootapplication": 0.028513297425610054,
        "app": 0.028513297425610054,
        "monorepo": 0.05702659485122011,
        "module": 0.028513297425610054,
        "3": 0.028513297425610054,
        "analyzers": 0.14256648712805026,
        "plugin": 0.028513297425610054,
        "based": 0.028513297425610054,
        "language": 0.028513297425610054,
        "python": 0.028513297425610054,
        "java": 0.028513297425610054,
        "node": 0.028513297425610054,
        "js": 0.05702659485122011,
        "tier": 0.028513297425610054,
        "poetry": 0.028513297425610054,
        "setuptools": 0.028513297425610054,
        "maven": 0.028513297425610054,
        "gradle": 0.028513297425610054,
        "npm": 0.028513297425610054,
        "pnpm": 0.028513297425610054,
        "yarn": 0.028513297425610054,
        "dependency": 0.028513297425610054,
        "from": 0.028513297425610054,
        "pattern": 0.028513297425610054,
        "docker": 0.028513297425610054,
        "k8s": 0.028513297425610054,
        "layout": 0.028513297425610054,
        "tree": 0.028513297425610054,
        "sitter": 0.028513297425610054,
        "powered": 0.028513297425610054,
        "symbol": 0.028513297425610054,
        "extraction": 0.028513297425610054,
        "flagged": 0.028513297425610054,
        "4": 0.028513297425610054,
        "knowledge": 0.05702659485122011,
        "store": 0.028513297425610054,
        "rag": 0.028513297425610054,
        "local": 0.05702659485122011,
        "embedding": 0.028513297425610054,
        "model": 0.05702659485122011,
        "chunking": 0.028513297425610054,
        "strategy": 0.028513297425610054,
        "index": 0.028513297425610054,
        "top": 0.05702659485122011,
        "n": 0.028513297425610054,
        "source": 0.028513297425610054,
        "headers": 0.028513297425610054,
        "comments": 0.028513297425610054,
        "section": 0.14256648712805026,
        "scoped": 0.028513297425610054,
        "retrieval": 0.028513297425610054,
        "k": 0.028513297425610054,
        "per": 0.05702659485122011,
        "lightweight": 0.028513297425610054,
        "graph": 0.028513297425610054,
        "modules": 0.028513297425610054,
        "services": 0.028513297425610054,
        "signals": 0.028513297425610054,
        "5": 0.028513297425610054,
        "prompting": 0.028513297425610054,
        "templates": 0.08553989227683016,
        "jinja2": 0.028513297425610054,
        "intro": 0.028513297425610054,
        "features": 0.028513297425610054,
        "architecture": 0.05702659485122011,
        "quickstart": 0.028513297425610054,
        "deployment": 0.028513297425610054,
        "troubleshooting": 0.028513297425610054,
        "faq": 0.028513297425610054,
        "license": 0.028513297425610054,
        "guardrailed": 0.028513297425610054,
        "system": 0.028513297425610054,
        "prompt": 0.028513297425610054,
        "no": 0.028513297425610054,
        "speculation": 0.028513297425610054,
        "cite": 0.028513297425610054,
        "repo": 0.028513297425610054,
        "facts": 0.028513297425610054,
        "only": 0.028513297425610054,
        "token": 0.028513297425610054,
        "budgeting": 0.028513297425610054,
        "streaming": 0.028513297425610054,
        "by": 0.028513297425610054,
        "generation": 0.028513297425610054,
        "template": 0.028513297425610054,
        "override": 0.028513297425610054,
        "mechanism": 0.028513297425610054,
        "j2": 0.028513297425610054,
        "style": 0.028513297425610054,
        "presets": 0.028513297425610054,
        "concise": 0.028513297425610054,
        "vs": 0.028513297425610054,
        "comprehensive": 0.028513297425610054,
        "mermaid": 0.028513297425610054,
        "diagrams": 0.028513297425610054,
        "flow": 0.028513297425610054,
        "where": 0.028513297425610054,
        "appropriate": 0.028513297425610054,
        "6": 0.028513297425610054,
        "llm": 0.028513297425610054,
        "runner": 0.05702659485122011,
        "http": 0.028513297425610054,
        "adapter": 0.05702659485122011,
        "host": 0.028513297425610054,
        "container": 0.028513297425610054,
        "defaults": 0.028513297425610054,
        "env": 0.028513297425610054,
        "api": 0.028513297425610054,
        "key": 0.028513297425610054,
        "overrides": 0.028513297425610054,
        "llama": 0.028513297425610054,
        "cpp": 0.028513297425610054,
        "structured": 0.028513297425610054,
        "outputs": 0.028513297425610054,
        "tool": 0.028513297425610054,
        "use": 0.028513297425610054,
        "compatibility": 0.028513297425610054,
        "7": 0.028513297425610054,
        "post": 0.028513297425610054,
        "processing": 0.028513297425610054,
        "markdown": 0.028513297425610054,
        "lint": 0.028513297425610054,
        "heading": 0.028513297425610054,
        "hierarchy": 0.028513297425610054
      },
      "text": "# Intelligent README Generator \u2014 Feature Checklist > Status legend: \u2610 Not started \u00b7 \u25d0 In progress \u00b7 \u2714 Done > Scope tags: **[MVP]** required for proof\u2011of\u2011concept, **[NEXT]** nice\u2011to\u2011have soon, **[STRETCH]** later ## 1) Core Workflows - [x] **docgen init** \u2014 Initialize README for repos without docs **[MVP]** - [x] **docgen update** \u2014 Detect changes on commit/PR and patch affected sections **[MVP]** - [ ] **docgen regenerate** \u2014 Manual full/partial regeneration **[MVP]** - [x] Dry\u2011run mode (`--dry-run`) to preview diffs without writing **[NEXT]** - [ ] Service mode (FastAPI) endpoints for CI/bots **[STRETCH]** ## 2) Repository Scanning & Indexing - [x] Walk filesystem with ignore rules (`.gitignore`, `.docgen.yml`) **[MVP]** - [x] Build normalized manifest of files, roles (src/test/docs/config/infra) **[MVP]** - [x] Hash & cache file metadata to speed subsequent runs **[MVP]** - [x] Entrypoint detection (e.g., `main()`, `@SpringBootApplication`, FastAPI app) **[NEXT]** - [x] Monorepo module detection **[NEXT]** ## 3) Analyzers (Plugin\u2011based) - [x] Language analyzers: Python, Java, Node.js (Tier\u20111) **[MVP]** - [x] Build analyzers: Poetry/Setuptools, Maven/Gradle, npm/pnpm/yarn **[MVP]** - [x] Dependency analyzers from manifest files **[MVP]** - [x] Pattern analyzers: Docker/K8s, CI config, monorepo layout **[NEXT]** - [ ] Tree\u2011sitter powered symbol/entrypoint extraction (flagged) **[STRETCH]** ## 4) Knowledge Store (RAG) - [ ] Local embedding model + chunking strategy **[MVP]** - [ ] Index `README`, `/docs`, top N source headers & comments **[MVP]** - [ ] Section\u2011scoped retrieval (top\u2011k per section) **[MVP]** - [ ] Lightweight knowledge graph of modules/services/signals **[NEXT]** ## 5) Prompting & Templates - [x] Jinja2 templates per section (intro, features, architecture, quickstart, config, build/test, deployment, troubleshooting, FAQ, license) **[MVP]** - [x] Guardrailed system prompt (\u201cno speculation; cite repo facts only\u201d) **[MVP]** - [x] Token budgeting & streaming section-by-section generation **[MVP]** - [x] Template override mechanism (`docs/templates/*.j2`) **[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy,",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#1",
      "vector": {
        "next": 0.3907019005301633,
        "x": 0.5860528507952449,
        "style": 0.05581455721859476,
        "presets": 0.02790727860929738,
        "concise": 0.02790727860929738,
        "vs": 0.02790727860929738,
        "comprehensive": 0.02790727860929738,
        "mermaid": 0.02790727860929738,
        "js": 0.05581455721859476,
        "diagrams": 0.02790727860929738,
        "for": 0.11162911443718952,
        "architecture": 0.02790727860929738,
        "flow": 0.02790727860929738,
        "sections": 0.05581455721859476,
        "where": 0.02790727860929738,
        "appropriate": 0.02790727860929738,
        "6": 0.02790727860929738,
        "local": 0.05581455721859476,
        "llm": 0.05581455721859476,
        "runner": 0.05581455721859476,
        "model": 0.02790727860929738,
        "http": 0.02790727860929738,
        "adapter": 0.05581455721859476,
        "host": 0.02790727860929738,
        "container": 0.02790727860929738,
        "defaults": 0.05581455721859476,
        "env": 0.02790727860929738,
        "api": 0.02790727860929738,
        "key": 0.02790727860929738,
        "overrides": 0.02790727860929738,
        "mvp": 0.47442373635805546,
        "llama": 0.02790727860929738,
        "cpp": 0.02790727860929738,
        "structured": 0.02790727860929738,
        "outputs": 0.05581455721859476,
        "tool": 0.02790727860929738,
        "use": 0.02790727860929738,
        "compatibility": 0.02790727860929738,
        "stretch": 0.05581455721859476,
        "7": 0.02790727860929738,
        "post": 0.02790727860929738,
        "processing": 0.02790727860929738,
        "markdown": 0.02790727860929738,
        "lint": 0.05581455721859476,
        "heading": 0.02790727860929738,
        "hierarchy": 0.02790727860929738,
        "code": 0.05581455721859476,
        "fences": 0.02790727860929738,
        "line": 0.02790727860929738,
        "length": 0.02790727860929738,
        "auto": 0.05581455721859476,
        "toc": 0.02790727860929738,
        "level": 0.02790727860929738,
        "3": 0.02790727860929738,
        "badges": 0.02790727860929738,
        "build": 0.05581455721859476,
        "coverage": 0.05581455721859476,
        "license": 0.02790727860929738,
        "with": 0.05581455721859476,
        "safe": 0.05581455721859476,
        "link": 0.05581455721859476,
        "validator": 0.02790727860929738,
        "relative": 0.02790727860929738,
        "absolute": 0.02790727860929738,
        "managed": 0.02790727860929738,
        "markers": 0.02790727860929738,
        "idempotent": 0.02790727860929738,
        "patching": 0.02790727860929738,
        "docgen": 0.08372183582789214,
        "begin": 0.02790727860929738,
        "end": 0.02790727860929738,
        "8": 0.02790727860929738,
        "git": 0.02790727860929738,
        "integration": 0.05581455721859476,
        "diff": 0.05581455721859476,
        "detection": 0.02790727860929738,
        "map": 0.02790727860929738,
        "changed": 0.05581455721859476,
        "files": 0.05581455721859476,
        "impacted": 0.02790727860929738,
        "branch": 0.02790727860929738,
        "pr": 0.05581455721859476,
        "creation": 0.02790727860929738,
        "summary": 0.02790727860929738,
        "of": 0.02790727860929738,
        "readme": 0.11162911443718952,
        "deltas": 0.02790727860929738,
        "commit": 0.02790727860929738,
        "mode": 0.02790727860929738,
        "init": 0.02790727860929738,
        "or": 0.02790727860929738,
        "small": 0.02790727860929738,
        "changes": 0.05581455721859476,
        "configurable": 0.02790727860929738,
        "prevent": 0.02790727860929738,
        "loops": 0.02790727860929738,
        "on": 0.05581455721859476,
        "only": 0.08372183582789214,
        "9": 0.02790727860929738,
        "configuration": 0.02790727860929738,
        "parse": 0.02790727860929738,
        "yml": 0.02790727860929738,
        "analyzers": 0.02790727860929738,
        "publish": 0.02790727860929738,
        "path": 0.02790727860929738,
        "exclusions": 0.02790727860929738,
        "watched_globs": 0.02790727860929738,
        "ci": 0.08372183582789214,
        "triggers": 0.02790727860929738,
        "per": 0.05581455721859476,
        "section": 0.02790727860929738,
        "off": 0.02790727860929738,
        "toggles": 0.02790727860929738,
        "and": 0.08372183582789214,
        "titles": 0.02790727860929738,
        "10": 0.02790727860929738,
        "github": 0.02790727860929738,
        "actions": 0.02790727860929738,
        "example": 0.02790727860929738,
        "workflow": 0.02790727860929738,
        "gitlab": 0.02790727860929738,
        "bitbucket": 0.02790727860929738,
        "pipelines": 0.02790727860929738,
        "samples": 0.02790727860929738,
        "labeling": 0.02790727860929738,
        "docs": 0.02790727860929738,
        "update": 0.02790727860929738,
        "behavior": 0.02790727860929738,
        "11": 0.02790727860929738,
        "security": 0.02790727860929738,
        "privacy": 0.02790727860929738,
        "models": 0.02790727860929738,
        "never": 0.02790727860929738,
        "exfiltrate": 0.02790727860929738,
        "respect": 0.02790727860929738,
        "gitignore": 0.02790727860929738,
        "exclude": 0.02790727860929738,
        "large": 0.02790727860929738,
        "binaries": 0.02790727860929738,
        "secrets": 0.02790727860929738,
        "optional": 0.02790727860929738,
        "simple": 0.02790727860929738,
        "secret": 0.02790727860929738,
        "scanner": 0.02790727860929738,
        "gate": 0.02790727860929738,
        "12": 0.02790727860929738,
        "multi": 0.02790727860929738,
        "language": 0.02790727860929738,
        "project": 0.02790727860929738,
        "types": 0.02790727860929738,
        "tier": 0.05581455721859476,
        "1": 0.02790727860929738,
        "python": 0.02790727860929738,
        "poetry": 0.02790727860929738,
        "setuptools": 0.02790727860929738,
        "java": 0.02790727860929738,
        "maven": 0.02790727860929738,
        "gradle": 0.02790727860929738,
        "spring": 0.02790727860929738,
        "boot": 0.02790727860929738,
        "node": 0.02790727860929738,
        "npm": 0.02790727860929738,
        "pnpm": 0.02790727860929738,
        "express": 0.02790727860929738,
        "2": 0.02790727860929738,
        "go": 0.02790727860929738,
        "rust": 0.02790727860929738,
        "ruby": 0.02790727860929738,
        "php": 0.02790727860929738,
        "framework": 0.02790727860929738,
        "aware": 0.02790727860929738,
        "quickstart": 0.02790727860929738,
        "commands": 0.02790727860929738,
        "system": 0.02790727860929738,
        "13": 0.02790727860929738,
        "quality": 0.02790727860929738,
        "gates": 0.02790727860929738,
        "evaluation": 0.02790727860929738,
        "command": 0.02790727860929738,
        "validation": 0.02790727860929738,
        "existence": 0.02790727860929738,
        "checks": 0.05581455721859476,
        "no": 0.02790727860929738,
        "hallucination": 0.02790727860929738,
        "reject": 0.02790727860929738,
        "facts": 0.02790727860929738,
        "not": 0.02790727860929738,
        "in": 0.02790727860929738,
        "signals": 0.02790727860929738,
        "rag": 0.05581455721859476,
        "scorecard": 0.02790727860929738,
        "buildability": 0.02790727860929738,
        "validity": 0.02790727860929738,
        "alignment": 0.02790727860929738,
        "14": 0.02790727860929738,
        "performance": 0.02790727860929738,
        "caching": 0.02790727860929738,
        "persist": 0.02790727860929738,
        "analyzer": 0.02790727860929738,
        "embeddings": 0.02790727860929738,
        "under": 0.02790727860929738,
        "incremental": 0.02790727860929738,
        "refresh": 0.02790727860929738,
        "15": 0.02790727860929738,
        "error": 0.02790727860929738,
        "handling": 0.02790727860929738,
        "ux": 0.02790727860929738,
        "fail": 0.02790727860929738,
        "stub": 0.02790727860929738,
        "generation": 0.02790727860929738,
        "when": 0.02790727860929738,
        "evidence": 0.02790727860929738
      },
      "text": "**[NEXT]** - [x] Style presets: concise vs comprehensive **[NEXT]** - [x] Mermaid.js diagrams for architecture/flow sections where appropriate **[NEXT]** ## 6) Local LLM Runner - [x] Model Runner HTTP adapter (host/container defaults, env/API key overrides) **[MVP]** - [ ] llama.cpp adapter **[NEXT]** - [ ] Structured outputs / tool\u2011use compatibility **[STRETCH]** ## 7) Post\u2011Processing - [x] Markdown lint: heading hierarchy, code fences, line length **[MVP]** - [x] Auto ToC (\u2264 level 3) **[MVP]** - [x] Badges (build, coverage, license) with safe defaults **[NEXT]** - [x] Link validator (relative/absolute) **[NEXT]** - [x] Managed markers for idempotent patching (`<!-- docgen:begin:end -->`) **[MVP]** ## 8) Git Integration - [x] Diff detection (map changed files \u2192 impacted sections) **[MVP]** - [x] Branch + PR creation with summary of README deltas **[MVP]** - [x] Commit mode for init or small changes (configurable) **[NEXT]** - [ ] Prevent loops on README\u2011only changes **[MVP]** ## 9) Configuration - [x] Parse `.docgen.yml` (LLM, readme style, analyzers, publish) **[MVP]** - [x] Path exclusions & `watched_globs` for CI triggers **[MVP]** - [ ] Per-section on/off toggles and titles **[NEXT]** ## 10) CI Integration - [x] GitHub Actions example workflow **[MVP]** - [ ] GitLab CI and Bitbucket Pipelines samples **[NEXT]** - [x] Labeling (`docs:auto`) and PR update behavior **[NEXT]** ## 11) Security & Privacy - [x] Local-only models; never exfiltrate code **[MVP]** - [ ] Respect `.gitignore`; exclude large binaries/secrets **[MVP]** - [ ] Optional simple secret scanner gate **[NEXT]** ## 12) Multi\u2011Language & Project Types - [ ] Tier\u20111: Python (Poetry/Setuptools), Java (Maven/Gradle/Spring Boot), Node.js (npm/pnpm/Express/Next) **[MVP]** - [ ] Tier\u20112: Go, Rust, Ruby, PHP **[STRETCH]** - [x] Framework\u2011aware quickstart commands per build system **[MVP]** ## 13) Quality Gates & Evaluation - [ ] Command validation (existence checks) **[MVP]** - [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_checklist.md#2",
      "vector": {
        "no": 0.07018624063435965,
        "hallucination": 0.07018624063435965,
        "checks": 0.07018624063435965,
        "reject": 0.07018624063435965,
        "facts": 0.07018624063435965,
        "not": 0.07018624063435965,
        "in": 0.07018624063435965,
        "signals": 0.07018624063435965,
        "rag": 0.1403724812687193,
        "mvp": 0.42111744380615784,
        "x": 0.49130368444051753,
        "readme": 0.1403724812687193,
        "scorecard": 0.07018624063435965,
        "coverage": 0.07018624063435965,
        "buildability": 0.07018624063435965,
        "link": 0.07018624063435965,
        "validity": 0.07018624063435965,
        "diff": 0.07018624063435965,
        "alignment": 0.07018624063435965,
        "lint": 0.1403724812687193,
        "next": 0.21055872190307892,
        "14": 0.07018624063435965,
        "performance": 0.07018624063435965,
        "caching": 0.07018624063435965,
        "persist": 0.07018624063435965,
        "analyzer": 0.1403724812687193,
        "outputs": 0.07018624063435965,
        "embeddings": 0.07018624063435965,
        "under": 0.07018624063435965,
        "docgen": 0.07018624063435965,
        "incremental": 0.07018624063435965,
        "refresh": 0.07018624063435965,
        "changed": 0.07018624063435965,
        "files": 0.07018624063435965,
        "only": 0.07018624063435965,
        "15": 0.07018624063435965,
        "error": 0.07018624063435965,
        "handling": 0.07018624063435965,
        "ux": 0.07018624063435965,
        "fail": 0.07018624063435965,
        "safe": 0.07018624063435965,
        "stub": 0.07018624063435965,
        "generation": 0.07018624063435965,
        "when": 0.07018624063435965,
        "evidence": 0.07018624063435965,
        "is": 0.07018624063435965,
        "insufficient": 0.07018624063435965,
        "clear": 0.07018624063435965,
        "run": 0.07018624063435965,
        "logs": 0.07018624063435965,
        "pr": 0.07018624063435965,
        "body": 0.07018624063435965,
        "with": 0.07018624063435965,
        "rationale": 0.07018624063435965,
        "sections": 0.07018624063435965,
        "updated": 0.07018624063435965,
        "because": 0.07018624063435965,
        "helpful": 0.07018624063435965,
        "cli": 0.07018624063435965,
        "errors": 0.07018624063435965,
        "and": 0.1403724812687193,
        "verbose": 0.07018624063435965,
        "flag": 0.07018624063435965,
        "works": 0.07018624063435965,
        "pre": 0.07018624063435965,
        "post": 0.07018624063435965,
        "subcommand": 0.07018624063435965,
        "16": 0.07018624063435965,
        "extensibility": 0.07018624063435965,
        "abc": 0.07018624063435965,
        "plugin": 0.07018624063435965,
        "discovery": 0.07018624063435965,
        "template": 0.07018624063435965,
        "packs": 0.07018624063435965,
        "org": 0.07018624063435965,
        "style": 0.1403724812687193,
        "definition": 0.07018624063435965,
        "of": 0.07018624063435965,
        "done": 0.07018624063435965,
        "per": 0.07018624063435965,
        "section": 0.07018624063435965,
        "passing": 0.07018624063435965,
        "unit": 0.07018624063435965,
        "integration": 0.07018624063435965,
        "tests": 0.07018624063435965,
        "for": 0.07018624063435965,
        "core": 0.07018624063435965,
        "logic": 0.07018624063435965,
        "golden": 0.07018624063435965,
        "regression": 0.07018624063435965,
        "test": 0.07018624063435965,
        "s": 0.07018624063435965,
        "meets": 0.07018624063435965,
        "requirements": 0.07018624063435965
      },
      "text": "- [ ] No\u2011hallucination checks: reject facts not in signals/RAG **[MVP]** - [x] README scorecard (coverage, buildability, link validity, diff alignment, lint) **[NEXT]** ## 14) Performance & Caching - [x] Persist analyzer outputs & embeddings under `.docgen/` **[MVP]** - [x] Incremental RAG refresh (changed files only) **[NEXT]** ## 15) Error Handling & UX - [x] Fail-safe stub generation when evidence is insufficient **[MVP]** - [ ] Clear run logs + PR body with rationale (\u201csections updated because\u2026\u201d) **[MVP]** - [x] Helpful CLI errors and `--verbose` flag (works pre/post subcommand) **[MVP]** ## 16) Extensibility - [x] Analyzer ABC and plugin discovery **[MVP]** - [x] Template packs (org\u2011style) **[NEXT]** --- ### Definition of Done (per section) - [ ] Passing unit & integration tests for core logic - [ ] Golden README regression test(s) - [ ] Meets lint/style requirements",
      "metadata": {
        "path": "spec/feature_checklist.md",
        "tags": [
          "docs"
        ],
        "hash": "eafdf3b4561650db7180491a1066b01d20e0e9e8a175242468283d86c1d7e234"
      }
    },
    {
      "id": "spec/feature_order.md#0",
      "vector": {
        "docgen": 0.23979625973207228,
        "development": 0.029974532466509034,
        "roadmap": 0.029974532466509034,
        "phase": 0.20982172726556325,
        "0": 0.029974532466509034,
        "bootstrap": 0.029974532466509034,
        "the": 0.029974532466509034,
        "skeleton": 0.05994906493301807,
        "1": 0.3596943895981084,
        "project": 0.029974532466509034,
        "cli": 0.05994906493301807,
        "config": 0.11989812986603614,
        "loader": 0.029974532466509034,
        "yml": 0.029974532466509034,
        "models": 0.029974532466509034,
        "covers": 0.47959251946414455,
        "commands": 0.029974532466509034,
        "scaffolding": 0.029974532466509034,
        "9": 0.05994906493301807,
        "parse": 0.029974532466509034,
        "16": 0.05994906493301807,
        "analyzer": 0.05994906493301807,
        "abc": 0.05994906493301807,
        "2": 0.23979625973207228,
        "plugin": 0.05994906493301807,
        "discovery": 0.05994906493301807,
        "init": 0.11989812986603614,
        "happy": 0.029974532466509034,
        "path": 0.05994906493301807,
        "single": 0.029974532466509034,
        "repo": 0.11989812986603614,
        "local": 0.11989812986603614,
        "scanner": 0.029974532466509034,
        "manifest": 0.05994906493301807,
        "roles": 0.029974532466509034,
        "hashing": 0.029974532466509034,
        "ignores": 0.05994906493301807,
        "walk": 0.029974532466509034,
        "fs": 0.029974532466509034,
        "cache": 0.029974532466509034,
        "tier": 0.029974532466509034,
        "analyzers": 0.0899235973995271,
        "python": 0.029974532466509034,
        "java": 0.029974532466509034,
        "node": 0.029974532466509034,
        "build": 0.05994906493301807,
        "dependency": 0.029974532466509034,
        "3": 0.0899235973995271,
        "language": 0.05994906493301807,
        "deps": 0.029974532466509034,
        "templates": 0.05994906493301807,
        "prompt": 0.05994906493301807,
        "builder": 0.029974532466509034,
        "section": 0.14987266233254518,
        "by": 0.029974532466509034,
        "guardrailed": 0.029974532466509034,
        "system": 0.029974532466509034,
        "5": 0.11989812986603614,
        "jinja2": 0.029974532466509034,
        "guardrails": 0.029974532466509034,
        "token": 0.029974532466509034,
        "budget": 0.029974532466509034,
        "4": 0.0899235973995271,
        "llm": 0.029974532466509034,
        "runner": 0.029974532466509034,
        "ollama": 0.05994906493301807,
        "adapter": 0.029974532466509034,
        "6": 0.0899235973995271,
        "post": 0.029974532466509034,
        "processor": 0.029974532466509034,
        "managed": 0.029974532466509034,
        "markers": 0.0899235973995271,
        "toc": 0.05994906493301807,
        "markdown": 0.029974532466509034,
        "lint": 0.05994906493301807,
        "7": 0.029974532466509034,
        "git": 0.05994906493301807,
        "publisher": 0.05994906493301807,
        "commit": 0.05994906493301807,
        "mode": 0.05994906493301807,
        "for": 0.05994906493301807,
        "only": 0.0899235973995271,
        "8": 0.0899235973995271,
        "end": 0.05994906493301807,
        "to": 0.029974532466509034,
        "milestone": 0.0899235973995271,
        "generates": 0.029974532466509034,
        "a": 0.0899235973995271,
        "clean": 0.029974532466509034,
        "readme": 0.05994906493301807,
        "with": 0.0899235973995271,
        "no": 0.0899235973995271,
        "docs": 0.05994906493301807,
        "update": 0.11989812986603614,
        "on": 0.029974532466509034,
        "change": 0.05994906493301807,
        "pr": 0.14987266233254518,
        "workflow": 0.029974532466509034,
        "diff": 0.05994906493301807,
        "detection": 0.05994906493301807,
        "mapping": 0.05994906493301807,
        "patching": 0.029974532466509034,
        "inside": 0.029974532466509034,
        "prevent": 0.029974532466509034,
        "loops": 0.029974532466509034,
        "branch": 0.05994906493301807,
        "delta": 0.029974532466509034,
        "summary": 0.029974532466509034,
        "10": 0.05994906493301807,
        "labeling": 0.029974532466509034,
        "later": 0.029974532466509034,
        "opens": 0.029974532466509034,
        "updating": 0.029974532466509034,
        "impacted": 0.029974532466509034,
        "sections": 0.029974532466509034,
        "minimal": 0.029974532466509034,
        "rag": 0.05994906493301807,
        "accuracy": 0.029974532466509034,
        "lite": 0.029974532466509034,
        "embed": 0.029974532466509034,
        "top": 0.029974532466509034,
        "n": 0.029974532466509034,
        "source": 0.029974532466509034,
        "headers": 0.029974532466509034,
        "scoped": 0.029974532466509034,
        "retrieval": 0.05994906493301807,
        "embedding": 0.029974532466509034,
        "index": 0.029974532466509034,
        "sources": 0.029974532466509034,
        "per": 0.029974532466509034,
        "hallucination": 0.05994906493301807,
        "command": 0.05994906493301807,
        "existence": 0.029974532466509034,
        "checks": 0.029974532466509034,
        "13": 0.029974532466509034,
        "validation": 0.029974532466509034,
        "outputs": 0.029974532466509034,
        "grounded": 0.029974532466509034,
        "in": 0.029974532466509034,
        "facts": 0.029974532466509034,
        "targeted": 0.029974532466509034,
        "context": 0.029974532466509034,
        "hardening": 0.029974532466509034,
        "dx": 0.029974532466509034,
        "error": 0.029974532466509034,
        "handling": 0.029974532466509034,
        "clear": 0.029974532466509034,
        "logs": 0.05994906493301807,
        "verbose": 0.029974532466509034,
        "fail": 0.05994906493301807,
        "safe": 0.05994906493301807,
        "stubs": 0.029974532466509034,
        "15": 0.029974532466509034,
        "ux": 0.029974532466509034,
        "security": 0.029974532466509034,
        "gitignore": 0.029974532466509034,
        "respect": 0.029974532466509034,
        "excludes": 0.05994906493301807,
        "enforcement": 0.029974532466509034,
        "11": 0.029974532466509034,
        "privacy": 0.029974532466509034,
        "ci": 0.029974532466509034,
        "integration": 0.029974532466509034,
        "polish": 0.029974532466509034,
        "github": 0.029974532466509034,
        "actions": 0.05994906493301807,
        "sample": 0.029974532466509034,
        "push": 0.029974532466509034,
        "trigger": 0.029974532466509034,
        "calling": 0.029974532466509034,
        "gh": 0.029974532466509034,
        "refinements": 0.029974532466509034,
        "watched": 0.029974532466509034,
        "globs": 0.029974532466509034,
        "style": 0.05994906493301807,
        "preset": 0.029974532466509034,
        "concise": 0.029974532466509034,
        "comprehensive": 0.029974532466509034,
        "watched_globs": 0.029974532466509034,
        "presets": 0.029974532466509034,
        "multi": 0.029974532466509034,
        "breadth": 0.029974532466509034,
        "framework": 0.029974532466509034,
        "smarts": 0.029974532466509034,
        "entrypoint": 0.029974532466509034,
        "main": 0.029974532466509034,
        "spring": 0.029974532466509034,
        "boot": 0.029974532466509034,
        "fastapi": 0.029974532466509034
      },
      "text": "# DocGen Development Roadmap ## Phase 0 \u2014 Bootstrap the skeleton 1. **Project skeleton + CLI (`docgen`) + config loader (`.docgen.yml`) + models** * Covers: 1 (commands scaffolding), 9 (parse config), 16 (Analyzer ABC) 2. **Analyzer plugin ABC & discovery** * Covers: 16 (plugin discovery) ## Phase 1 \u2014 \"Init\" happy-path (single repo, local) 1. **Repo scanner & manifest (roles, hashing, ignores)** * Covers: 2 (walk FS, manifest, cache, ignores) 2. **Tier-1 analyzers (Python, Java, Node) + build analyzers + dependency analyzers** * Covers: 3 (language/build/deps) 3. **Templates + prompt builder (section-by-section) + guardrailed system prompt** * Covers: 5 (Jinja2 templates, guardrails, token budget) 4. **Local LLM runner (Ollama adapter)** * Covers: 6 (Ollama) 5. **Post-processor: managed markers, ToC, markdown lint** * Covers: 7 (markers, ToC, lint) 6. **Git publisher: commit mode (for init only)** * Covers: 8 (commit mode), 1 (`docgen init` end-to-end) \u2705 **Milestone**: `docgen init` generates a clean README for a repo with no docs. ## Phase 2 \u2014 Update-on-change (PR workflow) 1. **Diff detection + change\u2192section mapping + patching inside markers** * Covers: 8 (diff mapping, prevent loops), 1 (`docgen update`) 2. **Git publisher: branch + PR with delta summary** * Covers: 8 (branch/PR), 10 (labeling later) \u2705 **Milestone**: `docgen update` opens a PR updating only impacted sections. ## Phase 3 \u2014 Minimal RAG & accuracy 1. **RAG Lite: embed README/docs/top N source headers; section-scoped retrieval** * Covers: 4 (local embedding, index sources, per-section retrieval) 2. **No-hallucination & command existence checks** * Covers: 13 (command validation, no-hallucination) \u2705 **Milestone**: outputs grounded in repo facts with targeted context. ## Phase 4 \u2014 Hardening & DX 1. **Error handling, clear logs, `--verbose`, fail-safe stubs** * Covers: 15 (fail-safe, logs, CLI UX) 2. **Security: .gitignore respect, path excludes, local-only enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI)",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/feature_order.md#1",
      "vector": {
        "enforcement": 0.04252432555625623,
        "covers": 0.4252432555625623,
        "11": 0.04252432555625623,
        "privacy": 0.04252432555625623,
        "excludes": 0.04252432555625623,
        "phase": 0.17009730222502492,
        "5": 0.12757297666876868,
        "ci": 0.12757297666876868,
        "integration": 0.04252432555625623,
        "config": 0.12757297666876868,
        "polish": 0.08504865111251246,
        "1": 0.25514595333753737,
        "github": 0.04252432555625623,
        "actions": 0.08504865111251246,
        "sample": 0.04252432555625623,
        "push": 0.04252432555625623,
        "pr": 0.17009730222502492,
        "trigger": 0.04252432555625623,
        "calling": 0.04252432555625623,
        "docgen": 0.12757297666876868,
        "update": 0.04252432555625623,
        "10": 0.08504865111251246,
        "gh": 0.04252432555625623,
        "2": 0.21262162778128116,
        "refinements": 0.04252432555625623,
        "watched": 0.04252432555625623,
        "globs": 0.04252432555625623,
        "style": 0.08504865111251246,
        "preset": 0.04252432555625623,
        "concise": 0.04252432555625623,
        "comprehensive": 0.04252432555625623,
        "9": 0.04252432555625623,
        "watched_globs": 0.04252432555625623,
        "presets": 0.04252432555625623,
        "6": 0.08504865111251246,
        "multi": 0.04252432555625623,
        "language": 0.08504865111251246,
        "breadth": 0.08504865111251246,
        "framework": 0.17009730222502492,
        "smarts": 0.04252432555625623,
        "entrypoint": 0.04252432555625623,
        "detection": 0.04252432555625623,
        "main": 0.04252432555625623,
        "spring": 0.04252432555625623,
        "boot": 0.04252432555625623,
        "fastapi": 0.08504865111251246,
        "aware": 0.08504865111251246,
        "quick": 0.04252432555625623,
        "start": 0.04252432555625623,
        "entrypoints": 0.04252432555625623,
        "12": 0.04252432555625623,
        "commands": 0.04252432555625623,
        "pattern": 0.08504865111251246,
        "analyzers": 0.08504865111251246,
        "docker": 0.04252432555625623,
        "k8s": 0.04252432555625623,
        "monorepo": 0.04252432555625623,
        "layout": 0.04252432555625623,
        "3": 0.12757297666876868,
        "7": 0.12757297666876868,
        "quality": 0.08504865111251246,
        "gates": 0.08504865111251246,
        "performance": 0.08504865111251246,
        "readme": 0.08504865111251246,
        "scorecard": 0.08504865111251246,
        "link": 0.08504865111251246,
        "validator": 0.08504865111251246,
        "badges": 0.08504865111251246,
        "13": 0.04252432555625623,
        "artifact": 0.04252432555625623,
        "embedding": 0.04252432555625623,
        "caching": 0.08504865111251246,
        "in": 0.04252432555625623,
        "incremental": 0.08504865111251246,
        "rag": 0.12757297666876868,
        "refresh": 0.08504865111251246,
        "14": 0.04252432555625623,
        "persist": 0.04252432555625623,
        "outputs": 0.04252432555625623,
        "8": 0.04252432555625623,
        "nice": 0.04252432555625623,
        "to": 0.12757297666876868,
        "have": 0.04252432555625623,
        "stretch": 0.04252432555625623,
        "dry": 0.08504865111251246,
        "run": 0.08504865111251246,
        "mode": 0.12757297666876868,
        "labeling": 0.08504865111251246,
        "updates": 0.08504865111251246,
        "commit": 0.08504865111251246,
        "policy": 0.04252432555625623,
        "tuning": 0.04252432555625623,
        "template": 0.12757297666876868,
        "overrides": 0.04252432555625623,
        "docs": 0.04252432555625623,
        "templates": 0.04252432555625623,
        "j2": 0.04252432555625623,
        "org": 0.04252432555625623,
        "packs": 0.08504865111251246,
        "override": 0.04252432555625623,
        "16": 0.04252432555625623,
        "service": 0.08504865111251246,
        "llama": 0.08504865111251246,
        "cpp": 0.08504865111251246,
        "adapter": 0.04252432555625623,
        "tree": 0.08504865111251246,
        "sitter": 0.08504865111251246,
        "extraction": 0.04252432555625623,
        "why": 0.04252432555625623,
        "this": 0.04252432555625623,
        "order": 0.04252432555625623,
        "fastest": 0.04252432555625623,
        "path": 0.04252432555625623,
        "value": 0.04252432555625623,
        "get": 0.04252432555625623,
        "init": 0.04252432555625623,
        "producing": 0.04252432555625623,
        "a": 0.04252432555625623,
        "solid": 0.04252432555625623,
        "before": 0.04252432555625623,
        "adding": 0.04252432555625623,
        "diffing": 0.04252432555625623,
        "contain": 0.04252432555625623,
        "risk": 0.04252432555625623,
        "early": 0.04252432555625623,
        "section": 0.04252432555625623,
        "markers": 0.04252432555625623,
        "lint": 0.04252432555625623,
        "and": 0.12757297666876868,
        "publishing": 0.04252432555625623,
        "ensure": 0.04252432555625623,
        "safe": 0.04252432555625623,
        "idempotent": 0.04252432555625623,
        "edits": 0.04252432555625623,
        "accuracy": 0.04252432555625623,
        "next": 0.04252432555625623,
        "add": 0.04252432555625623,
        "validation": 0.04252432555625623,
        "avoid": 0.04252432555625623,
        "hallucinations": 0.04252432555625623,
        "once": 0.04252432555625623,
        "the": 0.08504865111251246,
        "pipeline": 0.04252432555625623,
        "works": 0.04252432555625623,
        "scale": 0.04252432555625623,
        "later": 0.04252432555625623,
        "only": 0.04252432555625623,
        "after": 0.04252432555625623,
        "core": 0.04252432555625623,
        "loop": 0.04252432555625623,
        "is": 0.04252432555625623,
        "robust": 0.04252432555625623,
        "do": 0.04252432555625623,
        "we": 0.04252432555625623,
        "widen": 0.04252432555625623,
        "coverage": 0.04252432555625623,
        "last": 0.04252432555625623,
        "refine": 0.04252432555625623,
        "dev": 0.04252432555625623,
        "experience": 0.04252432555625623
      },
      "text": "enforcement** * Covers: 11 (privacy, excludes) ## Phase 5 \u2014 CI integration & config polish 1. **GitHub Actions sample (push/PR trigger calling `docgen update`)** * Covers: 10 (GH Actions) 2. **Config refinements: watched globs, style preset (concise/comprehensive)** * Covers: 9 (watched_globs), 5 (style presets) ## Phase 6 \u2014 Multi-language breadth & framework smarts 1. **Entrypoint detection (main, Spring Boot, FastAPI) + framework-aware Quick Start** * Covers: 2 (entrypoints), 12 (framework-aware commands) 2. **Pattern analyzers (Docker/K8s, CI config, monorepo layout)** * Covers: 3 (pattern analyzers) ## Phase 7 \u2014 Quality gates & performance 1. **README scorecard + link validator + badges** * Covers: 13 (scorecard), 7 (link validator), 7 (badges) 2. **Artifact & embedding caching in `.docgen/` + incremental RAG refresh** * Covers: 14 (persist outputs, incremental refresh) ## Phase 8 \u2014 \"Nice to have\" & stretch 1. **Dry-run mode, PR labeling/updates, commit/PR policy tuning** * Covers: 1 (dry-run), 10 (labeling/PR updates) 2. **Template overrides (`docs/templates/*.j2`) & org template packs** * Covers: 5 (override), 16 (template packs) 3. **Service mode (FastAPI), llama.cpp adapter, tree-sitter extraction** * Covers: 1 (service mode), 6 (llama.cpp), 3 (tree-sitter) ## Why this order * **Fastest path to value**: get `docgen init` producing a solid README before adding diffing/RAG. * **Contain risk early**: section markers, lint, and commit publishing ensure safe/idempotent edits. * **Accuracy next**: add RAG + validation to avoid hallucinations once the pipeline works. * **Scale breadth later**: only after the core loop is robust do we widen language/framework coverage. * **Polish last**: CI, caching, and quality gates refine dev experience and performance.",
      "metadata": {
        "path": "spec/feature_order.md",
        "tags": [
          "docs"
        ],
        "hash": "3543629e0718489a71e908cb3e1201d42e4979f9e834c55e54d2acac6b9e71a0"
      }
    },
    {
      "id": "spec/spec.md#0",
      "vector": {
        "intelligent": 0.04393747751637468,
        "readme": 0.17574991006549873,
        "generator": 0.04393747751637468,
        "architecture": 0.08787495503274936,
        "spec": 0.04393747751637468,
        "python": 0.08787495503274936,
        "local": 0.13181243254912403,
        "llm": 0.13181243254912403,
        "1": 0.08787495503274936,
        "purpose": 0.04393747751637468,
        "scope": 0.04393747751637468,
        "build": 0.17574991006549873,
        "a": 0.26362486509824806,
        "based": 0.04393747751637468,
        "system": 0.04393747751637468,
        "that": 0.04393747751637468,
        "analyzes": 0.04393747751637468,
        "git": 0.26362486509824806,
        "repository": 0.04393747751637468,
        "structure": 0.04393747751637468,
        "code": 0.04393747751637468,
        "dependencies": 0.04393747751637468,
        "then": 0.04393747751637468,
        "generates": 0.04393747751637468,
        "and": 0.2196873875818734,
        "maintains": 0.04393747751637468,
        "high": 0.08787495503274936,
        "quality": 0.04393747751637468,
        "md": 0.04393747751637468,
        "using": 0.04393747751637468,
        "it": 0.04393747751637468,
        "initializes": 0.04393747751637468,
        "repos": 0.04393747751637468,
        "with": 0.08787495503274936,
        "no": 0.04393747751637468,
        "docs": 0.17574991006549873,
        "keeps": 0.04393747751637468,
        "up": 0.04393747751637468,
        "to": 0.2196873875818734,
        "date": 0.04393747751637468,
        "on": 0.04393747751637468,
        "commits": 0.04393747751637468,
        "prs": 0.04393747751637468,
        "supports": 0.08787495503274936,
        "multiple": 0.04393747751637468,
        "languages": 0.04393747751637468,
        "project": 0.04393747751637468,
        "types": 0.04393747751637468,
        "via": 0.04393747751637468,
        "analyzers": 0.08787495503274936,
        "non": 0.04393747751637468,
        "goals": 0.04393747751637468,
        "for": 0.08787495503274936,
        "the": 0.04393747751637468,
        "poc": 0.04393747751637468,
        "multi": 0.04393747751637468,
        "repo": 0.2196873875818734,
        "orchestration": 0.04393747751637468,
        "full": 0.08787495503274936,
        "website": 0.04393747751637468,
        "api": 0.04393747751637468,
        "reference": 0.04393747751637468,
        "extraction": 0.04393747751637468,
        "beyond": 0.04393747751637468,
        "summaries": 0.04393747751637468,
        "cloud": 0.04393747751637468,
        "llms": 0.04393747751637468,
        "2": 0.08787495503274936,
        "level": 0.04393747751637468,
        "at": 0.04393747751637468,
        "glance": 0.04393747751637468,
        "events": 0.04393747751637468,
        "event": 0.04393747751637468,
        "sources": 0.04393747751637468,
        "cli": 0.04393747751637468,
        "commands": 0.04393747751637468,
        "hooks": 0.04393747751637468,
        "webhooks": 0.04393747751637468,
        "ci": 0.08787495503274936,
        "commit": 0.08787495503274936,
        "pr": 0.08787495503274936,
        "orchestr": 0.04393747751637468,
        "async": 0.04393747751637468,
        "task": 0.04393747751637468,
        "graph": 0.08787495503274936,
        "scanner": 0.08787495503274936,
        "doc": 0.04393747751637468,
        "store": 0.04393747751637468,
        "indexer": 0.08787495503274936,
        "language": 0.08787495503274936,
        "artifacts": 0.08787495503274936,
        "fs": 0.04393747751637468,
        "deps": 0.04393747751637468,
        "cache": 0.04393747751637468,
        "versions": 0.04393747751637468,
        "knowledge": 0.04393747751637468,
        "embeddings": 0.04393747751637468,
        "prompt": 0.04393747751637468,
        "builder": 0.04393747751637468,
        "templates": 0.04393747751637468,
        "rag": 0.04393747751637468,
        "runner": 0.04393747751637468,
        "llama": 0.04393747751637468,
        "cpp": 0.04393747751637468,
        "ollama": 0.04393747751637468,
        "post": 0.04393747751637468,
        "processor": 0.04393747751637468,
        "lint": 0.04393747751637468,
        "toc": 0.04393747751637468,
        "badges": 0.04393747751637468,
        "links": 0.04393747751637468,
        "publisher": 0.04393747751637468,
        "branch": 0.04393747751637468,
        "3": 0.13181243254912403,
        "components": 0.04393747751637468,
        "responsibilities": 0.04393747751637468,
        "orchestrator": 0.04393747751637468,
        "coordinates": 0.04393747751637468,
        "end": 0.08787495503274936,
        "pipelines": 0.04393747751637468,
        "init": 0.04393747751637468,
        "update": 0.08787495503274936,
        "regenerate": 0.08787495503274936,
        "computes": 0.04393747751637468,
        "change": 0.04393747751637468,
        "impact": 0.04393747751637468,
        "from": 0.04393747751637468,
        "diff": 0.04393747751637468,
        "decides": 0.04393747751637468,
        "whether": 0.04393747751637468,
        "or": 0.04393747751637468,
        "patch": 0.04393747751637468,
        "sections": 0.04393747751637468,
        "schedules": 0.04393747751637468,
        "tasks": 0.04393747751637468,
        "caches": 0.04393747751637468,
        "intermediate": 0.04393747751637468,
        "results": 0.04393747751637468,
        "emits": 0.04393747751637468,
        "structured": 0.04393747751637468,
        "logs": 0.04393747751637468,
        "info": 0.04393747751637468,
        "by": 0.04393747751637468,
        "default": 0.04393747751637468,
        "debug": 0.04393747751637468,
        "verbose": 0.04393747751637468,
        "respects": 0.04393747751637468,
        "docgen": 0.13181243254912403,
        "yml": 0.04393747751637468,
        "watched_globs": 0.04393747751637468,
        "skip": 0.04393747751637468,
        "unrelated": 0.04393747751637468,
        "diffs": 0.04393747751637468,
        "substitutes": 0.04393747751637468,
        "fail": 0.04393747751637468,
        "safe": 0.04393747751637468,
        "stubs": 0.04393747751637468,
        "when": 0.04393747751637468,
        "generation": 0.04393747751637468,
        "fails": 0.04393747751637468,
        "dry": 0.08787495503274936,
        "run": 0.13181243254912403,
        "previews": 0.04393747751637468,
        "records": 0.04393747751637468,
        "scorecards": 0.04393747751637468,
        "each": 0.04393747751637468,
        "under": 0.04393747751637468,
        "walks": 0.04393747751637468,
        "builds": 0.04393747751637468,
        "normalized": 0.04393747751637468,
        "manifest": 0.04393747751637468,
        "files": 0.08787495503274936,
        "sizes": 0.04393747751637468,
        "tags": 0.04393747751637468,
        "path": 0.04393747751637468,
        "roles": 0.04393747751637468,
        "src": 0.04393747751637468,
        "test": 0.08787495503274936,
        "examples": 0.04393747751637468,
        "dependency": 0.04393747751637468,
        "manifests": 0.04393747751637468,
        "e": 0.04393747751637468,
        "g": 0.04393747751637468,
        "pom": 0.04393747751637468,
        "xml": 0.04393747751637468,
        "gradle": 0.04393747751637468,
        "package": 0.04393747751637468,
        "json": 0.13181243254912403,
        "requirements": 0.04393747751637468,
        "txt": 0.04393747751637468,
        "pyproject": 0.04393747751637468,
        "toml": 0.08787495503274936,
        "go": 0.04393747751637468,
        "mod": 0.04393747751637468,
        "cargo": 0.04393747751637468,
        "gemfile": 0.04393747751637468,
        "composer": 0.04393747751637468,
        "entrypoints": 0.04393747751637468,
        "clis": 0.04393747751637468,
        "services": 0.04393747751637468,
        "coverage": 0.04393747751637468,
        "if": 0.04393747751637468,
        "available": 0.04393747751637468,
        "stores": 0.04393747751637468,
        "per": 0.04393747751637468,
        "index": 0.04393747751637468,
        "speed": 0.04393747751637468,
        "future": 0.04393747751637468
      },
      "text": "# Intelligent README Generator \u2014 Architecture & Spec (Python, Local LLM) ## 1) Purpose & Scope Build a Python-based system that **analyzes a Git repository** (structure, code, dependencies), then **generates and maintains a high-quality README.md** using a **local LLM**. It initializes repos with no docs and **keeps docs up to date** on commits/PRs. Supports **multiple languages/project types** via analyzers. Non-goals (for the POC): multi-repo orchestration, full website docs, API reference extraction (beyond README summaries), cloud LLMs. --- ## 2) High-Level Architecture (at a glance) ``` \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 Git Events \u2502 Event Sources \u2502 CLI commands, Git hooks, Webhooks/CI (commit/PR) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Orchestr \u2502 (Async task graph) \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Repo Scanner\u2502 \u2502 Analyzers \u2502 \u2502 Doc Store \u2502 \u2502 + Indexer \u2502 \u2502 (Language, \u2502 \u2502 (Artifacts, \u2502 \u2502 (Git, FS) \u2502 \u2502 Build, Deps) \u2502 \u2502 Cache, \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 Versions) \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 \u2502 Knowledge Graph \u2502 \u2502 \u2502 \u2502 & Embeddings \u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Prompt Builder \u2502 (Templates + RAG) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 \u2502 Local LLM Runner \u2502 (llama.cpp/Ollama) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 Post-Processor \u2502 (lint, ToC, badges, links) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 Git Publisher \u2502 (branch/PR/commit) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 ``` --- ## 3) Components & Responsibilities ### 3.1 Orchestrator * Coordinates end-to-end pipelines (init, update, regenerate). * Computes *change impact* from Git diff; decides whether to regenerate full README or patch sections. * Schedules tasks and caches intermediate results. * Emits structured logs (info by default, debug with `--verbose`), respects `.docgen.yml` `ci.watched_globs` to skip unrelated diffs, and substitutes fail-safe stubs when generation fails. * Supports dry-run previews (`docgen update --dry-run`) and records scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#1",
      "vector": {
        "scorecards": 0.03721614637823934,
        "for": 0.18608073189119673,
        "each": 0.07443229275647868,
        "run": 0.07443229275647868,
        "under": 0.07443229275647868,
        "docgen": 0.11164843913471803,
        "3": 0.22329687826943606,
        "2": 0.03721614637823934,
        "repo": 0.18608073189119673,
        "scanner": 0.03721614637823934,
        "indexer": 0.03721614637823934,
        "walks": 0.03721614637823934,
        "builds": 0.03721614637823934,
        "normalized": 0.03721614637823934,
        "manifest": 0.03721614637823934,
        "files": 0.11164843913471803,
        "sizes": 0.03721614637823934,
        "language": 0.07443229275647868,
        "tags": 0.03721614637823934,
        "path": 0.03721614637823934,
        "roles": 0.03721614637823934,
        "src": 0.03721614637823934,
        "test": 0.11164843913471803,
        "docs": 0.11164843913471803,
        "examples": 0.03721614637823934,
        "build": 0.14886458551295736,
        "dependency": 0.07443229275647868,
        "manifests": 0.03721614637823934,
        "e": 0.11164843913471803,
        "g": 0.11164843913471803,
        "pom": 0.03721614637823934,
        "xml": 0.03721614637823934,
        "gradle": 0.07443229275647868,
        "package": 0.03721614637823934,
        "json": 0.11164843913471803,
        "requirements": 0.03721614637823934,
        "txt": 0.03721614637823934,
        "pyproject": 0.03721614637823934,
        "toml": 0.07443229275647868,
        "go": 0.11164843913471803,
        "mod": 0.03721614637823934,
        "cargo": 0.07443229275647868,
        "gemfile": 0.03721614637823934,
        "composer": 0.03721614637823934,
        "entrypoints": 0.11164843913471803,
        "clis": 0.03721614637823934,
        "services": 0.11164843913471803,
        "coverage": 0.03721614637823934,
        "artifacts": 0.03721614637823934,
        "if": 0.03721614637823934,
        "available": 0.03721614637823934,
        "stores": 0.03721614637823934,
        "a": 0.03721614637823934,
        "per": 0.07443229275647868,
        "index": 0.03721614637823934,
        "to": 0.11164843913471803,
        "speed": 0.03721614637823934,
        "future": 0.03721614637823934,
        "runs": 0.03721614637823934,
        "analyzers": 0.22329687826943606,
        "plugin": 0.03721614637823934,
        "based": 0.03721614637823934,
        "detect": 0.03721614637823934,
        "idioms": 0.03721614637823934,
        "frameworks": 0.03721614637823934,
        "spring": 0.07443229275647868,
        "boot": 0.07443229275647868,
        "fastapi": 0.07443229275647868,
        "node": 0.07443229275647868,
        "express": 0.03721614637823934,
        "react": 0.03721614637823934,
        "next": 0.03721614637823934,
        "js": 0.03721614637823934,
        "http": 0.14886458551295736,
        "rust": 0.03721614637823934,
        "bin": 0.03721614637823934,
        "lib": 0.03721614637823934,
        "maven": 0.03721614637823934,
        "setuptools": 0.03721614637823934,
        "poetry": 0.03721614637823934,
        "npm": 0.03721614637823934,
        "pnpm": 0.03721614637823934,
        "yarn": 0.03721614637823934,
        "extract": 0.03721614637823934,
        "top": 0.07443229275647868,
        "level": 0.03721614637823934,
        "libs": 0.03721614637823934,
        "notable": 0.03721614637823934,
        "transitive": 0.03721614637823934,
        "categories": 0.03721614637823934,
        "entrypoint": 0.03721614637823934,
        "infer": 0.03721614637823934,
        "commands": 0.03721614637823934,
        "django": 0.03721614637823934,
        "scripts": 0.07443229275647868,
        "pattern": 0.03721614637823934,
        "monorepo": 0.03721614637823934,
        "layout": 0.03721614637823934,
        "ci": 0.03721614637823934,
        "cd": 0.03721614637823934,
        "containerization": 0.03721614637823934,
        "k8s": 0.03721614637823934,
        "heuristics": 0.03721614637823934,
        "structure": 0.03721614637823934,
        "analyzer": 0.07443229275647868,
        "module": 0.03721614637823934,
        "topology": 0.03721614637823934,
        "detected": 0.11164843913471803,
        "entities": 0.07443229275647868,
        "dtos": 0.03721614637823934,
        "api": 0.11164843913471803,
        "endpoint": 0.07443229275647868,
        "sequences": 0.03721614637823934,
        "service": 0.03721614637823934,
        "interactions": 0.03721614637823934,
        "returns": 0.03721614637823934,
        "signals": 0.07443229275647868,
        "key": 0.07443229275647868,
        "facts": 0.03721614637823934,
        "the": 0.11164843913471803,
        "knowledge": 0.07443229275647868,
        "graph": 0.11164843913471803,
        "4": 0.03721614637823934,
        "embeddings": 0.07443229275647868,
        "rag": 0.03721614637823934,
        "of": 0.07443229275647868,
        "modules": 0.03721614637823934,
        "packages": 0.03721614637823934,
        "configs": 0.03721614637823934,
        "tests": 0.03721614637823934,
        "lightweight": 0.03721614637823934,
        "embedding": 0.03721614637823934,
        "store": 0.03721614637823934,
        "faiss": 0.03721614637823934,
        "in": 0.03721614637823934,
        "memory": 0.03721614637823934,
        "chunks": 0.03721614637823934,
        "code": 0.03721614637823934,
        "comments": 0.03721614637823934,
        "readme": 0.07443229275647868,
        "fragments": 0.03721614637823934,
        "changelog": 0.03721614637823934,
        "issues": 0.03721614637823934,
        "optional": 0.03721614637823934,
        "commit": 0.03721614637823934,
        "messages": 0.07443229275647868,
        "provides": 0.03721614637823934,
        "context": 0.07443229275647868,
        "retrieval": 0.03721614637823934,
        "prompt": 0.07443229275647868,
        "building": 0.03721614637823934,
        "k": 0.03721614637823934,
        "by": 0.03721614637823934,
        "section": 0.11164843913471803,
        "and": 0.2605130246476754,
        "persists": 0.03721614637823934,
        "refreshing": 0.03721614637823934,
        "only": 0.03721614637823934,
        "whose": 0.03721614637823934,
        "hashes": 0.03721614637823934,
        "changed": 0.03721614637823934,
        "5": 0.03721614637823934,
        "builder": 0.03721614637823934,
        "aware": 0.03721614637823934,
        "jinja2": 0.03721614637823934,
        "templates": 0.03721614637823934,
        "with": 0.11164843913471803,
        "guardrails": 0.03721614637823934,
        "project": 0.03721614637823934,
        "intro": 0.03721614637823934,
        "features": 0.03721614637823934,
        "architecture": 0.03721614637823934,
        "overview": 0.03721614637823934,
        "quick": 0.07443229275647868,
        "start": 0.07443229275647868,
        "configuration": 0.03721614637823934,
        "deployment": 0.03721614637823934,
        "troubleshooting": 0.03721614637823934,
        "faq": 0.03721614637823934,
        "roadmap": 0.03721614637823934,
        "contribution": 0.03721614637823934,
        "license": 0.03721614637823934,
        "badges": 0.03721614637823934,
        "dynamically": 0.03721614637823934,
        "injects": 0.07443229275647868,
        "retrieved": 0.03721614637823934,
        "produces": 0.03721614637823934,
        "llm": 0.07443229275647868,
        "ready": 0.03721614637823934,
        "structured": 0.07443229275647868,
        "prompts": 0.03721614637823934,
        "system": 0.03721614637823934,
        "user": 0.03721614637823934,
        "token": 0.03721614637823934,
        "budgets": 0.03721614637823934,
        "honours": 0.03721614637823934,
        "style": 0.07443229275647868,
        "presets": 0.03721614637823934,
        "concise": 0.03721614637823934,
        "trims": 0.03721614637823934,
        "list": 0.03721614637823934,
        "heavy": 0.03721614637823934,
        "sections": 0.03721614637823934,
        "comprehensive": 0.03721614637823934,
        "keeps": 0.03721614637823934,
        "full": 0.03721614637823934,
        "detail": 0.03721614637823934,
        "infrastructure": 0.03721614637823934,
        "patterns": 0.03721614637823934,
        "into": 0.03721614637823934,
        "guidance": 0.03721614637823934,
        "uvicorn": 0.03721614637823934,
        "docker": 0.11164843913471803,
        "compose": 0.03721614637823934,
        "up": 0.03721614637823934,
        "generates": 0.03721614637823934,
        "mermaid": 0.03721614637823934,
        "sequence": 0.03721614637823934,
        "diagrams": 0.03721614637823934,
        "highlighting": 0.03721614637823934,
        "request": 0.03721614637823934,
        "flow": 0.03721614637823934,
        "across": 0.03721614637823934,
        "when": 0.03721614637823934,
        "endpoints": 0.03721614637823934,
        "are": 0.03721614637823934,
        "6": 0.03721614637823934,
        "local": 0.03721614637823934,
        "runner": 0.11164843913471803,
        "pluggable": 0.03721614637823934,
        "runtime": 0.03721614637823934,
        "that": 0.03721614637823934,
        "prefers": 0.03721614637823934,
        "model": 0.07443229275647868,
        "host": 0.03721614637823934,
        "localhost": 0.03721614637823934,
        "12434": 0.03721614637823934,
        "engines": 0.07443229275647868,
        "v1": 0.07443229275647868,
        "container": 0.03721614637823934,
        "internal": 0.03721614637823934,
        "environment": 0.03721614637823934,
        "overrides": 0.03721614637823934,
        "an": 0.03721614637823934,
        "ollama": 0.03721614637823934,
        "cli": 0.03721614637823934,
        "fallback": 0.03721614637823934,
        "defaults": 0.03721614637823934,
        "ai": 0.03721614637823934,
        "smollm2": 0.03721614637823934,
        "360m": 0.03721614637823934,
        "q4_k_m": 0.03721614637823934,
        "but": 0.03721614637823934,
        "respects": 0.03721614637823934,
        "yml": 0.03721614637823934,
        "openai": 0.03721614637823934,
        "compatible": 0.03721614637823934,
        "env": 0.03721614637823934,
        "vars": 0.03721614637823934,
        "alternate": 0.03721614637823934,
        "weights": 0.03721614637823934,
        "keys": 0.03721614637823934,
        "supports": 0.03721614637823934,
        "function": 0.03721614637823934,
        "calling": 0.03721614637823934,
        "outputs": 0.03721614637823934
      },
      "text": "scorecards for each run under `.docgen/`. ### 3.2 Repo Scanner & Indexer * Walks repo; builds normalized manifest: * Files, sizes, language tags, path roles (src/test/docs/examples). * Build files & dependency manifests (e.g., `pom.xml`, `build.gradle`, `package.json`, `requirements.txt`, `pyproject.toml`, `go.mod`, `Cargo.toml`, `Gemfile`, `composer.json`). * Entrypoints (CLIs, services), test coverage artifacts if available. * Stores a per-repo index (JSON) to speed future runs. ### 3.3 Analyzers (Plugin-based) * **Language analyzers** (detect idioms, entrypoints, frameworks: Spring Boot, FastAPI, Node/Express, React, Next.js, Go HTTP, Rust bin/lib). * **Build analyzers** (Maven/Gradle, setuptools/Poetry, npm/pnpm/yarn, Go, Cargo). * **Dependency analyzers** (extract top-level libs & notable transitive categories). * **Entrypoint analyzers** (infer run commands for FastAPI, Django, Spring Boot, Node scripts). * **Pattern analyzers** (monorepo layout, CI/CD, containerization/K8s heuristics). * **Structure analyzer** (module topology, detected entities/DTOs, API endpoint sequences, service interactions). * Each analyzer returns **Signals** (key facts) to the knowledge graph. ### 3.4 Knowledge Graph & Embeddings (RAG) * Graph of Repo entities: modules, packages, services, scripts, configs, tests, docs. * Lightweight embedding store (e.g., `faiss`/in-memory) of **chunks**: code comments, README fragments, `docs/`, `CHANGELOG`, issues (optional), commit messages. * Provides **context retrieval** for prompt building (top-k by section) and persists embeddings under `.docgen/`, refreshing only the files whose hashes changed. ### 3.5 Prompt Builder * **Section-aware** Jinja2 templates with **guardrails**: * Project intro, key features, architecture overview, quick start, configuration, build/test, deployment, troubleshooting, FAQ, roadmap, contribution, license, badges. * Dynamically injects repo signals and retrieved context per section. * Produces **LLM-ready structured prompts** (system + user messages) with token budgets and honours `readme.style` presets (`concise` trims list-heavy sections, `comprehensive` keeps full detail). * Injects detected entrypoints and infrastructure patterns into Quick Start guidance (e.g., `uvicorn ...`, `docker compose up`). * Generates Mermaid sequence diagrams highlighting request flow across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#2",
      "vector": {
        "across": 0.028060676663315687,
        "services": 0.028060676663315687,
        "when": 0.08418202998994706,
        "api": 0.056121353326631374,
        "endpoints": 0.028060676663315687,
        "are": 0.056121353326631374,
        "detected": 0.056121353326631374,
        "3": 0.11224270665326275,
        "6": 0.028060676663315687,
        "local": 0.056121353326631374,
        "llm": 0.028060676663315687,
        "runner": 0.08418202998994706,
        "pluggable": 0.028060676663315687,
        "runtime": 0.028060676663315687,
        "that": 0.028060676663315687,
        "prefers": 0.028060676663315687,
        "the": 0.028060676663315687,
        "docker": 0.056121353326631374,
        "model": 0.08418202998994706,
        "http": 0.08418202998994706,
        "endpoint": 0.028060676663315687,
        "host": 0.028060676663315687,
        "localhost": 0.028060676663315687,
        "12434": 0.028060676663315687,
        "engines": 0.056121353326631374,
        "v1": 0.056121353326631374,
        "container": 0.028060676663315687,
        "internal": 0.08418202998994706,
        "with": 0.08418202998994706,
        "environment": 0.028060676663315687,
        "overrides": 0.028060676663315687,
        "and": 0.36478879662310393,
        "an": 0.028060676663315687,
        "ollama": 0.028060676663315687,
        "cli": 0.056121353326631374,
        "fallback": 0.028060676663315687,
        "defaults": 0.056121353326631374,
        "to": 0.08418202998994706,
        "ai": 0.028060676663315687,
        "smollm2": 0.028060676663315687,
        "360m": 0.028060676663315687,
        "q4_k_m": 0.028060676663315687,
        "but": 0.028060676663315687,
        "respects": 0.028060676663315687,
        "docgen": 0.11224270665326275,
        "yml": 0.028060676663315687,
        "openai": 0.028060676663315687,
        "compatible": 0.028060676663315687,
        "env": 0.028060676663315687,
        "vars": 0.028060676663315687,
        "for": 0.08418202998994706,
        "alternate": 0.028060676663315687,
        "weights": 0.028060676663315687,
        "keys": 0.028060676663315687,
        "supports": 0.056121353326631374,
        "function": 0.028060676663315687,
        "calling": 0.028060676663315687,
        "style": 0.056121353326631374,
        "structured": 0.028060676663315687,
        "outputs": 0.056121353326631374,
        "available": 0.028060676663315687,
        "streaming": 0.028060676663315687,
        "decode": 0.028060676663315687,
        "stop": 0.028060676663315687,
        "tokens": 0.028060676663315687,
        "section": 0.056121353326631374,
        "by": 0.056121353326631374,
        "generation": 0.028060676663315687,
        "stay": 0.056121353326631374,
        "within": 0.028060676663315687,
        "context": 0.028060676663315687,
        "limits": 0.028060676663315687,
        "validates": 0.056121353326631374,
        "configuration": 0.028060676663315687,
        "ensure": 0.028060676663315687,
        "runners": 0.028060676663315687,
        "loopback": 0.028060676663315687,
        "hosts": 0.028060676663315687,
        "only": 0.056121353326631374,
        "7": 0.028060676663315687,
        "post": 0.056121353326631374,
        "processor": 0.028060676663315687,
        "lints": 0.028060676663315687,
        "markdown": 0.028060676663315687,
        "builds": 0.028060676663315687,
        "toc": 0.028060676663315687,
        "adds": 0.056121353326631374,
        "shields": 0.028060676663315687,
        "badges": 0.056121353326631374,
        "normalizes": 0.028060676663315687,
        "heading": 0.028060676663315687,
        "hierarchy": 0.028060676663315687,
        "enforces": 0.028060676663315687,
        "guide": 0.028060676663315687,
        "readme": 0.08418202998994706,
        "contract": 0.028060676663315687,
        "required": 0.056121353326631374,
        "sections": 0.11224270665326275,
        "links": 0.028060676663315687,
        "relative": 0.028060676663315687,
        "absolute": 0.028060676663315687,
        "code": 0.028060676663315687,
        "block": 0.028060676663315687,
        "languages": 0.028060676663315687,
        "line": 0.028060676663315687,
        "length": 0.028060676663315687,
        "computes": 0.028060676663315687,
        "diff": 0.028060676663315687,
        "aware": 0.028060676663315687,
        "updates": 0.056121353326631374,
        "modifies": 0.028060676663315687,
        "impacted": 0.028060676663315687,
        "changes": 0.056121353326631374,
        "persists": 0.028060676663315687,
        "a": 0.08418202998994706,
        "scorecard": 0.056121353326631374,
        "json": 0.056121353326631374,
        "capturing": 0.028060676663315687,
        "coverage": 0.056121353326631374,
        "quick": 0.028060676663315687,
        "start": 0.028060676663315687,
        "health": 0.028060676663315687,
        "link": 0.056121353326631374,
        "results": 0.028060676663315687,
        "build": 0.056121353326631374,
        "license": 0.028060676663315687,
        "safe": 0.028060676663315687,
        "reports": 0.028060676663315687,
        "warnings": 0.028060676663315687,
        "during": 0.028060676663315687,
        "processing": 0.028060676663315687,
        "8": 0.028060676663315687,
        "doc": 0.028060676663315687,
        "store": 0.028060676663315687,
        "artifacts": 0.028060676663315687,
        "versions": 0.028060676663315687,
        "keeps": 0.028060676663315687,
        "generated": 0.028060676663315687,
        "drafts": 0.028060676663315687,
        "logs": 0.028060676663315687,
        "prompts": 0.028060676663315687,
        "inputs": 0.028060676663315687,
        "diffs": 0.028060676663315687,
        "under": 0.028060676663315687,
        "per": 0.028060676663315687,
        "repo": 0.028060676663315687,
        "rollback": 0.028060676663315687,
        "regression": 0.028060676663315687,
        "testing": 0.028060676663315687,
        "via": 0.028060676663315687,
        "golden": 0.028060676663315687,
        "readmes": 0.028060676663315687,
        "stores": 0.028060676663315687,
        "embedding": 0.028060676663315687,
        "cache": 0.028060676663315687,
        "embeddings": 0.028060676663315687,
        "scorecards": 0.028060676663315687,
        "so": 0.028060676663315687,
        "subsequent": 0.028060676663315687,
        "runs": 0.028060676663315687,
        "incremental": 0.028060676663315687,
        "9": 0.028060676663315687,
        "git": 0.028060676663315687,
        "publisher": 0.028060676663315687,
        "creates": 0.028060676663315687,
        "branch": 0.028060676663315687,
        "e": 0.056121353326631374,
        "g": 0.056121353326631374,
        "update": 0.028060676663315687,
        "yyyymmdd": 0.028060676663315687,
        "pr": 0.056121353326631374,
        "body": 0.028060676663315687,
        "explains": 0.028060676663315687,
        "what": 0.028060676663315687,
        "were": 0.028060676663315687,
        "updated": 0.028060676663315687,
        "can": 0.028060676663315687,
        "commit": 0.028060676663315687,
        "directly": 0.028060676663315687,
        "configurable": 0.028060676663315687,
        "on": 0.028060676663315687,
        "init": 0.028060676663315687,
        "empty": 0.028060676663315687,
        "repos": 0.028060676663315687,
        "applies": 0.028060676663315687,
        "labels": 0.028060676663315687,
        "docs": 0.056121353326631374,
        "auto": 0.028060676663315687,
        "existing": 0.028060676663315687,
        "prs": 0.028060676663315687,
        "configured": 0.028060676663315687,
        "4": 0.028060676663315687,
        "data": 0.028060676663315687,
        "python": 0.056121353326631374,
        "pydantic": 0.028060676663315687,
        "dataclasses": 0.056121353326631374,
        "from": 0.056121353326631374,
        "import": 0.056121353326631374,
        "dataclass": 0.2244854133065255,
        "typing": 0.028060676663315687,
        "list": 0.11224270665326275,
        "dict": 0.14030338331657843,
        "optional": 0.056121353326631374,
        "class": 0.1964247366432098,
        "filemeta": 0.056121353326631374,
        "path": 0.028060676663315687,
        "str": 0.5892742099296294,
        "size": 0.028060676663315687,
        "int": 0.028060676663315687,
        "language": 0.028060676663315687,
        "role": 0.028060676663315687,
        "src": 0.028060676663315687,
        "test": 0.056121353326631374,
        "config": 0.028060676663315687,
        "script": 0.028060676663315687,
        "infra": 0.028060676663315687,
        "other": 0.028060676663315687,
        "hash": 0.028060676663315687,
        "repomanifest": 0.056121353326631374,
        "root": 0.028060676663315687,
        "files": 0.028060676663315687,
        "detectors": 0.028060676663315687,
        "build_system": 0.028060676663315687,
        "maven": 0.028060676663315687,
        "framework": 0.056121353326631374,
        "spring": 0.028060676663315687,
        "boot": 0.028060676663315687,
        "dependency_files": 0.028060676663315687,
        "pom": 0.028060676663315687,
        "xml": 0.028060676663315687,
        "requirements": 0.028060676663315687,
        "txt": 0.028060676663315687,
        "signal": 0.056121353326631374,
        "kind": 0.028060676663315687,
        "service": 0.028060676663315687,
        "db": 0.028060676663315687,
        "queue": 0.028060676663315687,
        "dep": 0.028060676663315687,
        "entrypoint": 0.028060676663315687,
        "name": 0.028060676663315687,
        "detail": 0.028060676663315687,
        "analysisresult": 0.028060676663315687,
        "manifest": 0.028060676663315687,
        "signals": 0.028060676663315687,
        "embedding_index_path": 0.028060676663315687,
        "sectionspec": 0.028060676663315687,
        "key": 0.028060676663315687,
        "intro": 0.028060676663315687,
        "features": 0.028060676663315687,
        "arch": 0.028060676663315687,
        "quickstart": 0.028060676663315687,
        "bool": 0.028060676663315687,
        "sources": 0.028060676663315687,
        "preferred": 0.028060676663315687,
        "retrieval": 0.028060676663315687,
        "tags": 0.028060676663315687,
        "template_name": 0.028060676663315687,
        "readmedraft": 0.028060676663315687,
        "full_markdown": 0.028060676663315687,
        "updateplan": 0.028060676663315687,
        "strategy": 0.028060676663315687
      },
      "text": "across services when API endpoints are detected. ### 3.6 Local LLM Runner * Pluggable runtime that prefers the Docker Model Runner HTTP endpoint (host `http://localhost:12434/engines/v1`, container `http://model-runner.docker.internal/engines/v1`) with environment overrides and an `ollama` CLI fallback. * Defaults to `ai/smollm2:360M-Q4_K_M` but respects `.docgen.yml` and OpenAI-compatible env vars for alternate weights and API keys. * Supports **function calling style** for structured outputs when available. * Streaming decode with stop tokens; **section-by-section** generation to stay within context limits. * Validates configuration to ensure runners stay local (loopback/`*.internal` hosts only). ### 3.7 Post-Processor * Lints Markdown, builds ToC, adds shields/badges, normalizes heading hierarchy. * Enforces internal style guide and **README contract** (required sections). * Validates links (relative/absolute), code block languages, and line length. * Computes **diff-aware updates**: only modifies sections impacted by changes. * Persists a README scorecard (`.docgen/scorecard.json`) capturing coverage, quick start health, and link results. * Adds build/coverage/license badges with safe defaults and reports link warnings during post-processing. ### 3.8 Doc Store (Artifacts & Versions) * Keeps generated drafts, logs, prompts, inputs/outputs, and diffs under `.docgen/` per repo. * Supports rollback and regression testing via \u201cgolden\u201d READMEs. * Stores embedding cache (`embeddings.json`) and scorecards so subsequent runs are incremental. ### 3.9 Git Publisher * Creates a branch (e.g., `docgen/readme-update-YYYYMMDD`) and a PR. * PR body explains detected changes and what sections were updated. * Can commit directly (configurable) on init for empty repos. * Applies labels (e.g., `docs:auto`) and updates existing PRs when configured. --- ## 4) Data Model (Python `pydantic`/`dataclasses`) ```python from dataclasses import dataclass from typing import List, Dict, Optional @dataclass class FileMeta: path: str size: int language: Optional[str] role: str # src|test|docs|config|build|script|infra|other hash: str @dataclass class RepoManifest: root: str files: List[FileMeta] detectors: Dict[str, str] # {\"build_system\": \"maven\", \"framework\":\"spring-boot\", ...} dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str #",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#3",
      "vector": {
        "dependency_files": 0.03280893574623933,
        "dict": 0.13123574298495733,
        "str": 0.5577519076860686,
        "pom": 0.098426807238718,
        "xml": 0.098426807238718,
        "requirements": 0.06561787149247866,
        "txt": 0.06561787149247866,
        "dataclass": 0.16404467873119666,
        "class": 0.16404467873119666,
        "signal": 0.06561787149247866,
        "kind": 0.03280893574623933,
        "framework": 0.03280893574623933,
        "service": 0.03280893574623933,
        "cli": 0.03280893574623933,
        "db": 0.03280893574623933,
        "queue": 0.03280893574623933,
        "dep": 0.03280893574623933,
        "entrypoint": 0.03280893574623933,
        "test": 0.06561787149247866,
        "name": 0.03280893574623933,
        "detail": 0.03280893574623933,
        "analysisresult": 0.03280893574623933,
        "manifest": 0.06561787149247866,
        "repomanifest": 0.03280893574623933,
        "signals": 0.06561787149247866,
        "list": 0.098426807238718,
        "embedding_index_path": 0.03280893574623933,
        "sectionspec": 0.03280893574623933,
        "key": 0.03280893574623933,
        "intro": 0.06561787149247866,
        "features": 0.098426807238718,
        "arch": 0.03280893574623933,
        "quickstart": 0.06561787149247866,
        "required": 0.03280893574623933,
        "bool": 0.03280893574623933,
        "sources": 0.03280893574623933,
        "preferred": 0.03280893574623933,
        "retrieval": 0.06561787149247866,
        "tags": 0.03280893574623933,
        "template_name": 0.03280893574623933,
        "readmedraft": 0.03280893574623933,
        "sections": 0.13123574298495733,
        "full_markdown": 0.03280893574623933,
        "updateplan": 0.06561787149247866,
        "strategy": 0.03280893574623933,
        "full": 0.03280893574623933,
        "patch": 0.06561787149247866,
        "changed_sections": 0.03280893574623933,
        "reasons": 0.03280893574623933,
        "section": 0.06561787149247866,
        "why": 0.03280893574623933,
        "5": 0.098426807238718,
        "configuration": 0.06561787149247866,
        "docgen": 0.196853614477436,
        "yml": 0.06561787149247866,
        "at": 0.03280893574623933,
        "repo": 0.06561787149247866,
        "root": 0.06561787149247866,
        "yaml": 0.03280893574623933,
        "llm": 0.03280893574623933,
        "runner": 0.03280893574623933,
        "ollama": 0.03280893574623933,
        "or": 0.06561787149247866,
        "llama": 0.03280893574623933,
        "cpp": 0.03280893574623933,
        "model": 0.03280893574623933,
        "llama3": 0.03280893574623933,
        "8b": 0.03280893574623933,
        "instruct": 0.03280893574623933,
        "example": 0.03280893574623933,
        "local": 0.03280893574623933,
        "only": 0.098426807238718,
        "max_tokens": 0.03280893574623933,
        "2048": 0.03280893574623933,
        "temperature": 0.03280893574623933,
        "0": 0.03280893574623933,
        "2": 0.13123574298495733,
        "readme": 0.196853614477436,
        "style": 0.03280893574623933,
        "concise": 0.03280893574623933,
        "comprehensive": 0.03280893574623933,
        "template_pack": 0.06561787149247866,
        "enterprise": 0.03280893574623933,
        "optional": 0.03280893574623933,
        "bundle": 0.03280893574623933,
        "shipped": 0.03280893574623933,
        "with": 0.06561787149247866,
        "required_sections": 0.03280893574623933,
        "architecture": 0.06561787149247866,
        "build_and_test": 0.03280893574623933,
        "deployment": 0.06561787149247866,
        "troubleshooting": 0.03280893574623933,
        "faq": 0.03280893574623933,
        "license": 0.03280893574623933,
        "publish": 0.06561787149247866,
        "mode": 0.03280893574623933,
        "pr": 0.13123574298495733,
        "commit": 0.098426807238718,
        "dry": 0.03280893574623933,
        "run": 0.03280893574623933,
        "branch_prefix": 0.03280893574623933,
        "labels": 0.03280893574623933,
        "docs": 0.06561787149247866,
        "auto": 0.03280893574623933,
        "update_existing": 0.03280893574623933,
        "true": 0.03280893574623933,
        "refresh": 0.03280893574623933,
        "an": 0.03280893574623933,
        "existing": 0.03280893574623933,
        "instead": 0.03280893574623933,
        "of": 0.03280893574623933,
        "opening": 0.03280893574623933,
        "a": 0.06561787149247866,
        "new": 0.03280893574623933,
        "one": 0.03280893574623933,
        "analyzers": 0.03280893574623933,
        "enabled": 0.03280893574623933,
        "language": 0.03280893574623933,
        "build": 0.196853614477436,
        "dependencies": 0.03280893574623933,
        "patterns": 0.03280893574623933,
        "exclude_paths": 0.03280893574623933,
        "git": 0.06561787149247866,
        "node_modules": 0.03280893574623933,
        "dist": 0.03280893574623933,
        "ci": 0.098426807238718,
        "update": 0.06561787149247866,
        "if": 0.098426807238718,
        "these": 0.03280893574623933,
        "paths": 0.03280893574623933,
        "change": 0.03280893574623933,
        "watched_globs": 0.06561787149247866,
        "src": 0.06561787149247866,
        "app": 0.03280893574623933,
        "cmd": 0.03280893574623933,
        "gradle": 0.06561787149247866,
        "package": 0.03280893574623933,
        "json": 0.03280893574623933,
        "pyproject": 0.03280893574623933,
        "toml": 0.03280893574623933,
        "dockerfile": 0.06561787149247866,
        "no": 0.06561787149247866,
        "templates_dir": 0.03280893574623933,
        "is": 0.03280893574623933,
        "provided": 0.03280893574623933,
        "automatically": 0.03280893574623933,
        "picks": 0.03280893574623933,
        "up": 0.03280893574623933,
        "templates": 0.06561787149247866,
        "bundles": 0.03280893574623933,
        "in": 0.06561787149247866,
        "the": 0.03280893574623933,
        "repository": 0.03280893574623933,
        "and": 0.03280893574623933,
        "supports": 0.03280893574623933,
        "built": 0.03280893574623933,
        "template": 0.03280893574623933,
        "packs": 0.03280893574623933,
        "via": 0.06561787149247866,
        "6": 0.098426807238718,
        "workflows": 0.03280893574623933,
        "1": 0.098426807238718,
        "initialization": 0.03280893574623933,
        "without": 0.03280893574623933,
        "scan": 0.03280893574623933,
        "analyze": 0.03280893574623933,
        "embeddings": 0.03280893574623933,
        "prompt": 0.03280893574623933,
        "default": 0.03280893574623933,
        "include": 0.03280893574623933,
        "getting": 0.03280893574623933,
        "started": 0.03280893574623933,
        "suggestions": 0.03280893574623933,
        "3": 0.06561787149247866,
        "generate": 0.06561787149247866,
        "sequentially": 0.03280893574623933,
        "streaming": 0.03280893574623933,
        "4": 0.06561787149247866,
        "post": 0.03280893574623933,
        "process": 0.03280893574623933,
        "toc": 0.03280893574623933,
        "badges": 0.03280893574623933,
        "status": 0.03280893574623933,
        "placeholder": 0.03280893574623933,
        "lint": 0.03280893574623933,
        "direct": 0.03280893574623933,
        "md": 0.03280893574623933,
        "artifacts": 0.03280893574623933,
        "on": 0.03280893574623933,
        "detect": 0.03280893574623933,
        "changes": 0.03280893574623933,
        "diff": 0.03280893574623933,
        "map": 0.03280893574623933,
        "files": 0.03280893574623933,
        "to": 0.098426807238718,
        "using": 0.03280893574623933,
        "rules": 0.03280893574623933,
        "matrix": 0.03280893574623933,
        "quick": 0.03280893574623933,
        "start": 0.03280893574623933,
        "k8s": 0.03280893574623933,
        "entrypoints": 0.03280893574623933,
        "decide": 0.03280893574623933,
        "impacted": 0.03280893574623933,
        "regenerate": 0.03280893574623933,
        "those": 0.03280893574623933,
        "skip": 0.03280893574623933,
        "changed": 0.03280893574623933,
        "file": 0.03280893574623933,
        "matches": 0.03280893574623933,
        "allows": 0.03280893574623933,
        "avoid": 0.03280893574623933,
        "unnecessary": 0.03280893574623933,
        "runs": 0.03280893574623933,
        "rag": 0.03280893574623933,
        "fetch": 0.03280893574623933,
        "top": 0.03280893574623933,
        "k": 0.03280893574623933,
        "chunks": 0.03280893574623933,
        "relevant": 0.03280893574623933,
        "each": 0.03280893574623933
      },
      "text": "dependency_files: Dict[str, str] # {\"pom.xml\": \"...\", \"requirements.txt\": \"...\"} @dataclass class Signal: kind: str # \"framework\",\"service\",\"cli\",\"db\",\"queue\",\"dep\",\"entrypoint\",\"test\" name: str detail: Dict[str, str] @dataclass class AnalysisResult: manifest: RepoManifest signals: List[Signal] embedding_index_path: str @dataclass class SectionSpec: key: str # \"intro\",\"features\",\"arch\",\"quickstart\",... required: bool sources: List[str] # preferred retrieval tags template_name: str @dataclass class ReadmeDraft: sections: Dict[str, str] full_markdown: str @dataclass class UpdatePlan: strategy: str # \"full\"|\"patch\" changed_sections: List[str] reasons: Dict[str, str] # section->why ``` --- ## 5) Configuration (`.docgen.yml` at repo root) ```yaml llm: runner: \"ollama\" # or \"llama.cpp\" model: \"llama3:8b-instruct\" # example; local only max_tokens: 2048 temperature: 0.2 readme: style: \"concise\" # or \"comprehensive\" template_pack: \"enterprise\" # optional bundle shipped with docgen required_sections: - intro - features - architecture - quickstart - configuration - build_and_test - deployment - troubleshooting - faq - license publish: mode: \"pr\" # \"commit\" | \"pr\" | \"dry-run\" branch_prefix: \"docgen/\" labels: - \"docs:auto\" update_existing: true # refresh an existing PR instead of opening a new one analyzers: enabled: - language - build - dependencies - patterns exclude_paths: - \".git/\" - \"node_modules/\" - \"dist/\" ci: # Only update README if these paths change watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"pyproject.toml\" - \"Dockerfile\" ``` > If no `readme.templates_dir` is provided, docgen automatically picks up `docs/templates/` bundles in the repository root and supports built-in template packs via `readme.template_pack`. --- ## 6) Workflows ### 6.1 Initialization (Repo without README) 1. **Scan & Analyze** \u2192 Manifest + Signals + Embeddings. 2. **Prompt Build** with default templates, include \u201cgetting started\u201d suggestions. 3. **Generate Sections** sequentially (streaming). 4. **Post-process** \u2192 ToC, badges (build status placeholder), lint. 5. **Publish**: direct commit `README.md` + `.docgen/` artifacts. ### 6.2 Update on Commit/PR 1. **Detect changes** via Git diff; map files to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate**",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#4",
      "vector": {
        "to": 0.146943671674129,
        "sections": 0.11020775375559676,
        "using": 0.03673591791853225,
        "a": 0.11020775375559676,
        "rules": 0.03673591791853225,
        "matrix": 0.03673591791853225,
        "pom": 0.03673591791853225,
        "xml": 0.03673591791853225,
        "build": 0.18367958959266126,
        "gradle": 0.0734718358370645,
        "test": 0.0734718358370645,
        "quick": 0.0734718358370645,
        "start": 0.0734718358370645,
        "dockerfile": 0.03673591791853225,
        "k8s": 0.0734718358370645,
        "deployment": 0.0734718358370645,
        "src": 0.03673591791853225,
        "entrypoints": 0.0734718358370645,
        "architecture": 0.0734718358370645,
        "features": 0.0734718358370645,
        "2": 0.0734718358370645,
        "decide": 0.03673591791853225,
        "updateplan": 0.03673591791853225,
        "patch": 0.03673591791853225,
        "impacted": 0.03673591791853225,
        "regenerate": 0.11020775375559676,
        "only": 0.0734718358370645,
        "those": 0.03673591791853225,
        "3": 0.0734718358370645,
        "skip": 0.03673591791853225,
        "if": 0.146943671674129,
        "no": 0.0734718358370645,
        "changed": 0.03673591791853225,
        "file": 0.0734718358370645,
        "matches": 0.03673591791853225,
        "docgen": 0.146943671674129,
        "yml": 0.03673591791853225,
        "ci": 0.0734718358370645,
        "watched_globs": 0.03673591791853225,
        "allows": 0.03673591791853225,
        "avoid": 0.03673591791853225,
        "unnecessary": 0.03673591791853225,
        "runs": 0.03673591791853225,
        "4": 0.03673591791853225,
        "rag": 0.11020775375559676,
        "retrieval": 0.03673591791853225,
        "fetch": 0.03673591791853225,
        "top": 0.0734718358370645,
        "k": 0.0734718358370645,
        "chunks": 0.0734718358370645,
        "relevant": 0.03673591791853225,
        "each": 0.0734718358370645,
        "section": 0.18367958959266126,
        "5": 0.0734718358370645,
        "generate": 0.03673591791853225,
        "post": 0.0734718358370645,
        "process": 0.03673591791853225,
        "open": 0.03673591791853225,
        "pr": 0.03673591791853225,
        "with": 0.03673591791853225,
        "summary": 0.03673591791853225,
        "of": 0.03673591791853225,
        "deltas": 0.03673591791853225,
        "6": 0.0734718358370645,
        "dry": 0.0734718358370645,
        "run": 0.0734718358370645,
        "support": 0.0734718358370645,
        "update": 0.03673591791853225,
        "computes": 0.03673591791853225,
        "diffs": 0.03673591791853225,
        "and": 0.0734718358370645,
        "scorecards": 0.03673591791853225,
        "without": 0.03673591791853225,
        "writing": 0.03673591791853225,
        "or": 0.11020775375559676,
        "publishing": 0.03673591791853225,
        "manual": 0.03673591791853225,
        "full": 0.03673591791853225,
        "intro": 0.0734718358370645,
        "arch": 0.03673591791853225,
        "7": 0.03673591791853225,
        "contract": 0.03673591791853225,
        "readme": 0.0734718358370645,
        "what": 0.03673591791853225,
        "why": 0.03673591791853225,
        "who": 0.03673591791853225,
        "it": 0.03673591791853225,
        "s": 0.03673591791853225,
        "for": 0.0734718358370645,
        "key": 0.03673591791853225,
        "bullets": 0.03673591791853225,
        "grounded": 0.03673591791853225,
        "in": 0.03673591791853225,
        "real": 0.03673591791853225,
        "repo": 0.0734718358370645,
        "signals": 0.0734718358370645,
        "overview": 0.03673591791853225,
        "diagram": 0.03673591791853225,
        "ascii": 0.03673591791853225,
        "components": 0.03673591791853225,
        "minimal": 0.03673591791853225,
        "commands": 0.146943671674129,
        "per": 0.0734718358370645,
        "system": 0.0734718358370645,
        "configuration": 0.0734718358370645,
        "env": 0.03673591791853225,
        "vars": 0.03673591791853225,
        "files": 0.03673591791853225,
        "examples": 0.03673591791853225,
        "coverage": 0.03673591791853225,
        "hint": 0.03673591791853225,
        "container": 0.03673591791853225,
        "instructions": 0.03673591791853225,
        "detected": 0.11020775375559676,
        "troubleshooting": 0.03673591791853225,
        "common": 0.03673591791853225,
        "failures": 0.03673591791853225,
        "faq": 0.03673591791853225,
        "10": 0.0734718358370645,
        "concise": 0.03673591791853225,
        "q": 0.03673591791853225,
        "contributing": 0.0734718358370645,
        "md": 0.03673591791853225,
        "absent": 0.03673591791853225,
        "license": 0.03673591791853225,
        "templated": 0.03673591791853225,
        "must": 0.03673591791853225,
        "be": 0.0734718358370645,
        "independently": 0.03673591791853225,
        "regenerable": 0.03673591791853225,
        "self": 0.03673591791853225,
        "contained": 0.03673591791853225,
        "8": 0.03673591791853225,
        "prompting": 0.03673591791853225,
        "strategy": 0.03673591791853225,
        "local": 0.0734718358370645,
        "llm": 0.03673591791853225,
        "message": 0.0734718358370645,
        "fixed": 0.03673591791853225,
        "guardrails": 0.03673591791853225,
        "you": 0.03673591791853225,
        "are": 0.03673591791853225,
        "senior": 0.03673591791853225,
        "dev": 0.03673591791853225,
        "doc": 0.03673591791853225,
        "writer": 0.03673591791853225,
        "precise": 0.03673591791853225,
        "cite": 0.03673591791853225,
        "facts": 0.03673591791853225,
        "speculation": 0.03673591791853225,
        "never": 0.03673591791853225,
        "invent": 0.03673591791853225,
        "prefer": 0.03673591791853225,
        "by": 0.03673591791853225,
        "analyzers": 0.0734718358370645,
        "user": 0.03673591791853225,
        "objective": 0.03673591791853225,
        "constraints": 0.03673591791853225,
        "tone": 0.03673591791853225,
        "length": 0.03673591791853225,
        "inject": 0.03673591791853225,
        "provide": 0.03673591791853225,
        "style": 0.03673591791853225,
        "tokens": 0.03673591791853225,
        "headings": 0.03673591791853225,
        "code": 0.0734718358370645,
        "blocks": 0.03673591791853225,
        "tables": 0.03673591791853225,
        "filters": 0.03673591791853225,
        "refuse": 0.03673591791853225,
        "insufficient": 0.03673591791853225,
        "evidence": 0.03673591791853225,
        "fall": 0.03673591791853225,
        "back": 0.03673591791853225,
        "template": 0.03673591791853225,
        "stubs": 0.0734718358370645,
        "9": 0.03673591791853225,
        "language": 0.0734718358370645,
        "project": 0.03673591791853225,
        "poc": 0.0734718358370645,
        "targets": 0.03673591791853225,
        "tier": 0.0734718358370645,
        "1": 0.03673591791853225,
        "python": 0.03673591791853225,
        "poetry": 0.03673591791853225,
        "setuptools": 0.03673591791853225,
        "java": 0.03673591791853225,
        "maven": 0.03673591791853225,
        "spring": 0.0734718358370645,
        "boot": 0.03673591791853225,
        "node": 0.03673591791853225,
        "js": 0.03673591791853225,
        "npm": 0.03673591791853225,
        "pnpm": 0.03673591791853225,
        "express": 0.03673591791853225,
        "next": 0.03673591791853225,
        "soon": 0.03673591791853225,
        "go": 0.03673591791853225,
        "modules": 0.03673591791853225,
        "rust": 0.03673591791853225,
        "cargo": 0.03673591791853225,
        "ruby": 0.03673591791853225,
        "bundler": 0.03673591791853225,
        "php": 0.03673591791853225,
        "composer": 0.03673591791853225,
        "detection": 0.03673591791853225,
        "via": 0.03673591791853225,
        "heuristics": 0.03673591791853225,
        "optional": 0.03673591791853225,
        "tree": 0.03673591791853225,
        "sitter": 0.03673591791853225,
        "function": 0.03673591791853225,
        "class": 0.03673591791853225,
        "extraction": 0.03673591791853225,
        "pluggable": 0.03673591791853225,
        "entry": 0.03673591791853225,
        "points": 0.03673591791853225,
        "main": 0.03673591791853225,
        "springbootapplication": 0.03673591791853225,
        "fastapi": 0.03673591791853225,
        "app": 0.03673591791853225,
        "bin": 0.03673591791853225,
        "cmd": 0.03673591791853225,
        "interfaces": 0.03673591791853225,
        "skeleton": 0.03673591791853225,
        "__init__": 0.03673591791853225,
        "py": 0.5143028508594515,
        "cli": 0.0734718358370645,
        "click": 0.03673591791853225,
        "typer": 0.03673591791853225,
        "failsafe": 0.03673591791853225,
        "fail": 0.03673591791853225,
        "safe": 0.03673591791853225,
        "logging": 0.0734718358370645,
        "helpers": 0.03673591791853225,
        "orchestrator": 0.03673591791853225,
        "repo_scanner": 0.03673591791853225,
        "base": 0.03673591791853225,
        "analyzer": 0.03673591791853225,
        "abc": 0.03673591791853225,
        "dependencies": 0.03673591791853225,
        "patterns": 0.03673591791853225,
        "embedder": 0.03673591791853225,
        "embedding": 0.03673591791853225,
        "model": 0.03673591791853225,
        "store": 0.03673591791853225
      },
      "text": "to sections using a rules matrix: * `pom.xml`/`build.gradle` \u2192 *Build & Test*, *Quick Start*. * `Dockerfile`/`k8s` \u2192 *Deployment*. * `src/**` entrypoints \u2192 *Architecture*, *Features*. 2. **Decide UpdatePlan**: patch impacted sections; regenerate only those. 3. **Skip** if no changed file matches `.docgen.yml` `ci.watched_globs` (allows CI to avoid unnecessary runs). 4. **RAG retrieval**: fetch top-k chunks relevant to each section. 5. **Generate** \u2192 **Post-process** \u2192 **Open PR** with summary of deltas. 6. Dry-run support: `docgen update --dry-run` computes diffs and scorecards without writing or publishing. ### 6.3 Regenerate (Manual) * `docgen regenerate --full` or `--sections intro,arch`. --- ## 7) Section Contract (README) * **Intro**: what, why, who it\u2019s for * **Key Features**: bullets grounded in real repo signals * **Architecture**: overview diagram (ASCII) + components * **Quick Start**: minimal commands (per build system) * **Configuration**: env vars, files, examples * **Build & Test**: commands, coverage hint * **Deployment**: container/K8s instructions if detected * **Troubleshooting**: common failures * **FAQ**: 5\u201310 concise Q\\&A * **Contributing** (if `CONTRIBUTING.md` absent) * **License** (detected or templated) > Each section must be independently regenerable and self-contained. --- ## 8) Prompting Strategy (Local LLM) * **System message (fixed guardrails)**: * \u201cYou are a senior dev doc writer. Be precise. Cite repo facts only. No speculation.\u201d * \u201cNever invent commands. Prefer commands detected by analyzers.\u201d * **User message per section**: * Section objective + constraints (tone, length). * Inject **Signals** + **Top-k chunks** (RAG). * Provide **style tokens** (headings, code blocks, tables). * **Post-filters**: refuse if insufficient evidence; fall back to template stubs. --- ## 9) Language & Project Support (POC targets) * **Tier-1 (POC)**: Python (Poetry/Setuptools), Java (Maven/Gradle, Spring Boot), Node.js (npm/pnpm, Express/Next). * **Tier-2 (soon)**: Go (modules), Rust (Cargo), Ruby (Bundler), PHP (Composer). * Detection via: * File heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#5",
      "vector": {
        "heuristics": 0.028665182485640765,
        "optional": 0.0859955474569223,
        "tree": 0.028665182485640765,
        "sitter": 0.028665182485640765,
        "for": 0.11466072994256306,
        "function": 0.028665182485640765,
        "class": 0.05733036497128153,
        "extraction": 0.028665182485640765,
        "pluggable": 0.028665182485640765,
        "entry": 0.028665182485640765,
        "points": 0.028665182485640765,
        "main": 0.05733036497128153,
        "spring": 0.028665182485640765,
        "springbootapplication": 0.028665182485640765,
        "fastapi": 0.05733036497128153,
        "app": 0.14332591242820383,
        "bin": 0.028665182485640765,
        "cmd": 0.05733036497128153,
        "10": 0.028665182485640765,
        "interfaces": 0.028665182485640765,
        "code": 0.05733036497128153,
        "skeleton": 0.028665182485640765,
        "docgen": 0.0859955474569223,
        "__init__": 0.028665182485640765,
        "py": 0.7166295621410191,
        "cli": 0.0859955474569223,
        "click": 0.028665182485640765,
        "typer": 0.05733036497128153,
        "failsafe": 0.028665182485640765,
        "fail": 0.028665182485640765,
        "safe": 0.028665182485640765,
        "readme": 0.0859955474569223,
        "stubs": 0.028665182485640765,
        "logging": 0.05733036497128153,
        "configuration": 0.028665182485640765,
        "helpers": 0.028665182485640765,
        "orchestrator": 0.028665182485640765,
        "repo_scanner": 0.028665182485640765,
        "analyzers": 0.028665182485640765,
        "base": 0.028665182485640765,
        "analyzer": 0.0859955474569223,
        "abc": 0.14332591242820383,
        "language": 0.028665182485640765,
        "build": 0.14332591242820383,
        "dependencies": 0.028665182485640765,
        "entrypoints": 0.028665182485640765,
        "patterns": 0.028665182485640765,
        "rag": 0.028665182485640765,
        "embedder": 0.028665182485640765,
        "local": 0.05733036497128153,
        "embedding": 0.028665182485640765,
        "model": 0.028665182485640765,
        "store": 0.028665182485640765,
        "prompting": 0.028665182485640765,
        "builder": 0.028665182485640765,
        "jinja2": 0.028665182485640765,
        "templates": 0.05733036497128153,
        "token": 0.028665182485640765,
        "mgmt": 0.028665182485640765,
        "constants": 0.028665182485640765,
        "j2": 0.028665182485640765,
        "per": 0.028665182485640765,
        "section": 0.028665182485640765,
        "llm": 0.028665182485640765,
        "runner": 0.028665182485640765,
        "adapter": 0.028665182485640765,
        "ollama": 0.028665182485640765,
        "llama": 0.028665182485640765,
        "cpp": 0.028665182485640765,
        "postproc": 0.028665182485640765,
        "lint": 0.028665182485640765,
        "links": 0.05733036497128153,
        "markers": 0.0859955474569223,
        "toc": 0.05733036497128153,
        "git": 0.05733036497128153,
        "diff": 0.028665182485640765,
        "publisher": 0.028665182485640765,
        "config": 0.028665182485640765,
        "models": 0.05733036497128153,
        "python": 0.0859955474569223,
        "from": 0.05733036497128153,
        "import": 0.05733036497128153,
        "abstractmethod": 0.0859955474569223,
        "repomanifest": 0.0859955474569223,
        "signal": 0.05733036497128153,
        "def": 0.14332591242820383,
        "supports": 0.028665182485640765,
        "self": 0.05733036497128153,
        "manifest": 0.05733036497128153,
        "bool": 0.0859955474569223,
        "analyze": 0.05733036497128153,
        "list": 0.028665182485640765,
        "command": 0.0859955474569223,
        "init": 0.028665182485640765,
        "path": 0.0859955474569223,
        "str": 0.14332591242820383,
        "publish": 0.0859955474569223,
        "true": 0.028665182485640765,
        "update": 0.0859955474569223,
        "event": 0.028665182485640765,
        "commit": 0.05733036497128153,
        "diff_base": 0.028665182485640765,
        "origin": 0.028665182485640765,
        "regenerate": 0.028665182485640765,
        "sections": 0.11466072994256306,
        "full": 0.028665182485640765,
        "false": 0.028665182485640765,
        "service": 0.028665182485640765,
        "mode": 0.028665182485640765,
        "post": 0.1719910949138446,
        "generate": 0.028665182485640765,
        "arch": 0.028665182485640765,
        "quickstart": 0.0859955474569223,
        "get": 0.028665182485640765,
        "status": 0.028665182485640765,
        "run_id": 0.028665182485640765,
        "11": 0.028665182485640765,
        "change": 0.028665182485640765,
        "impact": 0.028665182485640765,
        "matrix": 0.028665182485640765,
        "examples": 0.028665182485640765,
        "changed": 0.05733036497128153,
        "pattern": 0.028665182485640765,
        "to": 0.0859955474569223,
        "rebuild": 0.028665182485640765,
        "notes": 0.028665182485640765,
        "pom": 0.028665182485640765,
        "xml": 0.028665182485640765,
        "gradle": 0.028665182485640765,
        "_and": 0.05733036497128153,
        "_test": 0.05733036497128153,
        "recompute": 0.028665182485640765,
        "commands": 0.028665182485640765,
        "requirements": 0.028665182485640765,
        "txt": 0.028665182485640765,
        "pyproject": 0.028665182485640765,
        "toml": 0.028665182485640765,
        "install": 0.028665182485640765,
        "steps": 0.028665182485640765,
        "dockerfile": 0.028665182485640765,
        "k8s": 0.028665182485640765,
        "deployment": 0.028665182485640765,
        "container": 0.028665182485640765,
        "changes": 0.028665182485640765,
        "src": 0.028665182485640765,
        "features": 0.028665182485640765,
        "architecture": 0.0859955474569223,
        "if": 0.028665182485640765,
        "entrypoint": 0.028665182485640765,
        "intro": 0.028665182485640765,
        "too": 0.028665182485640765,
        "docs": 0.028665182485640765,
        "all": 0.028665182485640765,
        "patch": 0.028665182485640765,
        "prefer": 0.028665182485640765,
        "doc": 0.028665182485640765,
        "driven": 0.028665182485640765,
        "md": 0.028665182485640765,
        "none": 0.028665182485640765,
        "unless": 0.028665182485640765,
        "empty": 0.028665182485640765,
        "prevent": 0.028665182485640765,
        "loops": 0.028665182485640765,
        "12": 0.028665182485640765,
        "processing": 0.028665182485640765,
        "rules": 0.028665182485640765,
        "headings": 0.028665182485640765,
        "start": 0.028665182485640765,
        "at": 0.028665182485640765,
        "title": 0.028665182485640765,
        "then": 0.028665182485640765,
        "add": 0.028665182485640765,
        "auto": 0.028665182485640765,
        "level": 0.028665182485640765,
        "3": 0.028665182485640765,
        "validate": 0.028665182485640765,
        "blocks": 0.028665182485640765,
        "bash": 0.028665182485640765,
        "convert": 0.028665182485640765,
        "absolute": 0.028665182485640765,
        "github": 0.028665182485640765,
        "relative": 0.028665182485640765,
        "where": 0.028665182485640765,
        "possible": 0.028665182485640765,
        "ensure": 0.028665182485640765,
        "idempotency": 0.028665182485640765,
        "only": 0.028665182485640765,
        "edit": 0.028665182485640765,
        "between": 0.028665182485640765,
        "managed": 0.028665182485640765,
        "begin": 0.028665182485640765,
        "end": 0.028665182485640765,
        "13": 0.028665182485640765,
        "ci": 0.028665182485640765,
        "integration": 0.028665182485640765,
        "pre": 0.028665182485640765,
        "forbid": 0.028665182485640765,
        "direct": 0.028665182485640765,
        "edits": 0.028665182485640765,
        "outside": 0.028665182485640765,
        "merge": 0.028665182485640765,
        "checkout": 0.028665182485640765,
        "remind": 0.028665182485640765
      },
      "text": "heuristics + optional tree-sitter for function/class extraction (pluggable). * Entry points: `main()`; Spring `@SpringBootApplication`; FastAPI app; `bin/`, `cmd/`. --- ## 10) Interfaces (Code Skeleton) ``` docgen/ __init__.py cli.py # click/typer CLI failsafe.py # fail-safe README stubs logging.py # logging configuration helpers orchestrator.py repo_scanner.py analyzers/ base.py # Analyzer ABC language.py build.py dependencies.py entrypoints.py patterns.py rag/ embedder.py # local embedding model store.py prompting/ builder.py # Jinja2 templates, token mgmt constants.py templates/ # *.j2 per section llm/ runner.py # adapter for ollama/llama.cpp postproc/ lint.py links.py markers.py toc.py git/ diff.py publisher.py config.py models.py ``` **Analyzer ABC** ```python from abc import ABC, abstractmethod from .models import RepoManifest, Signal class Analyzer(ABC): @abstractmethod def supports(self, manifest: RepoManifest) -> bool: ... @abstractmethod def analyze(self, manifest: RepoManifest) -> list[Signal]: ... ``` **CLI (Typer)** ```python @app.command() def init(path: str = \".\", publish: bool = True): ... @app.command() def update(path: str = \".\", event: str = \"commit\", diff_base: str = \"origin/main\"): ... @app.command() def regenerate(sections: str = \"\", full: bool = False): ... ``` **FastAPI (optional service mode)** * `POST /analyze` * `POST /generate?sections=arch,quickstart` * `POST /publish` * `GET /status/{run_id}` --- ## 11) Change Impact Matrix (examples) | Changed Path Pattern | Sections to Rebuild | Notes | | ------------------------------------ | ---------------------------- | --------------------------------------- | | `pom.xml`, `build.gradle*` | build\\_and\\_test, quickstart | Recompute build commands | | `requirements.txt`, `pyproject.toml` | build\\_and\\_test, quickstart | Update install steps | | `Dockerfile`, `k8s/**` | deployment | Publish container changes | | `src/**`, `app/**`, `cmd/**` | features, architecture | If entrypoint changed, update intro too | | `docs/**` | all (patch) | Prefer doc-driven | | `README.md` | none (unless empty) | Prevent loops | --- ## 12) Post-Processing Rules * Headings start at `#` for title then `##` for sections. * Add **auto ToC** (<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#6",
      "vector": {
        "level": 0.04267895997763199,
        "3": 0.12803687993289598,
        "validate": 0.04267895997763199,
        "code": 0.04267895997763199,
        "blocks": 0.04267895997763199,
        "bash": 0.04267895997763199,
        "python": 0.08535791995526398,
        "convert": 0.04267895997763199,
        "absolute": 0.04267895997763199,
        "github": 0.12803687993289598,
        "links": 0.04267895997763199,
        "to": 0.08535791995526398,
        "relative": 0.04267895997763199,
        "where": 0.04267895997763199,
        "possible": 0.08535791995526398,
        "ensure": 0.04267895997763199,
        "idempotency": 0.04267895997763199,
        "only": 0.12803687993289598,
        "edit": 0.04267895997763199,
        "between": 0.04267895997763199,
        "managed": 0.08535791995526398,
        "markers": 0.12803687993289598,
        "docgen": 0.21339479988815996,
        "begin": 0.04267895997763199,
        "architecture": 0.21339479988815996,
        "end": 0.04267895997763199,
        "13": 0.04267895997763199,
        "git": 0.08535791995526398,
        "ci": 0.08535791995526398,
        "integration": 0.04267895997763199,
        "local": 0.12803687993289598,
        "pre": 0.04267895997763199,
        "commit": 0.08535791995526398,
        "forbid": 0.04267895997763199,
        "direct": 0.04267895997763199,
        "readme": 0.12803687993289598,
        "edits": 0.04267895997763199,
        "outside": 0.04267895997763199,
        "optional": 0.12803687993289598,
        "post": 0.12803687993289598,
        "merge": 0.04267895997763199,
        "checkout": 0.08535791995526398,
        "remind": 0.04267895997763199,
        "run": 0.04267895997763199,
        "update": 0.12803687993289598,
        "gitlab": 0.04267895997763199,
        "bitbucket": 0.04267895997763199,
        "on": 0.04267895997763199,
        "push": 0.04267895997763199,
        "pr": 0.25607375986579195,
        "1": 0.12803687993289598,
        "repo": 0.08535791995526398,
        "2": 0.17071583991052797,
        "event": 0.04267895997763199,
        "diff": 0.08535791995526398,
        "base": 0.04267895997763199,
        "base_sha": 0.04267895997763199,
        "if": 0.12803687993289598,
        "changes": 0.04267895997763199,
        "open": 0.04267895997763199,
        "with": 0.04267895997763199,
        "labeled": 0.04267895997763199,
        "docs": 0.08535791995526398,
        "auto": 0.04267895997763199,
        "tokenless": 0.04267895997763199,
        "mode": 0.12803687993289598,
        "created": 0.04267895997763199,
        "from": 0.08535791995526398,
        "a": 0.04267895997763199,
        "app": 0.04267895997763199,
        "bot": 0.04267895997763199,
        "account": 0.04267895997763199,
        "14": 0.04267895997763199,
        "quality": 0.04267895997763199,
        "gates": 0.04267895997763199,
        "evaluation": 0.04267895997763199,
        "consistency": 0.04267895997763199,
        "checks": 0.04267895997763199,
        "commands": 0.08535791995526398,
        "exist": 0.04267895997763199,
        "in": 0.12803687993289598,
        "ports": 0.04267895997763199,
        "env": 0.04267895997763199,
        "vars": 0.04267895997763199,
        "match": 0.04267895997763199,
        "configs": 0.04267895997763199,
        "no": 0.08535791995526398,
        "hallucinations": 0.04267895997763199,
        "reject": 0.04267895997763199,
        "new": 0.04267895997763199,
        "facts": 0.04267895997763199,
        "not": 0.04267895997763199,
        "found": 0.08535791995526398,
        "signals": 0.08535791995526398,
        "rag": 0.08535791995526398,
        "style": 0.04267895997763199,
        "concise": 0.04267895997763199,
        "paragraphs": 0.04267895997763199,
        "actionable": 0.04267895997763199,
        "filler": 0.04267895997763199,
        "marketing": 0.04267895997763199,
        "scorecard": 0.04267895997763199,
        "0": 0.04267895997763199,
        "100": 0.04267895997763199,
        "coverage": 0.04267895997763199,
        "of": 0.08535791995526398,
        "required": 0.04267895997763199,
        "sections": 0.08535791995526398,
        "30": 0.04267895997763199,
        "buildability": 0.04267895997763199,
        "quick": 0.08535791995526398,
        "start": 0.04267895997763199,
        "20": 0.12803687993289598,
        "link": 0.04267895997763199,
        "validity": 0.04267895997763199,
        "10": 0.12803687993289598,
        "alignment": 0.04267895997763199,
        "w": 0.04267895997763199,
        "change": 0.04267895997763199,
        "set": 0.04267895997763199,
        "lint": 0.04267895997763199,
        "reviewer": 0.04267895997763199,
        "feedback": 0.04267895997763199,
        "loop": 0.04267895997763199,
        "15": 0.04267895997763199,
        "security": 0.04267895997763199,
        "privacy": 0.04267895997763199,
        "llm": 0.08535791995526398,
        "and": 0.04267895997763199,
        "embedding": 0.04267895997763199,
        "models": 0.04267895997763199,
        "respect": 0.04267895997763199,
        "gitignore": 0.04267895997763199,
        "configurable": 0.04267895997763199,
        "exclude_paths": 0.04267895997763199,
        "never": 0.04267895997763199,
        "index": 0.04267895997763199,
        "large": 0.04267895997763199,
        "binaries": 0.04267895997763199,
        "secret": 0.08535791995526398,
        "files": 0.08535791995526398,
        "simple": 0.04267895997763199,
        "scan": 0.04267895997763199,
        "block": 0.04267895997763199,
        "16": 0.04267895997763199,
        "mvp": 0.04267895997763199,
        "plan": 0.04267895997763199,
        "weeks": 0.04267895997763199,
        "suggested": 0.04267895997763199,
        "breakdown": 0.04267895997763199,
        "core": 0.04267895997763199,
        "path": 0.04267895997763199,
        "cli": 0.04267895997763199,
        "scanner": 0.04267895997763199,
        "language": 0.04267895997763199,
        "build": 0.04267895997763199,
        "analyzers": 0.04267895997763199,
        "java": 0.04267895997763199,
        "node": 0.04267895997763199,
        "prompt": 0.04267895997763199,
        "builder": 0.04267895997763199,
        "runner": 0.04267895997763199,
        "ollama": 0.04267895997763199,
        "adapter": 0.04267895997763199,
        "processor": 0.04267895997763199,
        "publisher": 0.04267895997763199,
        "lite": 0.04267895997763199,
        "embed": 0.04267895997763199,
        "existing": 0.04267895997763199,
        "top": 0.04267895997763199,
        "largest": 0.04267895997763199,
        "source": 0.04267895997763199,
        "heads": 0.04267895997763199,
        "triggers": 0.04267895997763199,
        "single": 0.04267895997763199,
        "as": 0.08535791995526398,
        "stretch": 0.04267895997763199,
        "4": 0.04267895997763199,
        "templates": 0.08535791995526398,
        "8": 0.04267895997763199,
        "jinja2": 0.17071583991052797,
        "5": 0.04267895997763199,
        "config": 0.04267895997763199,
        "yml": 0.04267895997763199,
        "minimal": 0.04267895997763199,
        "17": 0.12803687993289598,
        "example": 0.04267895997763199,
        "section": 0.04267895997763199,
        "template": 0.04267895997763199,
        "j2": 0.08535791995526398,
        "project_name": 0.08535791995526398,
        "is": 0.04267895997763199,
        "structured": 0.04267895997763199,
        "ascii": 0.04267895997763199,
        "_architecture": 0.04267895997763199,
        "key": 0.04267895997763199,
        "components": 0.08535791995526398,
        "for": 0.04267895997763199,
        "comp": 0.12803687993289598,
        "name": 0.04267895997763199,
        "summary": 0.04267895997763199,
        "endfor": 0.04267895997763199,
        "data": 0.04267895997763199,
        "flow": 0.04267895997763199,
        "data_flow": 0.04267895997763199,
        "generated": 0.04267895997763199,
        "detected": 0.04267895997763199,
        "signals_summary": 0.04267895997763199,
        "frame": 0.04267895997763199,
        "composed": 0.04267895997763199,
        "intro": 0.04267895997763199,
        "features": 0.08535791995526398,
        "include": 0.04267895997763199
      },
      "text": "(<= level 3). * Validate code blocks (` ```bash`, ` ```python`). * Convert absolute GitHub links to relative where possible. * Ensure **idempotency**: only edit between managed markers: * `<!-- docgen:begin:architecture -->` \u2026 `<!-- docgen:end:architecture -->` --- ## 13) Git & CI Integration ### Local * **pre-commit**: forbid direct README edits outside markers (optional). * **post-merge / post-checkout**: remind to run `docgen update` (optional). ### CI (GitHub/GitLab/Bitbucket) * On push/PR: 1. Checkout repo. 2. `docgen update --event pr --diff-base $BASE_SHA` 3. If changes \u2192 open/update PR with labeled `docs:auto`. * Tokenless mode possible if PR created from a GitHub App/bot account. --- ## 14) Quality Gates & Evaluation * **Consistency checks**: commands exist in repo; ports/env vars match configs. * **No hallucinations**: reject new facts not found in signals/RAG. * **Style**: concise paragraphs, actionable commands, no filler marketing. * **Scorecard** (0\u2013100): * Coverage of required sections (30) * Buildability of quick start (20) * Link validity (10) * Diff alignment w/ change set (20) * Lint (10) * Reviewer feedback loop (10) --- ## 15) Security & Privacy * **Local only** LLM and embedding models. * Respect `.gitignore` + configurable `exclude_paths`. * Never index large binaries/secret files. * Optional simple **secret scan**; block if found. --- ## 16) MVP Plan (2 weeks suggested breakdown) 1. **Core path**: CLI, Scanner, Language+Build analyzers (Python/Java/Node), Prompt Builder, Local LLM runner (Ollama adapter), Post-processor, Git Publisher (PR). 2. **RAG Lite**: embed only `/docs`, existing `README`, top 20 largest source files\u2019 heads. 3. **Triggers**: single \u201ccommit\u201d mode; PR mode as stretch. 4. **Templates**: 8 sections, Jinja2; managed markers. 5. **Config**: `.docgen.yml` minimal. --- ## 17) Example Templates ### 17.1 Section Template (Jinja2 \u2014 architecture.j2) ```jinja2 ## Architecture {{ project_name }} is structured as: ``` {{ ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#7",
      "vector": {
        "ascii": 0.036588086663230115,
        "_architecture": 0.036588086663230115,
        "key": 0.14635234665292046,
        "components": 0.07317617332646023,
        "for": 0.2561166066426108,
        "comp": 0.10976425998969035,
        "in": 0.2195285199793807,
        "name": 0.036588086663230115,
        "summary": 0.036588086663230115,
        "endfor": 0.036588086663230115,
        "data": 0.036588086663230115,
        "flow": 0.036588086663230115,
        "data_flow": 0.036588086663230115,
        "generated": 0.036588086663230115,
        "from": 0.036588086663230115,
        "detected": 0.036588086663230115,
        "signals": 0.036588086663230115,
        "signals_summary": 0.036588086663230115,
        "17": 0.036588086663230115,
        "2": 0.036588086663230115,
        "readme": 0.10976425998969035,
        "frame": 0.036588086663230115,
        "composed": 0.036588086663230115,
        "jinja2": 0.036588086663230115,
        "project_name": 0.036588086663230115,
        "intro": 0.10976425998969035,
        "features": 0.10976425998969035,
        "include": 0.036588086663230115,
        "architecture": 0.07317617332646023,
        "j2": 0.036588086663230115,
        "quick": 0.07317617332646023,
        "start": 0.2195285199793807,
        "quickstart": 0.036588086663230115,
        "configuration": 0.07317617332646023,
        "build": 0.14635234665292046,
        "test": 0.036588086663230115,
        "build_and_test": 0.07317617332646023,
        "deployment": 0.10976425998969035,
        "troubleshooting": 0.07317617332646023,
        "faq": 0.07317617332646023,
        "license": 0.07317617332646023,
        "18": 0.036588086663230115,
        "minimal": 0.036588086663230115,
        "python": 0.14635234665292046,
        "snippets": 0.036588086663230115,
        "change": 0.036588086663230115,
        "impact": 0.036588086663230115,
        "heuristic": 0.036588086663230115,
        "section_rules": 0.07317617332646023,
        "pom": 0.10976425998969035,
        "xml": 0.10976425998969035,
        "gradle": 0.07317617332646023,
        "requirements": 0.10976425998969035,
        "txt": 0.10976425998969035,
        "pyproject": 0.036588086663230115,
        "toml": 0.036588086663230115,
        "package": 0.07317617332646023,
        "json": 0.07317617332646023,
        "dockerfile": 0.07317617332646023,
        "k8s": 0.036588086663230115,
        "src": 0.10976425998969035,
        "app": 0.10976425998969035,
        "cmd": 0.10976425998969035,
        "def": 0.07317617332646023,
        "sections_from_diff": 0.036588086663230115,
        "paths": 0.07317617332646023,
        "list": 0.036588086663230115,
        "str": 0.2195285199793807,
        "set": 0.07317617332646023,
        "out": 0.10976425998969035,
        "section": 0.07317617332646023,
        "patterns": 0.10976425998969035,
        "if": 0.18294043331615056,
        "any": 0.036588086663230115,
        "p": 0.10976425998969035,
        "pat": 0.07317617332646023,
        "startswith": 0.036588086663230115,
        "add": 0.036588086663230115,
        "return": 0.10976425998969035,
        "or": 0.10976425998969035,
        "fall": 0.036588086663230115,
        "back": 0.036588086663230115,
        "to": 0.07317617332646023,
        "uncertain": 0.036588086663230115,
        "managed": 0.036588086663230115,
        "markers": 0.07317617332646023,
        "patch": 0.036588086663230115,
        "replace_block": 0.036588086663230115,
        "md": 0.18294043331615056,
        "new": 0.07317617332646023,
        "f": 0.10976425998969035,
        "docgen": 0.18294043331615056,
        "begin": 0.036588086663230115,
        "end": 0.18294043331615056,
        "and": 0.036588086663230115,
        "pre": 0.07317617332646023,
        "rest": 0.07317617332646023,
        "split": 0.07317617332646023,
        "1": 0.07317617332646023,
        "_": 0.036588086663230115,
        "post": 0.07317617332646023,
        "n": 0.07317617332646023,
        "insert": 0.036588086663230115,
        "missing": 0.036588086663230115,
        "19": 0.036588086663230115,
        "open": 0.036588086663230115,
        "questions": 0.036588086663230115,
        "trade": 0.036588086663230115,
        "offs": 0.036588086663230115,
        "embeddings": 0.036588086663230115,
        "use": 0.036588086663230115,
        "a": 0.14635234665292046,
        "tiny": 0.036588086663230115,
        "local": 0.036588086663230115,
        "model": 0.07317617332646023,
        "vs": 0.07317617332646023,
        "rule": 0.036588086663230115,
        "based": 0.036588086663230115,
        "retrieval": 0.036588086663230115,
        "mvp": 0.036588086663230115,
        "tree": 0.036588086663230115,
        "sitter": 0.036588086663230115,
        "adds": 0.036588086663230115,
        "power": 0.036588086663230115,
        "but": 0.036588086663230115,
        "increases": 0.036588086663230115,
        "footprint": 0.036588086663230115,
        "gate": 0.036588086663230115,
        "behind": 0.036588086663230115,
        "flag": 0.036588086663230115,
        "pr": 0.10976425998969035,
        "author": 0.036588086663230115,
        "bot": 0.036588086663230115,
        "account": 0.036588086663230115,
        "developer": 0.036588086663230115,
        "token": 0.036588086663230115,
        "decide": 0.036588086663230115,
        "per": 0.036588086663230115,
        "environment": 0.036588086663230115,
        "markdown": 0.036588086663230115,
        "diffs": 0.036588086663230115,
        "keep": 0.036588086663230115,
        "sections": 0.036588086663230115,
        "atomic": 0.036588086663230115,
        "minimize": 0.036588086663230115,
        "noisy": 0.036588086663230115,
        "prs": 0.036588086663230115,
        "20": 0.036588086663230115,
        "example": 0.036588086663230115,
        "yml": 0.036588086663230115,
        "mixed": 0.036588086663230115,
        "repo": 0.036588086663230115,
        "yaml": 0.036588086663230115,
        "llm": 0.036588086663230115,
        "runner": 0.036588086663230115,
        "ollama": 0.036588086663230115,
        "llama3": 0.036588086663230115,
        "8b": 0.036588086663230115,
        "instruct": 0.036588086663230115,
        "temperature": 0.036588086663230115,
        "0": 0.036588086663230115,
        "15": 0.036588086663230115,
        "style": 0.036588086663230115,
        "comprehensive": 0.036588086663230115,
        "publish": 0.036588086663230115,
        "mode": 0.036588086663230115,
        "branch_prefix": 0.036588086663230115,
        "analyzers": 0.036588086663230115,
        "enabled": 0.036588086663230115,
        "language": 0.036588086663230115,
        "dependencies": 0.036588086663230115,
        "exclude_paths": 0.036588086663230115,
        "git": 0.036588086663230115,
        "node_modules": 0.036588086663230115,
        "dist": 0.036588086663230115,
        "target": 0.036588086663230115,
        "ci": 0.036588086663230115,
        "watched_globs": 0.036588086663230115,
        "21": 0.036588086663230115,
        "success": 0.036588086663230115,
        "criteria": 0.036588086663230115,
        "poc": 0.036588086663230115,
        "3": 0.036588086663230115,
        "diverse": 0.036588086663230115,
        "repos": 0.036588086663230115,
        "cli": 0.036588086663230115,
        "spring": 0.036588086663230115,
        "boot": 0.036588086663230115,
        "api": 0.036588086663230115,
        "node": 0.036588086663230115,
        "webapp": 0.036588086663230115,
        "init": 0.036588086663230115,
        "produces": 0.036588086663230115,
        "working": 0.036588086663230115,
        "linted": 0.036588086663230115,
        "with": 0.036588086663230115,
        "runnable": 0.036588086663230115,
        "on": 0.036588086663230115,
        "changing": 0.036588086663230115
      },
      "text": "ascii\\_architecture }} ``` **Key components** {% for comp in components %} - **{{ comp.name }}** \u2014 {{ comp.summary }} {% endfor %} **Data flow** {{ data_flow }} > Generated from detected signals: {{ signals_summary }} ``` ### 17.2 README Frame (composed) ```jinja2 # {{ project_name }} {{ intro }} ## Features {{ features }} {% include \"architecture.j2\" %} ## Quick Start {{ quickstart }} ## Configuration {{ configuration }} ## Build & Test {{ build_and_test }} ## Deployment {{ deployment }} ## Troubleshooting {{ troubleshooting }} ## FAQ {{ faq }} ## License {{ license }} ``` --- ## 18) Minimal Python Snippets **Change impact heuristic** ```python SECTION_RULES = [ (\"build_and_test\", [\"pom.xml\",\"build.gradle\",\"requirements.txt\",\"pyproject.toml\",\"package.json\"]), (\"deployment\", [\"Dockerfile\",\"k8s/\"]), (\"architecture\", [\"src/\",\"app/\",\"cmd/\"]), (\"features\", [\"src/\",\"app/\",\"cmd/\"]), ] def sections_from_diff(paths: list[str]) -> set[str]: out = set() for section, patterns in SECTION_RULES: if any(p for p in paths for pat in patterns if p.startswith(pat)): out.add(section) return out or {\"intro\"} # fall back to intro if uncertain ``` **Managed markers (patch)** ```python def replace_block(md: str, key: str, new: str) -> str: start = f\"<!-- docgen:begin:{key} -->\" end = f\"<!-- docgen:end:{key} -->\" if start in md and end in md: pre, rest = md.split(start, 1) _, post = rest.split(end, 1) return f\"{pre}{start}\\n{new}\\n{end}{post}\" return md # or insert markers if missing ``` --- ## 19) Open Questions / Trade-offs * **Embeddings**: Use a tiny local model vs. rule-based retrieval for MVP? * **Tree-sitter**: Adds power but increases footprint\u2014gate behind a flag. * **PR author**: Bot account vs. developer token\u2014decide per environment. * **Markdown diffs**: Keep sections atomic to minimize noisy PRs. --- ## 20) Example `.docgen.yml` for a Mixed Repo ```yaml llm: runner: \"ollama\" model: \"llama3:8b-instruct\" temperature: 0.15 readme: style: \"comprehensive\" publish: mode: \"pr\" branch_prefix: \"docgen/\" analyzers: enabled: [language, build, dependencies, patterns] exclude_paths: [\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    },
    {
      "id": "spec/spec.md#8",
      "vector": {
        "git": 0.08838834764831843,
        "node_modules": 0.08838834764831843,
        "dist": 0.08838834764831843,
        "target": 0.08838834764831843,
        "ci": 0.08838834764831843,
        "watched_globs": 0.08838834764831843,
        "src": 0.08838834764831843,
        "app": 0.08838834764831843,
        "cmd": 0.08838834764831843,
        "pom": 0.17677669529663687,
        "xml": 0.17677669529663687,
        "build": 0.08838834764831843,
        "gradle": 0.08838834764831843,
        "package": 0.08838834764831843,
        "json": 0.08838834764831843,
        "requirements": 0.17677669529663687,
        "txt": 0.17677669529663687,
        "dockerfile": 0.08838834764831843,
        "21": 0.08838834764831843,
        "success": 0.08838834764831843,
        "criteria": 0.08838834764831843,
        "poc": 0.08838834764831843,
        "for": 0.08838834764831843,
        "3": 0.08838834764831843,
        "diverse": 0.08838834764831843,
        "repos": 0.08838834764831843,
        "python": 0.08838834764831843,
        "cli": 0.17677669529663687,
        "spring": 0.08838834764831843,
        "boot": 0.08838834764831843,
        "api": 0.08838834764831843,
        "node": 0.08838834764831843,
        "webapp": 0.08838834764831843,
        "docgen": 0.17677669529663687,
        "init": 0.17677669529663687,
        "produces": 0.08838834764831843,
        "a": 0.2651650429449553,
        "working": 0.08838834764831843,
        "linted": 0.08838834764831843,
        "readme": 0.08838834764831843,
        "with": 0.08838834764831843,
        "runnable": 0.08838834764831843,
        "quick": 0.08838834764831843,
        "start": 0.08838834764831843,
        "on": 0.08838834764831843,
        "changing": 0.08838834764831843,
        "or": 0.08838834764831843,
        "pr": 0.08838834764831843,
        "updates": 0.08838834764831843,
        "only": 0.08838834764831843,
        "relevant": 0.08838834764831843,
        "sections": 0.08838834764831843,
        "no": 0.08838834764831843,
        "hallucinated": 0.08838834764831843,
        "commands": 0.08838834764831843,
        "links": 0.08838834764831843,
        "and": 0.2651650429449553,
        "badges": 0.08838834764831843,
        "validate": 0.08838834764831843,
        "style": 0.08838834764831843,
        "consistent": 0.08838834764831843,
        "if": 0.08838834764831843,
        "you": 0.17677669529663687,
        "want": 0.08838834764831843,
        "i": 0.08838834764831843,
        "can": 0.17677669529663687,
        "spin": 0.08838834764831843,
        "up": 0.08838834764831843,
        "starter": 0.08838834764831843,
        "repo": 0.08838834764831843,
        "layout": 0.08838834764831843,
        "analyzers": 0.08838834764831843,
        "templates": 0.08838834764831843,
        "simple": 0.08838834764831843,
        "ollama": 0.08838834764831843,
        "adapter": 0.08838834764831843,
        "so": 0.08838834764831843,
        "drop": 0.08838834764831843,
        "it": 0.08838834764831843,
        "into": 0.08838834764831843,
        "your": 0.08838834764831843,
        "environment": 0.08838834764831843,
        "run": 0.08838834764831843,
        "right": 0.08838834764831843,
        "away": 0.08838834764831843
      },
      "text": "[\".git/\", \"node_modules/\", \"dist/\", \"target/\"] ci: watched_globs: - \"src/**\" - \"app/**\" - \"cmd/**\" - \"pom.xml\" - \"build.gradle*\" - \"package.json\" - \"requirements.txt\" - \"Dockerfile\" ``` --- ## 21) Success Criteria (POC) * For 3 diverse repos (Python CLI, Spring Boot API, Node webapp): * `docgen init` produces a working, linted README with runnable Quick Start. * On changing `pom.xml` or `requirements.txt`, PR updates only relevant sections. * No hallucinated commands; links and badges validate; style consistent. --- If you want, I can spin up a **starter repo layout** (CLI, analyzers, templates, and a simple Ollama adapter) so you can drop it into your environment and run `docgen init` right away.",
      "metadata": {
        "path": "spec/spec.md",
        "tags": [
          "docs"
        ],
        "hash": "a296b550b3594e82b993f94a9dca708ba5e5eb316a067c06b2bdab38c237a384"
      }
    }
  ]
}